"use strict";(self.webpackChunksleeperstats=self.webpackChunksleeperstats||[]).push([[420],{6420:(nF,Uh,Bt)=>{Bt.r(Uh),Bt.d(Uh,{LeagueModule:()=>iF});var P=Bt(5879);function en(r){return null==r||""===r?null:r}function I(r,t){return void 0===t&&(t=!1),null!=r&&(""!==r||t)}function ie(r){return!I(r)}function ei(r){return null==r||0===r.length}function ss(r){return null!=r&&"function"==typeof r.toString?r.toString():null}function Ci(r){if(void 0!==r){if(null===r||""===r)return null;if("number"==typeof r)return isNaN(r)?void 0:r;var t=parseInt(r,10);return isNaN(t)?void 0:t}}function tn(r){if(void 0!==r)return null!==r&&""!==r&&("boolean"==typeof r?r:/true/i.test(r))}function Fo(r){if(r instanceof Set||r instanceof Map){var t=[];return r.forEach(function(e){return t.push(e)}),t}return Object.values(r)}var wm=Object.freeze({__proto__:null,makeNull:en,exists:I,missing:ie,missingOrEmpty:ei,toStringOrNull:ss,attrToNumber:Ci,attrToBoolean:tn,attrToString:function gm(r){if(null!=r&&""!==r)return r},referenceCompare:function ym(r,t){return null==r&&null==t||!(null==r&&null!=t||null!=r&&null==t)&&r===t},jsonEquals:function mm(r,t){return(r?JSON.stringify(r):null)===(t?JSON.stringify(t):null)},defaultComparator:function Cm(r,t,e){void 0===e&&(e=!1);var i=null==r,n=null==t;if(r&&r.toNumber&&(r=r.toNumber()),t&&t.toNumber&&(t=t.toNumber()),i&&n)return 0;if(i)return-1;if(n)return 1;function o(s,a){return s>a?1:s<a?-1:0}if("string"!=typeof r||!e)return o(r,t);try{return r.localeCompare(t)}catch{return o(r,t)}},values:Fo}),Sm=function(){function r(){this.existingKeys={}}return r.prototype.addExistingKeys=function(t){for(var e=0;e<t.length;e++)this.existingKeys[t[e]]=!0},r.prototype.getUniqueKey=function(t,e){t=ss(t);for(var i=0;;){var n=void 0;if(t?(n=t,0!==i&&(n+="_"+i)):e?(n=e,0!==i&&(n+="_"+i)):n=i,!this.existingKeys[n])return this.existingKeys[n]=!0,String(n);i++}},r}(),_m=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Em=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o};function He(r,t){var e,i;if(null!=r){if(Array.isArray(r)){for(var n=0;n<r.length;n++)t(n.toString(),r[n]);return}try{for(var o=_m(Object.entries(r)),s=o.next();!s.done;s=o.next()){var a=Em(s.value,2);t(a[0],a[1])}}catch(c){e={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}}}function Vu(r){for(var t={},e=Object.keys(r),i=0;i<e.length;i++){var n=e[i];t[n]=r[n]}return t}function Ma(r,t){if(r){var e=r,i={};return Object.keys(e).forEach(function(n){if(!(t&&t.indexOf(n)>=0)){var o=e[n],s=Fa(o)&&o.constructor===Object;i[n]=s?Ma(o):o}}),i}}function zh(r,t){return r[t]}function Kh(r,t,e){r[t]=e}function $h(r,t,e,i){var n=zh(r,e);void 0!==n&&Kh(t,e,i?i(n):n)}function Yh(r){var t={};return r.filter(function(e){return null!=e}).forEach(function(e){Object.keys(e).forEach(function(i){return t[i]=null})}),Object.keys(t)}function nn(r){if(!r)return[];var t=Object;if("function"==typeof t.values)return t.values(r);var e=[];for(var i in r)r.hasOwnProperty(i)&&r.propertyIsEnumerable(i)&&e.push(r[i]);return e}function ti(r,t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),I(t)&&He(t,function(n,o){var s=r[n];s!==o&&(i&&null==s&&null!=o&&"object"==typeof o&&o.constructor===Object&&(r[n]=s={}),Fa(o)&&Fa(s)&&!Array.isArray(s)?ti(s,o,e,i):(e||void 0!==o)&&(r[n]=o))})}function fr(r,t,e){if(t&&r){if(!e)return r[t];for(var i=t.split("."),n=r,o=0;o<i.length;o++){if(null==n)return;n=n[i[o]]}return n}}function Xh(r,t){Object.keys(r).forEach(function(n){"object"==typeof r[n]&&(r[n]=void 0)});var e=Object.getPrototypeOf(r),i={};Object.keys(e).forEach(function(n){"function"==typeof e[n]&&(i[n]={value:function(){console.warn("AG Grid: "+t+" function "+n+"() cannot be called as the grid has been destroyed.\n                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't\n                     be keeping the API reference, your application has a memory leak! Remove the API reference\n                     when the grid is destroyed.")},writable:!0})}),Object.defineProperties(r,i)}function Fa(r){return"object"==typeof r&&null!==r}var Tm=Object.freeze({__proto__:null,iterateObject:He,cloneObject:Vu,deepCloneObject:function bm(r){return JSON.parse(JSON.stringify(r))},deepCloneDefinition:Ma,getProperty:zh,setProperty:Kh,copyPropertiesIfPresent:function Rm(r,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];e.forEach(function(n){return $h(r,t,n)})},copyPropertyIfPresent:$h,getAllKeysInObjects:Yh,getAllValuesInObject:nn,mergeDeep:ti,missingOrEmptyObject:function Om(r){return ie(r)||0===Object.keys(r).length},get:function xm(r,t,e){if(null==r)return e;for(var i=t.split("."),n=r;i.length>1;)if(null==(n=n[i.shift()]))return e;return n[i[0]]??e},set:function Dm(r,t,e){if(null!=r){var i=t.split("."),n=r;i.forEach(function(o,s){n[o]||(n[o]={}),s<i.length-1&&(n=n[o])}),n[i[i.length-1]]=e}},getValueUsingField:fr,removeAllReferences:Xh,isNonNullObject:Fa}),qh={};function ge(r,t){qh[t]||(r(),qh[t]=!0)}function Ia(r){if(r.name)return r.name;var t=/function\s+([^\(]+)/.exec(r.toString());return t&&2===t.length?t[1].trim():null}function Na(r){return!!(r&&r.constructor&&r.call&&r.apply)}function Zh(r){Qh(r,400)}var Bu=[],Wu=!1;function ju(r){Bu.push(r),!Wu&&(Wu=!0,window.setTimeout(function(){var t=Bu.slice();Bu.length=0,Wu=!1,t.forEach(function(e){return e()})},0))}function Qh(r,t){void 0===t&&(t=0),r.length>0&&window.setTimeout(function(){return r.forEach(function(e){return e()})},t)}function Fi(r,t){var e;return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var o=this;window.clearTimeout(e),e=window.setTimeout(function(){r.apply(o,i)},t)}}function Uu(r,t){var e=0;return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var s=(new Date).getTime();s-e<t||(e=s,r.apply(this,i))}}function zu(r,t,e,i){void 0===e&&(e=100);var n=(new Date).getTime(),o=null,s=!1,a=function(){var l=(new Date).getTime()-n>e;(r()||l)&&(t(),s=!0,null!=o&&(window.clearInterval(o),o=null),l&&i&&console.warn(i))};a(),s||(o=window.setInterval(a,10))}function Jh(r){r&&r()}var Lm=Object.freeze({__proto__:null,doOnce:ge,getFunctionName:Ia,isFunction:Na,executeInAWhile:Zh,executeNextVMTurn:ju,executeAfter:Qh,debounce:Fi,throttle:Uu,waitUntil:zu,compose:function Pm(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return r.reduce(function(i,n){return n(i)},e)}},callIfPresent:Jh,noop:function(){}}),q=function(r){return r.CommunityCoreModule="@ag-grid-community/core",r.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",r.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",r.CsvExportModule="@ag-grid-community/csv-export",r.EnterpriseCoreModule="@ag-grid-enterprise/core",r.RowGroupingModule="@ag-grid-enterprise/row-grouping",r.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",r.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",r.MenuModule="@ag-grid-enterprise/menu",r.SetFilterModule="@ag-grid-enterprise/set-filter",r.MultiFilterModule="@ag-grid-enterprise/multi-filter",r.StatusBarModule="@ag-grid-enterprise/status-bar",r.SideBarModule="@ag-grid-enterprise/side-bar",r.RangeSelectionModule="@ag-grid-enterprise/range-selection",r.MasterDetailModule="@ag-grid-enterprise/master-detail",r.RichSelectModule="@ag-grid-enterprise/rich-select",r.GridChartsModule="@ag-grid-enterprise/charts",r.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",r.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",r.ExcelExportModule="@ag-grid-enterprise/excel-export",r.ClipboardModule="@ag-grid-enterprise/clipboard",r.SparklinesModule="@ag-grid-enterprise/sparklines",r.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",r.AngularModule="@ag-grid-community/angular",r.ReactModule="@ag-grid-community/react",r.VueModule="@ag-grid-community/vue",r}(q||{}),as=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},ep=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},oe=function(){function r(){}return r.register=function(t){r.__register(t,!0,void 0)},r.registerModules=function(t){r.__registerModules(t,!0,void 0)},r.__register=function(t,e,i){r.runVersionChecks(t),void 0!==i?(r.areGridScopedModules=!0,void 0===r.gridModulesMap[i]&&(r.gridModulesMap[i]={}),r.gridModulesMap[i][t.moduleName]=t):r.globalModulesMap[t.moduleName]=t,r.setModuleBased(e)},r.__unRegisterGridModules=function(t){delete r.gridModulesMap[t]},r.__registerModules=function(t,e,i){r.setModuleBased(e),t&&t.forEach(function(n){return r.__register(n,e,i)})},r.isValidModuleVersion=function(t){var e=as(t.version.split(".")||[],2),i=e[0],n=e[1],o=as(r.currentModuleVersion.split(".")||[],2);return i===o[0]&&n===o[1]},r.runVersionChecks=function(t){if(r.currentModuleVersion||(r.currentModuleVersion=t.version),t.version?r.isValidModuleVersion(t)||console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '"+t.moduleName+"' is version "+t.version+" but the other modules are version "+this.currentModuleVersion+". Please update all modules to the same version."):console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '"+t.moduleName+"' is incompatible. Please update all modules to the same version."),t.validate){var e=t.validate();e.isValid||console.error("AG Grid: "+e.message)}},r.setModuleBased=function(t){void 0===r.moduleBased?r.moduleBased=t:r.moduleBased!==t&&ge(function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")},r.__setIsBundled=function(){r.isBundled=!0},r.__assertRegistered=function(t,e,i){var n;if(this.__isRegistered(t,i))return!0;var s,o=e+t;if(r.isBundled)s="AG Grid: unable to use "+e+" as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:\n        \n        <script src=\"https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js\"><\/script>\n        \nFor more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise";else if(r.moduleBased||void 0===r.moduleBased){var a=null===(n=Object.entries(q).find(function(l){return as(l,2)[1]===t}))||void 0===n?void 0:n[0];s="AG Grid: unable to use "+e+" as the "+a+" is not registered"+(r.areGridScopedModules?" for gridId: "+i:"")+". Check if you have registered the module:\n           \n    import { ModuleRegistry } from '@ag-grid-community/core';\n    import { "+a+" } from '"+t+"';\n    \n    ModuleRegistry.registerModules([ "+a+" ]);\n\nFor more info see: https://www.ag-grid.com/javascript-grid/modules/"}else s="AG Grid: unable to use "+e+" as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:\n            \n    import 'ag-grid-enterprise';\n            \nFor more info see: https://www.ag-grid.com/javascript-grid/packages/";return ge(function(){console.warn(s)},o),!1},r.__isRegistered=function(t,e){var i;return!!r.globalModulesMap[t]||!(null===(i=r.gridModulesMap[e])||void 0===i||!i[t])},r.__getRegisteredModules=function(t){return ep(ep([],as(Fo(r.globalModulesMap))),as(Fo(r.gridModulesMap[t]||{})))},r.__getGridRegisteredModules=function(t){var e;return Fo(null!==(e=r.gridModulesMap[t])&&void 0!==e?e:{})||[]},r.__isPackageBased=function(){return!r.moduleBased},r.globalModulesMap={},r.gridModulesMap={},r.areGridScopedModules=!1,r}(),Im=function(){function r(t,e){if(this.beanWrappers={},this.destroyed=!1,t&&t.beanClasses){this.contextParams=t,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();var i=this.getBeanInstances();this.wireBeans(i),this.logger.log(">> ag-Application Context ready - component is alive")}}return r.prototype.getBeanInstances=function(){return Fo(this.beanWrappers).map(function(t){return t.beanInstance})},r.prototype.createBean=function(t,e){if(!t)throw Error("Can't wire to bean since it is null");return this.wireBeans([t],e),t},r.prototype.wireBeans=function(t,e){this.autoWireBeans(t),this.methodWireBeans(t),this.callLifeCycleMethods(t,"preConstructMethods"),I(e)&&t.forEach(e),this.callLifeCycleMethods(t,"postConstructMethods")},r.prototype.createBeans=function(){var t=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),He(this.beanWrappers,function(i,n){var o;n.bean.__agBeanMetaData&&n.bean.__agBeanMetaData.autowireMethods&&n.bean.__agBeanMetaData.autowireMethods.agConstructor&&(o=n.bean.__agBeanMetaData.autowireMethods.agConstructor);var s=t.getBeansForParameters(o,n.bean.name),a=new(n.bean.bind.apply(n.bean,function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r}([null],function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(s))));n.beanInstance=a});var e=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: "+e)},r.prototype.createBeanWrapper=function(t){var e=t.__agBeanMetaData;if(!e){var i;return i=t.prototype.constructor?Ia(t.prototype.constructor):""+t,void console.error("Context item "+i+" is not a bean")}this.beanWrappers[e.beanName]={bean:t,beanInstance:null,beanName:e.beanName}},r.prototype.autoWireBeans=function(t){var e=this;t.forEach(function(i){e.forEachMetaDataInHierarchy(i,function(n,o){var s=n.agClassAttributes;s&&s.forEach(function(a){var l=e.lookupBeanInstance(o,a.beanName,a.optional);i[a.attributeName]=l})})})},r.prototype.methodWireBeans=function(t){var e=this;t.forEach(function(i){e.forEachMetaDataInHierarchy(i,function(n,o){He(n.autowireMethods,function(s,a){if("agConstructor"!==s){var l=e.getBeansForParameters(a,o);i[s].apply(i,l)}})})})},r.prototype.forEachMetaDataInHierarchy=function(t,e){for(var i=Object.getPrototypeOf(t);null!=i;){var n=i.constructor;n.hasOwnProperty("__agBeanMetaData")&&e(n.__agBeanMetaData,this.getBeanName(n)),i=Object.getPrototypeOf(i)}},r.prototype.getBeanName=function(t){if(t.__agBeanMetaData&&t.__agBeanMetaData.beanName)return t.__agBeanMetaData.beanName;var e=t.toString();return e.substring(9,e.indexOf("("))},r.prototype.getBeansForParameters=function(t,e){var i=this,n=[];return t&&He(t,function(o,s){var a=i.lookupBeanInstance(e,s);n[Number(o)]=a}),n},r.prototype.lookupBeanInstance=function(t,e,i){if(void 0===i&&(i=!1),this.destroyed)return this.logger.log("AG Grid: bean reference "+e+" is used after the grid is destroyed!"),null;if("context"===e)return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];var n=this.beanWrappers[e];return n?n.beanInstance:(i||console.error("AG Grid: unable to find bean reference "+e+" while initialising "+t),null)},r.prototype.callLifeCycleMethods=function(t,e){var i=this;t.forEach(function(n){return i.callLifeCycleMethodsOnBean(n,e)})},r.prototype.callLifeCycleMethodsOnBean=function(t,e,i){var n={};this.forEachMetaDataInHierarchy(t,function(s){var a=s[e];a&&a.forEach(function(l){l!=i&&(n[l]=!0)})}),Object.keys(n).forEach(function(s){return t[s]()})},r.prototype.getBean=function(t){return this.lookupBeanInstance("getBean",t,!0)},r.prototype.destroy=function(){if(!this.destroyed){this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");var t=this.getBeanInstances();this.destroyBeans(t),this.contextParams.providedBeanInstances=null,oe.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}},r.prototype.destroyBean=function(t){t&&this.destroyBeans([t])},r.prototype.destroyBeans=function(t){var e=this;return t?(t.forEach(function(i){e.callLifeCycleMethodsOnBean(i,"preDestroyMethods","destroy"),"function"==typeof i.destroy&&i.destroy()}),[]):[]},r.prototype.isDestroyed=function(){return this.destroyed},r.prototype.getGridId=function(){return this.contextParams.gridId},r}();function tp(r,t,e){var i=Io(r.constructor);i.preConstructMethods||(i.preConstructMethods=[]),i.preConstructMethods.push(t)}function V(r,t,e){var i=Io(r.constructor);i.postConstructMethods||(i.postConstructMethods=[]),i.postConstructMethods.push(t)}function lt(r,t,e){var i=Io(r.constructor);i.preDestroyMethods||(i.preDestroyMethods=[]),i.preDestroyMethods.push(t)}function X(r){return function(t){Io(t).beanName=r}}function S(r){return function(t,e,i){ip(t,r,!1,0,e,null)}}function we(r){return function(t,e,i){ip(t,r,!0,0,e,null)}}function ip(r,t,e,i,n,o){if(null!==t)if("number"!=typeof o){var s=Io(r.constructor);s.agClassAttributes||(s.agClassAttributes=[]),s.agClassAttributes.push({attributeName:n,beanName:t,optional:e})}else console.error("AG Grid: Autowired should be on an attribute");else console.error("AG Grid: Autowired name should not be null")}function Tt(r){return function(t,e,i){var o,n="function"==typeof t?t:t.constructor;if("number"==typeof i){var s=void 0;e?(o=Io(n),s=e):(o=Io(n),s="agConstructor"),o.autowireMethods||(o.autowireMethods={}),o.autowireMethods[s]||(o.autowireMethods[s]={}),o.autowireMethods[s][i]=r}}}function Io(r){return r.hasOwnProperty("__agBeanMetaData")||(r.__agBeanMetaData={}),r.__agBeanMetaData}var np=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ls=function(r,t){return function(e,i){t(e,i,r)}},$n=function(){function r(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return r.prototype.setBeans=function(t,e,i,n,o){if(void 0===n&&(n=null),void 0===o&&(o=null),this.frameworkOverrides=i,this.gridOptionsService=e,n){var s=e.useAsyncEvents();this.addGlobalListener(n,s)}o&&this.addGlobalListener(o,!1)},r.prototype.getListeners=function(t,e,i){var n=e?this.allAsyncListeners:this.allSyncListeners,o=n.get(t);return!o&&i&&n.set(t,o=new Set),o},r.prototype.noRegisteredListenersExist=function(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size},r.prototype.addEventListener=function(t,e,i){void 0===i&&(i=!1),this.getListeners(t,i,!0).add(e)},r.prototype.removeEventListener=function(t,e,i){void 0===i&&(i=!1);var n=this.getListeners(t,i,!1);n&&(n.delete(e),0===n.size)&&(i?this.allAsyncListeners:this.allSyncListeners).delete(t)},r.prototype.addGlobalListener=function(t,e){void 0===e&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).add(t)},r.prototype.removeGlobalListener=function(t,e){void 0===e&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).delete(t)},r.prototype.dispatchEvent=function(t){var e=t;if(this.gridOptionsService){var i=this.gridOptionsService,o=i.columnApi,s=i.context;e.api=i.api,e.columnApi=o,e.context=s}this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0},r.prototype.dispatchEventOnce=function(t){this.firedEvents[t.type]||this.dispatchEvent(t)},r.prototype.dispatchToListeners=function(t,e){var i=this,n=t.type;if(e&&"event"in t){var o=t.event;o instanceof Event&&(t.eventPath=o.composedPath())}var a=new Set(this.getListeners(n,e,!1));a.size>0&&a.forEach(function(c){e?i.dispatchAsync(function(){return c(t)}):c(t)}),new Set(e?this.globalAsyncListeners:this.globalSyncListeners).forEach(function(u){e?i.dispatchAsync(function(){return i.frameworkOverrides.dispatchEvent(n,function(){return u(n,t)},!0)}):i.frameworkOverrides.dispatchEvent(n,function(){return u(n,t)},!0)})},r.prototype.dispatchAsync=function(t){this.asyncFunctionsQueue.push(t),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},r.prototype.flushAsyncQueue=function(){this.scheduled=!1;var t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],t.forEach(function(e){return e()})},np([ls(0,Tt("loggerFactory")),ls(1,Tt("gridOptionsService")),ls(2,Tt("frameworkOverrides")),ls(3,Tt("globalEventListener")),ls(4,Tt("globalSyncEventListener"))],r.prototype,"setBeans",null),np([X("eventService")],r)}(),Ga=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},op=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},rp=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},Nm=0;function sp(){return Nm++}var Ae=function(){function r(t,e,i,n){this.instanceId=sp(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new $n,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=t,this.userProvidedColDef=e,this.colId=i,this.primary=n,this.setState(t)}return r.prototype.getInstanceId=function(){return this.instanceId},r.prototype.setState=function(t){void 0!==t.sort?("asc"===t.sort||"desc"===t.sort)&&(this.sort=t.sort):("asc"===t.initialSort||"desc"===t.initialSort)&&(this.sort=t.initialSort);var e=Ci(t.sortIndex),i=Ci(t.initialSortIndex);void 0!==e?null!==e&&(this.sortIndex=e):null!==i&&(this.sortIndex=i);var n=tn(t.hide),o=tn(t.initialHide);this.visible=void 0!==n?!n:!o,this.setPinned(void 0!==t.pinned?t.pinned:t.initialPinned);var s=Ci(t.flex),a=Ci(t.initialFlex);void 0!==s?this.flex=s:void 0!==a&&(this.flex=a)},r.prototype.setColDef=function(t,e){this.colDef=t,this.userProvidedColDef=e,this.initMinAndMaxWidths(),this.initDotNotation(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged","api"))},r.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},r.prototype.setParent=function(t){this.parent=t},r.prototype.getParent=function(){return this.parent},r.prototype.setOriginalParent=function(t){this.originalParent=t},r.prototype.getOriginalParent=function(){return this.originalParent},r.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.validate()},r.prototype.initDotNotation=function(){var t=this.gridOptionsService.is("suppressFieldDotNotation");this.fieldContainsDots=I(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!t,this.tooltipFieldContainsDots=I(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!t},r.prototype.initMinAndMaxWidths=function(){var t=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(t),this.maxWidth=this.columnUtils.calculateColMaxWidth(t)},r.prototype.initTooltip=function(){this.tooltipEnabled=I(this.colDef.tooltipField)||I(this.colDef.tooltipValueGetter)||I(this.colDef.tooltipComponent)},r.prototype.resetActualWidth=function(t){void 0===t&&(t="api");var e=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(e,t,!0)},r.prototype.isEmptyGroup=function(){return!1},r.prototype.isRowGroupDisplayed=function(t){return!(ie(this.colDef)||ie(this.colDef.showRowGroup)||!0!==this.colDef.showRowGroup&&this.colDef.showRowGroup!==t)},r.prototype.isPrimary=function(){return this.primary},r.prototype.isFilterAllowed=function(){return!!this.colDef.filter},r.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},r.prototype.isTooltipEnabled=function(){return this.tooltipEnabled},r.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},r.prototype.validate=function(){var t=this.colDef;function e(u,c,d){ge(function(){d?console.warn(u,d):ge(function(){return console.warn(u)},c)},c)}if(this.gridOptionsService.isRowModelType("clientSide")&&!oe.__isRegistered(q.RowGroupingModule,this.gridOptionsService.getGridId())&&(o=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"].filter(function(u){return I(t[u])})).length>0&&oe.__assertRegistered(q.RowGroupingModule,o.map(function(u){return"colDef."+u}).join(", "),this.gridOptionsService.getGridId()),("agRichSelect"===this.colDef.cellEditor||"agRichSelectCellEditor"===this.colDef.cellEditor)&&oe.__assertRegistered(q.RichSelectModule,this.colDef.cellEditor,this.gridOptionsService.getGridId()),this.gridOptionsService.is("treeData")&&(o=["rowGroup","rowGroupIndex","pivot","pivotIndex"].filter(function(c){return I(t[c])})).length>0&&e("AG Grid: "+o.join()+" is not possible when doing tree data, your column definition should not have "+o.join(),"TreeDataCannotRowGroup"),I(t.menuTabs))if(Array.isArray(t.menuTabs)){var o,a=["filterMenuTab"],l=["columnsMenuTab","generalMenuTab"];(o=l.filter(function(c){return t.menuTabs.includes(c)})).length>0&&oe.__assertRegistered(q.MenuModule,"menuTab(s): "+o.map(function(c){return"'"+c+"'"}).join(),this.gridOptionsService.getGridId()),t.menuTabs.forEach(function(c){!l.includes(c)&&!a.includes(c)&&e("AG Grid: '"+c+"' is not valid for 'colDef.menuTabs'. Valid values are: "+rp(rp([],op(a)),op(l)).map(function(d){return"'"+d+"'"}).join()+".","wrongValue_menuTabs_"+c)})}else e("AG Grid: The typeof 'colDef.menuTabs' should be an array not:"+typeof t.menuTabs,"wrongType_menuTabs");I(t.columnsMenuParams)&&oe.__assertRegistered(q.MenuModule,"columnsMenuParams",this.gridOptionsService.getGridId()),I(t.columnsMenuParams)&&oe.__assertRegistered(q.ColumnsToolPanelModule,"columnsMenuParams",this.gridOptionsService.getGridId()),I(this.colDef.width)&&"number"!=typeof this.colDef.width&&e("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck"),I(t.columnGroupShow)&&"closed"!==t.columnGroupShow&&"open"!==t.columnGroupShow&&e("AG Grid: '"+t.columnGroupShow+"' is not valid for columnGroupShow. Valid values are 'open', 'closed', undefined, null","columnGroupShow_invalid")},r.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},r.prototype.createColumnFunctionCallbackParams=function(t){return{node:t,data:t.data,column:this,colDef:this.colDef,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi}},r.prototype.isSuppressNavigable=function(t){if("boolean"==typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"==typeof this.colDef.suppressNavigable){var e=this.createColumnFunctionCallbackParams(t);return(0,this.colDef.suppressNavigable)(e)}return!1},r.prototype.isCellEditable=function(t){return!(t.group&&!this.gridOptionsService.is("enableGroupEdit"))&&this.isColumnFunc(t,this.colDef.editable)},r.prototype.isSuppressFillHandle=function(){return!!tn(this.colDef.suppressFillHandle)},r.prototype.isAutoHeight=function(){return!!tn(this.colDef.autoHeight)},r.prototype.isAutoHeaderHeight=function(){return!!tn(this.colDef.autoHeaderHeight)},r.prototype.isRowDrag=function(t){return this.isColumnFunc(t,this.colDef.rowDrag)},r.prototype.isDndSource=function(t){return this.isColumnFunc(t,this.colDef.dndSource)},r.prototype.isCellCheckboxSelection=function(t){return this.isColumnFunc(t,this.colDef.checkboxSelection)},r.prototype.isSuppressPaste=function(t){return this.isColumnFunc(t,this.colDef?this.colDef.suppressPaste:null)},r.prototype.isResizable=function(){return!!tn(this.colDef.resizable)},r.prototype.isColumnFunc=function(t,e){return"boolean"==typeof e?e:"function"==typeof e&&e(this.createColumnFunctionCallbackParams(t))},r.prototype.setMoving=function(t,e){void 0===e&&(e="api"),this.moving=t,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",e))},r.prototype.createColumnEvent=function(t,e){return{type:t,column:this,columns:[this],source:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},r.prototype.isMoving=function(){return this.moving},r.prototype.getSort=function(){return this.sort},r.prototype.setSort=function(t,e){void 0===e&&(e="api"),this.sort!==t&&(this.sort=t,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",e))),this.dispatchStateUpdatedEvent("sort")},r.prototype.setMenuVisible=function(t,e){void 0===e&&(e="api"),this.menuVisible!==t&&(this.menuVisible=t,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",e)))},r.prototype.isMenuVisible=function(){return this.menuVisible},r.prototype.isSortAscending=function(){return"asc"===this.sort},r.prototype.isSortDescending=function(){return"desc"===this.sort},r.prototype.isSortNone=function(){return ie(this.sort)},r.prototype.isSorting=function(){return I(this.sort)},r.prototype.getSortIndex=function(){return this.sortIndex},r.prototype.setSortIndex=function(t){this.sortIndex=t,this.dispatchStateUpdatedEvent("sortIndex")},r.prototype.setAggFunc=function(t){this.aggFunc=t,this.dispatchStateUpdatedEvent("aggFunc")},r.prototype.getAggFunc=function(){return this.aggFunc},r.prototype.getLeft=function(){return this.left},r.prototype.getOldLeft=function(){return this.oldLeft},r.prototype.getRight=function(){return this.left+this.actualWidth},r.prototype.setLeft=function(t,e){void 0===e&&(e="api"),this.oldLeft=this.left,this.left!==t&&(this.left=t,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",e)))},r.prototype.isFilterActive=function(){return this.filterActive},r.prototype.setFilterActive=function(t,e,i){void 0===e&&(e="api"),this.filterActive!==t&&(this.filterActive=t,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",e)));var n=this.createColumnEvent("filterChanged",e);i&&ti(n,i),this.eventService.dispatchEvent(n)},r.prototype.isHovered=function(){return this.columnHoverService.isHovered(this)},r.prototype.setPinned=function(t){this.pinned=!0===t||"left"===t?"left":"right"===t?"right":null,this.dispatchStateUpdatedEvent("pinned")},r.prototype.setFirstRightPinned=function(t,e){void 0===e&&(e="api"),this.firstRightPinned!==t&&(this.firstRightPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",e)))},r.prototype.setLastLeftPinned=function(t,e){void 0===e&&(e="api"),this.lastLeftPinned!==t&&(this.lastLeftPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",e)))},r.prototype.isFirstRightPinned=function(){return this.firstRightPinned},r.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},r.prototype.isPinned=function(){return"left"===this.pinned||"right"===this.pinned},r.prototype.isPinnedLeft=function(){return"left"===this.pinned},r.prototype.isPinnedRight=function(){return"right"===this.pinned},r.prototype.getPinned=function(){return this.pinned},r.prototype.setVisible=function(t,e){void 0===e&&(e="api");var i=!0===t;this.visible!==i&&(this.visible=i,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",e))),this.dispatchStateUpdatedEvent("hide")},r.prototype.isVisible=function(){return this.visible},r.prototype.isSpanHeaderHeight=function(){var t=this.getColDef();return!t.suppressSpanHeaderHeight&&!t.autoHeaderHeight},r.prototype.getColDef=function(){return this.colDef},r.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},r.prototype.getColId=function(){return this.colId},r.prototype.getId=function(){return this.colId},r.prototype.getUniqueId=function(){return this.colId},r.prototype.getDefinition=function(){return this.colDef},r.prototype.getActualWidth=function(){return this.actualWidth},r.prototype.getAutoHeaderHeight=function(){return this.autoHeaderHeight},r.prototype.setAutoHeaderHeight=function(t){var e=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,e},r.prototype.createBaseColDefParams=function(t){return{node:t,data:t.data,colDef:this.colDef,column:this,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},r.prototype.getColSpan=function(t){if(ie(this.colDef.colSpan))return 1;var e=this.createBaseColDefParams(t),i=this.colDef.colSpan(e);return Math.max(i,1)},r.prototype.getRowSpan=function(t){if(ie(this.colDef.rowSpan))return 1;var e=this.createBaseColDefParams(t),i=this.colDef.rowSpan(e);return Math.max(i,1)},r.prototype.setActualWidth=function(t,e,i){void 0===e&&(e="api"),void 0===i&&(i=!1),null!=this.minWidth&&(t=Math.max(t,this.minWidth)),null!=this.maxWidth&&(t=Math.min(t,this.maxWidth)),this.actualWidth!==t&&(this.actualWidth=t,this.flex&&"flex"!==e&&"gridInitializing"!==e&&(this.flex=null),i||this.fireColumnWidthChangedEvent(e)),this.dispatchStateUpdatedEvent("width")},r.prototype.fireColumnWidthChangedEvent=function(t){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",t))},r.prototype.isGreaterThanMax=function(t){return null!=this.maxWidth&&t>this.maxWidth},r.prototype.getMinWidth=function(){return this.minWidth},r.prototype.getMaxWidth=function(){return this.maxWidth},r.prototype.getFlex=function(){return this.flex||0},r.prototype.setFlex=function(t){this.flex!==t&&(this.flex=t),this.dispatchStateUpdatedEvent("flex")},r.prototype.setMinimum=function(t){void 0===t&&(t="api"),I(this.minWidth)&&this.setActualWidth(this.minWidth,t)},r.prototype.setRowGroupActive=function(t,e){void 0===e&&(e="api"),this.rowGroupActive!==t&&(this.rowGroupActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",e))),this.dispatchStateUpdatedEvent("rowGroup")},r.prototype.isRowGroupActive=function(){return this.rowGroupActive},r.prototype.setPivotActive=function(t,e){void 0===e&&(e="api"),this.pivotActive!==t&&(this.pivotActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",e))),this.dispatchStateUpdatedEvent("pivot")},r.prototype.isPivotActive=function(){return this.pivotActive},r.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},r.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},r.prototype.setValueActive=function(t,e){void 0===e&&(e="api"),this.aggregationActive!==t&&(this.aggregationActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",e)))},r.prototype.isValueActive=function(){return this.aggregationActive},r.prototype.isAllowPivot=function(){return!0===this.colDef.enablePivot},r.prototype.isAllowValue=function(){return!0===this.colDef.enableValue},r.prototype.isAllowRowGroup=function(){return!0===this.colDef.enableRowGroup},r.prototype.getMenuTabs=function(t){var e=this.getColDef().menuTabs;return null==e&&(e=t),e},r.prototype.dispatchStateUpdatedEvent=function(t){this.eventService.dispatchEvent({type:r.EVENT_STATE_UPDATED,key:t})},r.EVENT_MOVING_CHANGED="movingChanged",r.EVENT_LEFT_CHANGED="leftChanged",r.EVENT_WIDTH_CHANGED="widthChanged",r.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",r.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",r.EVENT_VISIBLE_CHANGED="visibleChanged",r.EVENT_FILTER_CHANGED="filterChanged",r.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",r.EVENT_SORT_CHANGED="sortChanged",r.EVENT_COL_DEF_CHANGED="colDefChanged",r.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",r.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",r.EVENT_PIVOT_CHANGED="columnPivotChanged",r.EVENT_VALUE_CHANGED="columnValueChanged",r.EVENT_STATE_UPDATED="columnStateUpdated",Ga([S("gridOptionsService")],r.prototype,"gridOptionsService",void 0),Ga([S("columnUtils")],r.prototype,"columnUtils",void 0),Ga([S("columnHoverService")],r.prototype,"columnHoverService",void 0),Ga([V],r.prototype,"initialise",null),r}(),ze=function(){function r(t,e,i,n){this.localEventService=new $n,this.expandable=!1,this.instanceId=sp(),this.expandableListenerRemoveCallback=null,this.colGroupDef=t,this.groupId=e,this.expanded=!!t&&!!t.openByDefault,this.padding=i,this.level=n}return r.prototype.destroy=function(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)},r.prototype.reset=function(t,e){this.colGroupDef=t,this.level=e,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0},r.prototype.getInstanceId=function(){return this.instanceId},r.prototype.setOriginalParent=function(t){this.originalParent=t},r.prototype.getOriginalParent=function(){return this.originalParent},r.prototype.getLevel=function(){return this.level},r.prototype.isVisible=function(){return!!this.children&&this.children.some(function(t){return t.isVisible()})},r.prototype.isPadding=function(){return this.padding},r.prototype.setExpanded=function(t){this.expanded=void 0!==t&&t,this.localEventService.dispatchEvent({type:r.EVENT_EXPANDED_CHANGED})},r.prototype.isExpandable=function(){return this.expandable},r.prototype.isExpanded=function(){return this.expanded},r.prototype.getGroupId=function(){return this.groupId},r.prototype.getId=function(){return this.getGroupId()},r.prototype.setChildren=function(t){this.children=t},r.prototype.getChildren=function(){return this.children},r.prototype.getColGroupDef=function(){return this.colGroupDef},r.prototype.getLeafColumns=function(){var t=[];return this.addLeafColumns(t),t},r.prototype.addLeafColumns=function(t){this.children&&this.children.forEach(function(e){e instanceof Ae?t.push(e):e instanceof r&&e.addLeafColumns(t)})},r.prototype.getColumnGroupShow=function(){var t=this.colGroupDef;if(t)return t.columnGroupShow},r.prototype.setupExpandable=function(){var t=this;this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();var e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(function(i){return i.addEventListener("visibleChanged",e)}),this.expandableListenerRemoveCallback=function(){t.getLeafColumns().forEach(function(i){return i.removeEventListener("visibleChanged",e)}),t.expandableListenerRemoveCallback=null}},r.prototype.setExpandable=function(){if(!this.isPadding()){for(var t=!1,e=!1,i=!1,n=this.findChildrenRemovingPadding(),o=0,s=n.length;o<s;o++){var a=n[o];if(a.isVisible()){var l=a.getColumnGroupShow();"open"===l?(t=!0,i=!0):"closed"===l?(e=!0,i=!0):(t=!0,e=!0)}}var u=t&&e&&i;this.expandable!==u&&(this.expandable=u,this.localEventService.dispatchEvent({type:r.EVENT_EXPANDABLE_CHANGED}))}},r.prototype.findChildrenRemovingPadding=function(){var t=[],e=function(i){i.forEach(function(n){n instanceof r&&n.isPadding()?e(n.children):t.push(n)})};return e(this.children),t},r.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},r.prototype.addEventListener=function(t,e){this.localEventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.localEventService.removeEventListener(t,e)},r.EVENT_EXPANDED_CHANGED="expandedChanged",r.EVENT_EXPANDABLE_CHANGED="expandableChanged",function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([lt],r.prototype,"destroy",null),r}(),km={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function ap(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=0;e<r.length;e++){var i=r[e];if(I(i))return i}return null}function Pe(r){if(r&&r.length)return r[r.length-1]}function Yn(r,t,e){return null==r&&null==t||null!=r&&null!=t&&r.length===t.length&&r.every(function(i,n){return e?e(i,t[n]):t[n]===i})}function lp(r){return r.sort(function(t,e){return t-e})}function Ku(r,t){var e=r.indexOf(t);e>=0&&(r[e]=r[r.length-1],r.pop())}function ii(r,t){var e=r.indexOf(t);e>=0&&r.splice(e,1)}function up(r,t){for(var e=0;e<t.length;e++)Ku(r,t[e])}function cp(r,t){for(var e=0;e<t.length;e++)ii(r,t[e])}function us(r,t,e){r.splice(e,0,t)}function $u(r,t,e){cp(r,t),t.slice().reverse().forEach(function(i){return us(r,i,e)})}function wi(r,t){return r.indexOf(t)>-1}function dp(r){return[].concat.apply([],r)}function Yu(r,t){null==t||null==r||t.forEach(function(e){return r.push(e)})}var zm=Object.freeze({__proto__:null,firstExistingValue:ap,existsAndNotEmpty:function Hm(r){return null!=r&&r.length>0},last:Pe,areEqual:Yn,shallowCompare:function Vm(r,t){return Yn(r,t)},sortNumerically:lp,removeRepeatsFromArray:function Bm(r,t){if(r)for(var e=r.length-2;e>=0;e--)r[e]===t&&r[e+1]===t&&r.splice(e+1,1)},removeFromUnorderedArray:Ku,removeFromArray:ii,removeAllFromUnorderedArray:up,removeAllFromArray:cp,insertIntoArray:us,insertArrayIntoArray:function Wm(r,t,e){if(null!=r&&null!=t)for(var i=t.length-1;i>=0;i--)us(r,t[i],e)},moveInArray:$u,includes:wi,flatten:dp,pushAll:Yu,toStrings:function jm(r){return r.map(ss)},forEachReverse:function Um(r,t){if(null!=r)for(var e=r.length-1;e>=0;e--)t(r[e],e)}}),hp="__ag_Grid_Stop_Propagation",Km=["touchstart","touchend","touchmove","touchcancel","scroll"],Xu={};function on(r){r[hp]=!0}function Ii(r){return!0===r[hp]}var r,qu=(r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},function(e){if("boolean"==typeof Xu[e])return Xu[e];var i=document.createElement(r[e]||"div");return Xu[e="on"+e]=e in i});function ka(r,t,e){for(var i=t;i;){var n=r.getDomData(i,e);if(n)return n;i=i.parentElement}return null}function Ha(r,t){return!(!t||!r)&&fp(t).indexOf(r)>=0}function pp(r){for(var t=[],e=r.target;e;)t.push(e),e=e.parentElement;return t}function fp(r){var t=r;return t.path?t.path:t.composedPath?t.composedPath():pp(t)}function vp(r,t,e,i){var n=wi(Km,e);r&&r.addEventListener&&r.addEventListener(t,e,i,n?{passive:!0}:void 0)}var $m=Object.freeze({__proto__:null,stopPropagationForAgGrid:on,isStopPropagationForAgGrid:Ii,isEventSupported:qu,getCtrlForEventTarget:ka,isElementInEventPath:Ha,createEventPath:pp,getEventPath:fp,addSafePassiveEventListener:vp}),No=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},k=function(){function r(){var t=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=function(){return!t.destroyed}}return r.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},r.prototype.getContext=function(){return this.context},r.prototype.destroy=function(){this.destroyFunctions.forEach(function(t){return t()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:r.EVENT_DESTROYED})},r.prototype.addEventListener=function(t,e){this.localEventService||(this.localEventService=new $n),this.localEventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.localEventService&&this.localEventService.removeEventListener(t,e)},r.prototype.dispatchEventAsync=function(t){var e=this;window.setTimeout(function(){return e.dispatchEvent(t)},0)},r.prototype.dispatchEvent=function(t){this.localEventService&&this.localEventService.dispatchEvent(t)},r.prototype.addManagedListener=function(t,e,i){var n=this;if(!this.destroyed){t instanceof HTMLElement?vp(this.getFrameworkOverrides(),t,e,i):t.addEventListener(e,i);var o=function(){return t.removeEventListener(e,i),n.destroyFunctions=n.destroyFunctions.filter(function(s){return s!==o}),null};return this.destroyFunctions.push(o),o}},r.prototype.setupGridOptionListener=function(t,e){var i=this;this.gridOptionsService.addEventListener(t,e);var n=function(){return i.gridOptionsService.removeEventListener(t,e),i.destroyFunctions=i.destroyFunctions.filter(function(o){return o!==n}),null};this.destroyFunctions.push(n)},r.prototype.addManagedPropertyListener=function(t,e){this.destroyed||this.setupGridOptionListener(t,e)},r.prototype.addManagedPropertyListeners=function(t,e){var i=this;if(!this.destroyed){var n=t.join("-")+this.propertyListenerId++,o=function(s){if(s.changeSet){if(s.changeSet&&s.changeSet.id===i.lastChangeSetIdLookup[n])return;i.lastChangeSetIdLookup[n]=s.changeSet.id}e({type:"gridPropertyChanged",changeSet:s.changeSet})};t.forEach(function(s){return i.setupGridOptionListener(s,o)})}},r.prototype.addDestroyFunc=function(t){this.isAlive()?this.destroyFunctions.push(t):t()},r.prototype.createManagedBean=function(t,e){var i=this.createBean(t,e);return this.addDestroyFunc(this.destroyBean.bind(this,t,e)),i},r.prototype.createBean=function(t,e,i){return(e||this.getContext()).createBean(t,i)},r.prototype.destroyBean=function(t,e){return(e||this.getContext()).destroyBean(t)},r.prototype.destroyBeans=function(t,e){var i=this;return t&&t.forEach(function(n){return i.destroyBean(n,e)}),[]},r.EVENT_DESTROYED="destroyed",No([S("frameworkOverrides")],r.prototype,"frameworkOverrides",void 0),No([S("context")],r.prototype,"context",void 0),No([S("eventService")],r.prototype,"eventService",void 0),No([S("gridOptionsService")],r.prototype,"gridOptionsService",void 0),No([S("localeService")],r.prototype,"localeService",void 0),No([S("environment")],r.prototype,"environment",void 0),No([lt],r.prototype,"destroy",null),r}(),Ym=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Va=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Xm=function(r,t){return function(e,i){t(e,i,r)}},qm=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Ym(t,r),t.prototype.setBeans=function(e){this.logger=e.create("ColumnFactory")},t.prototype.createColumnTree=function(e,i,n){var o=new Sm,s=this.extractExistingTreeData(n),a=s.existingCols,l=s.existingGroups;o.addExistingKeys(s.existingColKeys);var c=this.recursivelyCreateColumns(e,0,i,a,o,l),d=this.findMaxDept(c,0);this.logger.log("Number of levels for grouped columns is "+d);var h=this.balanceColumnTree(c,0,d,o);return this.columnUtils.depthFirstOriginalTreeSearch(null,h,function(f,v){f instanceof ze&&f.setupExpandable(),f.setOriginalParent(v)}),{columnTree:h,treeDept:d}},t.prototype.extractExistingTreeData=function(e){var i=[],n=[],o=[];return e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,function(s){if(s instanceof ze)n.push(s);else{var l=s;o.push(l.getId()),i.push(l)}}),{existingCols:i,existingGroups:n,existingColKeys:o}},t.prototype.createForAutoGroups=function(e,i){var n=this;return e.map(function(o){return n.createAutoGroupTreeItem(i,o)})},t.prototype.createAutoGroupTreeItem=function(e,i){for(var n=this.findDepth(e),o=i,s=n-1;s>=0;s--){var a=new ze(null,"FAKE_PATH_"+i.getId()+"}_"+s,!0,s);this.createBean(a),a.setChildren([o]),o.setOriginalParent(a),o=a}return 0===n&&i.setOriginalParent(null),o},t.prototype.findDepth=function(e){for(var i=0,n=e;n&&n[0]&&n[0]instanceof ze;)i++,n=n[0].getChildren();return i},t.prototype.balanceColumnTree=function(e,i,n,o){for(var s=[],a=0;a<e.length;a++){var l=e[a];if(l instanceof ze){var u=l,c=this.balanceColumnTree(u.getChildren(),i+1,n,o);u.setChildren(c),s.push(u)}else{for(var d=void 0,h=void 0,p=n-1;p>=i;p--){var f=o.getUniqueKey(null,null),v=this.createMergedColGroupDef(null),g=new ze(v,f,!0,i);this.createBean(g),h&&h.setChildren([g]),h=g,d||(d=h)}if(d&&h){if(s.push(d),e.some(function(m){return m instanceof ze})){h.setChildren([l]);continue}h.setChildren(e);break}s.push(l)}}return s},t.prototype.findMaxDept=function(e,i){for(var n=i,o=0;o<e.length;o++){var s=e[o];if(s instanceof ze){var l=this.findMaxDept(s.getChildren(),i+1);n<l&&(n=l)}}return n},t.prototype.recursivelyCreateColumns=function(e,i,n,o,s,a){if(!e)return[];for(var l=new Array(e.length),u=0;u<l.length;u++){var c=e[u];l[u]=this.isColumnGroup(c)?this.createColumnGroup(n,c,i,o,s,a):this.createColumn(n,c,o,s)}return l},t.prototype.createColumnGroup=function(e,i,n,o,s,a){var l=this.createMergedColGroupDef(i),u=s.getUniqueKey(l.groupId||null,null),c=new ze(l,u,!1,n);this.createBean(c);var d=this.findExistingGroup(i,a);d&&a.splice(d.idx,1);var h=d?.group;h&&c.setExpanded(h.isExpanded());var p=this.recursivelyCreateColumns(l.children,n+1,e,o,s,a);return c.setChildren(p),c},t.prototype.createMergedColGroupDef=function(e){var i={};return Object.assign(i,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(i,e),i},t.prototype.createColumn=function(e,i,n,o){var s=this.findExistingColumn(i,n);s&&n?.splice(s.idx,1);var a=s?.column;if(a){var u=this.addColumnDefaultAndTypes(i,a.getColId());a.setColDef(u,i),this.applyColumnState(a,u)}else{var l=o.getUniqueKey(i.colId,i.field);u=this.addColumnDefaultAndTypes(i,l),a=new Ae(u,i,l,e),this.context.createBean(a)}return this.dataTypeService.addColumnListeners(a),a},t.prototype.applyColumnState=function(e,i){var n=Ci(i.flex);if(void 0!==n&&e.setFlex(n),e.getFlex()<=0){var s=Ci(i.width);if(null!=s)e.setActualWidth(s);else{var a=e.getActualWidth();e.setActualWidth(a)}}void 0!==i.sort&&e.setSort("asc"==i.sort||"desc"==i.sort?i.sort:void 0);var l=Ci(i.sortIndex);void 0!==l&&e.setSortIndex(l);var u=tn(i.hide);void 0!==u&&e.setVisible(!u),void 0!==i.pinned&&e.setPinned(i.pinned)},t.prototype.findExistingColumn=function(e,i){if(i)for(var n=0;n<i.length;n++){var o=i[n].getUserProvidedColDef();if(o){if(null!=e.colId){if(i[n].getId()===e.colId)return{idx:n,column:i[n]};continue}if(null!=e.field){if(o.field===e.field)return{idx:n,column:i[n]};continue}if(o===e)return{idx:n,column:i[n]}}}},t.prototype.findExistingGroup=function(e,i){if(null!=e.groupId)for(var o=0;o<i.length;o++){var s=i[o];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:o,group:s}}},t.prototype.addColumnDefaultAndTypes=function(e,i){var n={};ti(n,this.gridOptionsService.get("defaultColDef"),!1,!0);var s=this.dataTypeService.updateColDefAndGetColumnType(n,e,i);s&&this.assignColumnTypes(s,n),ti(n,e,!1,!0);var a=this.gridOptionsService.get("autoGroupColumnDef"),l=this.gridOptionsService.isColumnsSortingCoupledToGroup();return e.rowGroup&&a&&l&&ti(n,{sort:a.sort,initialSort:a.initialSort},!1,!0),this.dataTypeService.validateColDef(n),n},t.prototype.assignColumnTypes=function(e,i){if(e.length){var n=Object.assign({},km);He(this.gridOptionsService.get("columnTypes")||{},function(s,a){s in n?console.warn("AG Grid: the column type '"+s+"' is a default column type and cannot be overridden."):n[s]=a}),e.forEach(function(s){var a=n[s.trim()];a?ti(i,a,!1,!0):console.warn("AG Grid: colDef.type '"+s+"' does not correspond to defined gridOptions.columnTypes")})}},t.prototype.isColumnGroup=function(e){return void 0!==e.children},Va([S("columnUtils")],t.prototype,"columnUtils",void 0),Va([S("dataTypeService")],t.prototype,"dataTypeService",void 0),Va([Xm(0,Tt("loggerFactory"))],t.prototype,"setBeans",null),Va([X("columnFactory")],t)}(k),yt=function(){function r(t,e,i,n){this.displayedChildren=[],this.localEventService=new $n,this.groupId=e,this.partId=i,this.providedColumnGroup=t,this.pinned=n}return r.createUniqueId=function(t,e){return t+"_"+e},r.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},r.prototype.getParent=function(){return this.parent},r.prototype.setParent=function(t){this.parent=t},r.prototype.getUniqueId=function(){return r.createUniqueId(this.groupId,this.partId)},r.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},r.prototype.isMoving=function(){var t=this.getProvidedColumnGroup().getLeafColumns();return!(!t||0===t.length)&&t.every(function(e){return e.isMoving()})},r.prototype.checkLeft=function(){if(this.displayedChildren.forEach(function(n){n instanceof r&&n.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.is("enableRtl")){var e=Pe(this.displayedChildren).getLeft();this.setLeft(e)}else{var i=this.displayedChildren[0].getLeft();this.setLeft(i)}else this.setLeft(null)},r.prototype.getLeft=function(){return this.left},r.prototype.getOldLeft=function(){return this.oldLeft},r.prototype.setLeft=function(t){this.oldLeft=t,this.left!==t&&(this.left=t,this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_LEFT_CHANGED)))},r.prototype.getPinned=function(){return this.pinned},r.prototype.createAgEvent=function(t){return{type:t}},r.prototype.addEventListener=function(t,e){this.localEventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.localEventService.removeEventListener(t,e)},r.prototype.getGroupId=function(){return this.groupId},r.prototype.getPartId=function(){return this.partId},r.prototype.isChildInThisGroupDeepSearch=function(t){var e=!1;return this.children.forEach(function(i){t===i&&(e=!0),i instanceof r&&i.isChildInThisGroupDeepSearch(t)&&(e=!0)}),e},r.prototype.getActualWidth=function(){var t=0;return this.displayedChildren&&this.displayedChildren.forEach(function(e){t+=e.getActualWidth()}),t},r.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var t=!1;return this.displayedChildren.forEach(function(e){e.isResizable()&&(t=!0)}),t},r.prototype.getMinWidth=function(){var t=0;return this.displayedChildren.forEach(function(e){t+=e.getMinWidth()||0}),t},r.prototype.addChild=function(t){this.children||(this.children=[]),this.children.push(t)},r.prototype.getDisplayedChildren=function(){return this.displayedChildren},r.prototype.getLeafColumns=function(){var t=[];return this.addLeafColumns(t),t},r.prototype.getDisplayedLeafColumns=function(){var t=[];return this.addDisplayedLeafColumns(t),t},r.prototype.getDefinition=function(){return this.providedColumnGroup.getColGroupDef()},r.prototype.getColGroupDef=function(){return this.providedColumnGroup.getColGroupDef()},r.prototype.isPadding=function(){return this.providedColumnGroup.isPadding()},r.prototype.isExpandable=function(){return this.providedColumnGroup.isExpandable()},r.prototype.isExpanded=function(){return this.providedColumnGroup.isExpanded()},r.prototype.setExpanded=function(t){this.providedColumnGroup.setExpanded(t)},r.prototype.addDisplayedLeafColumns=function(t){this.displayedChildren.forEach(function(e){e instanceof Ae?t.push(e):e instanceof r&&e.addDisplayedLeafColumns(t)})},r.prototype.addLeafColumns=function(t){this.children.forEach(function(e){e instanceof Ae?t.push(e):e instanceof r&&e.addLeafColumns(t)})},r.prototype.getChildren=function(){return this.children},r.prototype.getColumnGroupShow=function(){return this.providedColumnGroup.getColumnGroupShow()},r.prototype.getProvidedColumnGroup=function(){return this.providedColumnGroup},r.prototype.getPaddingLevel=function(){var t=this.getParent();return this.isPadding()&&t&&t.isPadding()?1+t.getPaddingLevel():0},r.prototype.calculateDisplayedColumns=function(){var t=this;this.displayedChildren=[];for(var e=this;null!=e&&e.isPadding();)e=e.getParent();if(!e||!e.providedColumnGroup.isExpandable())return this.displayedChildren=this.children,void this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_DISPLAYED_CHILDREN_CHANGED));this.children.forEach(function(n){if(!(n instanceof r)||n.displayedChildren&&n.displayedChildren.length)switch(n.getColumnGroupShow()){case"open":e.providedColumnGroup.isExpanded()&&t.displayedChildren.push(n);break;case"closed":e.providedColumnGroup.isExpanded()||t.displayedChildren.push(n);break;default:t.displayedChildren.push(n)}}),this.localEventService.dispatchEvent(this.createAgEvent(r.EVENT_DISPLAYED_CHILDREN_CHANGED))},r.EVENT_LEFT_CHANGED="leftChanged",r.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([S("gridOptionsService")],r.prototype,"gridOptionsService",void 0),r}(),E=function(){function r(){}return r.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",r.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",r.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",r.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",r.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",r.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",r.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",r.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",r.EVENT_COLUMN_MOVED="columnMoved",r.EVENT_COLUMN_VISIBLE="columnVisible",r.EVENT_COLUMN_PINNED="columnPinned",r.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",r.EVENT_COLUMN_RESIZED="columnResized",r.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",r.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",r.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",r.EVENT_ROW_GROUP_OPENED="rowGroupOpened",r.EVENT_ROW_DATA_CHANGED="rowDataChanged",r.EVENT_ROW_DATA_UPDATED="rowDataUpdated",r.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",r.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",r.EVENT_CHART_CREATED="chartCreated",r.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",r.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",r.EVENT_CHART_DESTROYED="chartDestroyed",r.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",r.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",r.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",r.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",r.EVENT_MODEL_UPDATED="modelUpdated",r.EVENT_CUT_START="cutStart",r.EVENT_CUT_END="cutEnd",r.EVENT_PASTE_START="pasteStart",r.EVENT_PASTE_END="pasteEnd",r.EVENT_FILL_START="fillStart",r.EVENT_FILL_END="fillEnd",r.EVENT_RANGE_DELETE_START="rangeDeleteStart",r.EVENT_RANGE_DELETE_END="rangeDeleteEnd",r.EVENT_UNDO_STARTED="undoStarted",r.EVENT_UNDO_ENDED="undoEnded",r.EVENT_REDO_STARTED="redoStarted",r.EVENT_REDO_ENDED="redoEnded",r.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",r.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",r.EVENT_CELL_CLICKED="cellClicked",r.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",r.EVENT_CELL_MOUSE_DOWN="cellMouseDown",r.EVENT_CELL_CONTEXT_MENU="cellContextMenu",r.EVENT_CELL_VALUE_CHANGED="cellValueChanged",r.EVENT_CELL_EDIT_REQUEST="cellEditRequest",r.EVENT_ROW_VALUE_CHANGED="rowValueChanged",r.EVENT_CELL_FOCUSED="cellFocused",r.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared",r.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",r.EVENT_ROW_SELECTED="rowSelected",r.EVENT_SELECTION_CHANGED="selectionChanged",r.EVENT_TOOLTIP_SHOW="tooltipShow",r.EVENT_TOOLTIP_HIDE="tooltipHide",r.EVENT_CELL_KEY_DOWN="cellKeyDown",r.EVENT_CELL_MOUSE_OVER="cellMouseOver",r.EVENT_CELL_MOUSE_OUT="cellMouseOut",r.EVENT_FILTER_CHANGED="filterChanged",r.EVENT_FILTER_MODIFIED="filterModified",r.EVENT_FILTER_OPENED="filterOpened",r.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged",r.EVENT_SORT_CHANGED="sortChanged",r.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",r.EVENT_ROW_CLICKED="rowClicked",r.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",r.EVENT_GRID_READY="gridReady",r.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed",r.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",r.EVENT_VIEWPORT_CHANGED="viewportChanged",r.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",r.EVENT_FIRST_DATA_RENDERED="firstDataRendered",r.EVENT_DRAG_STARTED="dragStarted",r.EVENT_DRAG_STOPPED="dragStopped",r.EVENT_CHECKBOX_CHANGED="checkboxChanged",r.EVENT_ROW_EDITING_STARTED="rowEditingStarted",r.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",r.EVENT_CELL_EDITING_STARTED="cellEditingStarted",r.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",r.EVENT_BODY_SCROLL="bodyScroll",r.EVENT_BODY_SCROLL_END="bodyScrollEnd",r.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",r.EVENT_PAGINATION_CHANGED="paginationChanged",r.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",r.EVENT_STORE_REFRESHED="storeRefreshed",r.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",r.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",r.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",r.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",r.EVENT_FLASH_CELLS="flashCells",r.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",r.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",r.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",r.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",r.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",r.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",r.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",r.EVENT_ROW_DRAG_ENTER="rowDragEnter",r.EVENT_ROW_DRAG_MOVE="rowDragMove",r.EVENT_ROW_DRAG_LEAVE="rowDragLeave",r.EVENT_ROW_DRAG_END="rowDragEnd",r.EVENT_GRID_STYLES_CHANGED="gridStylesChanged",r.EVENT_POPUP_TO_FRONT="popupToFront",r.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",r.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",r.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",r.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",r.EVENT_KEYBOARD_FOCUS="keyboardFocus",r.EVENT_MOUSE_FOCUS="mouseFocus",r.EVENT_STORE_UPDATED="storeUpdated",r.EVENT_FILTER_DESTROYED="filterDestroyed",r.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted",r.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged",r.EVENT_DATA_TYPES_INFERRED="dataTypesInferred",r.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged",r.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected",r}(),gp=function(){function r(){this.existingIds={}}return r.prototype.getInstanceIdForKey=function(t){var i,e=this.existingIds[t];return this.existingIds[t]=i="number"!=typeof e?0:e+1,i},r}(),Qm=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Zu=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},vr="ag-Grid-AutoColumn",Jm=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Qm(t,r),t.prototype.createAutoGroupColumns=function(e){var i=this,n=[],o=this.gridOptionsService.is("treeData"),s=this.gridOptionsService.isGroupMultiAutoColumn();return o&&s&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),s=!1),s?e.forEach(function(a,l){n.push(i.createOneAutoGroupColumn(a,l))}):n.push(this.createOneAutoGroupColumn()),n},t.prototype.updateAutoGroupColumns=function(e){var i=this;e.forEach(function(n,o){return i.updateOneAutoGroupColumn(n,o)})},t.prototype.createOneAutoGroupColumn=function(e,i){var n;n=e?vr+"-"+e.getId():vr;var o=this.createAutoGroupColDef(n,e,i);o.colId=n;var s=new Ae(o,null,n,!0);return this.context.createBean(s),s},t.prototype.updateOneAutoGroupColumn=function(e,i){var n=e.getColDef(),o="string"==typeof n.showRowGroup?n.showRowGroup:void 0,s=null!=o?this.columnModel.getPrimaryColumn(o):void 0,a=this.createAutoGroupColDef(e.getId(),s??void 0,i);e.setColDef(a,null),this.columnFactory.applyColumnState(e,a)},t.prototype.createAutoGroupColDef=function(e,i,n){var o=this.createBaseColDef(i);return ti(o,this.gridOptionsService.get("autoGroupColumnDef")),o=this.columnFactory.addColumnDefaultAndTypes(o,e),this.gridOptionsService.is("treeData")||ie(o.field)&&ie(o.valueGetter)&&ie(o.filterValueGetter)&&"agGroupColumnFilter"!==o.filter&&(o.filter=!1),n&&n>0&&(o.headerCheckboxSelection=!1),this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!(o.valueGetter||null!=o.field)&&(o.sortIndex=void 0,o.initialSort=void 0),o},t.prototype.createBaseColDef=function(e){var i=this.gridOptionsService.get("autoGroupColumnDef"),o={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(i&&(i.cellRenderer||i.cellRendererSelector)||(o.cellRenderer="agGroupCellRenderer"),e){var a=e.getColDef();Object.assign(o,{headerName:this.columnModel.getDisplayNameForColumn(e,"header"),headerValueGetter:a.headerValueGetter}),a.cellRenderer&&Object.assign(o,{cellRendererParams:{innerRenderer:a.cellRenderer,innerRendererParams:a.cellRendererParams}}),o.showRowGroup=e.getColId()}else o.showRowGroup=!0;return o},Zu([S("columnModel")],t.prototype,"columnModel",void 0),Zu([S("columnFactory")],t.prototype,"columnFactory",void 0),Zu([X("autoGroupColService")],t)}(k),eC=/[&<>"']/g,tC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ye(r,t){if(null==r)return null;var e=r.toString().toString();return t?e:e.replace(eC,function(i){return tC[i]})}function yp(r){return r&&null!=r?r.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map(function(n){return n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")}).join(" "):null}function mp(r){return r.replace(/[A-Z]/g,function(t){return"-"+t.toLocaleLowerCase()})}var oC=Object.freeze({__proto__:null,utf8_encode:function iC(r){var t=String.fromCharCode;function n(d,h){return t(d>>h&63|128)}function o(d){if(d>=0&&d<=31&&10!==d)return"_x"+d.toString(16).toUpperCase().padStart(4,"0")+"_";if(!(4294967168&d))return t(d);var f="";return 4294965248&d?4294901760&d?4292870144&d||(f=t(d>>18&7|240),f+=n(d,12),f+=n(d,6)):(function i(d){if(d>=55296&&d<=57343)throw Error("Lone surrogate U+"+d.toString(16).toUpperCase()+" is not a scalar value")}(d),f=t(d>>12&15|224),f+=n(d,6)):f=t(d>>6&31|192),f+t(63&d|128)}for(var s=function e(d){var h=[];if(!d)return[];for(var v,g,p=d.length,f=0;f<p;)(v=d.charCodeAt(f++))>=55296&&v<=56319&&f<p?56320==(64512&(g=d.charCodeAt(f++)))?h.push(((1023&v)<<10)+(1023&g)+65536):(h.push(v),f--):h.push(v);return h}(r),a=s.length,l=-1,c="";++l<a;)c+=o(s[l]);return c},capitalise:function nC(r){return r[0].toUpperCase()+r.substr(1).toLowerCase()},escapeString:Ye,camelCaseToHumanText:yp,camelCaseToHyphenated:mp});function Xn(r){var t=new Map;return r.forEach(function(e){return t.set(e[0],e[1])}),t}var aC=Object.freeze({__proto__:null,convertToMap:Xn,mapById:function rC(r,t){var e=new Map;return r.forEach(function(i){return e.set(t(i),i)}),e},keys:function sC(r){var t=[];return r.forEach(function(e,i){return t.push(i)}),t}}),lC=function(){function r(){}return r.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0},r.ALL_PROPERTIES=Object.keys(r.ColDefPropertyMap),r}(),qn=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},Zn=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},On=function(){function r(){}return r.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator"],r.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams"],r.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass"],r.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"],r.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSelectsChildren","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","serverSideFilterAllLevels","serverSideSortingAlwaysResets","serverSideSortAllLevels","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","suppressReactUi","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","suppressCutToClipboard","enableAdvancedFilter","includeHiddenColumnsInAdvancedFilter"],r.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processSecondaryColDef","processSecondaryColGroupDef","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"],r.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering"],r.FUNCTION_PROPERTIES=Zn(Zn([],qn(r.FUNCTIONAL_PROPERTIES)),qn(r.CALLBACK_PROPERTIES)),r.ALL_PROPERTIES=Zn(Zn(Zn(Zn(Zn(Zn([],qn(r.ARRAY_PROPERTIES)),qn(r.OBJECT_PROPERTIES)),qn(r.STRING_PROPERTIES)),qn(r.NUMBER_PROPERTIES)),qn(r.FUNCTION_PROPERTIES)),qn(r.BOOLEAN_PROPERTIES)),r}(),Qu=function(){return Qu=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Qu.apply(this,arguments)},cs=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},ds=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},gr=function(){function r(){}return r.getCallbackForEvent=function(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substr(1)},r.getCoercionLookup=function(){var t={};return ds(ds(ds(ds(ds([],cs(r.ARRAY_PROPERTIES)),cs(r.OBJECT_PROPERTIES)),cs(r.STRING_PROPERTIES)),cs(r.FUNCTION_PROPERTIES)),cs(r.EVENT_CALLBACKS)).forEach(function(e){return t[e]="none"}),r.BOOLEAN_PROPERTIES.forEach(function(e){return t[e]="boolean"}),r.NUMBER_PROPERTIES.forEach(function(e){return t[e]="number"}),t},r.getValue=function(t,e){var i=r.coercionLookup[t];if(i){var n=e;switch(i){case"number":n=r.toNumber(e);break;case"boolean":n=r.toBoolean(e);break;case"none":"groupAggFiltering"===t&&"function"!=typeof e&&(n=r.toBoolean(e))}return n}},r.getGridOptionKeys=function(t,e){return Object.keys(e?r.coercionLookup:t)},r.copyAttributesToGridOptions=function(t,e,i){void 0===i&&(i=!1),"object"!=typeof t&&(t={});var n=t;return r.getGridOptionKeys(e,i).forEach(function(s){var a=e[s];if(typeof a<"u"){var l=r.getValue(s,a);void 0!==l&&(n[s]=l)}}),t},r.processOnChange=function(t,e){var i=this;if(t&&0!==Object.keys(t).length){this.changeSetId++;var n=Qu({},t);n.columnTypes&&(e.setColumnTypes(n.columnTypes.currentValue,"gridOptionsChanged"),delete n.columnTypes),n.autoGroupColumnDef&&(e.setAutoGroupColumnDef(n.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete n.autoGroupColumnDef),n.defaultColDef&&(e.setDefaultColDef(n.defaultColDef.currentValue,"gridOptionsChanged"),delete n.defaultColDef),n.columnDefs&&(e.setColumnDefs(n.columnDefs.currentValue,"gridOptionsChanged"),delete n.columnDefs);var o=Object.keys(n).map(function(l){var u=l,c=r.getValue(u,n[u].currentValue);return{gridKey:u,coercedValue:c,isChanged:e.__setPropertyOnly(u,c)}}).filter(function(l){return l.isChanged}),s=o.map(function(l){return l.gridKey});o.forEach(function(l){return e.__updateProperty(l.gridKey,l.coercedValue,l.isChanged,{id:i.changeSetId,properties:s})});var a={type:E.EVENT_COMPONENT_STATE_CHANGED};He(t,function(l,u){a[l]=u}),e.dispatchEvent(a)}},r.toBoolean=function(t){return"boolean"==typeof t?t:"string"==typeof t&&("TRUE"===t.toUpperCase()||""==t)},r.toNumber=function(t){return"number"==typeof t?t:"string"==typeof t?Number(t):void 0},r.EVENTS=Fo(E),r.EXCLUDED_INTERNAL_EVENTS=[E.EVENT_SCROLLBAR_WIDTH_CHANGED,E.EVENT_CHECKBOX_CHANGED,E.EVENT_HEIGHT_SCALE_CHANGED,E.EVENT_BODY_HEIGHT_CHANGED,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,E.EVENT_SCROLL_VISIBILITY_CHANGED,E.EVENT_COLUMN_HOVER_CHANGED,E.EVENT_FLASH_CELLS,E.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,E.EVENT_DISPLAYED_ROWS_CHANGED,E.EVENT_LEFT_PINNED_WIDTH_CHANGED,E.EVENT_RIGHT_PINNED_WIDTH_CHANGED,E.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,E.EVENT_POPUP_TO_FRONT,E.EVENT_KEYBOARD_FOCUS,E.EVENT_MOUSE_FOCUS,E.EVENT_STORE_UPDATED,E.EVENT_COLUMN_PANEL_ITEM_DRAG_START,E.EVENT_COLUMN_PANEL_ITEM_DRAG_END,E.EVENT_FILL_START,E.EVENT_FILL_END,E.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,E.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,E.EVENT_FULL_WIDTH_ROW_FOCUSED,E.EVENT_HEADER_HEIGHT_CHANGED,E.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,E.EVENT_CELL_FOCUS_CLEARED,E.EVENT_GRID_STYLES_CHANGED,E.EVENT_FILTER_DESTROYED,E.EVENT_ROW_DATA_UPDATE_STARTED,E.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,E.EVENT_DATA_TYPES_INFERRED,E.EVENT_FIELD_VALUE_CHANGED,E.EVENT_FIELD_PICKER_VALUE_SELECTED],r.PUBLIC_EVENTS=r.EVENTS.filter(function(t){return!wi(r.EXCLUDED_INTERNAL_EVENTS,t)}),r.EVENT_CALLBACKS=r.EVENTS.map(function(t){return r.getCallbackForEvent(t)}),r.STRING_PROPERTIES=On.STRING_PROPERTIES,r.OBJECT_PROPERTIES=On.OBJECT_PROPERTIES,r.ARRAY_PROPERTIES=On.ARRAY_PROPERTIES,r.NUMBER_PROPERTIES=On.NUMBER_PROPERTIES,r.BOOLEAN_PROPERTIES=On.BOOLEAN_PROPERTIES,r.FUNCTION_PROPERTIES=On.FUNCTION_PROPERTIES,r.ALL_PROPERTIES=On.ALL_PROPERTIES,r.ALL_PROPERTIES_SET=new Set(On.ALL_PROPERTIES),r.changeSetId=0,r.coercionLookup=r.getCoercionLookup(),r}(),uC=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Cp(r,t,e){var i={},n=r.filter(function(o){return!t.some(function(s){return s===o})});return n.length>0&&n.forEach(function(o){return i[o]=hs(o,e).values}),i}function hs(r,t,e,i){var n,o,s=t.map(function(f,v){return{value:f,relevance:cC(r.toLowerCase(),f.toLocaleLowerCase()),idx:v}});if(s.sort(function(f,v){return v.relevance-f.relevance}),e&&(s=s.filter(function(f){return 0!==f.relevance})),s.length>0&&i&&i>0){var l=s[0].relevance*i;s=s.filter(function(f){return l-f.relevance<0})}var u=[],c=[];try{for(var d=uC(s),h=d.next();!h.done;h=d.next()){var p=h.value;u.push(p.value),c.push(p.idx)}}catch(f){n={error:f}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}return{values:u,indices:c}}function cC(r,t){for(var e=r.replace(/\s/g,""),i=t.replace(/\s/g,""),n=0,o=-1,s=0;s<e.length;s++){var a=i.indexOf(e[s],o+1);-1!==a&&(n+=100-100*(o=a)/1e4*100)}return n}var dC=Object.freeze({__proto__:null,fuzzyCheckStrings:Cp,fuzzySuggestions:hs}),Ba=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Qn=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},Jn=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};function Si(r,t,e,i){var n=e?"Please use '"+e+"' instead. ":"";ge(function(){return console.warn("AG Grid: since v"+r+", '"+t+"' is deprecated. "+n+(i??""))},"Deprecated_"+t)}var wp=["__ob__","__v_skip","__metadata__"],hC=function(){function r(){this.deprecatedProperties={rememberGroupStateWhenNewData:{version:"24",message:"Now that transaction updates are possible and they keep group state, this feature is no longer needed."},serverSideFilteringAlwaysResets:{version:"28.0",newProp:"serverSideOnlyRefreshFilteredGroups",copyToNewProp:!0},serverSideSortingAlwaysResets:{version:"28.0",newProp:"serverSideSortAllLevels",copyToNewProp:!0},suppressReactUi:{version:"28",message:"The legacy React rendering engine is deprecated and will be removed in the next major version of the grid."},processSecondaryColDef:{version:"28",newProp:"processPivotResultColDef",copyToNewProp:!0},processSecondaryColGroupDef:{version:"28",newProp:"processPivotResultColGroupDef",copyToNewProp:!0},getServerSideStoreParams:{version:"28",newProp:"getServerSideGroupLevelParams",copyToNewProp:!0},serverSideInfiniteScroll:{version:"29",message:"Infinite Scrolling is now the default behaviour. This can be suppressed with `suppressServerSideInfiniteScroll`."},enableChartToolPanelsButton:{version:"29",message:"The Chart Tool Panels button is now enabled by default. To hide the Chart Tool Panels button and display the hamburger button instead, set suppressChartToolPanelsButton=true."},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",newProp:"enterNavigatesVertically",copyToNewProp:!0},enterMovesDownAfterEdit:{version:"30",newProp:"enterNavigatesVerticallyAfterEdit",copyToNewProp:!0},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."}}}return r.prototype.pickOneWarning=function(t,e){console.warn("AG Grid: "+t+" and "+e+" do not work with each other, you need to pick one.")},r.prototype.init=function(){var t=this;if(this.checkForDeprecated(),this.checkForViolations(),!0!==this.gridOptions.suppressPropertyNamesCheck&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),this.checkColumnDefViolations(),this.gridOptionsService.is("groupSelectsChildren")&&this.gridOptionsService.is("suppressParentsInRowNodes")&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.gridOptionsService.is("groupSelectsChildren")&&"multiple"!==this.gridOptionsService.get("rowSelection")&&console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.gridOptionsService.is("groupRemoveSingleChildren")&&this.gridOptionsService.is("groupHideOpenParents")&&this.pickOneWarning("groupRemoveSingleChildren","groupHideOpenParents"),this.gridOptionsService.isRowModelType("serverSide")){var e=function(n,o){return"AG Grid: '"+n+"' is not supported on the Server-Side Row Model."+(o?" Please use "+o+" instead.":"")};this.gridOptionsService.exists("groupDefaultExpanded")&&console.warn(e("groupDefaultExpanded","isServerSideGroupOpenByDefault callback")),this.gridOptionsService.exists("groupIncludeFooter")&&this.gridOptionsService.is("suppressServerSideInfiniteScroll")&&console.warn(e("groupIncludeFooter")),this.gridOptionsService.exists("groupIncludeTotalFooter")&&console.warn(e("groupIncludeTotalFooter"))}this.gridOptionsService.is("enableRangeSelection")?oe.__assertRegistered(q.RangeSelectionModule,"enableRangeSelection",this.gridOptionsService.getGridId()):(this.gridOptionsService.is("enableRangeHandle")||this.gridOptionsService.is("enableFillHandle"))&&console.warn("AG Grid: 'enableRangeHandle' or 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");var i=function(n,o){return t.gridOptionsService.exists(n)&&oe.__assertRegistered(o,n,t.gridOptionsService.getGridId())};i("sideBar",q.SideBarModule),i("statusBar",q.StatusBarModule),i("enableCharts",q.GridChartsModule),i("getMainMenuItems",q.MenuModule),i("getContextMenuItems",q.MenuModule),i("allowContextMenuWithControlKey",q.MenuModule),i("enableAdvancedFilter",q.AdvancedFilterModule),i("treeData",q.RowGroupingModule),i("enableRangeSelection",q.RangeSelectionModule),i("masterDetail",q.MasterDetailModule)},r.prototype.checkColumnDefProperties=function(){var t=this;if(null!=this.gridOptions.columnDefs){var e=lC.ALL_PROPERTIES,i=function(n,o){var s=Object.getOwnPropertyNames(n);t.checkProperties(s,Jn(Jn([],Qn(e)),Qn(wp)),e,o,"https://www.ag-grid.com/javascript-data-grid/column-properties/"),n.children&&n.children.forEach(function(a){return i(a,"columnDefs.children")})};this.gridOptions.columnDefs.forEach(function(n){return i(n,"columnDefs")}),this.gridOptions.defaultColDef&&i(this.gridOptions.defaultColDef,"defaultColDef")}},r.prototype.checkColumnDefViolations=function(){var t,e=null!==(t=this.gridOptionsService.get("rowModelType"))&&void 0!==t?t:"clientSide",n={infinite:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],viewport:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],serverSide:["headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],clientSide:[]}[e];if(n){var o="multiple"===this.gridOptionsService.get("rowSelection"),s=["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],a=function(l){o||s.forEach(function(u){u in l&&l[u]&&console.warn("AG Grid: Column property "+u+" is not supported unless rowSelection='multiple'.")}),n.forEach(function(u){u in l&&l[u]&&console.warn("AG Grid: Column property "+u+" is not supported with the row model type "+e+".")})};null!=this.gridOptions.columnDefs&&this.gridOptions.columnDefs.forEach(function(l){return a(l)}),null!=this.gridOptions.autoGroupColumnDef&&a(this.gridOptions.autoGroupColumnDef),null!=this.gridOptions.defaultColDef&&a(this.gridOptions.defaultColDef)}},r.prototype.checkGridOptionsProperties=function(){var t=Object.getOwnPropertyNames(this.gridOptions),e=Jn(Jn([],Qn(On.ALL_PROPERTIES)),Qn(gr.EVENT_CALLBACKS)),i=Jn(Jn(Jn(Jn([],Qn(e)),["api","columnApi"]),Qn(wp)),Qn(Object.keys(this.deprecatedProperties)));this.checkProperties(t,i,e,"gridOptions","https://www.ag-grid.com/javascript-data-grid/grid-options/")},r.prototype.checkProperties=function(t,e,i,n,o){var s=Cp(t,e,i);He(s,function(a,l){ge(function(){return console.warn("AG Grid: invalid "+n+" property '"+a+"' did you mean any of these: "+l.slice(0,8).join(", "))},"invalidProperty"+n+a)}),Object.keys(s).length>0&&ge(function(){return console.warn("AG Grid: to see all the valid "+n+" properties please check: "+o)},"invalidProperties"+n+o)},r.prototype.checkForDeprecated=function(){var t=this.gridOptions;Object.entries(this.deprecatedProperties).forEach(function(e){var i,n=Qn(e,2),o=n[0],s=n[1],a=t[o];a&&(Si(s.version,o,s.newProp,s.message),s.copyToNewProp&&s.newProp&&null==t[s.newProp]&&(t[s.newProp]=null!==(i=s.newPropValue)&&void 0!==i?i:a))}),t.serverSideStoreType&&(console.warn("AG Grid: since v29.0, `serverSideStoreType` has been replaced by `suppressServerSideInfiniteScroll`. Set to false to use Partial Store, and true to use Full Store."),t.suppressServerSideInfiniteScroll="partial"!==t.serverSideStoreType)},r.prototype.checkForViolations=function(){this.gridOptionsService.is("treeData")&&this.treeDataViolations()},r.prototype.treeDataViolations=function(){this.gridOptionsService.isRowModelType("clientSide")&&(this.gridOptionsService.exists("getDataPath")||console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data.")),this.gridOptionsService.isRowModelType("serverSide")&&(this.gridOptionsService.exists("isServerSideGroup")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),this.gridOptionsService.exists("getServerSideGroupKey")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))},Ba([S("gridOptions")],r.prototype,"gridOptions",void 0),Ba([S("gridOptionsService")],r.prototype,"gridOptionsService",void 0),Ba([V],r.prototype,"init",null),Ba([X("gridOptionsValidator")],r)}();function Ju(r,t){var e=["groupRows","multipleColumns","custom","singleColumn"];return e.indexOf(t)<0?(console.warn("AG Grid: '"+t+"' is not a valid groupDisplayType value - possible values are: '"+e.join("', '")+"'"),!1):t===r}var fC=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),mt=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},vC=function(r,t){return function(e,i){t(e,i,r)}},Ni=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},Gi=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},Sp=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yC=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.primaryHeaderRowCount=0,e.secondaryHeaderRowCount=0,e.gridHeaderRowCount=0,e.displayedColumnsLeft=[],e.displayedColumnsRight=[],e.displayedColumnsCenter=[],e.displayedColumns=[],e.displayedColumnsAndGroupsMap={},e.viewportColumns=[],e.viewportColumnsHash="",e.headerViewportColumns=[],e.viewportColumnsCenter=[],e.headerViewportColumnsCenter=[],e.autoHeightActiveAtLeastOnce=!1,e.rowGroupColumns=[],e.valueColumns=[],e.pivotColumns=[],e.ready=!1,e.autoGroupsNeedBuilding=!1,e.forceRecreateAutoGroups=!1,e.pivotMode=!1,e.bodyWidth=0,e.leftWidth=0,e.rightWidth=0,e.bodyWidthDirty=!0,e.shouldQueueResizeOperations=!1,e.resizeOperationQueue=[],e}return fC(t,r),t.prototype.init=function(){var e=this;this.suppressColumnVirtualisation=this.gridOptionsService.is("suppressColumnVirtualisation");var i=this.gridOptionsService.is("pivotMode");this.isPivotSettingAllowed(i)&&(this.pivotMode=i),this.addManagedPropertyListeners(["groupDisplayType","treeData"],function(){return e.buildAutoGroupColumns()}),this.addManagedPropertyListener("autoGroupColumnDef",function(){return e.onAutoGroupColumnDefChanged()}),this.addManagedPropertyListener("defaultColDef",function(n){return e.onSharedColDefChanged(n.source)}),this.addManagedPropertyListener("columnTypes",function(n){return e.onSharedColDefChanged(n.source)})},t.prototype.buildAutoGroupColumns=function(){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged"))},t.prototype.onAutoGroupColumnDefChanged=function(){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns)},t.prototype.onSharedColDefChanged=function(e){void 0===e&&(e="api"),this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns),this.createColumnsFromColumnDefs(!0,e)},t.prototype.setColumnDefs=function(e,i){void 0===i&&(i="api");var n=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(n,i)},t.prototype.recreateColumnDefs=function(e){void 0===e&&(e="api"),this.onSharedColDefChanged(e)},t.prototype.destroyOldColumns=function(e,i){var n={};if(e){this.columnUtils.depthFirstOriginalTreeSearch(null,e,function(s){n[s.getInstanceId()]=s}),i&&this.columnUtils.depthFirstOriginalTreeSearch(null,i,function(s){n[s.getInstanceId()]=null});var o=Object.values(n).filter(function(s){return null!=s});this.destroyBeans(o)}},t.prototype.destroyColumns=function(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)},t.prototype.createColumnsFromColumnDefs=function(e,i){var n=this;void 0===i&&(i="api");var o=e?this.compareColumnStatesAndDispatchEvents(i):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var s=this.primaryColumns,l=this.columnFactory.createColumnTree(this.columnDefs,!0,this.primaryColumnTree);this.destroyOldColumns(this.primaryColumnTree,l.columnTree),this.primaryColumnTree=l.columnTree,this.primaryHeaderRowCount=l.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(function(d){return n.primaryColumnsMap[d.getId()]=d}),this.extractRowGroupColumns(i,s),this.extractPivotColumns(i,s),this.extractValueColumns(i,s),this.ready=!0,(this.gridColsArePrimary||void 0===this.gridColsArePrimary||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),e&&this.gridColsArePrimary&&!this.gridOptionsService.is("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(i),this.checkViewportColumns()),this.dispatchEverythingChanged(i),o&&o(),this.dispatchNewColumnsLoaded(i)},t.prototype.dispatchNewColumnsLoaded=function(e){this.eventService.dispatchEvent({type:E.EVENT_NEW_COLUMNS_LOADED,source:e})},t.prototype.dispatchEverythingChanged=function(e){void 0===e&&(e="api"),this.eventService.dispatchEvent({type:E.EVENT_COLUMN_EVERYTHING_CHANGED,source:e})},t.prototype.orderGridColumnsLikePrimary=function(){var e=this,i=this.primaryColumns;if(i){var n=i.filter(function(s){return e.gridColumns.indexOf(s)>=0}),o=this.gridColumns.filter(function(s){return n.indexOf(s)<0});this.gridColumns=Gi(Gi([],Ni(o)),Ni(n)),this.gridColumns=this.placeLockedColumns(this.gridColumns)}},t.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},t.prototype.setViewport=function(){this.gridOptionsService.is("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},t.prototype.getDisplayedColumnsStartingAt=function(e){for(var i=e,n=[];null!=i;)n.push(i),i=this.getDisplayedColAfter(i);return n},t.prototype.checkViewportColumns=function(e){void 0===e&&(e=!1),null!=this.displayedColumnsCenter&&this.extractViewport()&&this.eventService.dispatchEvent({type:E.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:e})},t.prototype.setViewportPosition=function(e,i,n){void 0===n&&(n=!1),(e!==this.scrollWidth||i!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=i,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(n))},t.prototype.isPivotMode=function(){return this.pivotMode},t.prototype.isPivotSettingAllowed=function(e){return!e||!this.gridOptionsService.is("treeData")||(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1)},t.prototype.setPivotMode=function(e,i){void 0===i&&(i="api"),e!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)&&(this.pivotMode=e,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(i),this.eventService.dispatchEvent({type:E.EVENT_COLUMN_PIVOT_MODE_CHANGED}))},t.prototype.getSecondaryPivotColumn=function(e,i){if(ie(this.secondaryColumns))return null;var n=this.getPrimaryColumn(i),o=null;return this.secondaryColumns.forEach(function(s){var a=s.getColDef().pivotKeys,l=s.getColDef().pivotValueColumn;Yn(a,e)&&l===n&&(o=s)}),o},t.prototype.setBeans=function(e){this.logger=e.create("columnModel")},t.prototype.setFirstRightAndLastLeftPinned=function(e){var i,n;this.gridOptionsService.is("enableRtl")?(i=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,n=this.displayedColumnsRight?Pe(this.displayedColumnsRight):null):(i=this.displayedColumnsLeft?Pe(this.displayedColumnsLeft):null,n=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(function(o){o.setLastLeftPinned(o===i,e),o.setFirstRightPinned(o===n,e)})},t.prototype.autoSizeColumns=function(e){var i=this;if(this.shouldQueueResizeOperations)this.resizeOperationQueue.push(function(){return i.autoSizeColumns(e)});else{var n=e.columns,o=e.skipHeader,s=e.skipHeaderGroups,a=e.stopAtGroup,l=e.source,u=void 0===l?"api":l;this.animationFrameService.flushAllFrames();for(var c=[],d=-1,h=o??this.gridOptionsService.is("skipHeaderOnAutoSize"),p=s??h;0!==d;)d=0,this.actionOnGridColumns(n,function(f){if(c.indexOf(f)>=0)return!1;var v=i.autoWidthCalculator.getPreferredWidthForColumn(f,h);if(v>0){var g=i.normaliseColumnWidth(f,v);f.setActualWidth(g,u),c.push(f),d++}return!0},u);p||this.autoSizeColumnGroupsByColumns(n,u,a),this.dispatchColumnResizedEvent(c,!0,"autosizeColumns")}},t.prototype.dispatchColumnResizedEvent=function(e,i,n,o){void 0===o&&(o=null),e&&e.length&&this.eventService.dispatchEvent({type:E.EVENT_COLUMN_RESIZED,columns:e,column:1===e.length?e[0]:null,flexColumns:o,finished:i,source:n})},t.prototype.dispatchColumnChangedEvent=function(e,i,n){this.eventService.dispatchEvent({type:e,columns:i,column:i&&1==i.length?i[0]:null,source:n})},t.prototype.dispatchColumnMovedEvent=function(e){var i=e.movedColumns;this.eventService.dispatchEvent({type:E.EVENT_COLUMN_MOVED,columns:i,column:i&&1===i.length?i[0]:null,toIndex:e.toIndex,finished:e.finished,source:e.source})},t.prototype.dispatchColumnPinnedEvent=function(e,i){if(e.length){var n=1===e.length?e[0]:null,o=this.getCommonValue(e,function(a){return a.getPinned()});this.eventService.dispatchEvent({type:E.EVENT_COLUMN_PINNED,pinned:o??null,columns:e,column:n,source:i})}},t.prototype.dispatchColumnVisibleEvent=function(e,i){if(e.length){var n=1===e.length?e[0]:null,o=this.getCommonValue(e,function(a){return a.isVisible()});this.eventService.dispatchEvent({type:E.EVENT_COLUMN_VISIBLE,visible:o,columns:e,column:n,source:i})}},t.prototype.autoSizeColumn=function(e,i,n){void 0===n&&(n="api"),e&&this.autoSizeColumns({columns:[e],skipHeader:i,skipHeaderGroups:!0,source:n})},t.prototype.autoSizeColumnGroupsByColumns=function(e,i,n){var o,s,a,l,d,u=new Set;this.getGridColumns(e).forEach(function(C){for(var w=C.getParent();w&&w!=n;)w.isPadding()||u.add(w),w=w.getParent()});try{for(var p=Sp(u),f=p.next();!f.done;f=p.next()){var v=f.value;try{for(var g=(a=void 0,Sp(this.ctrlsService.getHeaderRowContainerCtrls())),y=g.next();!y.done&&!(d=y.value.getHeaderCtrlForColumn(v));y=g.next());}catch(C){a={error:C}}finally{try{y&&!y.done&&(l=g.return)&&l.call(g)}finally{if(a)throw a.error}}d&&d.resizeLeafColumnsToFit(i)}}catch(C){o={error:C}}finally{try{f&&!f.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}return[]},t.prototype.autoSizeAllColumns=function(e,i){var n=this;if(void 0===i&&(i="api"),this.shouldQueueResizeOperations)this.resizeOperationQueue.push(function(){return n.autoSizeAllColumns(e,i)});else{var o=this.getAllDisplayedColumns();this.autoSizeColumns({columns:o,skipHeader:e,source:i})}},t.prototype.getColumnsFromTree=function(e){var i=[],n=function(o){for(var s=0;s<o.length;s++){var a=o[s];a instanceof Ae?i.push(a):a instanceof ze&&n(a.getChildren())}};return n(e),i},t.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},t.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},t.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},t.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},t.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},t.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},t.prototype.isColumnDisplayed=function(e){return this.getAllDisplayedColumns().indexOf(e)>=0},t.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},t.prototype.getViewportColumns=function(){return this.viewportColumns},t.prototype.getDisplayedLeftColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft},t.prototype.getDisplayedRightColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight},t.prototype.isColSpanActive=function(){return this.colSpanActive},t.prototype.getDisplayedColumnsForRow=function(e,i,n,o){for(var u,s=[],a=null,l=function(d){var m,h=i[d],p=i.length-d,f=Math.min(h.getColSpan(e),p),v=[h];if(f>1){for(var g=f-1,y=1;y<=g;y++)v.push(i[d+y]);d+=g}n?(m=!1,v.forEach(function(w){n(w)&&(m=!0)})):m=!0,m&&(0===s.length&&a&&o&&o(h)&&s.push(a),s.push(h)),a=h,u=d},c=0;c<i.length;c++)l(c),c=u;return s},t.prototype.getViewportCenterColumnsForRow=function(e){var i=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var o=this.suppressColumnVirtualisation?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,o,function(s){var a=s.getLeft();return I(a)&&a>i.viewportLeft})},t.prototype.getAriaColumnIndex=function(e){return this.getAllGridColumns().indexOf(e)+1},t.prototype.isColumnInHeaderViewport=function(e){return!!e.isAutoHeaderHeight()||this.isColumnInRowViewport(e)},t.prototype.isColumnInRowViewport=function(e){if(e.isAutoHeight())return!0;var i=e.getLeft()||0,n=i+e.getActualWidth(),o=this.viewportLeft-200,s=this.viewportRight+200;return!(i<o&&n<o||i>s&&n>s)},t.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},t.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},t.prototype.updatePrimaryColumnList=function(e,i,n,o,s,a){var l=this;if(void 0===a&&(a="api"),e&&!ei(e)){var u=!1;e.forEach(function(d){var h=l.getPrimaryColumn(d);if(h){if(n){if(i.indexOf(h)>=0)return;i.push(h)}else{if(i.indexOf(h)<0)return;ii(i,h)}o(h),u=!0}}),u&&(this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(a),this.eventService.dispatchEvent({type:s,columns:i,column:1===i.length?i[0]:null,source:a}))}},t.prototype.setRowGroupColumns=function(e,i){void 0===i&&(i="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,E.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),i)},t.prototype.setRowGroupActive=function(e,i,n){e!==i.isRowGroupActive()&&(i.setRowGroupActive(e,n),e&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&this.setColumnVisible(i,!1,n),!e&&!this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnVisible(i,!0,n))},t.prototype.addRowGroupColumn=function(e,i){void 0===i&&(i="api"),e&&this.addRowGroupColumns([e],i)},t.prototype.addRowGroupColumns=function(e,i){void 0===i&&(i="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),E.EVENT_COLUMN_ROW_GROUP_CHANGED,i)},t.prototype.removeRowGroupColumns=function(e,i){void 0===i&&(i="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),E.EVENT_COLUMN_ROW_GROUP_CHANGED,i)},t.prototype.removeRowGroupColumn=function(e,i){void 0===i&&(i="api"),e&&this.removeRowGroupColumns([e],i)},t.prototype.addPivotColumns=function(e,i){void 0===i&&(i="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!0,function(n){return n.setPivotActive(!0,i)},E.EVENT_COLUMN_PIVOT_CHANGED,i)},t.prototype.setPivotColumns=function(e,i){void 0===i&&(i="api"),this.setPrimaryColumnList(e,this.pivotColumns,E.EVENT_COLUMN_PIVOT_CHANGED,!0,function(n,o){o.setPivotActive(n,i)},i)},t.prototype.addPivotColumn=function(e,i){void 0===i&&(i="api"),this.addPivotColumns([e],i)},t.prototype.removePivotColumns=function(e,i){void 0===i&&(i="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!1,function(n){return n.setPivotActive(!1,i)},E.EVENT_COLUMN_PIVOT_CHANGED,i)},t.prototype.removePivotColumn=function(e,i){void 0===i&&(i="api"),this.removePivotColumns([e],i)},t.prototype.setPrimaryColumnList=function(e,i,n,o,s,a){var l=this,u=new Map;i.forEach(function(c,d){return u.set(c,d)}),i.length=0,I(e)&&e.forEach(function(c){var d=l.getPrimaryColumn(c);d&&i.push(d)}),i.forEach(function(c,d){var h=u.get(c);void 0!==h?o&&h!==d||u.delete(c):u.set(c,0)}),(this.primaryColumns||[]).forEach(function(c){var d=i.indexOf(c)>=0;s(d,c)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(a),this.dispatchColumnChangedEvent(n,Gi([],Ni(u.keys())),a)},t.prototype.setValueColumns=function(e,i){void 0===i&&(i="api"),this.setPrimaryColumnList(e,this.valueColumns,E.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),i)},t.prototype.setValueActive=function(e,i,n){if(e!==i.isValueActive()&&(i.setValueActive(e,n),e&&!i.getAggFunc())){var o=this.aggFuncService.getDefaultAggFunc(i);i.setAggFunc(o)}},t.prototype.addValueColumns=function(e,i){void 0===i&&(i="api"),this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),E.EVENT_COLUMN_VALUE_CHANGED,i)},t.prototype.addValueColumn=function(e,i){void 0===i&&(i="api"),e&&this.addValueColumns([e],i)},t.prototype.removeValueColumn=function(e,i){void 0===i&&(i="api"),this.removeValueColumns([e],i)},t.prototype.removeValueColumns=function(e,i){void 0===i&&(i="api"),this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),E.EVENT_COLUMN_VALUE_CHANGED,i)},t.prototype.normaliseColumnWidth=function(e,i){var n=e.getMinWidth();I(n)&&i<n&&(i=n);var o=e.getMaxWidth();return I(o)&&e.isGreaterThanMax(i)&&(i=o),i},t.prototype.getPrimaryOrGridColumn=function(e){return this.getPrimaryColumn(e)||this.getGridColumn(e)},t.prototype.setColumnWidths=function(e,i,n,o){var s=this;void 0===o&&(o="api");var a=[];e.forEach(function(l){var u=s.getPrimaryOrGridColumn(l.key);if(u&&(a.push({width:l.newWidth,ratios:[1],columns:[u]}),"shift"===s.gridOptionsService.get("colResizeDefault")&&(i=!i),i)){var d=s.getDisplayedColAfter(u);if(!d)return;var h=u.getActualWidth()-l.newWidth,p=d.getActualWidth()+h;a.push({width:p,ratios:[1],columns:[d]})}}),0!==a.length&&this.resizeColumnSets({resizeSets:a,finished:n,source:o})},t.prototype.checkMinAndMaxWidthsForSet=function(e){var n=e.width,o=0,s=0,a=!0;return e.columns.forEach(function(c){var d=c.getMinWidth();o+=d||0;var h=c.getMaxWidth();I(h)&&h>0?s+=h:a=!1}),n>=o&&(!a||n<=s)},t.prototype.resizeColumnSets=function(e){var i=this,n=e.resizeSets,o=e.finished,s=e.source;if(!n||n.every(function(f){return i.checkMinAndMaxWidthsForSet(f)})){var u=[],c=[];n.forEach(function(f){var v=f.width,g=f.columns,y=f.ratios,m={},C={};g.forEach(function(x){return c.push(x)});for(var w=!0,_=0,b=function(){if(++_>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";w=!1;var x=[],D=0,T=v;g.forEach(function(A,N){C[A.getId()]?T-=m[A.getId()]:(x.push(A),D+=y[N])});var L=1/D;x.forEach(function(A,N){var j;N===x.length-1?j=T:(j=Math.round(y[N]*v*L),T-=j);var z=A.getMinWidth(),B=A.getMaxWidth();I(z)&&j<z?(j=z,C[A.getId()]=!0,w=!0):I(B)&&B>0&&j>B&&(j=B,C[A.getId()]=!0,w=!0),m[A.getId()]=j})};w&&"break"!==b(););g.forEach(function(x){var D=m[x.getId()];x.getActualWidth()!==D&&(x.setActualWidth(D,s),u.push(x))})});var d=u.length>0,h=[];d&&(h=this.refreshFlexedColumns({resizingCols:c,skipSetLeft:!0}),this.setLeftValues(s),this.updateBodyWidths(),this.checkViewportColumns());var p=c.concat(h);(d||o)&&this.dispatchColumnResizedEvent(p,o,s,h)}else o&&this.dispatchColumnResizedEvent(n&&n.length>0?n[0].columns:null,o,s)},t.prototype.setColumnAggFunc=function(e,i,n){if(void 0===n&&(n="api"),e){var o=this.getPrimaryColumn(e);o&&(o.setAggFunc(i),this.dispatchColumnChangedEvent(E.EVENT_COLUMN_VALUE_CHANGED,[o],n))}},t.prototype.moveRowGroupColumn=function(e,i,n){void 0===n&&(n="api");var o=this.rowGroupColumns[e],s=this.rowGroupColumns.slice(e,i);this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(i,0,o),this.eventService.dispatchEvent({type:E.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:s,column:1===s.length?s[0]:null,source:n})},t.prototype.moveColumns=function(e,i,n,o){if(void 0===n&&(n="api"),void 0===o&&(o=!0),this.columnAnimationService.start(),i>this.gridColumns.length-e.length)return console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+i),void console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");var s=this.getGridColumns(e);!this.doesMovePassRules(s,i)||($u(this.gridColumns,s,i),this.updateDisplayedColumns(n),this.dispatchColumnMovedEvent({movedColumns:s,source:n,toIndex:i,finished:o}),this.columnAnimationService.finish())},t.prototype.doesMovePassRules=function(e,i){var n=this.getProposedColumnOrder(e,i);return this.doesOrderPassRules(n)},t.prototype.doesOrderPassRules=function(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))},t.prototype.getProposedColumnOrder=function(e,i){var n=this.gridColumns.slice();return $u(n,e,i),n},t.prototype.sortColumnsLikeGridColumns=function(e){var i=this;!e||e.length<=1||e.filter(function(o){return i.gridColumns.indexOf(o)<0}).length>0||e.sort(function(o,s){return i.gridColumns.indexOf(o)-i.gridColumns.indexOf(s)})},t.prototype.doesMovePassLockedPositions=function(e){var i=0,n=!0;return e.forEach(function(s){var a=function(s){return s?!0===s||"left"===s?0:2:1}(s.getColDef().lockPosition);a<i&&(n=!1),i=a}),n},t.prototype.doesMovePassMarryChildren=function(e){var i=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(n){if(n instanceof ze){var o=n,s=o.getColGroupDef();if(s&&s.marryChildren){var l=[];o.getLeafColumns().forEach(function(p){var f=e.indexOf(p);l.push(f)}),Math.max.apply(Math,l)-Math.min.apply(Math,l)>o.getLeafColumns().length-1&&(i=!1)}}}),i},t.prototype.moveColumn=function(e,i,n){void 0===n&&(n="api"),this.moveColumns([e],i,n)},t.prototype.moveColumnByIndex=function(e,i,n){void 0===n&&(n="api"),this.moveColumn(this.gridColumns[e],i,n)},t.prototype.getColumnDefs=function(){var e=this;if(this.primaryColumns){var i=this.primaryColumns.slice();return this.gridColsArePrimary?i.sort(function(n,o){return e.gridColumns.indexOf(n)-e.gridColumns.indexOf(o)}):this.lastPrimaryOrder&&i.sort(function(n,o){return e.lastPrimaryOrder.indexOf(n)-e.lastPrimaryOrder.indexOf(o)}),this.columnDefFactory.buildColumnDefs(i,this.rowGroupColumns,this.pivotColumns)}},t.prototype.getBodyContainerWidth=function(){return this.bodyWidth},t.prototype.getContainerWidth=function(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}},t.prototype.updateBodyWidths=function(){var e=this.getWidthOfColsInList(this.displayedColumnsCenter),i=this.getWidthOfColsInList(this.displayedColumnsLeft),n=this.getWidthOfColsInList(this.displayedColumnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==i||this.rightWidth!==n)&&(this.bodyWidth=e,this.leftWidth=i,this.rightWidth=n,this.eventService.dispatchEvent({type:E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED}))},t.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},t.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},t.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},t.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},t.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},t.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},t.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},t.prototype.getDisplayedColumns=function(e){switch(e){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},t.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns.slice():null},t.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns.slice():null},t.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},t.prototype.getAllGridColumns=function(){return this.gridColumns},t.prototype.isEmpty=function(){return ei(this.gridColumns)},t.prototype.isRowGroupEmpty=function(){return ei(this.rowGroupColumns)},t.prototype.setColumnVisible=function(e,i,n){void 0===n&&(n="api"),this.setColumnsVisible([e],i,n)},t.prototype.setColumnsVisible=function(e,i,n){void 0===i&&(i=!1),void 0===n&&(n="api"),this.applyColumnState({state:e.map(function(o){return{colId:"string"==typeof o?o:o.getColId(),hide:!i}})},n)},t.prototype.setColumnPinned=function(e,i,n){void 0===n&&(n="api"),e&&this.setColumnsPinned([e],i,n)},t.prototype.setColumnsPinned=function(e,i,n){var o;void 0===n&&(n="api"),this.gridOptionsService.isDomLayout("print")?console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'"):(this.columnAnimationService.start(),o=!0===i||"left"===i?"left":"right"===i?"right":null,this.actionOnGridColumns(e,function(s){return s.getPinned()!==o&&(s.setPinned(o),!0)},n,function(){return{type:E.EVENT_COLUMN_PINNED,pinned:o,column:null,columns:null,source:n}}),this.columnAnimationService.finish())},t.prototype.actionOnGridColumns=function(e,i,n,o){var s=this;if(!ei(e)){var a=[];if(e.forEach(function(u){var c=s.getGridColumn(u);c&&!1!==i(c)&&a.push(c)}),a.length&&(this.updateDisplayedColumns(n),I(o)&&o)){var l=o();l.columns=a,l.column=1===a.length?a[0]:null,this.eventService.dispatchEvent(l)}}},t.prototype.getDisplayedColBefore=function(e){var i=this.getAllDisplayedColumns(),n=i.indexOf(e);return n>0?i[n-1]:null},t.prototype.getDisplayedColAfter=function(e){var i=this.getAllDisplayedColumns(),n=i.indexOf(e);return n<i.length-1?i[n+1]:null},t.prototype.getDisplayedGroupAfter=function(e){return this.getDisplayedGroupAtDirection(e,"After")},t.prototype.getDisplayedGroupBefore=function(e){return this.getDisplayedGroupAtDirection(e,"Before")},t.prototype.getDisplayedGroupAtDirection=function(e,i){for(var n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),o=e.getDisplayedLeafColumns(),s="After"===i?Pe(o):o[0],a="getDisplayedCol"+i;;){var l=this[a](s);if(!l)return null;var u=this.getColumnGroupAtLevel(l,n);if(u!==e)return u}},t.prototype.getColumnGroupAtLevel=function(e,i){for(var n=e.getParent();!(n.getProvidedColumnGroup().getLevel()+n.getPaddingLevel()<=i);)n=n.getParent();return n},t.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},t.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},t.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var e;return(e=[]).concat.apply(e,[this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[]])},t.prototype.createStateItemFromColumn=function(e){var i=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,n=e.isPivotActive()?this.pivotColumns.indexOf(e):null,o=e.isValueActive()?e.getAggFunc():null,s=null!=e.getSort()?e.getSort():null,a=null!=e.getSortIndex()?e.getSortIndex():null,l=null!=e.getFlex()&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:s,sortIndex:a,aggFunc:o,rowGroup:e.isRowGroupActive(),rowGroupIndex:i,pivot:e.isPivotActive(),pivotIndex:n,flex:l}},t.prototype.getColumnState=function(){if(ie(this.primaryColumns)||!this.isAlive())return[];var i=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(i),i},t.prototype.orderColumnStateList=function(e){var i=Xn(this.gridColumns.map(function(n,o){return[n.getColId(),o]}));e.sort(function(n,o){return(i.has(n.colId)?i.get(n.colId):-1)-(i.has(o.colId)?i.get(o.colId):-1)})},t.prototype.resetColumnState=function(e){var i=this;void 0===e&&(e="api");var n=this.getColumnsFromTree(this.primaryColumnTree),o=[],s=1e3,a=1e3,l=[];this.groupAutoColumns&&(l=l.concat(this.groupAutoColumns)),n&&(l=l.concat(n)),l.forEach(function(u){var c=i.getColumnStateFromColDef(u);ie(c.rowGroupIndex)&&c.rowGroup&&(c.rowGroupIndex=s++),ie(c.pivotIndex)&&c.pivot&&(c.pivotIndex=a++),o.push(c)}),this.applyColumnState({state:o,applyOrder:!0},e)},t.prototype.getColumnStateFromColDef=function(e){var i=function(g,y){return g??y??null},n=e.getColDef(),o=i(n.sort,n.initialSort),s=i(n.sortIndex,n.initialSortIndex),a=i(n.hide,n.initialHide),l=i(n.pinned,n.initialPinned),u=i(n.width,n.initialWidth),c=i(n.flex,n.initialFlex),d=i(n.rowGroupIndex,n.initialRowGroupIndex),h=i(n.rowGroup,n.initialRowGroup);null==d&&(null==h||0==h)&&(d=null,h=null);var p=i(n.pivotIndex,n.initialPivotIndex),f=i(n.pivot,n.initialPivot);null==p&&(null==f||0==f)&&(p=null,f=null);var v=i(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:o,sortIndex:s,hide:a,pinned:l,width:u,flex:c,rowGroup:h,rowGroupIndex:d,pivot:f,pivotIndex:p,aggFunc:v}},t.prototype.applyColumnState=function(e,i){var n=this;if(ei(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;var o=function(u,c,d){var h=n.compareColumnStatesAndDispatchEvents(i);n.autoGroupsNeedBuilding=!0;var p=c.slice(),f={},v={},g=[],y=[],m=0,C=n.rowGroupColumns.slice(),w=n.pivotColumns.slice();u.forEach(function(x){var D=x.colId||"";if(D.startsWith(vr))return g.push(x),void y.push(x);var L=d(D);L?(n.syncColumnWithStateItem(L,x,e.defaultState,f,v,!1,i),ii(p,L)):(y.push(x),m+=1)});var _=function(x){return n.syncColumnWithStateItem(x,null,e.defaultState,f,v,!1,i)};p.forEach(_);var b=function(x,D,T,L){var A=x[T.getId()],N=x[L.getId()],H=null!=A,j=null!=N;if(H&&j)return A-N;if(H)return-1;if(j)return 1;var z=D.indexOf(T),B=D.indexOf(L),G=z>=0;return G&&B>=0?z-B:G?-1:1};n.rowGroupColumns.sort(b.bind(n,f,C)),n.pivotColumns.sort(b.bind(n,v,w)),n.updateGridColumns();var O=n.groupAutoColumns?n.groupAutoColumns.slice():[];return g.forEach(function(x){var D=n.getAutoColumn(x.colId);ii(O,D),n.syncColumnWithStateItem(D,x,e.defaultState,null,null,!0,i)}),O.forEach(_),n.applyOrderAfterApplyState(e),n.updateDisplayedColumns(i),n.dispatchEverythingChanged(i),h(),{unmatchedAndAutoStates:y,unmatchedCount:m}};this.columnAnimationService.start();var s=o(e.state||[],this.primaryColumns||[],function(u){return n.getPrimaryColumn(u)}),a=s.unmatchedAndAutoStates,l=s.unmatchedCount;return(a.length>0||I(e.defaultState))&&(l=o(a,this.secondaryColumns||[],function(u){return n.getSecondaryColumn(u)}).unmatchedCount),this.columnAnimationService.finish(),0===l},t.prototype.applyOrderAfterApplyState=function(e){var i=this;if(e.applyOrder&&e.state){var n=[],o={};e.state.forEach(function(a){if(a.colId&&!o[a.colId]){var l=i.gridColumnsMap[a.colId];l&&(n.push(l),o[a.colId]=!0)}});var s=0;if(this.gridColumns.forEach(function(a){var l=a.getColId();null!=o[l]||(l.startsWith(vr)?us(n,a,s++):n.push(a))}),n=this.placeLockedColumns(n),!this.doesMovePassMarryChildren(n))return void console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");this.gridColumns=n}},t.prototype.compareColumnStatesAndDispatchEvents=function(e){var i=this,n={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},o=this.getColumnState(),s={};return o.forEach(function(a){s[a.colId]=a}),function(){var a=i.getPrimaryAndSecondaryAndAutoColumns(),l=function(y,m,C,w){if(!Yn(m.map(w),C.map(w))){var x=new Set(m);C.forEach(function(L){x.delete(L)||x.add(L)});var D=Gi([],Ni(x));i.eventService.dispatchEvent({type:y,columns:D,column:1===D.length?D[0]:null,source:e})}},u=function(y){var m=[];return a.forEach(function(C){var w=s[C.getColId()];w&&y(w,C)&&m.push(C)}),m},c=function(y){return y.getColId()};l(E.EVENT_COLUMN_ROW_GROUP_CHANGED,n.rowGroupColumns,i.rowGroupColumns,c),l(E.EVENT_COLUMN_PIVOT_CHANGED,n.pivotColumns,i.pivotColumns,c);var h=u(function(y,m){var C=null!=y.aggFunc,w=C!=m.isValueActive(),_=C&&y.aggFunc!=m.getAggFunc();return w||_});h.length>0&&i.dispatchColumnChangedEvent(E.EVENT_COLUMN_VALUE_CHANGED,h,e),i.dispatchColumnResizedEvent(u(function(y,m){return y.width!=m.getActualWidth()}),!0,e),i.dispatchColumnPinnedEvent(u(function(y,m){return y.pinned!=m.getPinned()}),e),i.dispatchColumnVisibleEvent(u(function(y,m){return y.hide==m.isVisible()}),e),u(function(y,m){return y.sort!=m.getSort()||y.sortIndex!=m.getSortIndex()}).length>0&&i.sortController.dispatchSortChangedEvents(e),i.normaliseColumnMovedEventForColumnState(o,e)}},t.prototype.getCommonValue=function(e,i){if(e&&0!=e.length){for(var n=i(e[0]),o=1;o<e.length;o++)if(n!==i(e[o]))return;return n}},t.prototype.normaliseColumnMovedEventForColumnState=function(e,i){var n=this,o=this.getColumnState(),s={};o.forEach(function(d){return s[d.colId]=d});var a={};e.forEach(function(d){s[d.colId]&&(a[d.colId]=!0)});var l=e.filter(function(d){return a[d.colId]}),u=o.filter(function(d){return a[d.colId]}),c=[];u.forEach(function(d,h){var p=l&&l[h];if(p&&p.colId!==d.colId){var f=n.getGridColumn(p.colId);f&&c.push(f)}}),c.length&&this.dispatchColumnMovedEvent({movedColumns:c,source:i,finished:!0})},t.prototype.syncColumnWithStateItem=function(e,i,n,o,s,a,l){if(e){var u=function(D,T){var L={value1:void 0,value2:void 0},A=!1;return i&&(void 0!==i[D]&&(L.value1=i[D],A=!0),I(T)&&void 0!==i[T]&&(L.value2=i[T],A=!0)),!A&&n&&(void 0!==n[D]&&(L.value1=n[D]),I(T)&&void 0!==n[T]&&(L.value2=n[T])),L},c=u("hide").value1;void 0!==c&&e.setVisible(!c,l);var d=u("pinned").value1;void 0!==d&&e.setPinned(d);var h=this.columnUtils.calculateColMinWidth(e.getColDef()),p=u("flex").value1;if(void 0!==p&&e.setFlex(p),e.getFlex()<=0){var v=u("width").value1;null!=v&&null!=h&&v>=h&&e.setActualWidth(v,l)}var g=u("sort").value1;void 0!==g&&e.setSort("desc"===g||"asc"===g?g:void 0,l);var y=u("sortIndex").value1;if(void 0!==y&&e.setSortIndex(y),!a&&e.isPrimary()){var m=u("aggFunc").value1;void 0!==m&&("string"==typeof m?(e.setAggFunc(m),e.isValueActive()||(e.setValueActive(!0,l),this.valueColumns.push(e))):(I(m)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,l),ii(this.valueColumns,e))));var C=u("rowGroup","rowGroupIndex"),w=C.value1,_=C.value2;(void 0!==w||void 0!==_)&&("number"==typeof _||w?(e.isRowGroupActive()||(e.setRowGroupActive(!0,l),this.rowGroupColumns.push(e)),o&&"number"==typeof _&&(o[e.getId()]=_)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,l),ii(this.rowGroupColumns,e)));var b=u("pivot","pivotIndex"),O=b.value1,x=b.value2;(void 0!==O||void 0!==x)&&("number"==typeof x||O?(e.isPivotActive()||(e.setPivotActive(!0,l),this.pivotColumns.push(e)),s&&"number"==typeof x&&(s[e.getId()]=x)):e.isPivotActive()&&(e.setPivotActive(!1,l),ii(this.pivotColumns,e)))}}},t.prototype.getGridColumns=function(e){return this.getColumns(e,this.getGridColumn.bind(this))},t.prototype.getColumns=function(e,i){var n=[];return e&&e.forEach(function(o){var s=i(o);s&&n.push(s)}),n},t.prototype.getColumnWithValidation=function(e){if(null==e)return null;var i=this.getGridColumn(e);return i||console.warn("AG Grid: could not find column "+e),i},t.prototype.getPrimaryColumn=function(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null},t.prototype.getGridColumn=function(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)},t.prototype.lookupGridColumn=function(e){return this.gridColumnsMap[e]},t.prototype.getSecondaryColumn=function(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null},t.prototype.getColumn=function(e,i,n){if(!e)return null;if("string"==typeof e&&n[e])return n[e];for(var o=0;o<i.length;o++)if(this.columnsMatch(i[o],e))return i[o];return this.getAutoColumn(e)},t.prototype.getSourceColumnsForGroupColumn=function(e){var i=e.getColDef().showRowGroup;if(!i)return null;if(!0===i)return this.rowGroupColumns.slice(0);var n=this.getPrimaryColumn(i);return n?[n]:null},t.prototype.getAutoColumn=function(e){var i=this;return this.groupAutoColumns&&I(this.groupAutoColumns)&&!ie(this.groupAutoColumns)&&this.groupAutoColumns.find(function(n){return i.columnsMatch(n,e)})||null},t.prototype.columnsMatch=function(e,i){var n=e===i,o=e.getColDef()===i,s=e.getColId()==i;return n||o||s},t.prototype.getDisplayNameForColumn=function(e,i,n){if(void 0===n&&(n=!1),!e)return null;var o=this.getHeaderName(e.getColDef(),e,null,null,i);return n?this.wrapHeaderNameWithAggFunc(e,o):o},t.prototype.getDisplayNameForProvidedColumnGroup=function(e,i,n){var o=i?i.getColGroupDef():null;return o?this.getHeaderName(o,null,e,i,n):null},t.prototype.getDisplayNameForColumnGroup=function(e,i){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),i)},t.prototype.getHeaderName=function(e,i,n,o,s){var a=e.headerValueGetter;if(a){var l={colDef:e,column:i,columnGroup:n,providedColumnGroup:o,location:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return"function"==typeof a?a(l):"string"==typeof a?this.expressionService.evaluate(a,l):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}return null!=e.headerName?e.headerName:e.field?yp(e.field):""},t.prototype.wrapHeaderNameWithAggFunc=function(e,i){if(this.gridOptionsService.is("suppressAggFuncInHeader"))return i;var a,n=e.getColDef().pivotValueColumn,s=null;if(I(n)){var l=this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&1===this.valueColumns.length,u=void 0!==e.getColDef().pivotTotalColumnIds;if(l&&!u)return i;s=n?n.getAggFunc():null,a=!0}else{var c=e.isValueActive(),d=this.pivotMode||!this.isRowGroupEmpty();c&&d?(s=e.getAggFunc(),a=!0):a=!1}if(a){var h="string"==typeof s?s:"func";return this.localeService.getLocaleTextFunc()(h,h)+"("+i+")"}return i},t.prototype.getColumnGroup=function(e,i){if(!e)return null;if(e instanceof yt)return e;var n=this.getAllDisplayedTrees(),o="number"==typeof i,s=null;return this.columnUtils.depthFirstAllColumnTreeSearch(n,function(a){if(a instanceof yt){var l=a;(o?e===l.getGroupId()&&i===l.getPartId():e===l.getGroupId())&&(s=l)}}),s},t.prototype.isReady=function(){return this.ready},t.prototype.extractValueColumns=function(e,i){this.valueColumns=this.extractColumns(i,this.valueColumns,function(n,o){return n.setValueActive(o,e)},function(){},function(){},function(n){var o=n.aggFunc;return null===o||""===o?null:void 0!==o?!!o:void 0},function(n){return null!=n.initialAggFunc&&""!=n.initialAggFunc}),this.valueColumns.forEach(function(n){var o=n.getColDef();null!=o.aggFunc&&""!=o.aggFunc?n.setAggFunc(o.aggFunc):n.getAggFunc()||n.setAggFunc(o.initialAggFunc)})},t.prototype.extractRowGroupColumns=function(e,i){this.rowGroupColumns=this.extractColumns(i,this.rowGroupColumns,function(n,o){return n.setRowGroupActive(o,e)},function(n){return n.rowGroupIndex},function(n){return n.initialRowGroupIndex},function(n){return n.rowGroup},function(n){return n.initialRowGroup})},t.prototype.extractColumns=function(e,i,n,o,s,a,l){void 0===e&&(e=[]),void 0===i&&(i=[]);var u=[],c=[];(this.primaryColumns||[]).forEach(function(p){var f=e.indexOf(p)<0,v=p.getColDef(),g=tn(a(v)),y=tn(l(v)),m=Ci(o(v)),C=Ci(s(v));(void 0!==g?g:void 0!==m?null!==m&&m>=0:f?void 0!==y?y:void 0!==C&&null!=C&&C>=0:i.indexOf(p)>=0)&&((f?null!=m||null!=C:null!=m)?u.push(p):c.push(p))});var d=function(p){var f=o(p.getColDef()),v=s(p.getColDef());return f??v};u.sort(function(p,f){var v=d(p),g=d(f);return v===g?0:v<g?-1:1});var h=[].concat(u);return i.forEach(function(p){c.indexOf(p)>=0&&h.push(p)}),c.forEach(function(p){h.indexOf(p)<0&&h.push(p)}),i.forEach(function(p){h.indexOf(p)<0&&n(p,!1)}),h.forEach(function(p){i.indexOf(p)<0&&n(p,!0)}),h},t.prototype.extractPivotColumns=function(e,i){this.pivotColumns=this.extractColumns(i,this.pivotColumns,function(n,o){return n.setPivotActive(o,e)},function(n){return n.pivotIndex},function(n){return n.initialPivotIndex},function(n){return n.pivot},function(n){return n.initialPivot})},t.prototype.resetColumnGroupState=function(e){void 0===e&&(e="api");var i=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,function(n){if(n instanceof ze){var o=n.getColGroupDef(),s={groupId:n.getGroupId(),open:o?o.openByDefault:void 0};i.push(s)}}),this.setColumnGroupState(i,e)},t.prototype.getColumnGroupState=function(){var e=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(i){i instanceof ze&&e.push({groupId:i.getGroupId(),open:i.isExpanded()})}),e},t.prototype.setColumnGroupState=function(e,i){var n=this;void 0===i&&(i="api"),this.columnAnimationService.start();var o=[];e.forEach(function(s){var l=s.open,u=n.getProvidedColumnGroup(s.groupId);u&&u.isExpanded()!==l&&(n.logger.log("columnGroupOpened("+u.getGroupId()+","+l+")"),u.setExpanded(l),o.push(u))}),this.updateGroupsAndDisplayedColumns(i),this.setFirstRightAndLastLeftPinned(i),o.forEach(function(s){n.eventService.dispatchEvent({type:E.EVENT_COLUMN_GROUP_OPENED,columnGroup:s})}),this.columnAnimationService.finish()},t.prototype.setColumnGroupOpened=function(e,i,n){var o;void 0===n&&(n="api"),o=e instanceof ze?e.getId():e||"",this.setColumnGroupState([{groupId:o,open:i}],n)},t.prototype.getProvidedColumnGroup=function(e){"string"!=typeof e&&console.error("AG Grid: group key must be a string");var i=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(n){n instanceof ze&&n.getId()===e&&(i=n)}),i},t.prototype.calculateColumnsForDisplay=function(){var e=this;return this.pivotMode&&ie(this.secondaryColumns)?this.gridColumns.filter(function(n){var o=e.groupAutoColumns&&wi(e.groupAutoColumns,n),s=e.valueColumns&&wi(e.valueColumns,n);return o||s}):this.gridColumns.filter(function(n){return e.groupAutoColumns&&wi(e.groupAutoColumns,n)||n.isVisible()})},t.prototype.checkColSpanActiveInCols=function(e){var i=!1;return e.forEach(function(n){I(n.getColDef().colSpan)&&(i=!0)}),i},t.prototype.calculateColumnsForGroupDisplay=function(){var e=this;this.groupDisplayColumns=[],this.groupDisplayColumnsMap={},this.gridColumns.forEach(function(n){var o=n.getColDef(),s=o.showRowGroup;o&&I(s)&&(e.groupDisplayColumns.push(n),"string"==typeof s?e.groupDisplayColumnsMap[s]=n:!0===s&&e.getRowGroupColumns().forEach(function(a){e.groupDisplayColumnsMap[a.getId()]=n}))})},t.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},t.prototype.getGroupDisplayColumnForGroup=function(e){return this.groupDisplayColumnsMap[e]},t.prototype.updateDisplayedColumns=function(e){var i=this.calculateColumnsForDisplay();this.buildDisplayedTrees(i),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)},t.prototype.isSecondaryColumnsPresent=function(){return I(this.secondaryColumns)},t.prototype.setSecondaryColumns=function(e,i){var n=this;void 0===i&&(i="api");var o=e&&e.length>0;if(o||!ie(this.secondaryColumns)){if(o){this.processSecondaryColumnDefinitions(e);var s=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0);this.destroyOldColumns(this.secondaryBalancedTree,s.columnTree),this.secondaryBalancedTree=s.columnTree,this.secondaryHeaderRowCount=s.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(function(a){return n.secondaryColumnsMap[a.getId()]=a}),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(i)}},t.prototype.processSecondaryColumnDefinitions=function(e){var i=this.gridOptionsService.get("processPivotResultColDef")||this.gridOptionsService.get("processSecondaryColDef"),n=this.gridOptionsService.get("processPivotResultColGroupDef")||this.gridOptionsService.get("processSecondaryColGroupDef");if(i||n){var o=function(s){s.forEach(function(a){if(I(a.children)){var u=a;n&&n(u),o(u.children)}else i&&i(a)})};e&&o(e)}},t.prototype.updateGridColumns=function(){var n,e=this,i=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.secondaryColumns&&this.secondaryBalancedTree){var o=this.secondaryColumns.every(function(u){return void 0!==e.gridColumnsMap[u.getColId()]});this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,o&&(n=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,n=this.lastPrimaryOrder);if(this.createGroupAutoColumnsIfNeeded()&&n){var a=Xn(this.groupAutoColumns.map(function(u){return[u,!0]}));n=n.filter(function(u){return!a.has(u)}),n=Gi(Gi([],Ni(this.groupAutoColumns)),Ni(n))}this.addAutoGroupToGridColumns(),this.orderGridColsLike(n),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(function(u){return e.gridColumnsMap[u.getId()]=u}),this.setAutoHeightActive(),Yn(i,this.gridBalancedTree)||this.eventService.dispatchEvent({type:E.EVENT_GRID_COLUMNS_CHANGED})},t.prototype.setAutoHeightActive=function(){this.autoHeightActive=this.gridColumns.filter(function(n){return n.isAutoHeight()}).length>0,!this.autoHeightActive||(this.autoHeightActiveAtLeastOnce=!0,this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide"))||ge(function(){return console.warn("AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.")},"autoHeightActive.wrongRowModel")},t.prototype.orderGridColsLike=function(e){if(!ie(e)){var i=Xn(e.map(function(c,d){return[c,d]})),n=!0;if(this.gridColumns.forEach(function(c){i.has(c)&&(n=!1)}),!n){var o=Xn(this.gridColumns.map(function(c){return[c,!0]})),s=e.filter(function(c){return o.has(c)}),a=Xn(s.map(function(c){return[c,!0]})),l=this.gridColumns.filter(function(c){return!a.has(c)}),u=s.slice();l.forEach(function(c){var d=c.getOriginalParent();if(d){for(var h=[];!h.length&&d;)d.getLeafColumns().forEach(function(g){var y=u.indexOf(g)>=0,m=h.indexOf(g)<0;y&&m&&h.push(g)}),d=d.getOriginalParent();if(h.length){var f=h.map(function(g){return u.indexOf(g)}),v=Math.max.apply(Math,Gi([],Ni(f)));us(u,c,v+1)}else u.push(c)}else u.push(c)}),this.gridColumns=u}}},t.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},t.prototype.refreshQuickFilterColumns=function(){var e,i=null!==(e=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)&&void 0!==e?e:[];this.groupAutoColumns&&(i=i.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.is("includeHiddenColumnsInQuickFilter")?i:i.filter(function(n){return n.isVisible()||n.isRowGroupActive()})},t.prototype.placeLockedColumns=function(e){var i=[],n=[],o=[];return e.forEach(function(s){var a=s.getColDef().lockPosition;"right"===a?o.push(s):"left"===a||!0===a?i.push(s):n.push(s)}),Gi(Gi(Gi([],Ni(i)),Ni(n)),Ni(o))},t.prototype.addAutoGroupToGridColumns=function(){if(ie(this.groupAutoColumns))return this.destroyOldColumns(this.groupAutoColsBalancedTree),void(this.groupAutoColsBalancedTree=null);this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,e),this.groupAutoColsBalancedTree=e,this.gridBalancedTree=e.concat(this.gridBalancedTree)},t.prototype.clearDisplayedAndViewportColumns=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""},t.prototype.updateGroupsAndDisplayedColumns=function(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths(),this.eventService.dispatchEvent({type:E.EVENT_DISPLAYED_COLUMNS_CHANGED})},t.prototype.deriveDisplayedColumns=function(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(function(i){return i.isAutoHeight()})},t.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},t.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},t.prototype.joinDisplayedColumns=function(){this.displayedColumns=this.gridOptionsService.is("enableRtl")?this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},t.prototype.setLeftValues=function(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()},t.prototype.setLeftValuesOfColumns=function(e){var i=this;if(this.primaryColumns){var n=this.primaryColumns.slice(0),o=this.gridOptionsService.is("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(function(s){if(o){var a=i.getWidthOfColsInList(s);s.forEach(function(u){a-=u.getActualWidth(),u.setLeft(a,e)})}else{var l=0;s.forEach(function(u){u.setLeft(l,e),l+=u.getActualWidth()})}up(n,s)}),n.forEach(function(s){s.setLeft(null,e)})}},t.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(function(e){e.forEach(function(i){i instanceof yt&&i.checkLeft()})})},t.prototype.derivedDisplayedColumnsFromDisplayedTree=function(e,i){i.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,function(n){n instanceof Ae&&i.push(n)})},t.prototype.extractViewportColumns=function(){this.suppressColumnVirtualisation?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},t.prototype.getVirtualHeaderGroupRow=function(e,i){var n;switch(e){case"left":n=this.viewportRowLeft[i];break;case"right":n=this.viewportRowRight[i];break;default:n=this.viewportRowCenter[i]}return ie(n)&&(n=[]),n},t.prototype.calculateHeaderRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var e={};this.headerViewportColumns.forEach(function(n){return e[n.getId()]=!0});var i=function(n,o,s){for(var a=!1,l=0;l<n.length;l++){var u=n[l],c=!1;if(u instanceof Ae)c=!0===e[u.getId()];else{var h=u.getDisplayedChildren();h&&(c=i(h,o,s+1))}c&&(a=!0,o[s]||(o[s]=[]),o[s].push(u))}return a};i(this.displayedTreeLeft,this.viewportRowLeft,0),i(this.displayedTreeRight,this.viewportRowRight,0),i(this.displayedTreeCentre,this.viewportRowCenter,0)},t.prototype.extractViewport=function(){this.extractViewportColumns();var i=this.viewportColumns.map(function(o){return o.getId()+"-"+(o.getPinned()||"normal")}).join("#"),n=this.viewportColumnsHash!==i;return n&&(this.viewportColumnsHash=i,this.calculateHeaderRows()),n},t.prototype.refreshFlexedColumns=function(e){var i;void 0===e&&(e={});var n=e.source?e.source:"flex";if(null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];var o=-1;if(e.resizingCols)for(var s=new Set(e.resizingCols),a=this.displayedColumnsCenter,l=a.length-1;l>=0;l--)if(s.has(a[l])){o=l;break}var u=0,c=[],d=0,h=0;for(l=0;l<this.displayedColumnsCenter.length;l++)this.displayedColumnsCenter[l].getFlex()&&l>o?(c.push(this.displayedColumnsCenter[l]),h+=this.displayedColumnsCenter[l].getFlex(),d+=null!==(i=this.displayedColumnsCenter[l].getMinWidth())&&void 0!==i?i:0):u+=this.displayedColumnsCenter[l].getActualWidth();if(!c.length)return[];var f=[];u+d>this.flexViewportWidth&&(c.forEach(function(x){var D;return x.setActualWidth(null!==(D=x.getMinWidth())&&void 0!==D?D:0,n)}),f=c,c=[]);var g,v=[];e:for(;;){var y=(g=this.flexViewportWidth-u)/h;for(l=0;l<c.length;l++){var m=c[l],C=y*m.getFlex(),w=0,_=m.getMinWidth(),b=m.getMaxWidth();if(I(_)&&C<_?w=_:I(b)&&C>b&&(w=b),w){m.setActualWidth(w,n),Ku(c,m),h-=m.getFlex(),f.push(m),u+=m.getActualWidth();continue e}v[l]=Math.round(C)}break}var O=g;return c.forEach(function(x,D){x.setActualWidth(Math.min(v[D],O),n),f.push(x),O-=v[D]}),e.skipSetLeft||this.setLeftValues(n),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.dispatchColumnResizedEvent(f,!0,n,c),c},t.prototype.sizeColumnsToFit=function(e,i,n,o){var a,l,u,c,d,s=this;if(void 0===i&&(i="sizeColumnsToFit"),this.shouldQueueResizeOperations)this.resizeOperationQueue.push(function(){return s.sizeColumnsToFit(e,i,n,o)});else{var h={};o&&(null===(a=o?.columnLimits)||void 0===a||a.forEach(function(B){var G=B.key,Z=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(e[i[n]]=r[i[n]])}return e}(B,["key"]);h["string"==typeof G?G:G.getColId()]=Z}));var p=this.getAllDisplayedColumns(),f=e===this.getWidthOfColsInList(p);if(!(e<=0||!p.length||f)){var v=[],g=[];p.forEach(function(B){!0===B.getColDef().suppressSizeToFit?g.push(B):v.push(B)});var y=v.slice(0),m=!1,C=function(B){ii(v,B),g.push(B)};for(v.forEach(function(B){var G,Z;B.resetActualWidth(i);var J=h?.[B.getId()],Q=null!==(G=J?.minWidth)&&void 0!==G?G:o?.defaultMinWidth,ye=null!==(Z=J?.maxWidth)&&void 0!==Z?Z:o?.defaultMaxWidth,me=B.getActualWidth();"number"==typeof Q&&me<Q?B.setActualWidth(Q,i,!0):"number"==typeof ye&&me>ye&&B.setActualWidth(ye,i,!0)});!m;){m=!0;var w=e-this.getWidthOfColsInList(g);if(w<=0)v.forEach(function(B){var G,Z,J=null!==(Z=null===(G=h?.[B.getId()])||void 0===G?void 0:G.minWidth)&&void 0!==Z?Z:o?.defaultMinWidth;"number"!=typeof J?B.setMinimum(i):B.setActualWidth(J,i,!0)});else for(var _=w/this.getWidthOfColsInList(v),b=w,O=v.length-1;O>=0;O--){var x=v[O],D=h?.[x.getId()],T=null!==(l=D?.minWidth)&&void 0!==l?l:o?.defaultMinWidth,L=null!==(u=D?.maxWidth)&&void 0!==u?u:o?.defaultMaxWidth,A=null!==(c=x.getMinWidth())&&void 0!==c?c:0,N=null!==(d=x.getMaxWidth())&&void 0!==d?d:Number.MAX_VALUE,H="number"==typeof T&&T>A?T:x.getMinWidth(),j="number"==typeof L&&L<N?L:x.getMaxWidth(),z=Math.round(x.getActualWidth()*_);I(H)&&z<H?(z=H,C(x),m=!1):I(j)&&z>j?(z=j,C(x),m=!1):0===O&&(z=b),x.setActualWidth(z,i,!0),b-=z}}y.forEach(function(B){B.fireColumnWidthChangedEvent(i)}),this.setLeftValues(i),this.updateBodyWidths(),!n&&this.dispatchColumnResizedEvent(y,!0,i)}}},t.prototype.buildDisplayedTrees=function(e){var i=[],n=[],o=[];e.forEach(function(a){switch(a.getPinned()){case"left":i.push(a);break;case"right":n.push(a);break;default:o.push(a)}});var s=new gp;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(i,s,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(n,s,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(o,s,null,this.displayedTreeCentre),this.updateDisplayedMap()},t.prototype.updateDisplayedMap=function(){var e=this;this.displayedColumnsAndGroupsMap={};var i=function(n){e.displayedColumnsAndGroupsMap[n.getUniqueId()]=n};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,i),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,i),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,i)},t.prototype.isDisplayed=function(e){return this.displayedColumnsAndGroupsMap[e.getUniqueId()]===e},t.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var e=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(e,function(i){i instanceof yt&&i.calculateDisplayedColumns()})},t.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},t.prototype.createGroupAutoColumnsIfNeeded=function(){var e=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;var i=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),n=this.pivotMode?this.gridOptionsService.is("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if(!(this.rowGroupColumns.length>0||this.gridOptionsService.is("treeData"))||n||i)this.groupAutoColumns=null;else{var a=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(a,this.groupAutoColumns)||e)return this.groupAutoColumns=a,!0}return!1},t.prototype.isGroupSuppressAutoColumn=function(){var e=this.gridOptionsService.get("groupDisplayType");if(e&&Ju("custom",e))return!0;var n=this.gridOptionsService.get("treeDataDisplayType");return!!n&&function pC(r,t){var e=["auto","custom"];return e.indexOf(t)<0?(console.warn("AG Grid: '"+t+"' is not a valid treeDataDisplayType value - possible values are: '"+e.join("', '")+"'"),!1):t===r}("custom",n)},t.prototype.autoColsEqual=function(e,i){return Yn(e,i,function(n,o){return n.getColId()===o.getColId()})},t.prototype.getWidthOfColsInList=function(e){return e.reduce(function(i,n){return i+n.getActualWidth()},0)},t.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},t.prototype.getFirstDisplayedColumn=function(){var e=this.gridOptionsService.is("enableRtl"),i=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&i.reverse();for(var n=0;n<i.length;n++){var o=this[i[n]]();if(o.length)return e?Pe(o):o[0]}return null},t.prototype.setColumnHeaderHeight=function(e,i){e.setAutoHeaderHeight(i)&&this.eventService.dispatchEvent({type:E.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"})},t.prototype.getColumnGroupHeaderRowHeight=function(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()},t.prototype.getColumnHeaderRowHeight=function(){var e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),i=this.getAllDisplayedColumns().filter(function(n){return n.isAutoHeaderHeight()}).map(function(n){return n.getAutoHeaderHeight()||0});return Math.max.apply(Math,Gi([e],Ni(i)))},t.prototype.getHeaderHeight=function(){var e;return null!==(e=this.gridOptionsService.getNum("headerHeight"))&&void 0!==e?e:this.environment.getFromTheme(25,"headerHeight")},t.prototype.getFloatingFiltersHeight=function(){var e;return null!==(e=this.gridOptionsService.getNum("floatingFiltersHeight"))&&void 0!==e?e:this.getHeaderHeight()},t.prototype.getGroupHeaderHeight=function(){var e;return null!==(e=this.gridOptionsService.getNum("groupHeaderHeight"))&&void 0!==e?e:this.getHeaderHeight()},t.prototype.getPivotHeaderHeight=function(){var e;return null!==(e=this.gridOptionsService.getNum("pivotHeaderHeight"))&&void 0!==e?e:this.getHeaderHeight()},t.prototype.getPivotGroupHeaderHeight=function(){var e;return null!==(e=this.gridOptionsService.getNum("pivotGroupHeaderHeight"))&&void 0!==e?e:this.getGroupHeaderHeight()},t.prototype.queueResizeOperations=function(){this.shouldQueueResizeOperations=!0},t.prototype.processResizeOperations=function(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(function(e){return e()}),this.resizeOperationQueue=[]},t.prototype.resetColumnDefIntoColumn=function(e){var i=e.getUserProvidedColDef();if(!i)return!1;var n=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(n,i),!0},t.prototype.generateColumnStateForRowGroupAndPivotIndexes=function(e,i){var n=this,o={},s=function(a,l,u,c,d,h){if(!l.length||!n.primaryColumns)return[];for(var p=Object.keys(a),f=new Set(p),v=new Set(p),g=new Set(l.map(function(T){var L=T.getColId();return v.delete(L),L}).concat(p)),y=[],m={},C=0,w=0;w<n.primaryColumns.length;w++){var _=n.primaryColumns[w].getColId();g.has(_)&&(y.push(_),m[_]=C++)}var b=1e3,O=!1,x=0,D=function(T){for(var L=m[T],A=x;A<L;A++){var N=y[A];v.has(N)&&(a[N][d]=b++,v.delete(N))}x=L};l.forEach(function(T){var L=T.getColId();if(f.has(L))D(L),a[L][d]=b++;else{var A=T.getColDef();(null===A[d]||void 0===A[d]&&null==A[h])&&(O||(A[u]||void 0===A[u]&&A[c]?D(L):(v.forEach(function(j){a[j][d]=b+m[j]}),b+=y.length,O=!0)),o[L]||(o[L]={colId:L}),o[L][d]=b++)}})};return s(e,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(i,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(o)},mt([S("expressionService")],t.prototype,"expressionService",void 0),mt([S("columnFactory")],t.prototype,"columnFactory",void 0),mt([S("displayedGroupCreator")],t.prototype,"displayedGroupCreator",void 0),mt([S("ctrlsService")],t.prototype,"ctrlsService",void 0),mt([S("autoWidthCalculator")],t.prototype,"autoWidthCalculator",void 0),mt([S("columnUtils")],t.prototype,"columnUtils",void 0),mt([S("columnAnimationService")],t.prototype,"columnAnimationService",void 0),mt([S("autoGroupColService")],t.prototype,"autoGroupColService",void 0),mt([we("aggFuncService")],t.prototype,"aggFuncService",void 0),mt([we("valueCache")],t.prototype,"valueCache",void 0),mt([we("animationFrameService")],t.prototype,"animationFrameService",void 0),mt([S("sortController")],t.prototype,"sortController",void 0),mt([S("columnDefFactory")],t.prototype,"columnDefFactory",void 0),mt([V],t.prototype,"init",null),mt([lt],t.prototype,"destroyColumns",null),mt([vC(0,Tt("loggerFactory"))],t.prototype,"setBeans",null),mt([X("columnModel")],t)}(k),mC=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),wC=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return mC(t,r),t.prototype.calculateColMinWidth=function(e){return null!=e.minWidth?e.minWidth:this.environment.getMinColWidth()},t.prototype.calculateColMaxWidth=function(e){return null!=e.maxWidth?e.maxWidth:Number.MAX_SAFE_INTEGER},t.prototype.calculateColInitialWidth=function(e){var i=this.calculateColMinWidth(e),n=this.calculateColMaxWidth(e),s=Ci(e.width),a=Ci(e.initialWidth);return Math.max(Math.min(null!=s?s:null!=a?a:200,n),i)},t.prototype.getOriginalPathForColumn=function(e,i){var n=[],o=!1,s=function(a,l){for(var u=0;u<a.length;u++){if(o)return;var c=a[u];c instanceof ze?(s(c.getChildren(),l+1),n[l]=c):c===e&&(o=!0)}};return s(i,0),o?n:null},t.prototype.depthFirstOriginalTreeSearch=function(e,i,n){var o=this;i&&i.forEach(function(s){s instanceof ze&&o.depthFirstOriginalTreeSearch(s,s.getChildren(),n),n(s,e)})},t.prototype.depthFirstAllColumnTreeSearch=function(e,i){var n=this;e&&e.forEach(function(o){o instanceof yt&&n.depthFirstAllColumnTreeSearch(o.getChildren(),i),i(o)})},t.prototype.depthFirstDisplayedColumnTreeSearch=function(e,i){var n=this;e&&e.forEach(function(o){o instanceof yt&&n.depthFirstDisplayedColumnTreeSearch(o.getDisplayedChildren(),i),i(o)})},t=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}([X("columnUtils")],t),t}(k),SC=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),EC=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return SC(t,r),t.prototype.createDisplayedGroups=function(e,i,n,o){for(var s=this,a=this.mapOldGroupsById(o),l=[],u=e,c=function(){var d=u;u=[];for(var h=0,p=function(_){var b=h;h=_;var O=d[b],D=(O instanceof yt?O.getProvidedColumnGroup():O).getOriginalParent();if(null!=D){var L=s.createColumnGroup(D,i,a,n);for(T=b;T<_;T++)L.addChild(d[T]);u.push(L)}else for(var T=b;T<_;T++)l.push(d[T])},f=1;f<d.length;f++){var v=d[f],y=(v instanceof yt?v.getProvidedColumnGroup():v).getOriginalParent(),m=d[h];y!==(m instanceof yt?m.getProvidedColumnGroup():m).getOriginalParent()&&p(f)}h<d.length&&p(d.length)};u.length;)c();return this.setupParentsIntoColumns(l,null),l},t.prototype.createColumnGroup=function(e,i,n,o){var s=e.getGroupId(),a=i.getInstanceIdForKey(s),u=n[yt.createUniqueId(s,a)];return u&&u.getProvidedColumnGroup()!==e&&(u=null),I(u)?u.reset():(u=new yt(e,s,a,o),this.context.createBean(u)),u},t.prototype.mapOldGroupsById=function(e){var i={},n=function(o){o.forEach(function(s){if(s instanceof yt){var a=s;i[s.getUniqueId()]=a,n(a.getChildren())}})};return e&&n(e),i},t.prototype.setupParentsIntoColumns=function(e,i){var n=this;e.forEach(function(o){if(o.setParent(i),o instanceof yt){var s=o;n.setupParentsIntoColumns(s.getChildren(),s)}})},t=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}([X("displayedGroupCreator")],t),t}(k),bC=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),OC=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.componentsMappedByName={},e}return bC(t,r),t.prototype.setupComponents=function(e){var i=this;e&&e.forEach(function(n){return i.addComponent(n)})},t.prototype.addComponent=function(e){var n=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[n]=e.componentClass},t.prototype.getComponentClass=function(e){return this.componentsMappedByName[e]},t=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}([X("agStackComponentsRegistry")],t),t}(k);function ki(r,t,e){null==e||""==e?ec(r,t):_i(r,t,e)}function _i(r,t,e){r.setAttribute(_p(t),e.toString())}function ec(r,t){r.removeAttribute(_p(t))}function _p(r){return"aria-"+r}function ot(r,t){t?r.setAttribute("role",t):r.removeAttribute("role")}function Ep(r){return"asc"===r?"ascending":"desc"===r?"descending":"mixed"===r?"other":"none"}function bp(r){return parseInt(r.getAttribute("aria-level"),10)}function Rp(r){return parseInt(r.getAttribute("aria-posinset"),10)}function xn(r,t){ki(r,"label",t)}function Wa(r,t){ki(r,"labelledby",t)}function Op(r,t){ki(r,"description",t)}function xp(r,t){ki(r,"describedby",t)}function Dp(r,t){ki(r,"live",t)}function Tp(r,t){ki(r,"level",t)}function tc(r,t){ki(r,"disabled",t)}function ja(r,t){ki(r,"hidden",t)}function ic(r,t){ki(r,"activedescendant",t)}function Hi(r,t){_i(r,"expanded",t)}function Pp(r){ec(r,"expanded")}function nc(r,t){_i(r,"setsize",t)}function oc(r,t){_i(r,"posinset",t)}function Ap(r,t){_i(r,"multiselectable",t)}function Lp(r,t){_i(r,"rowcount",t)}function rc(r,t){_i(r,"rowindex",t)}function Mp(r,t){_i(r,"colcount",t)}function sc(r,t){_i(r,"colindex",t)}function Fp(r,t){_i(r,"colspan",t)}function Ip(r,t){_i(r,"sort",t)}function Np(r){ec(r,"sort")}function Go(r,t){ki(r,"selected",t)}function Gp(r,t){_i(r,"checked",void 0===t?"mixed":t)}function kp(r,t){ki(r,"controls",t.id),Wa(t,r.id)}function Ua(r,t){return void 0===t?r("ariaIndeterminate","indeterminate"):!0===t?r("ariaChecked","checked"):r("ariaUnchecked","unchecked")}var ac,za,lc,uc,cc,dc,hc,pc,DC=Object.freeze({__proto__:null,setAriaRole:ot,getAriaSortState:Ep,getAriaLevel:bp,getAriaPosInSet:Rp,getAriaDescribedBy:function xC(r){return r.getAttribute("aria-describedby")||""},setAriaLabel:xn,setAriaLabelledBy:Wa,setAriaDescription:Op,setAriaDescribedBy:xp,setAriaLive:Dp,setAriaLevel:Tp,setAriaDisabled:tc,setAriaHidden:ja,setAriaActiveDescendant:ic,setAriaExpanded:Hi,removeAriaExpanded:Pp,setAriaSetSize:nc,setAriaPosInSet:oc,setAriaMultiSelectable:Ap,setAriaRowCount:Lp,setAriaRowIndex:rc,setAriaColCount:Mp,setAriaColIndex:sc,setAriaColSpan:Fp,setAriaSort:Ip,removeAriaSort:Np,setAriaSelected:Go,setAriaChecked:Gp,setAriaControls:kp,getAriaCheckboxStateName:Ua});function Ei(){return void 0===ac&&(ac=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),ac}function fc(){if(void 0===za)if(Ei()){var r=navigator.userAgent.match(/version\/(\d+)/i);r&&(za=null!=r[1]?parseFloat(r[1]):0)}else za=0;return za}function Ka(){if(void 0===lc){var r=window;lc=!!r.chrome&&(!!r.chrome.webstore||!!r.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return lc}function vc(){return void 0===uc&&(uc=/(firefox)/i.test(navigator.userAgent)),uc}function gc(){return void 0===cc&&(cc=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),cc}function eo(){return void 0===dc&&(dc=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),dc}function $a(){return!Ei()||fc()>=15}function Ya(r){if(!r)return null;var t=r.tabIndex,e=r.getAttribute("tabIndex");return-1!==t||null!==e&&(""!==e||vc())?t.toString():null}function Hp(){if(!document.body)return-1;var r=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,e=document.createElement("div");for(document.body.appendChild(e);;){var i=2*r;if(e.style.height=i+"px",i>t||e.clientHeight!==i)break;r=i}return document.body.removeChild(e),r}function Vp(){var r,t,e;return null!==(t=null===(r=document.body)||void 0===r?void 0:r.clientWidth)&&void 0!==t?t:window.innerHeight||(null===(e=document.documentElement)||void 0===e?void 0:e.clientWidth)||-1}function Bp(){var r,t,e;return null!==(t=null===(r=document.body)||void 0===r?void 0:r.clientHeight)&&void 0!==t?t:window.innerHeight||(null===(e=document.documentElement)||void 0===e?void 0:e.clientHeight)||-1}function Wp(){return null==pc&&jp(),pc}function jp(){var r=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",r.appendChild(t);var e=t.offsetWidth-t.clientWidth;0===e&&0===t.clientWidth&&(e=null),t.parentNode&&t.parentNode.removeChild(t),null!=e&&(pc=e,hc=0===e)}function ps(){return null==hc&&jp(),hc}var TC=Object.freeze({__proto__:null,isBrowserSafari:Ei,getSafariVersion:fc,isBrowserChrome:Ka,isBrowserFirefox:vc,isMacOsUserAgent:gc,isIOSUserAgent:eo,browserSupportsPreventScroll:$a,getTabIndex:Ya,getMaxDivHeight:Hp,getBodyWidth:Vp,getBodyHeight:Bp,getScrollbarWidth:Wp,isInvisibleScrollbar:ps});function yr(r,t){return r.toString().padStart(t,"0")}function Up(r,t){for(var e=[],i=r;i<=t;i++)e.push(i);return e}function yc(r,t,e){return"number"!=typeof r?"":r.toString().replace(".",e).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+t)}var NC=Object.freeze({__proto__:null,padStartWidthZeros:yr,createArrayOfNumbers:Up,cleanNumber:function PC(r){return"string"==typeof r&&(r=parseInt(r,10)),"number"==typeof r?Math.floor(r):null},decToHex:function AC(r,t){for(var e="",i=0;i<t;i++)e+=String.fromCharCode(255&r),r>>>=8;return e},formatNumberTwoDecimalPlacesAndCommas:function LC(r,t,e){return"number"!=typeof r?"":yc(Math.round(100*r)/100,t,e)},formatNumberCommas:yc,sum:function MC(r){return null==r?null:r.reduce(function(t,e){return t+e},0)},zeroOrGreater:function FC(r,t){return r>=0?r:t},oneOrGreater:function IC(r,t){var e=parseInt(r,10);return!isNaN(e)&&isFinite(e)&&e>0?e:t}}),mc=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o};function bi(r,t,e){if(void 0===t&&(t=!0),void 0===e&&(e="-"),!r)return null;var i=[r.getFullYear(),r.getMonth()+1,r.getDate()].map(function(n){return yr(n,2)}).join(e);return t&&(i+=" "+[r.getHours(),r.getMinutes(),r.getSeconds()].map(function(n){return yr(n,2)}).join(":")),i}var Cc=function(r){if(r>3&&r<21)return"th";switch(r%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function mr(r,t){void 0===t&&(t="YYYY-MM-DD");var e=yr(r.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:function(){return e.slice(e.length-4,e.length)},YY:function(){return e.slice(e.length-2,e.length)},Y:function(){return""+r.getFullYear()},MMMM:function(){return i[r.getMonth()]},MMM:function(){return i[r.getMonth()].slice(0,3)},MM:function(){return yr(r.getMonth()+1,2)},Mo:function(){return""+(r.getMonth()+1)+Cc(r.getMonth()+1)},M:function(){return""+(r.getMonth()+1)},Do:function(){return""+r.getDate()+Cc(r.getDate())},DD:function(){return yr(r.getDate(),2)},D:function(){return""+r.getDate()},dddd:function(){return n[r.getDay()]},ddd:function(){return n[r.getDay()].slice(0,3)},dd:function(){return n[r.getDay()].slice(0,2)},do:function(){return""+r.getDay()+Cc(r.getDay())},d:function(){return""+r.getDay()}},s=new RegExp(Object.keys(o).join("|"),"g");return t.replace(s,function(a){return a in o?o[a]():a})}function Wt(r){if(!r)return null;var t=mc(r.split(" "),2),e=t[0],i=t[1];if(!e)return null;var n=e.split("-").map(function(f){return parseInt(f,10)});if(3!==n.filter(function(f){return!isNaN(f)}).length)return null;var o=mc(n,3),s=o[0],a=o[1],l=o[2],u=new Date(s,a-1,l);if(u.getFullYear()!==s||u.getMonth()!==a-1||u.getDate()!==l)return null;if(!i||"00:00:00"===i)return u;var c=mc(i.split(":").map(function(f){return parseInt(f,10)}),3),d=c[0],h=c[1],p=c[2];return d>=0&&d<24&&u.setHours(d),h>=0&&h<60&&u.setMinutes(h),p>=0&&p<60&&u.setSeconds(p),u}var Xa,GC=Object.freeze({__proto__:null,serialiseDate:bi,dateToFormattedString:mr,parseDateTimeFromString:Wt}),HC=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o};function wc(r,t,e){for(var i=r.parentElement,n=i&&i.firstChild;n;)t&&n.classList.toggle(t,n===r),e&&n.classList.toggle(e,n!==r),n=n.nextSibling}var zp="[tabindex], input, select, button, textarea, [href]",Sc=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function _c(r){var t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(r,"input, select, button, textarea"),n=t.call(r,Sc),o=io(r);return i&&!n&&o}function Ce(r,t,e){void 0===e&&(e={});var i=e.skipAriaHidden;r.classList.toggle("ag-hidden",!t),i||ja(r,!t)}function Kp(r,t,e){void 0===e&&(e={});var i=e.skipAriaHidden;r.classList.toggle("ag-invisible",!t),i||ja(r,!t)}function Cr(r,t){var e="disabled",i=t?function(n){return n.setAttribute(e,"")}:function(n){return n.removeAttribute(e)};i(r),Pc(r.querySelectorAll("input"),function(n){return i(n)})}function ko(r,t,e){for(var i=0;r;){if(r.classList.contains(t))return!0;if(r=r.parentElement,"number"==typeof e){if(++i>e)break}else if(r===e)break}return!1}function to(r){var t=window.getComputedStyle(r),i=t.width,n=t.borderTopWidth,o=t.borderRightWidth,s=t.borderBottomWidth,a=t.borderLeftWidth,l=t.paddingTop,u=t.paddingRight,c=t.paddingBottom,d=t.paddingLeft,h=t.marginTop,p=t.marginRight,f=t.marginBottom,v=t.marginLeft,g=t.boxSizing;return{height:parseFloat(t.height),width:parseFloat(i),borderTopWidth:parseFloat(n),borderRightWidth:parseFloat(o),borderBottomWidth:parseFloat(s),borderLeftWidth:parseFloat(a),paddingTop:parseFloat(l),paddingRight:parseFloat(u),paddingBottom:parseFloat(c),paddingLeft:parseFloat(d),marginTop:parseFloat(h),marginRight:parseFloat(p),marginBottom:parseFloat(f),marginLeft:parseFloat(v),boxSizing:g}}function fs(r){var t=to(r);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom:t.height}function qa(r){var t=to(r);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight:t.width}function Ec(r){var t=to(r);return Math.ceil(r.offsetHeight+(t.marginBottom+t.marginTop))}function vs(r){var t=to(r);return Math.ceil(r.offsetWidth+(t.marginLeft+t.marginRight))}function bc(r){var t=r.getBoundingClientRect(),e=to(r);return{top:t.top+(e.borderTopWidth||0),left:t.left+(e.borderLeftWidth||0),right:t.right+(e.borderRightWidth||0),bottom:t.bottom+(e.borderBottomWidth||0)}}function gs(){if("boolean"==typeof Xa)return Xa;var r=document.createElement("div");return r.style.direction="rtl",r.style.width="1px",r.style.height="1px",r.style.position="fixed",r.style.top="0px",r.style.overflow="hidden",r.dir="rtl",r.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(r),r.scrollLeft=1,Xa=0===Math.floor(r.scrollLeft),document.body.removeChild(r),Xa}function ys(r,t){var e=r.scrollLeft;return t&&(e=Math.abs(e),Ka()&&!gs()&&(e=r.scrollWidth-r.clientWidth-e)),e}function ms(r,t,e){e&&(gs()?t*=-1:(Ei()||Ka())&&(t=r.scrollWidth-r.clientWidth-t)),r.scrollLeft=t}function Pt(r){for(;r&&r.firstChild;)r.removeChild(r.firstChild)}function Dn(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function io(r){return null!==r.offsetParent}function Ct(r){var t=document.createElement("div");return t.innerHTML=(r||"").trim(),t.firstChild}function Rc(r){return r&&r.clientHeight?r.clientHeight:0}function Oc(r){return r&&r.clientWidth?r.clientWidth:0}function xc(r,t,e){if(!e||e.nextSibling!==t){var i=document.activeElement,n=t.contains(i);e?e.nextSibling?r.insertBefore(t,e.nextSibling):r.appendChild(t):r.firstChild&&r.firstChild!==t&&r.insertAdjacentElement("afterbegin",t),n&&i&&$a()&&i.focus({preventScroll:!0})}}function Dc(r,t){for(var e=0;e<t.length;e++){var i=t[e],n=r.children[e];n!==i&&r.insertBefore(i,n)}}function $p(r,t,e){e?e.insertAdjacentElement("afterend",t):r.firstChild?r.insertAdjacentElement("afterbegin",t):r.appendChild(t)}function Tc(r,t){var e,i;if(t)try{for(var n=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(t)),o=n.next();!o.done;o=n.next()){var s=HC(o.value,2),a=s[0],l=s[1];if(a&&a.length&&null!=l){var u=mp(a),c=l.toString(),d=c.replace(/\s*!important/g,"");r.style.setProperty(u,d,d.length!=c.length?"important":void 0)}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}}function Yp(r){return r.clientWidth<r.scrollWidth}function Xp(r){return r.clientHeight<r.scrollHeight}function Cs(r,t){"flex"===t?(r.style.removeProperty("width"),r.style.removeProperty("minWidth"),r.style.removeProperty("maxWidth"),r.style.flex="1 1 auto"):Ri(r,t)}function Ri(r,t){t=Za(t),r.style.width=t.toString(),r.style.maxWidth=t.toString(),r.style.minWidth=t.toString()}function Ho(r,t){t=Za(t),r.style.height=t.toString(),r.style.maxHeight=t.toString(),r.style.minHeight=t.toString()}function Za(r){return"number"==typeof r?r+"px":r}function ws(r){return r instanceof Node||r instanceof HTMLElement}function qp(r){if(null==r)return[];var t=[];return Pc(r,function(e){return t.push(e)}),t}function Zp(r,t){if(r)for(var e=0;e<r.length;e++){var i=r[e];t(i.name,i.value)}}function rn(r,t,e){null==e?r.removeAttribute(t):r.setAttribute(t,e.toString())}function Pc(r,t){if(null!=r)for(var e=0;e<r.length;e++)t(r[e])}function Ac(r,t){r.then(function(e){var i=e.getGui();null!=i&&("object"==typeof i?t.appendChild(i):t.innerHTML=i)})}var zC=Object.freeze({__proto__:null,radioCssClass:wc,FOCUSABLE_SELECTOR:zp,FOCUSABLE_EXCLUDE:Sc,isFocusableFormField:_c,setDisplayed:Ce,setVisible:Kp,setDisabled:Cr,isElementChildOfClass:ko,getElementSize:to,getInnerHeight:fs,getInnerWidth:qa,getAbsoluteHeight:Ec,getAbsoluteWidth:vs,getElementRectWithOffset:bc,isRtlNegativeScroll:gs,getScrollLeft:ys,setScrollLeft:ms,clearElement:Pt,removeElement:function VC(r,t){Dn(r.querySelector(t))},removeFromParent:Dn,isVisible:io,loadTemplate:Ct,appendHtml:function BC(r,t){r.lastChild?r.insertAdjacentHTML("afterbegin",t):r.innerHTML=t},getElementAttribute:function WC(r,t){return r.attributes&&r.attributes[t]?r.attributes[t].value:null},offsetHeight:Rc,offsetWidth:Oc,ensureDomOrder:xc,setDomChildOrder:Dc,insertWithDomOrder:$p,prependDC:function jC(r,t){I(r.firstChild)?r.insertBefore(t,r.firstChild):r.appendChild(t)},addStylesToElement:Tc,isHorizontalScrollShowing:Yp,isVerticalScrollShowing:Xp,setElementWidth:Cs,setFixedWidth:Ri,setElementHeight:function UC(r,t){"flex"===t?(r.style.removeProperty("height"),r.style.removeProperty("minHeight"),r.style.removeProperty("maxHeight"),r.style.flex="1 1 auto"):Ho(r,t)},setFixedHeight:Ho,formatSize:Za,isNodeOrElement:ws,copyNodeList:qp,iterateNamedNodeMap:Zp,addOrRemoveAttribute:rn,nodeListForEach:Pc,bindCellRendererToHtmlElement:Ac}),Qp={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus"};function Oi(r,t,e){var i=Ke(r,t,e);if(i){var n=i.className;if("string"==typeof n&&n.indexOf("ag-icon")>-1||"object"==typeof n&&n["ag-icon"])return i}var o=document.createElement("span");return o.appendChild(i),o}function Ke(r,t,e,i){var n=null,o=e&&e.getColDef().icons;if(o&&(n=o[r]),t&&!n){var s=t.get("icons");s&&(n=s[r])}if(!n){var l=document.createElement("span"),u=Qp[r];return u||(i?u=r:(console.warn("AG Grid: Did not find icon "+r),u="")),l.setAttribute("class","ag-icon ag-icon-"+u),l.setAttribute("unselectable","on"),ot(l,"presentation"),l}var a=void 0;if("function"==typeof n)a=n();else{if("string"!=typeof n)throw new Error("icon from grid options needs to be a string or a function");a=n}return"string"==typeof a?Ct(a):ws(a)?a:void console.warn("AG Grid: iconRenderer should return back a string or a dom object")}var KC=Object.freeze({__proto__:null,iconNameClassMap:Qp,createIcon:Oi,createIconNoSpan:Ke}),M=function(){function r(){}return r.BACKSPACE="Backspace",r.TAB="Tab",r.ENTER="Enter",r.ESCAPE="Escape",r.SPACE=" ",r.LEFT="ArrowLeft",r.UP="ArrowUp",r.RIGHT="ArrowRight",r.DOWN="ArrowDown",r.DELETE="Delete",r.F2="F2",r.PAGE_UP="PageUp",r.PAGE_DOWN="PageDown",r.PAGE_HOME="Home",r.PAGE_END="End",r.A="KeyA",r.C="KeyC",r.D="KeyD",r.V="KeyV",r.X="KeyX",r.Y="KeyY",r.Z="KeyZ",r}();function Qa(r){return!(r.altKey||r.ctrlKey||r.metaKey)&&1===r.key.length}function Ja(r,t,e,i,n){var o=i?i.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;var s={event:t,editing:n,column:i,api:r.api,node:e,data:e.data,colDef:i.getColDef(),context:r.context,columnApi:r.columnApi};return!(!o||!o(s))}function Jp(r,t,e,i){var n=i.getDefinition(),o=n&&n.suppressHeaderKeyboardEvent;return!!I(o)&&!!o({api:r.api,columnApi:r.columnApi,context:r.context,colDef:n,column:i,headerRowIndex:e,event:t})}function ef(r){var e;switch(r.keyCode){case 65:e=M.A;break;case 67:e=M.C;break;case 86:e=M.V;break;case 68:e=M.D;break;case 90:e=M.Z;break;case 89:e=M.Y;break;default:e=r.code}return e}function tf(r,t){return void 0===t&&(t=!1),r===M.DELETE||!t&&r===M.BACKSPACE&&gc()}var JC=Object.freeze({__proto__:null,isEventFromPrintableCharacter:Qa,isUserSuppressingKeyboardEvent:Ja,isUserSuppressingHeaderKeyboardEvent:Jp,normaliseQwertyAzerty:ef,isDeleteKey:tf});function Lc(r,t,e){if(0===e)return!1;var i=Math.abs(r.clientX-t.clientX),n=Math.abs(r.clientY-t.clientY);return Math.max(i,n)<=e}var ew=Object.freeze({__proto__:null,areEventsNear:Lc}),nw=Object.freeze({__proto__:null,sortRowNodesByOrder:function tw(r,t){if(!r)return!1;for(var e=function(a,l){var u=t[a.id],c=t[l.id],d=void 0!==u,h=void 0!==c;return d&&h?u-c:d||h?d?1:-1:a.__objectId-l.__objectId},o=!1,s=0;s<r.length-1;s++)if(e(r[s],r[s+1])>0){o=!0;break}return!!o&&(r.sort(e),!0)},traverseNodesWithKey:function iw(r,t){var e=[];!function i(n){n&&n.forEach(function(o){if(o.group||o.hasChildren()){e.push(o.key);var s=e.join("|");t(o,s),i(o.childrenAfterGroup),e.pop()}})}(r)}});function Mc(r){var t=new Set;return r.forEach(function(e){return t.add(e)}),t}var ow=Object.freeze({__proto__:null,convertToSet:Mc}),Xe=function(){return Xe=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Xe.apply(this,arguments)},ne=Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe({},DC),zm),TC),GC),zC),$m),Lm),dC),wm),KC),JC),aC),ew),NC),Tm),nw),ow),oC),wr=function(){function r(t,e){void 0===t&&(t=0),void 0===e&&(e=1),this.nextValue=t,this.step=e}return r.prototype.next=function(){var t=this.nextValue;return this.nextValue+=this.step,t},r.prototype.peek=function(){return this.nextValue},r.prototype.skip=function(t){this.nextValue+=t},r}(),Ss=function(r){return r[r.IN_PROGRESS=0]="IN_PROGRESS",r[r.RESOLVED=1]="RESOLVED",r}(Ss||{}),jt=function(){function r(t){var e=this;this.status=Ss.IN_PROGRESS,this.resolution=null,this.waiters=[],t(function(i){return e.onDone(i)},function(i){return e.onReject(i)})}return r.all=function(t){return new r(function(e){var i=t.length,n=new Array(i);t.forEach(function(o,s){o.then(function(a){n[s]=a,0==--i&&e(n)})})})},r.resolve=function(t){return void 0===t&&(t=null),new r(function(e){return e(t)})},r.prototype.then=function(t){var e=this;return new r(function(i){e.status===Ss.RESOLVED?i(t(e.resolution)):e.waiters.push(function(n){return i(t(n))})})},r.prototype.resolveNow=function(t,e){return this.status===Ss.RESOLVED?e(this.resolution):t},r.prototype.onDone=function(t){this.status=Ss.RESOLVED,this.resolution=t,this.waiters.forEach(function(e){return e(t)})},r.prototype.onReject=function(t){console.warn("TBI")},r}(),sw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Vo=function(){return Vo=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Vo.apply(this,arguments)},Fc=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},sn=function(r){return r[r.NOTHING=0]="NOTHING",r[r.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",r[r.SHOWING=2]="SHOWING",r}(sn||{}),Tn=function(r){return r[r.HOVER=0]="HOVER",r[r.FOCUS=1]="FOCUS",r}(Tn||{}),Ic=function(r){function t(e,i,n){var o=r.call(this)||this;return o.parentComp=e,o.tooltipShowDelayOverride=i,o.tooltipHideDelayOverride=n,o.DEFAULT_SHOW_TOOLTIP_DELAY=2e3,o.DEFAULT_HIDE_TOOLTIP_DELAY=1e4,o.SHOW_QUICK_TOOLTIP_DIFF=1e3,o.FADE_OUT_TOOLTIP_TIMEOUT=1e3,o.INTERACTIVE_HIDE_DELAY=100,o.interactionEnabled=!1,o.isInteractingWithTooltip=!1,o.state=sn.NOTHING,o.tooltipInstanceCount=0,o.tooltipMouseTrack=!1,o}return sw(t,r),t.prototype.postConstruct=function(){this.gridOptionsService.is("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipShowDelay=this.getTooltipDelay("show"),this.tooltipHideDelay=this.getTooltipDelay("hide"),this.tooltipMouseTrack=this.gridOptionsService.is("tooltipMouseTrack");var e=this.parentComp.getGui();this.tooltipTrigger===Tn.HOVER&&(this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===Tn.FOCUS&&(this.addManagedListener(e,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(e,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)))},t.prototype.getGridOptionsTooltipDelay=function(e){var i=this.gridOptionsService.getNum(e);if(I(i))return i<0&&ge(function(){return console.warn("AG Grid: "+e+" should not be lower than 0")},e+"Warn"),Math.max(200,i)},t.prototype.getTooltipDelay=function(e){var i,n,o,s;return"show"===e?null!==(n=null!==(i=this.getGridOptionsTooltipDelay("tooltipShowDelay"))&&void 0!==i?i:this.tooltipShowDelayOverride)&&void 0!==n?n:this.DEFAULT_SHOW_TOOLTIP_DELAY:null!==(s=null!==(o=this.getGridOptionsTooltipDelay("tooltipHideDelay"))&&void 0!==o?o:this.tooltipHideDelayOverride)&&void 0!==s?s:this.DEFAULT_HIDE_TOOLTIP_DELAY},t.prototype.destroy=function(){this.setToDoNothing(),r.prototype.destroy.call(this)},t.prototype.getTooltipTrigger=function(){var e=this.gridOptionsService.get("tooltipTrigger");return e&&"hover"!==e?Tn.FOCUS:Tn.HOVER},t.prototype.onMouseEnter=function(e){var i=this;this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!eo()&&(t.isLocked?this.showTooltipTimeoutId=window.setTimeout(function(){i.prepareToShowTooltip(e)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))},t.prototype.onMouseMove=function(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===sn.SHOWING&&this.tooltipComp&&this.positionTooltip()},t.prototype.onMouseDown=function(){this.setToDoNothing()},t.prototype.onMouseLeave=function(){this.interactionEnabled?this.lockService():this.setToDoNothing()},t.prototype.onFocusIn=function(){this.prepareToShowTooltip()},t.prototype.onFocusOut=function(e){var i,n=e.relatedTarget,o=this.parentComp.getGui(),s=null===(i=this.tooltipComp)||void 0===i?void 0:i.getGui();this.isInteractingWithTooltip||o.contains(n)||this.interactionEnabled&&s?.contains(n)||this.setToDoNothing()},t.prototype.onKeyDown=function(){this.setToDoNothing()},t.prototype.prepareToShowTooltip=function(e){if(this.state!=sn.NOTHING||t.isLocked)return!1;var i=0;return e&&(i=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=sn.WAITING_TO_SHOW,!0},t.prototype.isLastTooltipHiddenRecently=function(){return(new Date).getTime()-t.lastTooltipHideTime<this.SHOW_QUICK_TOOLTIP_DIFF},t.prototype.setToDoNothing=function(){this.state===sn.SHOWING&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=sn.NOTHING,this.lastMouseEvent=null},t.prototype.showTooltip=function(){var e=Vo({},this.parentComp.getTooltipParams());if(I(e.value)){this.state=sn.SHOWING,this.tooltipInstanceCount++;var i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(i)}else this.setToDoNothing()},t.prototype.hideTooltip=function(e){if(e||!this.isInteractingWithTooltip){this.tooltipComp&&(this.destroyTooltipComp(),t.lastTooltipHideTime=(new Date).getTime());var i={type:E.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(i),this.state=sn.NOTHING}},t.prototype.newTooltipComponentCallback=function(e,i){if(this.state!==sn.SHOWING||this.tooltipInstanceCount!==e)this.getContext().destroyBean(i);else{var o=i.getGui();this.tooltipComp=i,o.classList.contains("ag-tooltip")||o.classList.add("ag-tooltip-custom"),this.tooltipTrigger===Tn.HOVER&&o.classList.add("ag-tooltip-animate"),this.interactionEnabled&&o.classList.add("ag-tooltip-interactive");var s=this.localeService.getLocaleTextFunc(),a=this.popupService.addPopup({eChild:o,ariaLabel:s("ariaLabelTooltip","Tooltip")});a&&(this.tooltipPopupDestroyFunc=a.hideFunc),this.positionTooltip(),this.tooltipTrigger===Tn.FOCUS&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,E.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,E.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===Tn.HOVER?(this.tooltipMouseEnterListener=this.addManagedListener(o,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(o,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(o,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(o,"focusout",this.onTooltipFocusOut.bind(this))||null));var l={type:E.EVENT_TOOLTIP_SHOW,tooltipGui:o,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(l),this.startHideTimeout()}},t.prototype.onTooltipMouseEnter=function(){this.isInteractingWithTooltip=!0,this.unlockService()},t.prototype.onTooltipMouseLeave=function(){this.isInteractingWithTooltip=!1,this.lockService()},t.prototype.onTooltipFocusIn=function(){this.isInteractingWithTooltip=!0},t.prototype.onTooltipFocusOut=function(e){var i,n=this.parentComp.getGui(),o=null===(i=this.tooltipComp)||void 0===i?void 0:i.getGui(),s=e.relatedTarget;o?.contains(s)||(this.isInteractingWithTooltip=!1,n.contains(s)?this.startHideTimeout():this.hideTooltip())},t.prototype.positionTooltip=function(){var e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(Vo(Vo({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(Vo(Vo({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))},t.prototype.destroyTooltipComp=function(){var e=this;this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");var i=this.tooltipPopupDestroyFunc,n=this.tooltipComp;window.setTimeout(function(){i(),e.getContext().destroyBean(n)},this.tooltipTrigger===Tn.HOVER?this.FADE_OUT_TOOLTIP_TIMEOUT:0),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},t.prototype.clearTooltipListeners=function(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(function(e){e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null},t.prototype.lockService=function(){var e=this;t.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(function(){e.unlockService(),e.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)},t.prototype.unlockService=function(){t.isLocked=!1,this.clearInteractiveTimeout()},t.prototype.startHideTimeout=function(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.tooltipHideDelay)},t.prototype.clearShowTimeout=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)},t.prototype.clearHideTimeout=function(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},t.prototype.clearInteractiveTimeout=function(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)},t.prototype.clearTimeouts=function(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()},t.isLocked=!1,Fc([S("popupService")],t.prototype,"popupService",void 0),Fc([S("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Fc([V],t.prototype,"postConstruct",null),t}(k),aw=function(){function r(t){this.cssClassStates={},this.getGui=t}return r.prototype.addCssClass=function(t){var e=this,i=(t||"").split(" ");if(i.length>1)i.forEach(function(s){return e.addCssClass(s)});else if(!0!==this.cssClassStates[t]&&t.length){var o=this.getGui();o&&o.classList.add(t),this.cssClassStates[t]=!0}},r.prototype.removeCssClass=function(t){var e=this,i=(t||"").split(" ");if(i.length>1)i.forEach(function(s){return e.removeCssClass(s)});else if(!1!==this.cssClassStates[t]&&t.length){var o=this.getGui();o&&o.classList.remove(t),this.cssClassStates[t]=!1}},r.prototype.containsCssClass=function(t){var e=this.getGui();return!!e&&e.classList.contains(t)},r.prototype.addOrRemoveCssClass=function(t,e){var i=this;if(t){if(t.indexOf(" ")>=0){var n=(t||"").split(" ");if(n.length>1)return void n.forEach(function(a){return i.addOrRemoveCssClass(a,e)})}if(this.cssClassStates[t]!==e&&t.length){var s=this.getGui();s&&s.classList.toggle(t,e),this.cssClassStates[t]=e}}},r}(),lw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Nc=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},uw=new wr,he=function(r){function t(e){var i=r.call(this)||this;return i.displayed=!0,i.visible=!0,i.compId=uw.next(),i.cssClassManager=new aw(function(){return i.eGui}),e&&i.setTemplate(e),i}return lw(t,r),t.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsService.is("enableBrowserTooltips")},t.prototype.getCompId=function(){return this.compId},t.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},t.prototype.setTooltip=function(e,i,n){var o=this;this.tooltipText!=e&&(this.tooltipText&&(o.usingBrowserTooltips?o.getGui().removeAttribute("title"):o.tooltipFeature=o.destroyBean(o.tooltipFeature)),null!=e&&(this.tooltipText=e,this.tooltipText&&(o.usingBrowserTooltips?o.getGui().setAttribute("title",o.tooltipText):o.tooltipFeature=o.createBean(new Ic(o,i,n)))))},t.prototype.createChildComponentsFromTags=function(e,i){var n=this;qp(e.childNodes).forEach(function(s){if(s instanceof HTMLElement){var a=n.createComponentFromElement(s,function(u){u.getGui()&&n.copyAttributesFromNode(s,u.getGui())},i);if(a){if(a.addItems&&s.children.length){n.createChildComponentsFromTags(s,i);var l=Array.prototype.slice.call(s.children);a.addItems(l)}n.swapComponentForNode(a,e,s)}else s.childNodes&&n.createChildComponentsFromTags(s,i)}})},t.prototype.createComponentFromElement=function(e,i,n){var o=e.nodeName,s=n?n[e.getAttribute("ref")]:void 0,a=this.agStackComponentsRegistry.getComponentClass(o);if(a){t.elementGettingCreated=e;var l=new a(s);return l.setParentComponent(this),this.createBean(l,null,i),l}return null},t.prototype.copyAttributesFromNode=function(e,i){Zp(e.attributes,function(n,o){return i.setAttribute(n,o)})},t.prototype.swapComponentForNode=function(e,i,n){var o=e.getGui();i.replaceChild(o,n),i.insertBefore(document.createComment(n.nodeName),o),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,n)},t.prototype.swapInComponentForQuerySelectors=function(e,i){var n=this;this.iterateOverQuerySelectors(function(o){n[o.attributeName]===i&&(n[o.attributeName]=e)})},t.prototype.iterateOverQuerySelectors=function(e){for(var i=Object.getPrototypeOf(this);null!=i;){var n=i.__agComponentMetaData,o=Ia(i.constructor);n&&n[o]&&n[o].querySelectors&&n[o].querySelectors.forEach(function(s){return e(s)}),i=Object.getPrototypeOf(i)}},t.prototype.activateTabIndex=function(e){var i=this.gridOptionsService.getNum("tabIndex")||0;e||(e=[]),e.length||e.push(this.getGui()),e.forEach(function(n){return n.setAttribute("tabindex",i.toString())})},t.prototype.setTemplate=function(e,i){var n=Ct(e);this.setTemplateFromElement(n,i)},t.prototype.setTemplateFromElement=function(e,i){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),i)},t.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},t.prototype.wireQuerySelectors=function(){var e=this;if(this.eGui){var i=this;this.iterateOverQuerySelectors(function(n){var o=function(l){return i[n.attributeName]=l};if(n.refSelector&&e.getAttribute("ref")===n.refSelector)o(e.eGui);else{var a=e.eGui.querySelector(n.querySelector);a&&o(a.__agComponent||a)}})}},t.prototype.getGui=function(){return this.eGui},t.prototype.getFocusableElement=function(){return this.eGui},t.prototype.getAriaElement=function(){return this.getFocusableElement()},t.prototype.setParentComponent=function(e){this.parentComponent=e},t.prototype.getParentComponent=function(){return this.parentComponent},t.prototype.setGui=function(e){this.eGui=e},t.prototype.queryForHtmlElement=function(e){return this.eGui.querySelector(e)},t.prototype.queryForHtmlInputElement=function(e){return this.eGui.querySelector(e)},t.prototype.appendChild=function(e,i){null!=e&&(i||(i=this.eGui),ws(e)?i.appendChild(e):i.appendChild(e.getGui()))},t.prototype.isDisplayed=function(){return this.displayed},t.prototype.setVisible=function(e,i){void 0===i&&(i={}),e!==this.visible&&(this.visible=e,Kp(this.eGui,e,{skipAriaHidden:i.skipAriaHidden}))},t.prototype.setDisplayed=function(e,i){void 0===i&&(i={}),e!==this.displayed&&(this.displayed=e,Ce(this.eGui,e,{skipAriaHidden:i.skipAriaHidden}),this.dispatchEvent({type:t.EVENT_DISPLAYED_CHANGED,visible:this.displayed}))},t.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.parentComponent&&(this.parentComponent=void 0);var e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),r.prototype.destroy.call(this)},t.prototype.addGuiEventListener=function(e,i,n){var o=this;this.eGui.addEventListener(e,i,n),this.addDestroyFunc(function(){return o.eGui.removeEventListener(e,i)})},t.prototype.addCssClass=function(e){this.cssClassManager.addCssClass(e)},t.prototype.removeCssClass=function(e){this.cssClassManager.removeCssClass(e)},t.prototype.containsCssClass=function(e){return this.cssClassManager.containsCssClass(e)},t.prototype.addOrRemoveCssClass=function(e,i){this.cssClassManager.addOrRemoveCssClass(e,i)},t.prototype.getAttribute=function(e){var i=this.eGui;return i?i.getAttribute(e):null},t.prototype.getRefElement=function(e){return this.queryForHtmlElement('[ref="'+e+'"]')},t.EVENT_DISPLAYED_CHANGED="displayedChanged",Nc([S("agStackComponentsRegistry")],t.prototype,"agStackComponentsRegistry",void 0),Nc([tp],t.prototype,"preConstructOnComponent",null),Nc([tp],t.prototype,"createChildComponentsPreConstruct",null),t}(k);function U(r){return nf.bind(this,"[ref="+r+"]",r)}function nf(r,t,e,i,n){null!==r?"number"!=typeof n?function cw(r,t,e){var i=function dw(r,t){return r.__agComponentMetaData||(r.__agComponentMetaData={}),r.__agComponentMetaData[t]||(r.__agComponentMetaData[t]={}),r.__agComponentMetaData[t]}(r,Ia(r.constructor));i[t]||(i[t]=[]),i[t].push(e)}(e,"querySelectors",{attributeName:i,querySelector:r,refSelector:t}):console.error("AG Grid: QuerySelector should be on an attribute"):console.error("AG Grid: QuerySelector selector should not be null")}var hw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),of=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},pw=function(r){function t(){return r.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this}return hw(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){this.params=e;var i=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(i+" "+n("ariaFilterInput","Filter Input"))},t.prototype.onParentModelChanged=function(e){var i=this;e?this.params.parentFilterInstance(function(n){if(n.getModelAsString){var o=n.getModelAsString(e);i.eFloatingFilterText.setValue(o)}}):this.eFloatingFilterText.setValue("")},t.prototype.onParamsUpdated=function(e){this.init(e)},of([U("eFloatingFilterText")],t.prototype,"eFloatingFilterText",void 0),of([S("columnModel")],t.prototype,"columnModel",void 0),t}(he),rf=function(){function r(t,e,i,n){var o=this;this.alive=!0,this.context=t,this.eParent=n,e.getDateCompDetails(i).newAgStackInstance().then(function(l){o.alive?(o.dateComp=l,l&&(n.appendChild(l.getGui()),l.afterGuiAttached&&l.afterGuiAttached(),o.tempValue&&l.setDate(o.tempValue),null!=o.disabled&&o.setDateCompDisabled(o.disabled))):t.destroyBean(l)})}return r.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},r.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},r.prototype.setDate=function(t){this.dateComp?this.dateComp.setDate(t):this.tempValue=t},r.prototype.setDisabled=function(t){this.dateComp?this.setDateCompDisabled(t):this.disabled=t},r.prototype.setDisplayed=function(t){Ce(this.eParent,t)},r.prototype.setInputPlaceholder=function(t){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(t)},r.prototype.setInputAriaLabel=function(t){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(t)},r.prototype.afterGuiAttached=function(t){this.dateComp&&"function"==typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(t)},r.prototype.updateParams=function(t){var e;null!==(e=this.dateComp)&&void 0!==e&&e.onParamsUpdated&&"function"==typeof this.dateComp.onParamsUpdated&&this.dateComp.onParamsUpdated(t)},r.prototype.setDateCompDisabled=function(t){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(t)},r}(),sf=function(){function r(){this.customFilterOptions={}}return r.prototype.init=function(t,e){this.filterOptions=t.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(t)},r.prototype.getFilterOptions=function(){return this.filterOptions},r.prototype.mapCustomOptions=function(){var t=this;this.filterOptions&&this.filterOptions.forEach(function(e){if("string"!=typeof e){if(![["displayKey"],["displayName"],["predicate","test"]].every(function(o){return!!o.some(function(s){return null!=e[s]})||(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '"+o+"'"),!1)}))return void(t.filterOptions=t.filterOptions.filter(function(o){return o===e})||[]);t.customFilterOptions[e.displayKey]=e}})},r.prototype.selectDefaultItem=function(t){if(t.defaultOption)this.defaultOption=t.defaultOption;else if(this.filterOptions.length>=1){var e=this.filterOptions[0];"string"==typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},r.prototype.getDefaultOption=function(){return this.defaultOption},r.prototype.getCustomOption=function(t){return this.customFilterOptions[t]},r}(),af={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},fw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Gc=function(){return Gc=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Gc.apply(this,arguments)},lf=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},no=function(r){function t(e,i){void 0===i&&(i={});var n=r.call(this)||this;return n.eFocusableElement=e,n.callbacks=i,n.callbacks=Gc({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(o){if(!o.defaultPrevented){var s=n.focusService.findNextFocusableElement(n.eFocusableElement,!1,o.shiftKey);s&&(s.focus(),o.preventDefault())}}},i),n}return fw(t,r),t.prototype.postConstruct=function(){this.eFocusableElement.classList.add(t.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},t.prototype.addKeyDownListeners=function(e){var i=this;this.addManagedListener(e,"keydown",function(n){if(!n.defaultPrevented&&!Ii(n)){if(i.callbacks.shouldStopEventPropagation(n))return void on(n);n.key===M.TAB?i.callbacks.onTabKeyDown(n):i.callbacks.handleKeyDown&&i.callbacks.handleKeyDown(n)}})},t.FOCUS_MANAGED_CLASS="ag-focus-managed",lf([S("focusService")],t.prototype,"focusService",void 0),lf([V],t.prototype,"postConstruct",null),t}(k),vw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),kc=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},uf="ag-resizer-wrapper",gw='<div class="'+uf+'">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>',cf=function(r){function t(e,i){var n=r.call(this)||this;return n.element=e,n.dragStartPosition={x:0,y:0},n.position={x:0,y:0},n.lastSize={width:-1,height:-1},n.positioned=!1,n.resizersAdded=!1,n.resizeListeners=[],n.boundaryEl=null,n.isResizing=!1,n.isMoving=!1,n.resizable={},n.movable=!1,n.currentResizer=null,n.config=Object.assign({},{popup:!1},i),n}return vw(t,r),t.prototype.center=function(){var e=this.offsetParent,i=e.clientHeight,o=e.clientWidth/2-this.getWidth()/2,s=i/2-this.getHeight()/2;this.offsetElement(o,s)},t.prototype.initialisePosition=function(){if(!this.positioned){var e=this.config,i=e.centered,n=e.forcePopupParentAsOffsetParent,o=e.minWidth,s=e.width,a=e.minHeight,l=e.height,u=e.x,c=e.y;this.offsetParent||this.setOffsetParent();var d=0,h=0,p=!!this.element.offsetParent;if(p){var f=this.findBoundaryElement(),v=window.getComputedStyle(f);if(null!=v.minWidth){var g=f.offsetWidth-this.element.offsetWidth;h=parseInt(v.minWidth,10)-g}if(null!=v.minHeight){var y=f.offsetHeight-this.element.offsetHeight;d=parseInt(v.minHeight,10)-y}}if(this.minHeight=a||d,this.minWidth=o||h,s&&this.setWidth(s),l&&this.setHeight(l),(!s||!l)&&this.refreshSize(),i)this.center();else if(u||c)this.offsetElement(u,c);else if(p&&n){var m=!0;if((f=this.boundaryEl)||(f=this.findBoundaryElement(),m=!1),f){var C=parseFloat(f.style.top),w=parseFloat(f.style.left);m?this.offsetElement(isNaN(w)?0:w,isNaN(C)?0:C):this.setPosition(w,C)}}this.positioned=!!this.offsetParent}},t.prototype.isPositioned=function(){return this.positioned},t.prototype.getPosition=function(){return this.position},t.prototype.setMovable=function(e,i){if(this.config.popup&&e!==this.movable){this.movable=e;var n=this.moveElementDragListener||{eElement:i,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(n),this.moveElementDragListener=n):(this.dragService.removeDragSource(n),this.moveElementDragListener=void 0)}},t.prototype.setResizable=function(e){var i=this;if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"==typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(function(n){var s=!!e[n],a=i.getResizerElement(n),l={dragStartPixels:0,eElement:a,onDragStart:function(u){return i.onResizeStart(u,n)},onDragging:i.onResize.bind(i),onDragStop:function(u){return i.onResizeEnd(u,n)}};(s||!i.isAlive()&&!s)&&(s?(i.dragService.addDragSource(l),i.resizeListeners.push(l),a.style.pointerEvents="all"):a.style.pointerEvents="none",i.resizable[n]=s)})},t.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},t.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var e=this.lastSize,i=e.height,n=e.width;-1!==n&&(this.element.style.width=n+"px"),-1!==i&&(this.element.style.height=i+"px")},t.prototype.getHeight=function(){return this.element.offsetHeight},t.prototype.setHeight=function(e){var i=this.config.popup,n=this.element,o=!1;if("string"==typeof e&&-1!==e.indexOf("%"))Ho(n,e),e=Ec(n),o=!0;else if(e=Math.max(this.minHeight,e),this.positioned){var s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(o?(n.style.maxHeight="unset",n.style.minHeight="unset"):i?Ho(n,e):(n.style.height=e+"px",n.style.flex="0 0 auto",this.lastSize.height="number"==typeof e?e:parseFloat(e)))},t.prototype.getAvailableHeight=function(){var e=this.config,i=e.popup,n=e.forcePopupParentAsOffsetParent;this.positioned||this.initialisePosition();var o=this.offsetParent.clientHeight;if(!o)return null;var s=this.element.getBoundingClientRect(),a=this.offsetParent.getBoundingClientRect(),l=i?this.position.y:s.top,u=i?0:a.top,c=0;if(n){var d=this.element.parentElement;d&&(c=d.getBoundingClientRect().bottom-s.bottom)}return o+u-l-c},t.prototype.getWidth=function(){return this.element.offsetWidth},t.prototype.setWidth=function(e){var i=this.element,n=this.config.popup,o=!1;if("string"==typeof e&&-1!==e.indexOf("%"))Ri(i,e),e=vs(i),o=!0;else if(this.positioned){e=Math.max(this.minWidth,e);var s=this.offsetParent.clientWidth,a=n?this.position.x:this.element.getBoundingClientRect().left;s&&e+a>s&&(e=s-a)}this.getWidth()!==e&&(o?(i.style.maxWidth="unset",i.style.minWidth="unset"):this.config.popup?Ri(i,e):(i.style.width=e+"px",i.style.flex=" unset",this.lastSize.width="number"==typeof e?e:parseFloat(e)))},t.prototype.offsetElement=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o=this.config.forcePopupParentAsOffsetParent?this.boundaryEl:this.element;o&&(this.popupService.positionPopup({ePopup:o,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:function(){return{x:e,y:i}}}),this.setPosition(parseFloat(o.style.left),parseFloat(o.style.top)))},t.prototype.constrainSizeToAvailableHeight=function(e){var i=this;this.config.forcePopupParentAsOffsetParent&&(e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),function(){var o=i.getAvailableHeight();i.element.style.setProperty("max-height",o+"px")}):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0)))},t.prototype.setPosition=function(e,i){this.position.x=e,this.position.y=i},t.prototype.updateDragStartPosition=function(e,i){this.dragStartPosition={x:e,y:i}},t.prototype.calculateMouseMovement=function(e){var i=e.e,o=e.isTop,a=e.topBuffer,l=i.clientX-this.dragStartPosition.x,u=i.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(i,!!e.isLeft,!!e.anywhereWithin,l)?0:l,movementY:this.shouldSkipY(i,!!o,a,u)?0:u}},t.prototype.shouldSkipX=function(e,i,n,o){var s=this.element.getBoundingClientRect(),a=this.offsetParent.getBoundingClientRect(),l=this.boundaryEl.getBoundingClientRect(),u=this.config.popup?this.position.x:s.left,c=u<=0&&a.left>=e.clientX||a.right<=e.clientX&&a.right<=l.right;return!!c||(i?o<0&&e.clientX>u+a.left||o>0&&e.clientX<u+a.left:n?o<0&&e.clientX>l.right||o>0&&e.clientX<u+a.left:o<0&&e.clientX>l.right||o>0&&e.clientX<l.right)},t.prototype.shouldSkipY=function(e,i,n,o){void 0===n&&(n=0);var s=this.element.getBoundingClientRect(),a=this.offsetParent.getBoundingClientRect(),l=this.boundaryEl.getBoundingClientRect(),u=this.config.popup?this.position.y:s.top,c=u<=0&&a.top>=e.clientY||a.bottom<=e.clientY&&a.bottom<=l.bottom;return!!c||(i?o<0&&e.clientY>u+a.top+n||o>0&&e.clientY<u+a.top:o<0&&e.clientY>l.bottom||o>0&&e.clientY<l.bottom)},t.prototype.createResizeMap=function(){var e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}},t.prototype.addResizers=function(){if(!this.resizersAdded){var e=this.element;if(e){var n=(new DOMParser).parseFromString(gw,"text/html").body;e.appendChild(n.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},t.prototype.removeResizers=function(){this.resizerMap=void 0;var e=this.element.querySelector("."+uf);e&&this.element.removeChild(e),this.resizersAdded=!1},t.prototype.getResizerElement=function(e){return this.resizerMap[e].element},t.prototype.onResizeStart=function(e,i){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!i.match(/top/i),isRight:!!i.match(/right/i),isBottom:!!i.match(/bottom/i),isLeft:!!i.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[i].element.classList.add("ag-active");var n=this.config;!n.popup&&!n.forcePopupParentAsOffsetParent&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)},t.prototype.getSiblings=function(){var i=this.element.parentElement;return i?Array.prototype.slice.call(i.children).filter(function(n){return!n.classList.contains("ag-hidden")}):null},t.prototype.getMinSizeOfSiblings=function(){for(var e=this.getSiblings()||[],i=0,n=0,o=0;o<e.length;o++){var s=e[o];if(s!==this.element){var l=this.minHeight||0,u=this.minWidth||0;if(s.style.flex&&"0 0 auto"!==s.style.flex){var c=window.getComputedStyle(s);c.minHeight&&(l=parseInt(c.minHeight,10)),c.minWidth&&(u=parseInt(c.minWidth,10))}else l=s.offsetHeight,u=s.offsetWidth;i+=l,n+=u}}return{height:i,width:n}},t.prototype.applySizeToSiblings=function(e){var i=null,n=this.getSiblings();if(n){for(var o=0;o<n.length;o++){var s=n[o];s!==i&&(e?s.style.height=s.offsetHeight+"px":s.style.width=s.offsetWidth+"px",s.style.flex="0 0 auto",s===this.element&&(i=n[o+1]))}i&&(i.style.removeProperty("height"),i.style.removeProperty("min-height"),i.style.removeProperty("max-height"),i.style.flex="1 1 auto")}},t.prototype.isResizable=function(){return Object.values(this.resizable).some(function(e){return e})},t.prototype.onResize=function(e){if(this.isResizing&&this.currentResizer){var i=this.config,n=i.popup,o=i.forcePopupParentAsOffsetParent,s=this.currentResizer,a=s.isTop,c=s.isLeft,d=s.isRight||c,h=s.isBottom||a,p=this.calculateMouseMovement({e,isLeft:c,isTop:a}),f=p.movementX,v=p.movementY,g=this.position.x,y=this.position.y,m=0,C=0;if(d&&f){var w=c?-1:1,_=this.getWidth(),b=_+f*w,O=!1;c&&(g+(m=_-b)<=0||b<=this.minWidth)&&(O=!0,m=0),O||this.setWidth(b)}if(h&&v){w=a?-1:1;var x=this.getHeight(),D=x+v*w,T=!1;a?(y+(C=x-D)<=0||D<=this.minHeight)&&(T=!0,C=0):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&x<D&&this.getMinSizeOfSiblings().height+D>this.element.parentElement.offsetHeight&&(T=!0),T||this.setHeight(D)}this.updateDragStartPosition(e.clientX,e.clientY),((n||o)&&m||C)&&this.offsetElement(g+m,y+C)}},t.prototype.onResizeEnd=function(e,i){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;var n={type:"resize",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi};this.element.classList.remove("ag-resizing"),this.resizerMap[i].element.classList.remove("ag-active"),this.dispatchEvent(n)},t.prototype.refreshSize=function(){var e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))},t.prototype.onMoveStart=function(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)},t.prototype.onMove=function(e){if(this.isMoving){var s,i=this.position,n=i.x,o=i.y;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());var a=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(n+a.movementX,o+a.movementY),this.updateDragStartPosition(e.clientX,e.clientY)}},t.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")},t.prototype.setOffsetParent=function(){this.offsetParent=this.config.forcePopupParentAsOffsetParent?this.popupService.getPopupParent():this.element.offsetParent},t.prototype.findBoundaryElement=function(){for(var e=this.element;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element},t.prototype.clearResizeListeners=function(){for(;this.resizeListeners.length;){var e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()},kc([S("popupService")],t.prototype,"popupService",void 0),kc([S("resizeObserverService")],t.prototype,"resizeObserverService",void 0),kc([S("dragService")],t.prototype,"dragService",void 0),t}(k),yw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Hc=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},el=function(r){function t(e){var i=r.call(this)||this;return i.filterNameKey=e,i.applyActive=!1,i.hidePopup=null,i.debouncePending=!1,i.appliedModel=null,i}return yw(t,r),t.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new no(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new cf(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)},t.prototype.handleKeyDown=function(e){},t.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},t.prototype.isFilterActive=function(){return!!this.appliedModel},t.prototype.resetTemplate=function(e){var i=this.getGui();i&&i.removeEventListener("submit",this.onFormSubmit);var n='\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-'+this.getCssIdentifier()+'-body-wrapper" ref="eFilterBody">\n                    '+this.createBodyTemplate()+"\n                </div>\n            </form>";this.setTemplate(n,e),(i=this.getGui())&&i.addEventListener("submit",this.onFormSubmit)},t.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},t.prototype.init=function(e){var i=this;this.setParams(e),this.resetUiToDefaults(!0).then(function(){i.updateUiVisibility(),i.setupOnBtApplyDebounce()})},t.prototype.setParams=function(e){this.providedFilterParams=e,this.applyActive=t.isUseApplyButton(e),this.createButtonPanel()},t.prototype.createButtonPanel=function(){var e=this,i=this.providedFilterParams.buttons;if(!(!i||i.length<1||this.isReadOnly())){var n=document.createElement("div");n.classList.add("ag-filter-apply-panel"),Mc(i).forEach(function(s){return function(s){var a,l;switch(s){case"apply":a=e.translate("applyFilter"),l=function(d){return e.onBtApply(!1,!1,d)};break;case"clear":a=e.translate("clearFilter"),l=function(){return e.onBtClear()};break;case"reset":a=e.translate("resetFilter"),l=function(){return e.onBtReset()};break;case"cancel":a=e.translate("cancelFilter"),l=function(d){e.onBtCancel(d)};break;default:return void console.warn("AG Grid: Unknown button type specified")}var c=Ct('<button\n                    type="'+("apply"===s?"submit":"button")+'"\n                    ref="'+s+'FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >'+a+"\n                </button>");n.appendChild(c),e.addManagedListener(c,"click",l)}(s)}),this.getGui().appendChild(n)}},t.prototype.getDefaultDebounceMs=function(){return 0},t.prototype.setupOnBtApplyDebounce=function(){var e=this,i=t.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),n=Fi(this.checkApplyDebounce.bind(this),i);this.onBtApplyDebounce=function(){e.debouncePending=!0,n()}},t.prototype.checkApplyDebounce=function(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())},t.prototype.getModel=function(){return this.appliedModel?this.appliedModel:null},t.prototype.setModel=function(e){var i=this;return(null!=e?this.setModelIntoUi(e):this.resetUiToDefaults()).then(function(){i.updateUiVisibility(),i.applyModel("api")})},t.prototype.onBtCancel=function(e){var i=this;this.resetUiToActiveModel(this.getModel(),function(){i.handleCancelEnd(e)})},t.prototype.handleCancelEnd=function(e){this.providedFilterParams.closeOnApply&&this.close(e)},t.prototype.resetUiToActiveModel=function(e,i){var n=this,o=function(){n.onUiChanged(!1,"prevent"),i?.()};null!=e?this.setModelIntoUi(e).then(o):this.resetUiToDefaults().then(o)},t.prototype.onBtClear=function(){var e=this;this.resetUiToDefaults().then(function(){return e.onUiChanged()})},t.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},t.prototype.applyModel=function(e){var i=this.getModelFromUi();if(!this.isModelValid(i))return!1;var n=this.appliedModel;return this.appliedModel=i,!this.areModelsEqual(n,i)},t.prototype.isModelValid=function(e){return!0},t.prototype.onFormSubmit=function(e){e.preventDefault()},t.prototype.onBtApply=function(e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!1),n&&n.preventDefault(),this.applyModel(i?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:i,source:"columnFilter"}),this.providedFilterParams.closeOnApply&&this.applyActive&&!e&&!i&&this.close(n)},t.prototype.onNewRowsLoaded=function(){},t.prototype.close=function(e){if(this.hidePopup){var o,n=e&&e.key;("Enter"===n||"Space"===n)&&(o={keyboardEvent:e}),this.hidePopup(o),this.hidePopup=null}},t.prototype.onUiChanged=function(e,i){if(void 0===e&&(e=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){var n=this.isModelValid(this.getModelFromUi());Cr(this.getRefElement("applyFilterButton"),!n)}e&&!i||"immediately"===i?this.onBtApply(e):(!this.applyActive&&!i||"debounce"===i)&&this.onBtApplyDebounce()},t.prototype.afterGuiAttached=function(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)},t.prototype.refreshFilterResizer=function(e){if(this.positionableFeature&&"toolPanel"!==e){var o=this.positionableFeature,s=this.gridOptionsService;"floatingFilter"===e?(o.restoreLastSize(),o.setResizable(s.is("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}},t.prototype.afterGuiDetached=function(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)},t.getDebounceMs=function(e,i){return t.isUseApplyButton(e)?(null!=e.debounceMs&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):null!=e.debounceMs?e.debounceMs:i},t.isUseApplyButton=function(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0},t.prototype.destroy=function(){var e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),r.prototype.destroy.call(this)},t.prototype.translate=function(e){return this.localeService.getLocaleTextFunc()(e,af[e])},t.prototype.getCellValue=function(e){var i=this.providedFilterParams;return this.providedFilterParams.valueGetter({api:i.api,colDef:i.colDef,column:i.column,columnApi:i.columnApi,context:i.context,data:e.data,getValue:function(u){return e.data[u]},node:e})},t.prototype.getPositionableElement=function(){return this.eFilterBody},Hc([S("rowModel")],t.prototype,"rowModel",void 0),Hc([U("eFilterBody")],t.prototype,"eFilterBody",void 0),Hc([V],t.prototype,"postConstruct",null),t}(he),mw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),df=function(r){function t(e,i){var n=r.call(this,i)||this;return n.labelSeparator="",n.labelAlignment="left",n.disabled=!1,n.label="",n.config=e||{},n}return mw(t,r),t.prototype.postConstruct=function(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");var e=this.config,i=e.labelSeparator,n=e.label,o=e.labelWidth,s=e.labelAlignment;null!=i&&this.setLabelSeparator(i),null!=n&&this.setLabel(n),null!=o&&this.setLabelWidth(o),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()},t.prototype.refreshLabel=function(){Pt(this.eLabel),"string"==typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(Ce(this.eLabel,!1),ot(this.eLabel,"presentation")):(Ce(this.eLabel,!0),ot(this.eLabel,null))},t.prototype.setLabelSeparator=function(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this},t.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-"+this.getCompId()+"-label",this.eLabel.id},t.prototype.getLabel=function(){return this.label},t.prototype.setLabel=function(e){return this.label===e||(this.label=e,this.refreshLabel()),this},t.prototype.setLabelAlignment=function(e){var n=this.getGui().classList;return n.toggle("ag-label-align-left","left"===e),n.toggle("ag-label-align-right","right"===e),n.toggle("ag-label-align-top","top"===e),this},t.prototype.setLabelEllipsis=function(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this},t.prototype.setLabelWidth=function(e){return null==this.label||Cs(this.eLabel,e),this},t.prototype.setDisabled=function(e){e=!!e;var i=this.getGui();return Cr(i,e),i.classList.toggle("ag-disabled",e),this.disabled=e,this},t.prototype.isDisabled=function(){return!!this.disabled},function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([V],t.prototype,"postConstruct",null),t}(he),ww=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),hf=function(r){function t(e,i,n){var o=r.call(this,e,i)||this;return o.className=n,o}return ww(t,r),t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.className&&this.addCssClass(this.className)},t.prototype.onValueChange=function(e){var i=this;return this.addManagedListener(this,E.EVENT_FIELD_VALUE_CHANGED,function(){return e(i.getValue())}),this},t.prototype.getWidth=function(){return this.getGui().clientWidth},t.prototype.setWidth=function(e){return Ri(this.getGui(),e),this},t.prototype.getPreviousValue=function(){return this.previousValue},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e,i){return this.value===e||(this.previousValue=this.value,this.value=e,i||this.dispatchEvent({type:E.EVENT_FIELD_VALUE_CHANGED})),this},t}(df),Sw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_s=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},pf=function(r){function t(e){var i=r.call(this,e,e?.template||'\n    <div class="ag-picker-field" role="presentation">\n        <div ref="eLabel"></div>\n            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n            <div ref="eDisplayField" class="ag-picker-field-display"></div>\n            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n        </div>\n    </div>',e?.className)||this;if(i.isPickerDisplayed=!1,i.skipClick=!1,i.pickerGap=4,i.hideCurrentPicker=null,i.ariaRole=e?.ariaRole,i.onPickerFocusIn=i.onPickerFocusIn.bind(i),i.onPickerFocusOut=i.onPickerFocusOut.bind(i),!e)return i;var n=e.pickerGap,o=e.maxPickerHeight,s=e.variableWidth,a=e.minPickerWidth,l=e.maxPickerWidth;return null!=n&&(i.pickerGap=n),i.variableWidth=!!s,null!=o&&i.setPickerMaxHeight(o),null!=a&&i.setPickerMinWidth(a),null!=l&&i.setPickerMaxWidth(l),i}return Sw(t,r),t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.setupAria();var e="ag-"+this.getCompId()+"-display";this.eDisplayField.setAttribute("id",e);var i=this.getAriaElement();xp(i,e),this.addManagedListener(i,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));var n=this.config.pickerIcon;if(n){var o=Ke(n,this.gridOptionsService);o&&this.eIcon.appendChild(o)}},t.prototype.setupAria=function(){var e=this.getAriaElement();e.setAttribute("tabindex",(this.gridOptionsService.getNum("tabIndex")||0).toString()),Hi(e,!1),this.ariaRole&&ot(e,this.ariaRole)},t.prototype.refreshLabel=function(){var e;Wa(this.getAriaElement(),null!==(e=this.getLabelId())&&void 0!==e?e:""),r.prototype.refreshLabel.call(this)},t.prototype.onLabelOrWrapperMouseDown=function(){this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())},t.prototype.onKeyDown=function(e){switch(e.key){case M.UP:case M.DOWN:case M.ENTER:case M.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case M.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}},t.prototype.showPicker=function(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());var e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)},t.prototype.renderAndPositionPicker=function(){var e=this,i=this.gridOptionsService.getDocument(),n=this.pickerComponent.getGui();this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(i.body,"wheel",function(b){n.contains(b.target)||e.hidePicker()}));var o=this.localeService.getLocaleTextFunc(),s=this.config,a=s.pickerType,c=s.modalPicker,h={modal:void 0===c||c,eChild:n,closeOnEsc:!0,closedCallback:function(){var b=i.activeElement===i.body;e.beforeHidePicker(),b&&e.isAlive()&&e.getFocusableElement().focus()},ariaLabel:o(s.pickerAriaLabelKey,s.pickerAriaLabelValue)},p=this.popupService.addPopup(h),f=this,v=f.maxPickerHeight,g=f.minPickerWidth,y=f.maxPickerWidth,m=f.pickerGap;f.variableWidth?(g&&(n.style.minWidth=g),n.style.width=Za(vs(this.eWrapper)),y&&(n.style.maxWidth=y)):Cs(n,y??vs(this.eWrapper));var w=v??fs(this.popupService.getPopupParent())+"px";n.style.setProperty("max-height",w),n.style.position="absolute";var _=this.gridOptionsService.is("enableRtl")?"right":"left";return this.popupService.positionPopupByComponent({type:a,eventSource:this.eWrapper,ePopup:n,position:"under",alignSide:_,keepWithinBounds:!0,nudgeY:m}),p.hideFunc},t.prototype.beforeHidePicker=function(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);var e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null},t.prototype.toggleExpandedStyles=function(e){this.isAlive()&&(Hi(this.getAriaElement(),e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e))},t.prototype.onPickerFocusIn=function(){this.togglePickerHasFocus(!0)},t.prototype.onPickerFocusOut=function(e){var i;null!==(i=this.pickerComponent)&&void 0!==i&&i.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)},t.prototype.togglePickerHasFocus=function(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)},t.prototype.hidePicker=function(){this.hideCurrentPicker&&this.hideCurrentPicker()},t.prototype.setAriaLabel=function(e){return xn(this.getAriaElement(),e),this},t.prototype.setInputWidth=function(e){return Cs(this.eWrapper,e),this},t.prototype.getFocusableElement=function(){return this.eWrapper},t.prototype.setPickerGap=function(e){return this.pickerGap=e,this},t.prototype.setPickerMinWidth=function(e){return"number"==typeof e&&(e+="px"),this.minPickerWidth=e??void 0,this},t.prototype.setPickerMaxWidth=function(e){return"number"==typeof e&&(e+="px"),this.maxPickerWidth=e??void 0,this},t.prototype.setPickerMaxHeight=function(e){return"number"==typeof e&&(e+="px"),this.maxPickerHeight=e??void 0,this},t.prototype.destroy=function(){this.hidePicker(),r.prototype.destroy.call(this)},_s([S("popupService")],t.prototype,"popupService",void 0),_s([U("eLabel")],t.prototype,"eLabel",void 0),_s([U("eWrapper")],t.prototype,"eWrapper",void 0),_s([U("eDisplayField")],t.prototype,"eDisplayField",void 0),_s([U("eIcon")],t.prototype,"eIcon",void 0),t}(hf),Ew=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ff=function(r){function t(e){void 0===e&&(e="default");var i=r.call(this,'<div class="ag-list ag-'+e+'-list" role="listbox"></div>')||this;return i.cssIdentifier=e,i.options=[],i.itemEls=[],i}return Ew(t,r),t.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},t.prototype.handleKeyDown=function(e){var i=e.key;switch(i){case M.ENTER:if(this.highlightedEl){var n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}else this.setValue(this.getValue());break;case M.DOWN:case M.UP:var o=i===M.DOWN,s=void 0;if(e.preventDefault(),this.highlightedEl){var l=this.itemEls.indexOf(this.highlightedEl)+(o?1:-1);l=Math.min(Math.max(l,0),this.itemEls.length-1),s=this.itemEls[l]}else s=this.itemEls[o?0:this.itemEls.length-1];this.highlightItem(s)}},t.prototype.addOptions=function(e){var i=this;return e.forEach(function(n){return i.addOption(n)}),this},t.prototype.addOption=function(e){var i=e.value,o=Ye(e.text||i);return this.options.push({value:i,text:o}),this.renderOption(i,o),this.updateIndices(),this},t.prototype.updateIndices=function(){var e=this.getGui().querySelectorAll(".ag-list-item");e.forEach(function(i,n){oc(i,n+1),nc(i,e.length)})},t.prototype.renderOption=function(e,i){var n=this,o=document.createElement("div");ot(o,"option"),o.classList.add("ag-list-item","ag-"+this.cssIdentifier+"-list-item"),o.innerHTML="<span>"+i+"</span>",o.tabIndex=-1,this.itemEls.push(o),this.addManagedListener(o,"mouseover",function(){return n.highlightItem(o)}),this.addManagedListener(o,"mouseleave",function(){return n.clearHighlighted()}),this.addManagedListener(o,"click",function(){return n.setValue(e)}),this.getGui().appendChild(o)},t.prototype.setValue=function(e,i){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(),this;var n=this.options.findIndex(function(s){return s.value===e});if(-1!==n){var o=this.options[n];this.value=o.value,this.displayValue=null!=o.text?o.text:o.value,this.highlightItem(this.itemEls[n]),i||this.fireChangeEvent()}return this},t.prototype.setValueByIndex=function(e){return this.setValue(this.options[e].value)},t.prototype.getValue=function(){return this.value},t.prototype.getDisplayValue=function(){return this.displayValue},t.prototype.refreshHighlighted=function(){var e=this;this.clearHighlighted();var i=this.options.findIndex(function(n){return n.value===e.value});-1!==i&&this.highlightItem(this.itemEls[i])},t.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},t.prototype.highlightItem=function(e){e.offsetParent&&(this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(t.ACTIVE_CLASS),Go(this.highlightedEl,!0),this.highlightedEl.focus())},t.prototype.clearHighlighted=function(){!this.highlightedEl||!this.highlightedEl.offsetParent||(this.highlightedEl.classList.remove(t.ACTIVE_CLASS),Go(this.highlightedEl,!1),this.highlightedEl=null)},t.prototype.fireChangeEvent=function(){this.dispatchEvent({type:E.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()},t.prototype.fireItemSelected=function(){this.dispatchEvent({type:t.EVENT_ITEM_SELECTED})},t.EVENT_ITEM_SELECTED="selectedItem",t.ACTIVE_CLASS="ag-active-item",function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([V],t.prototype,"init",null),t}(he),Rw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Vc=function(){return Vc=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Vc.apply(this,arguments)},Bc=function(r){function t(e){return r.call(this,Vc({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"listbox"},e))||this}return Rw(t,r),t.prototype.postConstruct=function(){var e;r.prototype.postConstruct.call(this),this.createListComponent(),this.eWrapper.tabIndex=null!==(e=this.gridOptionsService.getNum("tabIndex"))&&void 0!==e?e:0},t.prototype.createListComponent=function(){var e=this;this.listComponent=this.createBean(new ff("select")),this.listComponent.setParentComponent(this),this.listComponent.addGuiEventListener("keydown",function(i){i.key===M.TAB&&(i.preventDefault(),i.stopImmediatePropagation(),e.getGui().dispatchEvent(new KeyboardEvent("keydown",{key:i.key,shiftKey:i.shiftKey,ctrlKey:i.ctrlKey,bubbles:!0})))}),this.listComponent.addManagedListener(this.listComponent,ff.EVENT_ITEM_SELECTED,function(){e.hidePicker(),e.dispatchEvent({type:t.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,E.EVENT_FIELD_VALUE_CHANGED,function(){e.listComponent&&(e.setValue(e.listComponent.getValue(),!1,!0),e.hidePicker())})},t.prototype.createPickerComponent=function(){return this.listComponent},t.prototype.showPicker=function(){this.listComponent&&(r.prototype.showPicker.call(this),this.listComponent.refreshHighlighted())},t.prototype.addOptions=function(e){var i=this;return e.forEach(function(n){return i.addOption(n)}),this},t.prototype.addOption=function(e){return this.listComponent.addOption(e),this},t.prototype.setValue=function(e,i,n){return this.value!==e&&this.listComponent?(n||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),r.prototype.setValue.call(this,e,i))):this},t.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),r.prototype.destroy.call(this)},t.EVENT_ITEM_SELECTED="selectedItem",t}(pf),Ow=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Wc=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},oo=function(r){function t(e,i,n,o){void 0===n&&(n="text"),void 0===o&&(o="input");var s=r.call(this,e,'\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <'+o+' ref="eInput" class="ag-input-field-input"></'+o+">\n                </div>\n            </div>",i)||this;return s.inputType=n,s.displayFieldTag=o,s}return Ow(t,r),t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.setInputType(),this.eLabel.classList.add(this.className+"-label"),this.eWrapper.classList.add(this.className+"-input-wrapper"),this.eInput.classList.add(this.className+"-input"),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||"ag-"+this.getCompId()+"-input";var e=this.config,i=e.width,n=e.value;null!=i&&this.setWidth(i),null!=n&&this.setValue(n),this.addInputListeners(),this.activateTabIndex([this.eInput])},t.prototype.refreshLabel=function(){I(this.getLabel())?Wa(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),r.prototype.refreshLabel.call(this)},t.prototype.addInputListeners=function(){var e=this;this.addManagedListener(this.eInput,"input",function(i){return e.setValue(i.target.value)})},t.prototype.setInputType=function(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)},t.prototype.getInputElement=function(){return this.eInput},t.prototype.setInputWidth=function(e){return Cs(this.eWrapper,e),this},t.prototype.setInputName=function(e){return this.getInputElement().setAttribute("name",e),this},t.prototype.getFocusableElement=function(){return this.eInput},t.prototype.setMaxLength=function(e){return this.eInput.maxLength=e,this},t.prototype.setInputPlaceholder=function(e){return rn(this.eInput,"placeholder",e),this},t.prototype.setInputAriaLabel=function(e){return xn(this.eInput,e),this},t.prototype.setDisabled=function(e){return Cr(this.eInput,e),r.prototype.setDisabled.call(this,e)},t.prototype.setAutoComplete=function(e){return rn(this.eInput,"autocomplete",!0===e?null:"string"==typeof e?e:"off"),this},Wc([U("eLabel")],t.prototype,"eLabel",void 0),Wc([U("eWrapper")],t.prototype,"eWrapper",void 0),Wc([U("eInput")],t.prototype,"eInput",void 0),t}(hf),xw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),tl=function(r){function t(e,i,n){void 0===i&&(i="ag-checkbox"),void 0===n&&(n="checkbox");var o=r.call(this,e,i,n)||this;return o.labelAlignment="right",o.selected=!1,o.readOnly=!1,o.passive=!1,o}return xw(t,r),t.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},t.prototype.getNextValue=function(){return void 0===this.selected||!this.selected},t.prototype.setPassive=function(e){this.passive=e},t.prototype.isReadOnly=function(){return this.readOnly},t.prototype.setReadOnly=function(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e},t.prototype.setDisabled=function(e){return this.eWrapper.classList.toggle("ag-disabled",e),r.prototype.setDisabled.call(this,e)},t.prototype.toggle=function(){if(!this.eInput.disabled){var e=this.isSelected(),i=this.getNextValue();this.passive?this.dispatchChange(i,e):this.setValue(i)}},t.prototype.getValue=function(){return this.isSelected()},t.prototype.setValue=function(e,i){return this.refreshSelectedClass(e),this.setSelected(e,i),this},t.prototype.setName=function(e){return this.getInputElement().name=e,this},t.prototype.isSelected=function(){return this.selected},t.prototype.setSelected=function(e,i){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected="boolean"==typeof e?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=void 0===e,i||this.dispatchChange(this.selected,this.previousValue))},t.prototype.dispatchChange=function(e,i,n){this.dispatchEvent({type:E.EVENT_FIELD_VALUE_CHANGED,selected:e,previousValue:i,event:n});var o=this.getInputElement();this.eventService.dispatchEvent({type:E.EVENT_CHECKBOX_CHANGED,id:o.id,name:o.name,selected:e,previousValue:i})},t.prototype.onCheckboxClick=function(e){if(!this.passive&&!this.eInput.disabled){var i=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,i,e)}},t.prototype.refreshSelectedClass=function(e){this.eWrapper.classList.toggle("ag-checked",!0===e),this.eWrapper.classList.toggle("ag-indeterminate",null==e)},t}(oo),Dw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),vf=function(r){function t(e){return r.call(this,e,"ag-radio-button","radio")||this}return Dw(t,r),t.prototype.isSelected=function(){return this.eInput.checked},t.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},t.prototype.addInputListeners=function(){r.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,E.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},t.prototype.onChange=function(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)},t}(tl),Tw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),jc=function(){function r(t,e,i){this.localeService=t,this.optionsFactory=e,this.valueFormatter=i}return r.prototype.getModelAsString=function(t){var e=this;if(!t)return null;var i=null!=t.operator,n=this.localeService.getLocaleTextFunc();if(i){var o=t,s=o.conditions;s||(s=[o.condition1,o.condition2]);var u=s.map(function(y){return e.getModelAsString(y)}),c="AND"===o.operator?"andCondition":"orCondition";return u.join(" "+n(c,af[c])+" ")}if(t.type===Ve.BLANK||t.type===Ve.NOT_BLANK)return n(t.type,t.type);var d=t,h=this.optionsFactory.getCustomOption(d.type),p=h||{},f=p.displayKey,v=p.displayName;return f&&v&&0===p.numberOfInputs?(n(f,v),v):this.conditionToString(d,h)},r.prototype.updateParams=function(t){this.optionsFactory=t.optionsFactory},r.prototype.formatValue=function(t){var e;return this.valueFormatter?null!==(e=this.valueFormatter(t??null))&&void 0!==e?e:"":String(t)},r}(),Ve=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.eTypes=[],e.eJoinOperatorPanels=[],e.eJoinOperatorsAnd=[],e.eJoinOperatorsOr=[],e.eConditionBodies=[],e.listener=function(){return e.onUiChanged()},e.lastUiCompletePosition=null,e.joinOperatorId=0,e}return Tw(t,r),t.prototype.getNumberOfInputs=function(e){var i=this.optionsFactory.getCustomOption(e);return i?i.numberOfInputs??1:e&&[t.EMPTY,t.NOT_BLANK,t.BLANK].indexOf(e)>=0?0:e===t.IN_RANGE?2:1},t.prototype.onFloatingFilterChanged=function(e,i){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(i),this.onUiChanged(!0)},t.prototype.setTypeFromFloatingFilter=function(e){var i=this;this.eTypes.forEach(function(n,o){n.setValue(0===o?e:i.optionsFactory.getDefaultOption(),!0)})},t.prototype.getModelFromUi=function(){var e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:e[0],condition2:e[1],conditions:e}:e[0]},t.prototype.getConditionTypes=function(){return this.eTypes.map(function(e){return e.getValue()})},t.prototype.getConditionType=function(e){return this.eTypes[e].getValue()},t.prototype.getJoinOperator=function(){return 0===this.eJoinOperatorsOr.length?this.defaultJoinOperator:!0===this.eJoinOperatorsOr[0].getValue()?"OR":"AND"},t.prototype.areModelsEqual=function(e,i){var n=this;if(!e&&!i)return!0;if(!e&&i||e&&!i)return!1;var o=!e.operator,s=!i.operator;return!(!o&&s||o&&!s)&&(o?this.areSimpleModelsEqual(e,i):e.operator===i.operator&&Yn(e.conditions,i.conditions,function(p,f){return n.areSimpleModelsEqual(p,f)}))},t.prototype.setModelIntoUi=function(e){var i=this;if(e.operator){var o=e;o.conditions||(o.conditions=[o.condition1,o.condition2]);var s=this.validateAndUpdateConditions(o.conditions),a=this.getNumConditions();if(s<a)this.removeConditionsAndOperators(s);else if(s>a)for(var l=a;l<s;l++)this.createJoinOperatorPanel(),this.createOption();var u="OR"===o.operator;this.eJoinOperatorsAnd.forEach(function(d){return d.setValue(!u,!0)}),this.eJoinOperatorsOr.forEach(function(d){return d.setValue(u,!0)}),o.conditions.forEach(function(d,h){i.eTypes[h].setValue(d.type,!0),i.setConditionIntoUi(d,h)})}else{var c=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(c.type,!0),this.setConditionIntoUi(c,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),jt.resolve()},t.prototype.validateAndUpdateConditions=function(e){var i=e.length;return i>this.maxNumConditions&&(e.splice(this.maxNumConditions),ge(function(){return console.warn('AG Grid: Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.')},"simpleFilterSetModelMaxNumConditions"),i=this.maxNumConditions),i},t.prototype.doesFilterPass=function(e){var n,i=this,o=this.getModel();if(null==o)return!0;var s=o.operator,a=[];return s?a.push.apply(a,function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r}([],function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(null!==(n=o.conditions)&&void 0!==n?n:[]))):a.push(o),a[s&&"OR"===s?"some":"every"](function(c){return i.individualConditionPasses(e,c)})},t.prototype.setParams=function(e){r.prototype.setParams.call(this,e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new sf,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")},t.prototype.setNumConditions=function(e){var i,n;null!=e.suppressAndOrCondition&&ge(function(){return console.warn('AG Grid: Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.')},"simpleFilterSuppressAndOrCondition"),null!=e.alwaysShowBothConditions&&ge(function(){return console.warn('AG Grid: Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.')},"simpleFilterAlwaysShowBothConditions"),this.maxNumConditions=null!==(i=e.maxNumConditions)&&void 0!==i?i:e.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(ge(function(){return console.warn('AG Grid: "filterParams.maxNumConditions" must be greater than or equal to zero.')},"simpleFilterMaxNumConditions"),this.maxNumConditions=1),this.numAlwaysVisibleConditions=null!==(n=e.numAlwaysVisibleConditions)&&void 0!==n?n:e.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(ge(function(){return console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.')},"simpleFilterNumAlwaysVisibleConditions"),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(ge(function(){return console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".')},"simpleFilterNumAlwaysVisibleGreaterThanMaxNumConditions"),this.numAlwaysVisibleConditions=this.maxNumConditions)},t.prototype.createOption=function(){var e=this,i=this.createManagedBean(new Bc);this.eTypes.push(i),i.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(i.getGui());var n=this.createValueElement();this.eConditionBodies.push(n),this.eFilterBody.appendChild(n),this.putOptionsIntoDropdown(i),this.resetType(i);var o=this.getNumConditions()-1;this.forEachPositionInput(o,function(s){return e.resetInput(s)}),this.addChangedListeners(i,o)},t.prototype.createJoinOperatorPanel=function(){var e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");var i=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),n=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);var o=this.eJoinOperatorPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(i,o,s),this.resetJoinOperatorOr(n,o,s),this.isReadOnly()||(i.onValueChange(this.listener),n.onValueChange(this.listener))},t.prototype.createJoinOperator=function(e,i,n){var o=this.createManagedBean(new vf);return e.push(o),o.addCssClass("ag-filter-condition-operator"),o.addCssClass("ag-filter-condition-operator-"+n),i.appendChild(o.getGui()),o},t.prototype.getDefaultJoinOperator=function(e){return"AND"===e||"OR"===e?e:"AND"},t.prototype.createFilterListOptions=function(){var e=this,i=this.optionsFactory.getFilterOptions();this.filterListOptions=i.map(function(n){return"string"==typeof n?e.createBoilerplateListOption(n):e.createCustomListOption(n)})},t.prototype.putOptionsIntoDropdown=function(e){this.filterListOptions.forEach(function(i){e.addOption(i)}),e.setDisabled(this.filterListOptions.length<=1)},t.prototype.createBoilerplateListOption=function(e){return{value:e,text:this.translate(e)}},t.prototype.createCustomListOption=function(e){var i=e.displayKey,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:i,text:n?this.localeService.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(i)}},t.prototype.isAllowTwoConditions=function(){return this.maxNumConditions>=2},t.prototype.createBodyTemplate=function(){return""},t.prototype.getCssIdentifier=function(){return"simple-filter"},t.prototype.updateUiVisibility=function(){var e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)},t.prototype.updateNumConditions=function(){for(var e,i=-1,n=!0,o=0;o<this.getNumConditions();o++)this.isConditionUiComplete(o)?i=o:n=!1;if(this.shouldAddNewConditionAtEnd(n))this.createJoinOperatorPanel(),this.createOption();else{var s=null!==(e=this.lastUiCompletePosition)&&void 0!==e?e:this.getNumConditions()-2;if(i<s){this.removeConditionsAndOperators(s+1);var a=i+1,l=s-a;l>0&&this.removeConditionsAndOperators(a,l),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=i},t.prototype.updateConditionStatusesAndValues=function(e,i){var n=this;this.eTypes.forEach(function(s,a){var l=n.isConditionDisabled(a,e);s.setDisabled(l||n.filterListOptions.length<=1),1===a&&(Cr(n.eJoinOperatorPanels[0],l),n.eJoinOperatorsAnd[0].setDisabled(l),n.eJoinOperatorsOr[0].setDisabled(l))}),this.eConditionBodies.forEach(function(s,a){Ce(s,n.isConditionBodyVisible(a))});var o="OR"===(i??this.getJoinOperator());this.eJoinOperatorsAnd.forEach(function(s,a){s.setValue(!o,!0)}),this.eJoinOperatorsOr.forEach(function(s,a){s.setValue(o,!0)}),this.forEachInput(function(s,a,l,u){n.setElementDisplayed(s,a<u),n.setElementDisabled(s,n.isConditionDisabled(l,e))}),this.resetPlaceholder()},t.prototype.shouldAddNewConditionAtEnd=function(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()},t.prototype.removeConditionsAndOperators=function(e,i){if(!(e>=this.getNumConditions())){this.removeComponents(this.eTypes,e,i),this.removeElements(this.eConditionBodies,e,i),this.removeValueElements(e,i);var n=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,n,i),this.removeComponents(this.eJoinOperatorsAnd,n,i),this.removeComponents(this.eJoinOperatorsOr,n,i)}},t.prototype.removeElements=function(e,i,n){this.removeItems(e,i,n).forEach(function(s){return Dn(s)})},t.prototype.removeComponents=function(e,i,n){var o=this;this.removeItems(e,i,n).forEach(function(a){Dn(a.getGui()),o.destroyBean(a)})},t.prototype.removeItems=function(e,i,n){return null==n?e.splice(i):e.splice(i,n)},t.prototype.afterGuiAttached=function(e){if(r.prototype.afterGuiAttached.call(this,e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{var i=this.getInputs(0)[0];if(!i)return;i instanceof oo&&i.getInputElement().focus()}},t.prototype.afterGuiDetached=function(){r.prototype.afterGuiDetached.call(this);var e=this.getModel();(!this.areModelsEqual(e,this.getModelFromUi())||this.hasInvalidInputs())&&this.resetUiToActiveModel(e);for(var i=-1,n=-1,o=!1,s=this.getJoinOperator(),a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))-1===i&&(i=a,n=a);else{var u=a<i;(a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1)||u)&&(this.removeConditionsAndOperators(a,1),o=!0,u&&n--)}var c=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),c=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),c=!0),c&&this.updateConditionStatusesAndValues(n,s),o&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n},t.prototype.getPlaceholderText=function(e,i){var n=this.translate(e);if(Na(this.filterPlaceholder)){var o=this.filterPlaceholder,s=this.eTypes[i].getValue();n=o({filterOptionKey:s,filterOption:this.translate(s),placeholder:n})}else"string"==typeof this.filterPlaceholder&&(n=this.filterPlaceholder);return n},t.prototype.resetPlaceholder=function(){var e=this,i=this.localeService.getLocaleTextFunc();this.forEachInput(function(n,o,s,a){if(n instanceof oo){var l=0===o&&a>1?"inRangeStart":0===o?"filterOoo":"inRangeEnd",u=0===o&&a>1?i("ariaFilterFromValue","Filter from value"):0===o?i("ariaFilterValue","Filter Value"):i("ariaFilterToValue","Filter to Value");n.setInputPlaceholder(e.getPlaceholderText(l,s)),n.setInputAriaLabel(u)}})},t.prototype.setElementValue=function(e,i,n){e instanceof oo&&e.setValue(null!=i?String(i):null,!0)},t.prototype.setElementDisplayed=function(e,i){e instanceof he&&Ce(e.getGui(),i)},t.prototype.setElementDisabled=function(e,i){e instanceof he&&Cr(e.getGui(),i)},t.prototype.attachElementOnChange=function(e,i){e instanceof oo&&e.onValueChange(i)},t.prototype.forEachInput=function(e){var i=this;this.getConditionTypes().forEach(function(n,o){i.forEachPositionTypeInput(o,n,e)})},t.prototype.forEachPositionInput=function(e,i){var n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,i)},t.prototype.forEachPositionTypeInput=function(e,i,n){for(var o=this.getNumberOfInputs(i),s=this.getInputs(e),a=0;a<s.length;a++){var l=s[a];null!=l&&n(l,a,e,o)}},t.prototype.isConditionDisabled=function(e,i){return!!this.isReadOnly()||0!==e&&e>i+1},t.prototype.isConditionBodyVisible=function(e){var i=this.getConditionType(e);return this.getNumberOfInputs(i)>0},t.prototype.isConditionUiComplete=function(e){return!(e>=this.getNumConditions()||this.getConditionType(e)===t.EMPTY||this.getValues(e).some(function(n){return null==n}))},t.prototype.getNumConditions=function(){return this.eTypes.length},t.prototype.getUiCompleteConditions=function(){for(var e=[],i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)&&e.push(this.createCondition(i));return e},t.prototype.createMissingConditionsAndOperators=function(){if(!this.isReadOnly())for(var e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()},t.prototype.resetUiToDefaults=function(e){var i=this;return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(function(n){return i.resetType(n)}),this.eJoinOperatorsAnd.forEach(function(n,o){return i.resetJoinOperatorAnd(n,o,i.joinOperatorId+o)}),this.eJoinOperatorsOr.forEach(function(n,o){return i.resetJoinOperatorOr(n,o,i.joinOperatorId+o)}),this.joinOperatorId++,this.forEachInput(function(n){return i.resetInput(n)}),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),jt.resolve()},t.prototype.resetType=function(e){var n=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)},t.prototype.resetJoinOperatorAnd=function(e,i,n){this.resetJoinOperator(e,i,this.isDefaultOperator("AND"),this.translate("andCondition"),n)},t.prototype.resetJoinOperatorOr=function(e,i,n){this.resetJoinOperator(e,i,this.isDefaultOperator("OR"),this.translate("orCondition"),n)},t.prototype.resetJoinOperator=function(e,i,n,o,s){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName("ag-simple-filter-and-or-"+this.getCompId()+"-"+s).setLabel(o),i)},t.prototype.updateJoinOperatorsDisabled=function(){var e=this;this.eJoinOperatorsAnd.forEach(function(i,n){return e.updateJoinOperatorDisabled(i,n)}),this.eJoinOperatorsOr.forEach(function(i,n){return e.updateJoinOperatorDisabled(i,n)})},t.prototype.updateJoinOperatorDisabled=function(e,i){e.setDisabled(this.isReadOnly()||i>0)},t.prototype.resetInput=function(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())},t.prototype.setConditionIntoUi=function(e,i){var n=this,o=this.mapValuesFromModel(e);this.forEachInput(function(s,a,l,u){l===i&&n.setElementValue(s,null!=o[a]?o[a]:null)})},t.prototype.setValueFromFloatingFilter=function(e){var i=this;this.forEachInput(function(n,o,s,a){i.setElementValue(n,0===o&&0===s?e:null,!0)})},t.prototype.isDefaultOperator=function(e){return e===this.defaultJoinOperator},t.prototype.addChangedListeners=function(e,i){var n=this;this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(i,function(o){n.attachElementOnChange(o,n.listener)}))},t.prototype.individualConditionPasses=function(e,i){var n=this.getCellValue(e.node),o=this.mapValuesFromModel(i),s=this.optionsFactory.getCustomOption(i.type);return this.evaluateCustomFilter(s,o,n)??(null==n?this.evaluateNullValue(i.type):this.evaluateNonNullValue(o,n,i,e))},t.prototype.evaluateCustomFilter=function(e,i,n){if(null!=e){var o=e.predicate;if(null!=o&&!i.some(function(s){return null==s}))return o(i,n)}},t.prototype.isBlank=function(e){return null==e||"string"==typeof e&&0===e.trim().length},t.prototype.hasInvalidInputs=function(){return!1},t.EMPTY="empty",t.BLANK="blank",t.NOT_BLANK="notBlank",t.EQUALS="equals",t.NOT_EQUAL="notEqual",t.LESS_THAN="lessThan",t.LESS_THAN_OR_EQUAL="lessThanOrEqual",t.GREATER_THAN="greaterThan",t.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",t.IN_RANGE="inRange",t.CONTAINS="contains",t.NOT_CONTAINS="notContains",t.STARTS_WITH="startsWith",t.ENDS_WITH="endsWith",t}(el),Lw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ut=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Lw(t,r),t.prototype.setParams=function(e){r.prototype.setParams.call(this,e),this.scalarFilterParams=e},t.prototype.evaluateNullValue=function(e){switch(e){case t.EQUALS:case t.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case t.GREATER_THAN:case t.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case t.LESS_THAN:case t.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case t.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case t.BLANK:return!0;case t.NOT_BLANK:return!1}return!1},t.prototype.evaluateNonNullValue=function(e,i,n){var o=this.comparator(),s=null!=e[0]?o(e[0],i):0;switch(n.type){case t.EQUALS:return 0===s;case t.NOT_EQUAL:return 0!==s;case t.GREATER_THAN:return s>0;case t.GREATER_THAN_OR_EQUAL:return s>=0;case t.LESS_THAN:return s<0;case t.LESS_THAN_OR_EQUAL:return s<=0;case t.IN_RANGE:var a=o(e[1],i);return this.scalarFilterParams.inRangeInclusive?s>=0&&a<=0:s>0&&a<0;case t.BLANK:return this.isBlank(i);case t.NOT_BLANK:return!this.isBlank(i);default:return console.warn('AG Grid: Unexpected type of filter "'+n.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},t}(Ve),gf=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Uc=function(){return Uc=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Uc.apply(this,arguments)},Cf=function(r){function t(e,i,n){var o=r.call(this,i,n)||this;return o.dateFilterParams=e,o}return gf(t,r),t.prototype.conditionToString=function(e,i){var n=e.type,s=n==Ve.IN_RANGE||2===(i||{}).numberOfInputs,a=Wt(e.dateFrom),l=Wt(e.dateTo),u=this.dateFilterParams.inRangeFloatingFilterDateFormat;return s?(null!==a?mr(a,u):"null")+"-"+(null!==l?mr(l,u):"null"):null!=a?mr(a,u):""+n},t.prototype.updateParams=function(e){r.prototype.updateParams.call(this,e),this.dateFilterParams=e.dateFilterParams},t}(jc),wf=function(r){function t(){var e=r.call(this,"dateFilter")||this;return e.eConditionPanelsFrom=[],e.eConditionPanelsTo=[],e.dateConditionFromComps=[],e.dateConditionToComps=[],e.minValidYear=1e3,e.maxValidYear=1/0,e.minValidDate=null,e.maxValidDate=null,e}return gf(t,r),t.prototype.afterGuiAttached=function(e){r.prototype.afterGuiAttached.call(this,e),this.dateConditionFromComps[0].afterGuiAttached(e)},t.prototype.mapValuesFromModel=function(e){var i=e||{},n=i.dateFrom,o=i.dateTo,s=i.type;return[n&&Wt(n)||null,o&&Wt(o)||null].slice(0,this.getNumberOfInputs(s))},t.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},t.prototype.defaultComparator=function(e,i){return null==i||i<e?-1:i>e?1:0},t.prototype.setParams=function(e){this.dateFilterParams=e,r.prototype.setParams.call(this,e);var i=function(n,o){if(null!=e[n]){if(!isNaN(e[n]))return null==e[n]?o:Number(e[n]);console.warn("AG Grid: DateFilter "+n+" is not a number")}return o};this.minValidYear=i("minValidYear",1e3),this.maxValidYear=i("maxValidYear",1/0),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),this.minValidDate=e.minValidDate?e.minValidDate instanceof Date?e.minValidDate:Wt(e.minValidDate):null,this.maxValidDate=e.maxValidDate?e.maxValidDate instanceof Date?e.maxValidDate:Wt(e.maxValidDate):null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new Cf(this.dateFilterParams,this.localeService,this.optionsFactory)},t.prototype.createDateCompWrapper=function(e){var i=this,n=new rf(this.getContext(),this.userComponentFactory,{onDateChanged:function(){return i.onUiChanged()},filterParams:this.dateFilterParams},e);return this.addDestroyFunc(function(){return n.destroy()}),n},t.prototype.setElementValue=function(e,i){e.setDate(i)},t.prototype.setElementDisplayed=function(e,i){e.setDisplayed(i)},t.prototype.setElementDisabled=function(e,i){e.setDisabled(i)},t.prototype.getDefaultFilterOptions=function(){return t.DEFAULT_FILTER_OPTIONS},t.prototype.createValueElement=function(){var e=document.createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e},t.prototype.createFromToElement=function(e,i,n,o){var s=document.createElement("div");s.classList.add("ag-filter-"+o),s.classList.add("ag-filter-date-"+o),i.push(s),e.appendChild(s),n.push(this.createDateCompWrapper(s))},t.prototype.removeValueElements=function(e,i){this.removeDateComps(this.dateConditionFromComps,e,i),this.removeDateComps(this.dateConditionToComps,e,i),this.removeItems(this.eConditionPanelsFrom,e,i),this.removeItems(this.eConditionPanelsTo,e,i)},t.prototype.removeDateComps=function(e,i,n){this.removeItems(e,i,n).forEach(function(s){return s.destroy()})},t.prototype.isValidDateValue=function(e){if(null===e)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0},t.prototype.isConditionUiComplete=function(e){var i=this;if(!r.prototype.isConditionUiComplete.call(this,e))return!1;var n=!0;return this.forEachInput(function(o,s,a,l){a!==e||!n||s>=l||(n=n&&i.isValidDateValue(o.getDate()))}),n},t.prototype.areSimpleModelsEqual=function(e,i){return e.dateFrom===i.dateFrom&&e.dateTo===i.dateTo&&e.type===i.type},t.prototype.getFilterType=function(){return"date"},t.prototype.createCondition=function(e){var i=this.getConditionType(e),n={},o=this.getValues(e);return o.length>0&&(n.dateFrom=bi(o[0])),o.length>1&&(n.dateTo=bi(o[1])),Uc({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:i},n)},t.prototype.resetPlaceholder=function(){var e=this.localeService.getLocaleTextFunc(),i=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(function(o){o.setInputPlaceholder(i),o.setInputAriaLabel(n)})},t.prototype.getInputs=function(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]},t.prototype.getValues=function(e){var i=[];return this.forEachPositionInput(e,function(n,o,s,a){o<a&&i.push(n.getDate())}),i},t.prototype.getModelAsString=function(e){var i;return null!==(i=this.filterModelFormatter.getModelAsString(e))&&void 0!==i?i:""},t.DEFAULT_FILTER_OPTIONS=[ut.EQUALS,ut.GREATER_THAN,ut.LESS_THAN,ut.NOT_EQUAL,ut.IN_RANGE,ut.BLANK,ut.NOT_BLANK],function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([S("userComponentFactory")],t.prototype,"userComponentFactory",void 0),t}(ut),Fw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Sf=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Fw(t,r),t.prototype.getDefaultDebounceMs=function(){return 0},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.isEventFromFloatingFilter=function(e){return e&&e.afterFloatingFilter},t.prototype.isEventFromDataChange=function(e){return e?.afterDataChange},t.prototype.getLastType=function(){return this.lastType},t.prototype.isReadOnly=function(){return this.readOnly},t.prototype.setLastTypeFromModel=function(e){e?this.lastType=(e.operator?e.conditions[0]:e).type:this.lastType=this.optionsFactory.getDefaultOption()},t.prototype.canWeEditAfterModelFromParentFilter=function(e){return e?!e.operator&&this.isTypeEditable(e.type):this.isTypeEditable(this.lastType)},t.prototype.init=function(e){this.setSimpleParams(e)},t.prototype.setSimpleParams=function(e){this.optionsFactory=new sf,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!e.filterParams.readOnly;var i=this.isTypeEditable(this.lastType);this.setEditable(i)},t.prototype.onParamsUpdated=function(e){this.setSimpleParams(e)},t.prototype.doesFilterHaveSingleInput=function(e){var n=(this.optionsFactory.getCustomOption(e)||{}).numberOfInputs;return null==n||1==n},t.prototype.isTypeEditable=function(e){var i=[Ve.IN_RANGE,Ve.EMPTY,Ve.BLANK,Ve.NOT_BLANK];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&i.indexOf(e)<0},t}(he),Iw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),zc=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Nw=function(r){function t(){return r.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>')||this}return Iw(t,r),t.prototype.getDefaultFilterOptions=function(){return wf.DEFAULT_FILTER_OPTIONS},t.prototype.init=function(e){r.prototype.init.call(this,e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new Cf(this.filterParams,this.localeService,this.optionsFactory);var i=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(i("ariaDateFilterInput","Date Filter Input"))},t.prototype.onParamsUpdated=function(e){r.prototype.onParamsUpdated.call(this,e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams})},t.prototype.setEditable=function(e){Ce(this.eDateWrapper,e),Ce(this.eReadOnlyText.getGui(),!e)},t.prototype.onParentModelChanged=function(e,i){if(!this.isEventFromFloatingFilter(i)&&!this.isEventFromDataChange(i)){r.prototype.setLastTypeFromModel.call(this,e);var n=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);this.setEditable(n),n?(this.dateComp.setDate(e?Wt(e.dateFrom):null),this.eReadOnlyText.setValue("")):(this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null))}},t.prototype.onDateChanged=function(){var e=this,n=bi(this.dateComp.getDate());this.params.parentFilterInstance(function(o){if(o){var s=Wt(n);o.onFloatingFilterChanged(e.getLastType()||null,s)}})},t.prototype.getDateComponentParams=function(){var e=el.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Fi(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}},t.prototype.createDateComponent=function(){var e=this;this.dateComp=new rf(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper),this.addDestroyFunc(function(){return e.dateComp.destroy()})},t.prototype.updateDateComponent=function(){var e=this.getDateComponentParams(),i=this.gridOptionsService,o=i.columnApi,s=i.context;e.api=i.api,e.columnApi=o,e.context=s,this.dateComp.updateParams(e)},t.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},zc([S("userComponentFactory")],t.prototype,"userComponentFactory",void 0),zc([U("eReadOnlyText")],t.prototype,"eReadOnlyText",void 0),zc([U("eDateWrapper")],t.prototype,"eDateWrapper",void 0),t}(Sf),Gw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Vw=function(r){function t(){return r.call(this,'\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>')||this}return Gw(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){var i=this;this.params=e,this.setParams(e);var n=this.gridOptionsService.getDocument(),o=this.eDateInput.getInputElement();this.addManagedListener(o,"mousedown",function(){i.eDateInput.isDisabled()||i.usingSafariDatePicker||o.focus()}),this.addManagedListener(o,"input",function(s){s.target===n.activeElement&&(i.eDateInput.isDisabled()||i.params.onDateChanged())})},t.prototype.setParams=function(e){var i=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&Ei(),i.type=n?"date":"text";var o=e.filterParams||{},s=o.minValidYear,a=o.maxValidYear,l=o.minValidDate,u=o.maxValidDate;if(l&&s&&ge(function(){return console.warn("AG Grid: DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.")},"DateFilter.minValidDateAndMinValidYearWarning"),u&&a&&ge(function(){return console.warn("AG Grid: DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.")},"DateFilter.maxValidDateAndMaxValidYearWarning"),l&&u){var c=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}([l,u].map(function(p){return p instanceof Date?p:Wt(p)}),2),d=c[0],h=c[1];d&&h&&d.getTime()>h.getTime()&&ge(function(){return console.warn("AG Grid: DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")},"DateFilter.minValidDateAndMaxValidDateWarning")}l?i.min=l instanceof Date?mr(l):l:s&&(i.min=s+"-01-01"),u?i.max=u instanceof Date?mr(u):u:a&&(i.max=a+"-12-31")},t.prototype.onParamsUpdated=function(e){this.params=e,this.setParams(e)},t.prototype.getDate=function(){return Wt(this.eDateInput.getValue())},t.prototype.setDate=function(e){this.eDateInput.setValue(bi(e,!1))},t.prototype.setInputPlaceholder=function(e){this.eDateInput.setInputPlaceholder(e)},t.prototype.setDisabled=function(e){this.eDateInput.setDisabled(e)},t.prototype.afterGuiAttached=function(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()},t.prototype.shouldUseBrowserDatePicker=function(e){return e.filterParams&&null!=e.filterParams.browserDatePicker?e.filterParams.browserDatePicker:Ka()||vc()||Ei()&&fc()>=14.1},function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([U("eDateInput")],t.prototype,"eDateInput",void 0),t}(he),Bw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Bo=function(r){function t(e,i,n){return void 0===i&&(i="ag-text-field"),void 0===n&&(n="text"),r.call(this,e,i,n)||this}return Bw(t,r),t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},t.prototype.setValue=function(e,i){return this.eInput.value!==e&&(this.eInput.value=I(e)?e:""),r.prototype.setValue.call(this,e,i)},t.prototype.setStartValue=function(e){this.setValue(e,!0)},t.prototype.preventDisallowedCharacters=function(){var e=new RegExp("["+this.config.allowedCharPattern+"]");this.addManagedListener(this.eInput,"keydown",function(n){Qa(n)&&n.key&&!e.test(n.key)&&n.preventDefault()}),this.addManagedListener(this.eInput,"paste",function(n){var o,s=null===(o=n.clipboardData)||void 0===o?void 0:o.getData("text");s&&s.split("").some(function(a){return!e.test(a)})&&n.preventDefault()})},t}(oo),Ww=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Kc=function(r){function t(e){return r.call(this,e,"ag-number-field","number")||this}return Ww(t,r),t.prototype.postConstruct=function(){var e=this;r.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",function(){var i=parseFloat(e.eInput.value),n=isNaN(i)?"":e.normalizeValue(i.toString());e.value!==n&&e.setValue(n)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"},t.prototype.onWheel=function(e){document.activeElement===this.eInput&&e.preventDefault()},t.prototype.normalizeValue=function(e){if(""===e)return"";null!=this.precision&&(e=this.adjustPrecision(e));var i=parseFloat(e);return null!=this.min&&i<this.min?e=this.min.toString():null!=this.max&&i>this.max&&(e=this.max.toString()),e},t.prototype.adjustPrecision=function(e,i){if(null==this.precision)return e;if(i){var n=parseFloat(e).toFixed(this.precision);return parseFloat(n).toString()}var o=String(e).split(".");if(o.length>1){if(o[1].length<=this.precision)return e;if(this.precision>0)return o[0]+"."+o[1].slice(0,this.precision)}return o[0]},t.prototype.setMin=function(e){return this.min===e||(this.min=e,rn(this.eInput,"min",e)),this},t.prototype.setMax=function(e){return this.max===e||(this.max=e,rn(this.eInput,"max",e)),this},t.prototype.setPrecision=function(e){return this.precision=e,this},t.prototype.setStep=function(e){return this.step===e||(this.step=e,rn(this.eInput,"step",e)),this},t.prototype.setValue=function(e,i){var n=this;return this.setValueOrInputValue(function(o){return r.prototype.setValue.call(n,o,i)},function(){return n},e)},t.prototype.setStartValue=function(e){var i=this;return this.setValueOrInputValue(function(n){return r.prototype.setValue.call(i,n,!0)},function(n){i.eInput.value=n},e)},t.prototype.setValueOrInputValue=function(e,i,n){if(I(n)){var o=this.isScientificNotation(n);if(o&&this.eInput.validity.valid)return e(n);if(o||(o=(n=this.adjustPrecision(n))!=this.normalizeValue(n)),o)return i(n)}return e(n)},t.prototype.getValue=function(){if(this.eInput.validity.valid){var e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):r.prototype.getValue.call(this)}},t.prototype.isScientificNotation=function(e){return"string"==typeof e&&e.includes("e")},t}(Bo),_f=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ef=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return _f(t,r),t.prototype.conditionToString=function(e,i){return e.type==Ve.IN_RANGE||2===(i||{}).numberOfInputs?this.formatValue(e.filter)+"-"+this.formatValue(e.filterTo):null!=e.filter?this.formatValue(e.filter):""+e.type},t}(jc);function $c(r){return(r??{}).allowedCharPattern??null}var bf=function(r){function t(){var e=r.call(this,"numberFilter")||this;return e.eValuesFrom=[],e.eValuesTo=[],e}return _f(t,r),t.prototype.mapValuesFromModel=function(e){var i=e||{},o=i.filterTo,s=i.type;return[this.processValue(i.filter),this.processValue(o)].slice(0,this.getNumberOfInputs(s))},t.prototype.getDefaultDebounceMs=function(){return 500},t.prototype.comparator=function(){return function(e,i){return e===i?0:e<i?1:-1}},t.prototype.setParams=function(e){this.numberFilterParams=e,r.prototype.setParams.call(this,e),this.filterModelFormatter=new Ef(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)},t.prototype.getDefaultFilterOptions=function(){return t.DEFAULT_FILTER_OPTIONS},t.prototype.setElementValue=function(e,i,n){var o=!n&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(i??null):i;r.prototype.setElementValue.call(this,e,o)},t.prototype.createValueElement=function(){var e=$c(this.numberFilterParams),i=document.createElement("div");return i.classList.add("ag-filter-body"),ot(i,"presentation"),this.createFromToElement(i,this.eValuesFrom,"from",e),this.createFromToElement(i,this.eValuesTo,"to",e),i},t.prototype.createFromToElement=function(e,i,n,o){var s=this.createManagedBean(o?new Bo({allowedCharPattern:o}):new Kc);s.addCssClass("ag-filter-"+n),s.addCssClass("ag-filter-filter"),i.push(s),e.appendChild(s.getGui())},t.prototype.removeValueElements=function(e,i){this.removeComponents(this.eValuesFrom,e,i),this.removeComponents(this.eValuesTo,e,i)},t.prototype.getValues=function(e){var i=this,n=[];return this.forEachPositionInput(e,function(o,s,a,l){s<l&&n.push(i.processValue(i.stringToFloat(o.getValue())))}),n},t.prototype.areSimpleModelsEqual=function(e,i){return e.filter===i.filter&&e.filterTo===i.filterTo&&e.type===i.type},t.prototype.getFilterType=function(){return"number"},t.prototype.processValue=function(e){return null==e||isNaN(e)?null:e},t.prototype.stringToFloat=function(e){if("number"==typeof e)return e;var i=en(e);return null!=i&&""===i.trim()&&(i=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(i):null==i||"-"===i.trim()?null:parseFloat(i)},t.prototype.createCondition=function(e){var i=this.getConditionType(e),n={filterType:this.getFilterType(),type:i},o=this.getValues(e);return o.length>0&&(n.filter=o[0]),o.length>1&&(n.filterTo=o[1]),n},t.prototype.getInputs=function(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]},t.prototype.getModelAsString=function(e){var i;return null!==(i=this.filterModelFormatter.getModelAsString(e))&&void 0!==i?i:""},t.prototype.hasInvalidInputs=function(){var e=!1;return this.forEachInput(function(i){i.getInputElement().validity.valid||(e=!0)}),e},t.DEFAULT_FILTER_OPTIONS=[ut.EQUALS,ut.NOT_EQUAL,ut.LESS_THAN,ut.LESS_THAN_OR_EQUAL,ut.GREATER_THAN,ut.GREATER_THAN_OR_EQUAL,ut.IN_RANGE,ut.BLANK,ut.NOT_BLANK],t}(ut),Rf=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),il=function(){return il=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},il.apply(this,arguments)},Of=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Rf(t,r),t.prototype.conditionToString=function(e,i){return e.type==Ve.IN_RANGE||2===(i||{}).numberOfInputs?e.filter+"-"+e.filterTo:null!=e.filter?""+e.filter:""+e.type},t}(jc),Yc=function(r){function t(){var e=r.call(this,"textFilter")||this;return e.eValuesFrom=[],e.eValuesTo=[],e}return Rf(t,r),t.trimInput=function(e){var i=e&&e.trim();return""===i?e:i},t.prototype.getDefaultDebounceMs=function(){return 500},t.prototype.setParams=function(e){this.textFilterParams=e,r.prototype.setParams.call(this,e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?t.DEFAULT_FORMATTER:t.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new Of(this.localeService,this.optionsFactory)},t.prototype.getTextMatcher=function(){var e=this.textFilterParams.textCustomComparator;return e?(ne.doOnce(function(){return console.warn("AG Grid - textCustomComparator is deprecated, use textMatcher instead.")},"textCustomComparator.deprecated"),function(i){return e(i.filterOption,i.value,i.filterText)}):this.textFilterParams.textMatcher||t.DEFAULT_MATCHER},t.prototype.createCondition=function(e){var i=this.getConditionType(e),n={filterType:this.getFilterType(),type:i},o=this.getValuesWithSideEffects(e,!0);return o.length>0&&(n.filter=o[0]),o.length>1&&(n.filterTo=o[1]),n},t.prototype.getFilterType=function(){return"text"},t.prototype.areSimpleModelsEqual=function(e,i){return e.filter===i.filter&&e.filterTo===i.filterTo&&e.type===i.type},t.prototype.getInputs=function(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]},t.prototype.getValues=function(e){return this.getValuesWithSideEffects(e,!1)},t.prototype.getValuesWithSideEffects=function(e,i){var n=this,o=[];return this.forEachPositionInput(e,function(s,a,l,u){var c;if(a<u){var d=en(s.getValue());i&&n.textFilterParams.trimInput&&(d=null!==(c=t.trimInput(d))&&void 0!==c?c:null,s.setValue(d,!0)),o.push(d)}}),o},t.prototype.getDefaultFilterOptions=function(){return t.DEFAULT_FILTER_OPTIONS},t.prototype.createValueElement=function(){var e=document.createElement("div");return e.classList.add("ag-filter-body"),ot(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e},t.prototype.createFromToElement=function(e,i,n){var o=this.createManagedBean(new Bo);o.addCssClass("ag-filter-"+n),o.addCssClass("ag-filter-filter"),i.push(o),e.appendChild(o.getGui())},t.prototype.removeValueElements=function(e,i){this.removeComponents(this.eValuesFrom,e,i),this.removeComponents(this.eValuesTo,e,i)},t.prototype.mapValuesFromModel=function(e){var i=e||{};return[i.filter||null,i.filterTo||null].slice(0,this.getNumberOfInputs(i.type))},t.prototype.evaluateNullValue=function(e){return!!e&&[Ve.NOT_EQUAL,Ve.NOT_CONTAINS,Ve.BLANK].indexOf(e)>=0},t.prototype.evaluateNonNullValue=function(e,i,n,o){var s=this,a=e.map(function(y){return s.formatter(y)})||[],l=this.formatter(i),u=this.textFilterParams,c=u.api,d=u.colDef,h=u.column,p=u.columnApi,f=u.context,v=u.textFormatter;if(n.type===Ve.BLANK)return this.isBlank(i);if(n.type===Ve.NOT_BLANK)return!this.isBlank(i);var g={api:c,colDef:d,column:h,columnApi:p,context:f,node:o.node,data:o.data,filterOption:n.type,value:l,textFormatter:v};return a.some(function(y){return s.matcher(il(il({},g),{filterText:y}))})},t.prototype.getModelAsString=function(e){var i;return null!==(i=this.filterModelFormatter.getModelAsString(e))&&void 0!==i?i:""},t.DEFAULT_FILTER_OPTIONS=[Ve.CONTAINS,Ve.NOT_CONTAINS,Ve.EQUALS,Ve.NOT_EQUAL,Ve.STARTS_WITH,Ve.ENDS_WITH,Ve.BLANK,Ve.NOT_BLANK],t.DEFAULT_FORMATTER=function(e){return e},t.DEFAULT_LOWERCASE_FORMATTER=function(e){return null==e?null:e.toString().toLowerCase()},t.DEFAULT_MATCHER=function(e){var n=e.value,o=e.filterText;if(null==o)return!1;switch(e.filterOption){case t.CONTAINS:return n.indexOf(o)>=0;case t.NOT_CONTAINS:return n.indexOf(o)<0;case t.EQUALS:return n===o;case t.NOT_EQUAL:return n!=o;case t.STARTS_WITH:return 0===n.indexOf(o);case t.ENDS_WITH:var s=n.lastIndexOf(o);return s>=0&&s===n.length-o.length;default:return!1}},t}(Ve),xf=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xc=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Df=function(r){function t(e){var i=r.call(this)||this;return i.params=e,i.valueChangedListener=function(){},i}return xf(t,r),t.prototype.setupGui=function(e){var n,i=this;this.eFloatingFilterTextInput=this.createManagedBean(new Bo(null===(n=this.params)||void 0===n?void 0:n.config));var o=this.eFloatingFilterTextInput.getGui();e.appendChild(o),this.addManagedListener(o,"input",function(s){return i.valueChangedListener(s)}),this.addManagedListener(o,"keydown",function(s){return i.valueChangedListener(s)})},t.prototype.setEditable=function(e){this.eFloatingFilterTextInput.setDisabled(!e)},t.prototype.setAutoComplete=function(e){this.eFloatingFilterTextInput.setAutoComplete(e)},t.prototype.getValue=function(){return this.eFloatingFilterTextInput.getValue()},t.prototype.setValue=function(e,i){this.eFloatingFilterTextInput.setValue(e,i)},t.prototype.setValueChangedListener=function(e){this.valueChangedListener=e},t.prototype.setParams=function(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)},t.prototype.setAriaLabel=function(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)},t}(k),Tf=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return xf(t,r),t.prototype.postConstruct=function(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>\n        ')},t.prototype.getDefaultDebounceMs=function(){return 500},t.prototype.onParentModelChanged=function(e,i){this.isEventFromFloatingFilter(i)||this.isEventFromDataChange(i)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))},t.prototype.init=function(e){this.setupFloatingFilterInputService(e),r.prototype.init.call(this,e),this.setTextInputParams(e)},t.prototype.setupFloatingFilterInputService=function(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)},t.prototype.setTextInputParams=function(e){var i;this.params=e;var n=null!==(i=e.browserAutoComplete)&&void 0!==i&&i;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:n}),this.applyActive=el.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){var o=el.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),s=Fi(this.syncUpWithParentFilter.bind(this),o);this.floatingFilterInputService.setValueChangedListener(s)}},t.prototype.onParamsUpdated=function(e){r.prototype.onParamsUpdated.call(this,e),this.setTextInputParams(e)},t.prototype.recreateFloatingFilterInputService=function(e){var i=this.floatingFilterInputService.getValue();Pt(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(i,!0)},t.prototype.getAriaLabel=function(e){return this.columnModel.getDisplayNameForColumn(e.column,"header",!0)+" "+this.localeService.getLocaleTextFunc()("ariaFilterInput","Filter Input")},t.prototype.syncUpWithParentFilter=function(e){var i=this;if(!this.applyActive||e.key===M.ENTER){var o=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(o=Yc.trimInput(o),this.floatingFilterInputService.setValue(o,!0)),this.params.parentFilterInstance(function(s){s&&s.onFloatingFilterChanged(i.getLastType()||null,o||null)})}},t.prototype.setEditable=function(e){this.floatingFilterInputService.setEditable(e)},Xc([S("columnModel")],t.prototype,"columnModel",void 0),Xc([U("eFloatingFilterInputContainer")],t.prototype,"eFloatingFilterInputContainer",void 0),Xc([V],t.prototype,"postConstruct",null),t}(Sf),Pf=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),jw=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.valueChangedListener=function(){},e.numberInputActive=!0,e}return Pf(t,r),t.prototype.setupGui=function(e){var i=this;this.eFloatingFilterNumberInput=this.createManagedBean(new Kc),this.eFloatingFilterTextInput=this.createManagedBean(new Bo),this.eFloatingFilterTextInput.setDisabled(!0);var n=this.eFloatingFilterNumberInput.getGui(),o=this.eFloatingFilterTextInput.getGui();e.appendChild(n),e.appendChild(o),this.setupListeners(n,function(s){return i.valueChangedListener(s)}),this.setupListeners(o,function(s){return i.valueChangedListener(s)})},t.prototype.setEditable=function(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)},t.prototype.setAutoComplete=function(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)},t.prototype.getValue=function(){return this.getActiveInputElement().getValue()},t.prototype.setValue=function(e,i){this.getActiveInputElement().setValue(e,i)},t.prototype.getActiveInputElement=function(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput},t.prototype.setValueChangedListener=function(e){this.valueChangedListener=e},t.prototype.setupListeners=function(e,i){this.addManagedListener(e,"input",i),this.addManagedListener(e,"keydown",i)},t.prototype.setParams=function(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)},t.prototype.setAriaLabel=function(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)},t}(k),Uw=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Pf(t,r),t.prototype.init=function(e){var i;r.prototype.init.call(this,e),this.filterModelFormatter=new Ef(this.localeService,this.optionsFactory,null===(i=e.filterParams)||void 0===i?void 0:i.numberFormatter)},t.prototype.onParamsUpdated=function(e){$c(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),r.prototype.onParamsUpdated.call(this,e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},t.prototype.getDefaultFilterOptions=function(){return bf.DEFAULT_FILTER_OPTIONS},t.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},t.prototype.createFloatingFilterInputService=function(e){return this.allowedCharPattern=$c(e.filterParams),this.createManagedBean(this.allowedCharPattern?new Df({config:{allowedCharPattern:this.allowedCharPattern}}):new jw)},t}(Tf),zw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Kw=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return zw(t,r),t.prototype.init=function(e){r.prototype.init.call(this,e),this.filterModelFormatter=new Of(this.localeService,this.optionsFactory)},t.prototype.onParamsUpdated=function(e){r.prototype.onParamsUpdated.call(this,e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},t.prototype.getDefaultFilterOptions=function(){return Yc.DEFAULT_FILTER_OPTIONS},t.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},t.prototype.createFloatingFilterInputService=function(){return this.createManagedBean(new Df)},t}(Tf),ni=function(){function r(t,e){var i=this;void 0===e&&(e=!1),this.destroyFuncs=[],this.touching=!1,this.eventService=new $n,this.eElement=t,this.preventMouseClick=e;var n=this.onTouchStart.bind(this),o=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",o,{passive:!0}),this.eElement.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(function(){i.eElement.removeEventListener("touchstart",n,{passive:!0}),i.eElement.removeEventListener("touchmove",o,{passive:!0}),i.eElement.removeEventListener("touchend",s,{passive:!1})})}return r.prototype.getActiveTouch=function(t){for(var e=0;e<t.length;e++)if(t[e].identifier===this.touchStart.identifier)return t[e];return null},r.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},r.prototype.onTouchStart=function(t){var e=this;if(!this.touching){this.touchStart=t.touches[0],this.touching=!0,this.moved=!1;var i=this.touchStart;window.setTimeout(function(){e.touching&&e.touchStart===i&&!e.moved&&(e.moved=!0,e.eventService.dispatchEvent({type:r.EVENT_LONG_TAP,touchStart:e.touchStart,touchEvent:t}))},500)}},r.prototype.onTouchMove=function(t){if(this.touching){var e=this.getActiveTouch(t.touches);e&&!Lc(e,this.touchStart,4)&&(this.moved=!0)}},r.prototype.onTouchEnd=function(t){this.touching&&(this.moved||(this.eventService.dispatchEvent({type:r.EVENT_TAP,touchStart:this.touchStart}),this.checkForDoubleTap()),this.preventMouseClick&&t.cancelable&&t.preventDefault(),this.touching=!1)},r.prototype.checkForDoubleTap=function(){var t=(new Date).getTime();this.lastTapTime&&this.lastTapTime>0&&t-this.lastTapTime>r.DOUBLE_TAP_MILLIS?(this.eventService.dispatchEvent({type:r.EVENT_DOUBLE_TAP,touchStart:this.touchStart}),this.lastTapTime=null):this.lastTapTime=t},r.prototype.destroy=function(){this.destroyFuncs.forEach(function(t){return t()})},r.EVENT_TAP="tap",r.EVENT_DOUBLE_TAP="doubleTap",r.EVENT_LONG_TAP="longTap",r.DOUBLE_TAP_MILLIS=500,r}(),$w=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Wo=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},qc=function(r){function t(e){var i=r.call(this)||this;return e||i.setTemplate(t.TEMPLATE),i}return $w(t,r),t.prototype.attachCustomElements=function(e,i,n,o,s){this.eSortOrder=e,this.eSortAsc=i,this.eSortDesc=n,this.eSortMixed=o,this.eSortNone=s},t.prototype.setupSort=function(e,i){var n=this;void 0===i&&(i=!1),this.column=e,this.suppressOrder=i,this.setupMultiSortIndicator(),this.column.getColDef().sortable&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedListener(this.eventService,E.EVENT_SORT_CHANGED,function(){return n.onSortChanged()}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return n.onSortChanged()}),this.onSortChanged())},t.prototype.addInIcon=function(e,i,n){if(null!=i){var o=Ke(e,this.gridOptionsService,n);o&&i.appendChild(o)}},t.prototype.onSortChanged=function(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()},t.prototype.updateIcons=function(){var e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc&&Ce(this.eSortAsc,"asc"===e,{skipAriaHidden:!0}),this.eSortDesc&&Ce(this.eSortDesc,"desc"===e,{skipAriaHidden:!0}),this.eSortNone){var o=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.is("unSortIcon");Ce(this.eSortNone,!o&&null==e,{skipAriaHidden:!0})}},t.prototype.setupMultiSortIndicator=function(){var e=this;this.addInIcon("sortUnSort",this.eSortMixed,this.column);var i=this.column.getColDef().showRowGroup;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&i&&(this.addManagedListener(this.eventService,E.EVENT_SORT_CHANGED,function(){return e.updateMultiSortIndicator()}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return e.updateMultiSortIndicator()}),this.updateMultiSortIndicator())},t.prototype.updateMultiSortIndicator=function(){if(this.eSortMixed){var e="mixed"===this.sortController.getDisplaySortForColumn(this.column);Ce(this.eSortMixed,e,{skipAriaHidden:!0})}},t.prototype.updateSortOrder=function(){var i,e=this;if(this.eSortOrder){var n=this.sortController.getColumnsWithSortingOrdered(),o=null!==(i=this.sortController.getDisplaySortIndexForColumn(this.column))&&void 0!==i?i:-1,s=n.some(function(l){var u;return null!==(u=e.sortController.getDisplaySortIndexForColumn(l))&&void 0!==u&&u});Ce(this.eSortOrder,o>=0&&s,{skipAriaHidden:!0}),o>=0?this.eSortOrder.innerHTML=(o+1).toString():Pt(this.eSortOrder)}},t.TEMPLATE='<span class="ag-sort-indicator-container">\n            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>\n        </span>',Wo([U("eSortOrder")],t.prototype,"eSortOrder",void 0),Wo([U("eSortAsc")],t.prototype,"eSortAsc",void 0),Wo([U("eSortDesc")],t.prototype,"eSortDesc",void 0),Wo([U("eSortMixed")],t.prototype,"eSortMixed",void 0),Wo([U("eSortNone")],t.prototype,"eSortNone",void 0),Wo([S("columnModel")],t.prototype,"columnModel",void 0),Wo([S("sortController")],t.prototype,"sortController",void 0),t}(he),Yw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),oi=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Xw=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.lastMovingChanged=0,e}return Yw(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.refresh=function(e){return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&this.workOutSort()==this.currentSort&&(this.setDisplayName(e),!0)},t.prototype.workOutTemplate=function(){var e=ap(this.params.template,t.TEMPLATE);return e&&e.trim?e.trim():e},t.prototype.init=function(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(e.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(e)},t.prototype.setDisplayName=function(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;var i=Ye(this.currentDisplayName);this.eText&&(this.eText.innerHTML=i)}},t.prototype.setupIcons=function(e){this.addInIcon("menu",this.eMenu,e),this.addInIcon("filter",this.eFilter,e)},t.prototype.addInIcon=function(e,i,n){if(null!=i){var o=Ke(e,this.gridOptionsService,n);o&&i.appendChild(o)}},t.prototype.setupTap=function(){var e=this,i=this.gridOptionsService;if(!i.is("suppressTouch")){var n=new ni(this.getGui(),!0),o=i.is("suppressMenuHide"),s=o&&I(this.eMenu),a=s?new ni(this.eMenu,!0):n;this.params.enableMenu&&this.addManagedListener(a,ni[s?"EVENT_TAP":"EVENT_LONG_TAP"],function(d){i.api.showColumnMenuAfterMouseClick(e.params.column,d.touchStart)}),this.params.enableSorting&&this.addManagedListener(n,ni.EVENT_TAP,function(d){o&&e.eMenu.contains(d.touchStart.target)||e.sortController.progressSort(e.params.column,!1,"uiColumnSorted")}),this.addDestroyFunc(function(){return n.destroy()}),s&&this.addDestroyFunc(function(){return a.destroy()})}},t.prototype.workOutShowMenu=function(){var e=!this.gridOptionsService.is("suppressMenuHide"),i=eo()&&e;return this.params.enableMenu&&!i},t.prototype.setMenu=function(){var e=this;if(this.eMenu){if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return void Dn(this.eMenu);var i=this.gridOptionsService.is("suppressMenuHide");this.addManagedListener(this.eMenu,"click",function(){return e.showMenu(e.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",i)}},t.prototype.showMenu=function(e){e||(e=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,e,"columnMenu")},t.prototype.workOutSort=function(){return this.params.enableSorting},t.prototype.setupSort=function(){var e=this;if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new qc(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),this.currentSort){var i="ctrl"===this.gridOptionsService.get("multiSortKey");this.addManagedListener(this.params.column,Ae.EVENT_MOVING_CHANGED,function(){e.lastMovingChanged=(new Date).getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",function(o){var s=e.params.column.isMoving(),a=(new Date).getTime();s||a-e.lastMovingChanged<50||e.params.progressSort(i?o.ctrlKey||o.metaKey:o.shiftKey)});var n=function(){if(e.addOrRemoveCssClass("ag-header-cell-sorted-asc",e.params.column.isSortAscending()),e.addOrRemoveCssClass("ag-header-cell-sorted-desc",e.params.column.isSortDescending()),e.addOrRemoveCssClass("ag-header-cell-sorted-none",e.params.column.isSortNone()),e.params.column.getColDef().showRowGroup){var o=e.columnModel.getSourceColumnsForGroupColumn(e.params.column),s=o?.every(function(l){return e.params.column.getSort()==l.getSort()});e.addOrRemoveCssClass("ag-header-cell-sorted-mixed",!s)}};this.addManagedListener(this.eventService,E.EVENT_SORT_CHANGED,n),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,n)}},t.prototype.setupFilterIcon=function(){this.eFilter&&(this.addManagedListener(this.params.column,Ae.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},t.prototype.onFilterChanged=function(){var e=this.params.column.isFilterActive();Ce(this.eFilter,e,{skipAriaHidden:!0})},t.TEMPLATE='<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation">\n                <span ref="eText" class="ag-header-cell-text"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n            </div>\n        </div>',oi([S("sortController")],t.prototype,"sortController",void 0),oi([S("menuFactory")],t.prototype,"menuFactory",void 0),oi([S("columnModel")],t.prototype,"columnModel",void 0),oi([U("eFilter")],t.prototype,"eFilter",void 0),oi([U("eSortIndicator")],t.prototype,"eSortIndicator",void 0),oi([U("eMenu")],t.prototype,"eMenu",void 0),oi([U("eLabel")],t.prototype,"eLabel",void 0),oi([U("eText")],t.prototype,"eText",void 0),oi([U("eSortOrder")],t.prototype,"eSortOrder",void 0),oi([U("eSortAsc")],t.prototype,"eSortAsc",void 0),oi([U("eSortDesc")],t.prototype,"eSortDesc",void 0),oi([U("eSortMixed")],t.prototype,"eSortMixed",void 0),oi([U("eSortNone")],t.prototype,"eSortNone",void 0),t}(he),qw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Zc=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Zw=function(r){function t(){return r.call(this,t.TEMPLATE)||this}return qw(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},t.prototype.checkWarnings=function(){this.params.template&&ge(function(){return console.warn("AG Grid: A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")},"HeaderGroupComp.templateNotSupported")},t.prototype.setupExpandIcons=function(){var e=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var i=function(s){if(!Ii(s)){var a=!e.params.columnGroup.isExpanded();e.columnModel.setColumnGroupOpened(e.params.columnGroup.getProvidedColumnGroup(),a,"uiColumnExpanded")}};this.addTouchAndClickListeners(this.eCloseIcon,i),this.addTouchAndClickListeners(this.eOpenIcon,i);var n=function(s){on(s)};this.addManagedListener(this.eCloseIcon,"dblclick",n),this.addManagedListener(this.eOpenIcon,"dblclick",n),this.addManagedListener(this.getGui(),"dblclick",i),this.updateIconVisibility();var o=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(o,ze.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(o,ze.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},t.prototype.addTouchAndClickListeners=function(e,i){var n=new ni(e,!0);this.addManagedListener(n,ni.EVENT_TAP,i),this.addDestroyFunc(function(){return n.destroy()}),this.addManagedListener(e,"click",i)},t.prototype.updateIconVisibility=function(){if(this.params.columnGroup.isExpandable()){var i=this.params.columnGroup.isExpanded();Ce(this.eOpenIcon,i),Ce(this.eCloseIcon,!i)}else Ce(this.eOpenIcon,!1),Ce(this.eCloseIcon,!1)},t.prototype.addInIcon=function(e,i){var n=Ke(e,this.gridOptionsService,null);n&&this.getRefElement(i).appendChild(n)},t.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable())return Ce(this.eOpenIcon,!1),void Ce(this.eCloseIcon,!1)},t.prototype.setupLabel=function(){var e,i=this.params,n=i.displayName,o=i.columnGroup;if(I(n)){var s=Ye(n);this.getRefElement("agLabel").innerHTML=s}this.addOrRemoveCssClass("ag-sticky-label",!(null!==(e=o.getColGroupDef())&&void 0!==e&&e.suppressStickyLabel))},t.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>',Zc([S("columnModel")],t.prototype,"columnModel",void 0),Zc([U("agOpened")],t.prototype,"eOpenIcon",void 0),Zc([U("agClosed")],t.prototype,"eCloseIcon",void 0),t}(he),Qw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),jo=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Qw(t,r),t.prototype.isPopup=function(){return!0},t.prototype.setParentComponent=function(e){e.addCssClass("ag-has-popup"),r.prototype.setParentComponent.call(this,e)},t.prototype.destroy=function(){var e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),r.prototype.destroy.call(this)},t}(he),Jw=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),tS=function(r){function t(){return r.call(this,t.TEMPLATE)||this}return Jw(t,r),t.prototype.init=function(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),I(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()},t.prototype.onKeyDown=function(e){var i=e.key;(i===M.LEFT||i===M.UP||i===M.RIGHT||i===M.DOWN||e.shiftKey&&i===M.ENTER)&&e.stopPropagation()},t.prototype.afterGuiAttached=function(){var e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},t.prototype.getValue=function(){var e=this.eTextArea.getValue();return I(e)||I(this.params.value)?this.params.parseValue(e):this.params.value},t.TEMPLATE='<div class="ag-large-text">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([U("eTextArea")],t.prototype,"eTextArea",void 0),t}(jo),iS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Af=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},nS=function(r){function t(){var e=r.call(this,'<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>\n            </div>')||this;return e.startedByEnter=!1,e}return iS(t,r),t.prototype.init=function(e){this.focusAfterAttached=e.cellStartedEdit;var i=this,n=i.eSelect,o=i.valueFormatterService,s=i.gridOptionsService,a=e.values,l=e.value,u=e.eventKey;if(ie(a))console.warn("AG Grid: no values found for select cellEditor");else{this.startedByEnter=null!=u&&u===M.ENTER;var c=!1;a.forEach(function(f){var v={value:f},g=o.formatValue(e.column,null,f);v.text=null!=g?g:f,n.addOption(v),c=c||l===f}),c?n.setValue(e.value,!0):e.values.length&&n.setValue(e.values[0],!0);var d=e.valueListGap,h=e.valueListMaxWidth,p=e.valueListMaxHeight;null!=d&&n.setPickerGap(d),null!=p&&n.setPickerMaxHeight(p),null!=h&&n.setPickerMaxWidth(h),"fullRow"!==s.get("editType")&&this.addManagedListener(this.eSelect,Bc.EVENT_ITEM_SELECTED,function(){return e.stopEditing()})}},t.prototype.afterGuiAttached=function(){var e=this;this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(function(){e.isAlive()&&e.eSelect.showPicker()})},t.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},t.prototype.getValue=function(){return this.eSelect.getValue()},t.prototype.isPopup=function(){return!1},Af([S("valueFormatterService")],t.prototype,"valueFormatterService",void 0),Af([U("eSelect")],t.prototype,"eSelect",void 0),t}(jo),oS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),nl=function(r){function t(e){var i=r.call(this,'\n            <div class="ag-cell-edit-wrapper">\n                '+e.getTemplate()+"\n            </div>")||this;return i.cellEditorInput=e,i}return oS(t,r),t.prototype.init=function(e){this.params=e;var n,i=this.eInput;if(this.cellEditorInput.init(i,e),e.cellStartedEdit){this.focusAfterAttached=!0;var o=e.eventKey;o===M.BACKSPACE||e.eventKey===M.DELETE?n="":o&&1===o.length?n=o:(n=this.cellEditorInput.getStartValue(),o!==M.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,n=this.cellEditorInput.getStartValue();null!=n&&i.setStartValue(n),this.addManagedListener(i.getGui(),"keydown",function(s){var a=s.key;(a===M.PAGE_UP||a===M.PAGE_DOWN)&&s.preventDefault()})},t.prototype.afterGuiAttached=function(){var e,i,n=this.localeService.getLocaleTextFunc(),o=this.eInput;if(o.setInputAriaLabel(n("ariaInputEditor","Input Editor")),this.focusAfterAttached){Ei()||o.getFocusableElement().focus();var s=o.getInputElement();this.highlightAllOnFocus?s.select():null===(i=(e=this.cellEditorInput).setCaret)||void 0===i||i.call(e)}},t.prototype.focusIn=function(){var e=this.eInput,i=e.getFocusableElement(),n=e.getInputElement();i.focus(),n.select()},t.prototype.getValue=function(){return this.cellEditorInput.getValue()},t.prototype.isPopup=function(){return!1},function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([U("eInput")],t.prototype,"eInput",void 0),t}(jo),sS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),aS=function(){function r(){}return r.prototype.getTemplate=function(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'},r.prototype.init=function(t,e){this.eInput=t,this.params=e,null!=e.maxLength&&t.setMaxLength(e.maxLength)},r.prototype.getValue=function(){var t=this.eInput.getValue();return I(t)||I(this.params.value)?this.params.parseValue(t):this.params.value},r.prototype.getStartValue=function(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value},r.prototype.setCaret=function(){var t=this.eInput.getValue(),e=I(t)&&t.length||0;e&&this.eInput.getInputElement().setSelectionRange(e,e)},r}(),Lf=function(r){function t(){return r.call(this,new aS)||this}return sS(t,r),t}(nl),lS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),hS=function(r){function t(){var e=r.call(this,t.TEMPLATE)||this;return e.refreshCount=0,e}return lS(t,r),t.prototype.init=function(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e)},t.prototype.showDelta=function(e,i){var n=Math.abs(i),o=e.formatValue(n),s=I(o)?o:n,a=i>=0;this.eDelta.innerHTML=a?"\u2191"+s:"\u2193"+s,this.eDelta.classList.toggle("ag-value-change-delta-up",a),this.eDelta.classList.toggle("ag-value-change-delta-down",!a)},t.prototype.setTimerToRemoveDelta=function(){var e=this;this.refreshCount++;var i=this.refreshCount;window.setTimeout(function(){i===e.refreshCount&&e.hideDeltaValue()},2e3)},t.prototype.hideDeltaValue=function(){this.eValue.classList.remove("ag-value-change-value-highlight"),Pt(this.eDelta)},t.prototype.refresh=function(e){var i=e.value;return i!==this.lastValue&&(I(e.valueFormatted)?this.eValue.innerHTML=e.valueFormatted:I(e.value)?this.eValue.innerHTML=i:Pt(this.eValue),!this.filterManager.isSuppressFlashingCellsBecauseFiltering())&&("number"==typeof i&&"number"==typeof this.lastValue&&this.showDelta(e,i-this.lastValue),this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=i,!0)},t.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([S("filterManager")],t.prototype,"filterManager",void 0),t}(he),pS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),vS=function(r){function t(){var e=r.call(this,t.TEMPLATE)||this;return e.refreshCount=0,e.eCurrent=e.queryForHtmlElement(".ag-value-slide-current"),e}return pS(t,r),t.prototype.init=function(e){this.refresh(e)},t.prototype.addSlideAnimation=function(){var e=this;this.refreshCount++;var i=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=Ct('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout(function(){i===e.refreshCount&&e.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(function(){i===e.refreshCount&&(e.getGui().removeChild(e.ePrevious),e.ePrevious=null)},3e3)},t.prototype.refresh=function(e){var i=e.value;return ie(i)&&(i=""),i!==this.lastValue&&!this.filterManager.isSuppressFlashingCellsBecauseFiltering()&&(this.addSlideAnimation(),this.lastValue=i,I(e.valueFormatted)?this.eCurrent.innerHTML=e.valueFormatted:I(e.value)?this.eCurrent.innerHTML=i:Pt(this.eCurrent),!0)},t.TEMPLATE='<span>\n            <span class="ag-value-slide-current"></span>\n        </span>',function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([S("filterManager")],t.prototype,"filterManager",void 0),t}(he),Sr=function(){return Sr=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Sr.apply(this,arguments)},pe=function(){function r(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=r.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}return r.prototype.setData=function(t){this.setDataCommon(t,!1)},r.prototype.updateData=function(t){this.setDataCommon(t,!0)},r.prototype.setDataCommon=function(t,e){var i=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();var n=this.createDataChangedEvent(t,i,e);this.dispatchLocalEvent(n)},r.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},r.prototype.createDataChangedEvent=function(t,e,i){return{type:r.EVENT_DATA_CHANGED,node:this,oldData:e,newData:t,update:i}},r.prototype.createLocalRowEvent=function(t){return{type:t,node:this}},r.prototype.getRowIndexString=function(){return"top"===this.rowPinned?"t-"+this.rowIndex:"bottom"===this.rowPinned?"b-"+this.rowIndex:this.rowIndex.toString()},r.prototype.createDaemonNode=function(){var t=new r(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t},r.prototype.setDataAndId=function(t,e){var i=I(this.id)?this.createDaemonNode():null,n=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(e),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,i);var o=this.createDataChangedEvent(t,n,!1);this.dispatchLocalEvent(o)},r.prototype.checkRowSelectable=function(){var t=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(!t||t(this))},r.prototype.setRowSelectable=function(t){if(this.selectable!==t&&(this.selectable=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_SELECTABLE_CHANGED)),this.beans.gridOptionsService.is("groupSelectsChildren"))){var i=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:i??!1,source:"selectableChanged"})}},r.prototype.setId=function(t){var e=this.beans.gridOptionsService.getCallback("getRowId");if(e)if(this.data){var i=this.getGroupKeys(!0);this.id=e({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level}),null!==this.id&&"string"==typeof this.id&&this.id.startsWith(r.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row IDs cannot start with "+r.ID_PREFIX_ROW_GROUP+", this is a reserved prefix for AG Grid's row grouping feature."),null!==this.id&&"string"!=typeof this.id&&(this.id=""+this.id)}else this.id=void 0;else this.id=t},r.prototype.getGroupKeys=function(t){void 0===t&&(t=!1);var e=[],i=this;for(t&&(i=i.parent);i&&i.level>=0;)e.push(i.key),i=i.parent;return e.reverse(),e},r.prototype.isPixelInRange=function(t){return!(!I(this.rowTop)||!I(this.rowHeight))&&t>=this.rowTop&&t<this.rowTop+this.rowHeight},r.prototype.setFirstChild=function(t){this.firstChild!==t&&(this.firstChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_FIRST_CHILD_CHANGED)))},r.prototype.setLastChild=function(t){this.lastChild!==t&&(this.lastChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_LAST_CHILD_CHANGED)))},r.prototype.setChildIndex=function(t){this.childIndex!==t&&(this.childIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_CHILD_INDEX_CHANGED)))},r.prototype.setRowTop=function(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_TOP_CHANGED)),this.setDisplayed(null!==t))},r.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},r.prototype.setDisplayed=function(t){this.displayed!==t&&(this.displayed=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_DISPLAYED_CHANGED)))},r.prototype.setDragging=function(t){this.dragging!==t&&(this.dragging=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_DRAGGING_CHANGED)))},r.prototype.setHighlighted=function(t){t!==this.highlighted&&(this.highlighted=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HIGHLIGHT_CHANGED)))},r.prototype.setHovered=function(t){this.hovered!==t&&(this.hovered=t)},r.prototype.isHovered=function(){return this.hovered},r.prototype.setAllChildrenCount=function(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},r.prototype.setMaster=function(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_MASTER_CHANGED)))},r.prototype.setGroup=function(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_GROUP_CHANGED)))},r.prototype.setRowHeight=function(t,e){void 0===e&&(e=!1),this.rowHeight=t,this.rowHeightEstimated=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HEIGHT_CHANGED))},r.prototype.setRowAutoHeight=function(t,e){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[e.getId()]=t,null!=t&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=Fi(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},r.prototype.checkAutoHeights=function(){var t=this,e=!1,i=!0,n=0,o=this.__autoHeights;if(null!=o&&(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(function(l){var u=o[l.getId()];if(null==u){if(!t.beans.columnModel.isColSpanActive())return void(e=!0);var c=[];switch(l.getPinned()){case"left":c=t.beans.columnModel.getDisplayedLeftColumnsForRow(t);break;case"right":c=t.beans.columnModel.getDisplayedRightColumnsForRow(t);break;case null:c=t.beans.columnModel.getViewportCenterColumnsForRow(t)}if(c.includes(l))return void(e=!0);u=-1}else i=!1;u>n&&(n=u)}),!e&&((i||n<10)&&(n=this.beans.gridOptionsService.getRowHeightForNode(this).height),n!=this.rowHeight))){this.setRowHeight(n);var a=this.beans.rowModel;a.onRowHeightChangedDebounced&&a.onRowHeightChangedDebounced()}},r.prototype.setRowIndex=function(t){this.rowIndex!==t&&(this.rowIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_ROW_INDEX_CHANGED)))},r.prototype.setUiLevel=function(t){this.uiLevel!==t&&(this.uiLevel=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_UI_LEVEL_CHANGED)))},r.prototype.setExpanded=function(t,e){if(this.expanded!==t){this.expanded=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_EXPANDED_CHANGED));var i=Object.assign({},this.createGlobalRowEvent(E.EVENT_ROW_GROUP_OPENED),{expanded:t,event:e||null});this.beans.rowNodeEventThrottle.dispatchExpanded(i),this.sibling&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},r.prototype.createGlobalRowEvent=function(t){return{type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi}},r.prototype.dispatchLocalEvent=function(t){this.eventService&&this.eventService.dispatchEvent(t)},r.prototype.setDataValue=function(t,e,i){var u,s="string"!=typeof t?t:null!==(u=this.beans.columnModel.getGridColumn(t))&&void 0!==u?u:this.beans.columnModel.getPrimaryColumn(t),a=this.getValueFromValueService(s);if(this.beans.gridOptionsService.is("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(s,a,e,i),!1;var l=this.beans.valueService.setValue(this,s,e,i);return this.dispatchCellChangedEvent(s,e,a),this.checkRowSelectable(),l},r.prototype.getValueFromValueService=function(t){var e=this.leafGroup&&this.beans.columnModel.isPivotMode(),i=this.group&&this.expanded&&!this.footer&&!e,o=this.beans.gridOptionsService.getGroupIncludeFooter()({node:this}),s=this.beans.gridOptionsService.is("groupSuppressBlankHeader");return this.beans.valueService.getValue(t,this,!1,i&&o&&!s)},r.prototype.dispatchEventForSaveValueReadOnly=function(t,e,i,n){var o={type:E.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,data:this.data,node:this,oldValue:e,newValue:i,value:i,source:n};this.beans.eventService.dispatchEvent(o)},r.prototype.setGroupValue=function(t,e){var i=this.beans.columnModel.getGridColumn(t);ie(this.groupData)&&(this.groupData={});var n=i.getColId(),o=this.groupData[n];o!==e&&(this.groupData[n]=e,this.dispatchCellChangedEvent(i,e,o))},r.prototype.setAggData=function(t){var e=this,i=Yh([this.aggData,t]),n=this.aggData;this.aggData=t,this.eventService&&i.forEach(function(o){var s=e.aggData?e.aggData[o]:void 0,a=n?n[o]:void 0;if(s!==a){var l=e.beans.columnModel.lookupGridColumn(o);l&&e.dispatchCellChangedEvent(l,s,a)}})},r.prototype.updateHasChildren=function(){var t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gridOptionsService.isRowModelType("serverSide")){var i=this.beans.gridOptionsService.is("treeData"),n=this.beans.gridOptionsService.get("isServerSideGroup");t=!this.stub&&!this.footer&&(i?!!n&&n(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HAS_CHILDREN_CHANGED)))},r.prototype.hasChildren=function(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren},r.prototype.isEmptyRowGroupNode=function(){return this.group&&ei(this.childrenAfterGroup)},r.prototype.dispatchCellChangedEvent=function(t,e,i){this.dispatchLocalEvent({type:r.EVENT_CELL_CHANGED,node:this,column:t,newValue:e,oldValue:i})},r.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},r.prototype.isExpandable=function(){return!!(this.hasChildren()&&!this.footer||this.master)},r.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},r.prototype.depthFirstSearch=function(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(e){return e.depthFirstSearch(t)}),t(this)},r.prototype.calculateSelectedFromChildren=function(){var t,e=!1,i=!1,n=!1;if(null===(t=this.childrenAfterGroup)||void 0===t||!t.length)return this.selectable?this.selected:null;for(var o=0;o<this.childrenAfterGroup.length;o++){var s=this.childrenAfterGroup[o],a=s.isSelected();if(!s.selectable){var l=s.calculateSelectedFromChildren();if(null===l)continue;a=l}switch(a){case!0:e=!0;break;case!1:i=!0;break;default:n=!0}}return n||e&&i?void 0:!!e||!i&&(this.selectable?this.selected:null)},r.prototype.setSelectedInitialValue=function(t){this.selected=t},r.prototype.selectThisNode=function(t,e,i){if(void 0===i&&(i="api"),!this.selectable&&t||this.selected===t)return!1;if(this.selected=t,this.eventService){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_ROW_SELECTED));var s=this.sibling;s&&s.footer&&s.dispatchLocalEvent(s.createLocalRowEvent(r.EVENT_ROW_SELECTED))}var a=Sr(Sr({},this.createGlobalRowEvent(E.EVENT_ROW_SELECTED)),{event:e||null,source:i});return this.beans.eventService.dispatchEvent(a),!0},r.prototype.setSelected=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i="api"),"boolean"!=typeof i?this.setSelectedParams({newValue:t,clearSelection:e,rangeSelect:!1,source:i}):console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.")},r.prototype.setSelectedParams=function(t){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):void 0===this.id?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Sr(Sr({},t),{nodes:[this.footer?this.sibling:this]}))},r.prototype.isRowPinned=function(){return"top"===this.rowPinned||"bottom"===this.rowPinned},r.prototype.isParentOfNode=function(t){for(var e=this.parent;e;){if(e===t)return!0;e=e.parent}return!1},r.prototype.addEventListener=function(t,e){this.eventService||(this.eventService=new $n),this.eventService.addEventListener(t,e)},r.prototype.removeEventListener=function(t,e){this.eventService&&(this.eventService.removeEventListener(t,e),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))},r.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_MOUSE_ENTER))},r.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_MOUSE_LEAVE))},r.prototype.getFirstChildOfFirstChild=function(t){for(var e=this,i=!0,n=!1,o=null;i&&!n;){var s=e.parent;I(s)&&e.firstChild?s.rowGroupColumn===t&&(n=!0,o=s):i=!1,e=s}return n?o:null},r.prototype.isFullWidthCell=function(){if(this.detail)return!0;var t=this.beans.gridOptionsService.getCallback("isFullWidthRow");return!!t&&t({rowNode:this})},r.prototype.getRoute=function(){if(null!=this.key){for(var t=[],e=this;null!=e.key;)t.push(e.key),e=e.parent;return t.reverse()}},r.prototype.createFooter=function(){var t=this;if(!this.sibling){var e=new Set(["eventService","__objectId","sticky"]),i=new r(this.beans);Object.keys(this).forEach(function(n){e.has(n)||(i[n]=t[n])}),i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+this.id,i.sibling=this,this.sibling=i}},r.prototype.destroyFooter=function(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)},r.ID_PREFIX_ROW_GROUP="row-group-",r.ID_PREFIX_TOP_PINNED="t-",r.ID_PREFIX_BOTTOM_PINNED="b-",r.OBJECT_ID_SEQUENCE=0,r.EVENT_ROW_SELECTED="rowSelected",r.EVENT_DATA_CHANGED="dataChanged",r.EVENT_CELL_CHANGED="cellChanged",r.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",r.EVENT_MASTER_CHANGED="masterChanged",r.EVENT_GROUP_CHANGED="groupChanged",r.EVENT_MOUSE_ENTER="mouseEnter",r.EVENT_MOUSE_LEAVE="mouseLeave",r.EVENT_HEIGHT_CHANGED="heightChanged",r.EVENT_TOP_CHANGED="topChanged",r.EVENT_DISPLAYED_CHANGED="displayedChanged",r.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",r.EVENT_LAST_CHILD_CHANGED="lastChildChanged",r.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",r.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",r.EVENT_EXPANDED_CHANGED="expandedChanged",r.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",r.EVENT_SELECTABLE_CHANGED="selectableChanged",r.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",r.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",r.EVENT_DRAGGING_CHANGED="draggingChanged",r}(),gS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ol=function(){return ol=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},ol.apply(this,arguments)},Mf=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ff=function(r){function t(){return r.call(this,'\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return gS(t,r),t.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0),Dp(this.eCheckbox.getInputElement(),"polite")},t.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},t.prototype.onDataChanged=function(){this.onSelectionChanged()},t.prototype.onSelectableChanged=function(){this.showOrHideSelect()},t.prototype.onSelectionChanged=function(){var e=this.localeService.getLocaleTextFunc(),i=this.rowNode.isSelected(),n=Ua(e,i),o=e("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(i,!0),this.eCheckbox.setInputAriaLabel(o+" ("+n+")")},t.prototype.onClicked=function(e,i,n){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:n.shiftKey,groupSelectsFiltered:i,event:n,source:"checkboxSelected"})},t.prototype.init=function(e){var i=this;if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",function(a){on(a)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",function(a){on(a);var l=i.gridOptionsService.is("groupSelectsFiltered"),u=i.eCheckbox.getValue();i.shouldHandleIndeterminateState(u,l)?0===i.onClicked(!0,l,a||{})&&i.onClicked(!1,l,a):u?i.onClicked(!1,l,a):i.onClicked(!0,l,a||{})}),this.addManagedListener(this.rowNode,pe.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsService.get("isRowSelectable")||"function"==typeof this.getIsVisible()){var s=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,s),this.addManagedListener(this.rowNode,pe.EVENT_DATA_CHANGED,s),this.addManagedListener(this.rowNode,pe.EVENT_CELL_CHANGED,s),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},t.prototype.shouldHandleIndeterminateState=function(e,i){return i&&(void 0===this.eCheckbox.getPreviousValue()||void 0===e)&&this.gridOptionsService.isRowModelType("clientSide")},t.prototype.showOrHideSelect=function(){var e,i,n,o,s=this.rowNode.selectable,a=this.getIsVisible();if(s)if("function"==typeof a){var l=null===(e=this.overrides)||void 0===e?void 0:e.callbackParams,u=null===(i=this.column)||void 0===i?void 0:i.createColumnFunctionCallbackParams(this.rowNode);s=!!u&&a(ol(ol({},l),u))}else s=a??!1;if(null===(n=this.column)||void 0===n?void 0:n.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!s),this.setVisible(!0),void this.setDisplayed(!0);null!==(o=this.overrides)&&void 0!==o&&o.removeHidden?this.setDisplayed(s):this.setVisible(s)},t.prototype.getIsVisible=function(){var e,i;return this.overrides?this.overrides.isVisible:null===(i=null===(e=this.column)||void 0===e?void 0:e.getColDef())||void 0===i?void 0:i.checkboxSelection},Mf([U("eCheckbox")],t.prototype,"eCheckbox",void 0),Mf([V],t.prototype,"postConstruct",null),t}(he),yS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Uo=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},rl=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ut=function(r){return r[r.ToolPanel=0]="ToolPanel",r[r.HeaderCell=1]="HeaderCell",r[r.RowDrag=2]="RowDrag",r[r.ChartPanel=3]="ChartPanel",r[r.AdvancedFilterBuilder=4]="AdvancedFilterBuilder",r}(Ut||{}),Es=function(r){return r[r.Up=0]="Up",r[r.Down=1]="Down",r}(Es||{}),Pn=function(r){return r[r.Left=0]="Left",r[r.Right=1]="Right",r}(Pn||{}),ct=function(r){function t(){var i=null!==r&&r.apply(this,arguments)||this;return i.dragSourceAndParamsList=[],i.dropTargets=[],i}var e;return yS(t,r),e=t,t.prototype.init=function(){this.ePinnedIcon=Oi("columnMovePin",this.gridOptionsService,null),this.eHideIcon=Oi("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=Oi("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=Oi("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=Oi("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=Oi("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=Oi("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=Oi("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=Oi("dropNotAllowed",this.gridOptionsService,null)},t.prototype.addDragSource=function(i,n){void 0===n&&(n=!1);var o={eElement:i.eElement,dragStartPixels:i.dragStartPixels,onDragStart:this.onDragStart.bind(this,i),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:n};this.dragSourceAndParamsList.push({params:o,dragSource:i}),this.dragService.addDragSource(o)},t.prototype.removeDragSource=function(i){var n=this.dragSourceAndParamsList.find(function(o){return o.dragSource===i});n&&(this.dragService.removeDragSource(n.params),ii(this.dragSourceAndParamsList,n))},t.prototype.clearDragSourceParamsList=function(){var i=this;this.dragSourceAndParamsList.forEach(function(n){return i.dragService.removeDragSource(n.params)}),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0},t.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},t.prototype.onDragStart=function(i,n){this.dragging=!0,this.dragSource=i,this.eventLastTime=n,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},t.prototype.onDragStop=function(i){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var n=this.createDropTargetEvent(this.lastDropTarget,i,null,null,!1);this.lastDropTarget.onDragStop(n)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},t.prototype.onDragging=function(i,n){var s,a,l,u,o=this,c=this.getHorizontalDirection(i),d=this.getVerticalDirection(i);this.eventLastTime=i,this.positionGhost(i);var h=this.dropTargets.filter(function(v){return o.isMouseOnDropTarget(i,v)}),p=this.findCurrentDropTarget(i,h);if(p!==this.lastDropTarget)this.leaveLastTargetIfExists(i,c,d,n),null!==this.lastDropTarget&&null===p&&(null===(a=(s=this.dragSource).onGridExit)||void 0===a||a.call(s,this.dragItem)),null===this.lastDropTarget&&null!==p&&(null===(u=(l=this.dragSource).onGridEnter)||void 0===u||u.call(l,this.dragItem)),this.enterDragTargetIfExists(p,i,c,d,n),this.lastDropTarget=p;else if(p&&p.onDragging){var f=this.createDropTargetEvent(p,i,c,d,n);p.onDragging(f)}},t.prototype.getAllContainersFromDropTarget=function(i){var n=i.getSecondaryContainers?i.getSecondaryContainers():null,o=[[i.getContainer()]];return n?o.concat(n):o},t.prototype.allContainersIntersect=function(i,n){var o,s;try{for(var a=rl(n),l=a.next();!l.done;l=a.next()){var c=l.value.getBoundingClientRect();if(0===c.width||0===c.height)return!1;if(!(i.clientX>=c.left&&i.clientX<c.right&&i.clientY>=c.top&&i.clientY<c.bottom))return!1}}catch(p){o={error:p}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}return!0},t.prototype.isMouseOnDropTarget=function(i,n){var o,s,a=this.getAllContainersFromDropTarget(n),l=!1;try{for(var u=rl(a),c=u.next();!c.done;c=u.next())if(this.allContainersIntersect(i,c.value)){l=!0;break}}catch(h){o={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}return!(n.targetContainsSource&&!n.getContainer().contains(this.dragSource.eElement))&&l&&n.isInterestedIn(this.dragSource.type,this.dragSource.eElement)},t.prototype.findCurrentDropTarget=function(i,n){var o,s,a,l,u=n.length;if(0===u)return null;if(1===u)return n[0];var d=this.gridOptionsService.getRootNode().elementsFromPoint(i.clientX,i.clientY);try{for(var h=rl(d),p=h.next();!p.done;p=h.next()){var f=p.value;try{for(var v=(a=void 0,rl(n)),g=v.next();!g.done;g=v.next()){var y=g.value;if(-1!==dp(this.getAllContainersFromDropTarget(y)).indexOf(f))return y}}catch(C){a={error:C}}finally{try{g&&!g.done&&(l=v.return)&&l.call(v)}finally{if(a)throw a.error}}}}catch(C){o={error:C}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}return null},t.prototype.enterDragTargetIfExists=function(i,n,o,s,a){if(i){if(i.onDragEnter){var l=this.createDropTargetEvent(i,n,o,s,a);i.onDragEnter(l)}this.setGhostIcon(i.getIconName?i.getIconName():null)}},t.prototype.leaveLastTargetIfExists=function(i,n,o,s){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var a=this.createDropTargetEvent(this.lastDropTarget,i,n,o,s);this.lastDropTarget.onDragLeave(a)}this.setGhostIcon(null)}},t.prototype.addDropTarget=function(i){this.dropTargets.push(i)},t.prototype.removeDropTarget=function(i){this.dropTargets=this.dropTargets.filter(function(n){return n.getContainer()!==i.getContainer()})},t.prototype.hasExternalDropZones=function(){return this.dropTargets.some(function(i){return i.external})},t.prototype.findExternalZone=function(i){return this.dropTargets.filter(function(o){return o.external}).find(function(o){return o.getContainer()===i.getContainer()})||null},t.prototype.getHorizontalDirection=function(i){var n=this.eventLastTime&&this.eventLastTime.clientX,o=i.clientX;return n===o?null:n>o?Pn.Left:Pn.Right},t.prototype.getVerticalDirection=function(i){var n=this.eventLastTime&&this.eventLastTime.clientY,o=i.clientY;return n===o?null:n>o?Es.Up:Es.Down},t.prototype.createDropTargetEvent=function(i,n,o,s,a){var l=i.getContainer(),u=l.getBoundingClientRect(),c=this;return{event:n,x:n.clientX-u.left,y:n.clientY-u.top,vDirection:s,hDirection:o,dragSource:c.dragSource,fromNudge:a,dragItem:c.dragItem,api:c.gridApi,columnApi:c.columnApi,dropZoneTarget:l}},t.prototype.positionGhost=function(i){var n=this.eGhost;if(n){var s=n.getBoundingClientRect().height,a=Vp()-2,l=Bp()-2,u=bc(n.offsetParent),h=i.clientY-u.top-s/2,p=i.clientX-u.left-10,f=this.gridOptionsService.getDocument(),v=f.defaultView||window,g=v.pageYOffset||f.documentElement.scrollTop,y=v.pageXOffset||f.documentElement.scrollLeft;a>0&&p+n.clientWidth>a+y&&(p=a+y-n.clientWidth),p<0&&(p=0),l>0&&h+n.clientHeight>l+g&&(h=l+g-n.clientHeight),h<0&&(h=0),n.style.left=p+"px",n.style.top=h+"px"}},t.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},t.prototype.createGhost=function(){this.eGhost=Ct(e.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);var i=this.environment.getTheme().theme;i&&this.eGhost.classList.add(i),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var n=this.eGhost.querySelector(".ag-dnd-ghost-label"),o=this.dragSource.dragItemName;Na(o)&&(o=o()),n.innerHTML=Ye(o)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var s=this.gridOptionsService.getDocument(),a=null;try{a=s.fullscreenElement}catch{}finally{if(!a){var l=this.gridOptionsService.getRootNode();a=l.querySelector("body")||(l instanceof ShadowRoot?l:l?.documentElement)}}this.eGhostParent=a,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},t.prototype.setGhostIcon=function(i,n){void 0===n&&(n=!1),Pt(this.eGhostIcon);var o=null;switch(i||(i=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():e.ICON_NOT_ALLOWED),i){case e.ICON_PINNED:o=this.ePinnedIcon;break;case e.ICON_MOVE:o=this.eMoveIcon;break;case e.ICON_LEFT:o=this.eLeftIcon;break;case e.ICON_RIGHT:o=this.eRightIcon;break;case e.ICON_GROUP:o=this.eGroupIcon;break;case e.ICON_AGGREGATE:o=this.eAggregateIcon;break;case e.ICON_PIVOT:o=this.ePivotIcon;break;case e.ICON_NOT_ALLOWED:o=this.eDropNotAllowedIcon;break;case e.ICON_HIDE:o=this.eHideIcon}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",n),(o!==this.eHideIcon||!this.gridOptionsService.is("suppressDragLeaveHidesColumns"))&&o&&this.eGhostIcon.appendChild(o)},t.ICON_PINNED="pinned",t.ICON_MOVE="move",t.ICON_LEFT="left",t.ICON_RIGHT="right",t.ICON_GROUP="group",t.ICON_AGGREGATE="aggregate",t.ICON_PIVOT="pivot",t.ICON_NOT_ALLOWED="notAllowed",t.ICON_HIDE="hide",t.GHOST_TEMPLATE='<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>',Uo([S("dragService")],t.prototype,"dragService",void 0),Uo([S("mouseEventService")],t.prototype,"mouseEventService",void 0),Uo([S("columnApi")],t.prototype,"columnApi",void 0),Uo([S("gridApi")],t.prototype,"gridApi",void 0),Uo([V],t.prototype,"init",null),Uo([lt],t.prototype,"clearDragSourceParamsList",null),e=Uo([X("dragAndDropService")],t)}(k),sl=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),bs=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},al=function(r){function t(e,i,n,o,s,a){var l=r.call(this)||this;return l.cellValueFn=e,l.rowNode=i,l.column=n,l.customGui=o,l.dragStartPixels=s,l.suppressVisibilityChange=a,l.dragSource=null,l}return sl(t,r),t.prototype.isCustomGui=function(){return null!=this.customGui},t.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Ke("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var e=this.gridOptionsService.is("rowDragManaged")?new CS(this,this.beans,this.rowNode,this.column):new mS(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}},t.prototype.setDragElement=function(e,i){this.setTemplateFromElement(e),this.addDragSource(i)},t.prototype.getSelectedNodes=function(){if(!this.gridOptionsService.is("rowDragMultiRow"))return[this.rowNode];var i=this.beans.selectionService.getSelectedNodes();return-1!==i.indexOf(this.rowNode)?i:[this.rowNode]},t.prototype.checkCompatibility=function(){var e=this.gridOptionsService.is("rowDragManaged");this.gridOptionsService.is("treeData")&&e&&ge(function(){return console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true")},"RowDragComp.managedAndTreeData")},t.prototype.getDragItem=function(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}},t.prototype.getRowDragText=function(e){if(e){var i=e.getColDef();if(i.rowDragText)return i.rowDragText}return this.gridOptionsService.get("rowDragText")},t.prototype.addDragSource=function(e){var i=this;void 0===e&&(e=4),this.dragSource&&this.removeDragSource();var n=this.getRowDragText(this.column),o=this.localeService.getLocaleTextFunc();this.dragSource={type:Ut.RowDrag,eElement:this.getGui(),dragItemName:function(){var s,a=i.getDragItem(),l=(null===(s=a.rowNodes)||void 0===s?void 0:s.length)||1;return n?n(a,l):1===l?i.cellValueFn():l+" "+o("rowDragRows","rows")},getDragItem:function(){return i.getDragItem()},dragStartPixels:e,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},t.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},bs([S("beans")],t.prototype,"beans",void 0),bs([V],t.prototype,"postConstruct",null),bs([lt],t.prototype,"removeDragSource",null),t}(he),If=function(r){function t(e,i,n){var o=r.call(this)||this;return o.parent=e,o.rowNode=i,o.column=n,o}return sl(t,r),t.prototype.setDisplayedOrVisible=function(e){var i={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,i);else{var n=!0,o=!1;this.column&&(n=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),o=Na(this.column.getColDef().rowDrag)),o?(this.parent.setDisplayed(!0,i),this.parent.setVisible(n,i)):(this.parent.setDisplayed(n,i),this.parent.setVisible(!0,i))}},t}(k),mS=function(r){function t(e,i,n,o){var s=r.call(this,e,n,o)||this;return s.beans=i,s}return sl(t,r),t.prototype.postConstruct=function(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},t.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},t.prototype.workOutVisibility=function(){var e=this.gridOptionsService.is("suppressRowDrag");this.setDisplayedOrVisible(e)},bs([V],t.prototype,"postConstruct",null),t}(If),CS=function(r){function t(e,i,n,o){var s=r.call(this,e,n,o)||this;return s.beans=i,s}return sl(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,E.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,E.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},t.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},t.prototype.workOutVisibility=function(){var i=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),n=i&&i.shouldPreventRowMove(),o=this.gridOptionsService.is("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones();this.setDisplayedOrVisible(n&&!s||o)},bs([V],t.prototype,"postConstruct",null),t}(If),wS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ll=function(){return ll=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},ll.apply(this,arguments)},Rs=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},SS=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return wS(t,r),t.prototype.init=function(e,i,n,o,s,a,l){this.params=l,this.eGui=i,this.eCheckbox=n,this.eExpanded=o,this.eContracted=s,this.comp=e,this.compClass=a;var u=l.node,c=l.value,d=l.colDef;if(!this.isTopLevelFooter()){if(this.isEmbeddedRowMismatch())return;if(!0!==d?.showRowGroup&&null==c&&!u.master)return;if(u.footer&&this.gridOptionsService.is("groupHideOpenParents")&&(d&&d.showRowGroup)!==(u.rowGroupColumn&&u.rowGroupColumn.getColId()))return}this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.expandListener=null},t.prototype.refreshAriaExpanded=function(){var e=this.params,i=e.node,n=e.eParentOfValue;if(this.expandListener&&(this.expandListener=this.expandListener()),this.isExpandable()){var o=function(){Hi(n,!!i.expanded)};this.expandListener=this.addManagedListener(i,pe.EVENT_EXPANDED_CHANGED,o)||null,o()}else Pp(n)},t.prototype.isTopLevelFooter=function(){if(!this.gridOptionsService.is("groupIncludeTotalFooter")||null!=this.params.value||-1!=this.params.node.level)return!1;var e=this.params.colDef;if(null==e||!0===e.showRowGroup)return!0;var n=this.columnModel.getRowGroupColumns();return!n||0===n.length||n[0].getId()===e.showRowGroup},t.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsService.is("embedFullWidthRows"))return!1;var e="left"===this.params.pinned,i="right"===this.params.pinned,n=!e&&!i;return this.gridOptionsService.is("enableRtl")?this.columnModel.isPinningLeft()?!i:!n:this.columnModel.isPinningLeft()?!e:!n},t.prototype.findDisplayedGroupNode=function(){var e=this.params.column,i=this.params.node;if(this.showingValueForOpenedParent)for(var n=i.parent;null!=n;){if(n.rowGroupColumn&&e.isRowGroupDisplayed(n.rowGroupColumn.getId())){this.displayedGroupNode=n;break}n=n.parent}ie(this.displayedGroupNode)&&(this.displayedGroupNode=i)},t.prototype.setupShowingValueForOpenedParent=function(){var e=this.params.node,i=this.params.column;if(this.gridOptionsService.is("groupHideOpenParents"))if(e.groupData){if(null!=e.rowGroupColumn){var o=e.rowGroupColumn.getId();if(i.isRowGroupDisplayed(o))return void(this.showingValueForOpenedParent=!1)}var a=null!=e.groupData[i.getId()];this.showingValueForOpenedParent=a}else this.showingValueForOpenedParent=!1;else this.showingValueForOpenedParent=!1},t.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},t.prototype.addGroupValue=function(){var e=this.adjustParamsWithDetailsFromRelatedColumn(),i=this.getInnerCompDetails(e),o=e.value,s=e.valueFormatted;null==s&&(s=""===o&&this.params.node.group?this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):o??null),this.comp.setInnerRenderer(i,s)},t.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var e=this.displayedGroupNode.rowGroupColumn,i=this.params.column;if(!e)return this.params;if(null!=i&&!i.isRowGroupDisplayed(e.getId()))return this.params;var s=this.params,a=this.params,c=this.valueFormatterService.formatValue(e,a.node,a.value);return ll(ll({},s),{valueFormatted:c})},t.prototype.addFooterValue=function(){var e=this.params.footerValueGetter,i="";if(e){var n=Vu(this.params);n.value=this.params.value,"function"==typeof e?i=e(n):"string"==typeof e?i=this.expressionService.evaluate(e,n):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else i="Total "+(null!=this.params.value?this.params.value:"");var o=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(o,i)},t.prototype.getInnerCompDetails=function(e){var i=this;if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),e);var n=this.userComponentFactory.getInnerRendererDetails(e,e),o=function(c){return c&&c.componentClass==i.compClass};if(n&&!o(n))return n;var s=this.displayedGroupNode.rowGroupColumn,a=s?s.getColDef():void 0;if(a){var l=this.userComponentFactory.getCellRendererDetails(a,e);if(l&&!o(l))return l;if(o(l)&&a.cellRendererParams&&a.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(a.cellRendererParams,e)}},t.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,pe.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},t.prototype.updateChildCount=function(){var e=this.displayedGroupNode.allChildrenCount,i=this.isShowRowGroupForThisRow();this.comp.setChildCount(i&&null!=e&&e>=0?"("+e+")":"")},t.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsService.is("treeData"))return!0;var e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;var i=this.params.column;return null==i||i.isRowGroupDisplayed(e.getId())},t.prototype.addExpandAndContract=function(){var e,i=this.params,n=Ke("groupExpanded",this.gridOptionsService,null),o=Ke("groupContracted",this.gridOptionsService,null);n&&this.eExpanded.appendChild(n),o&&this.eContracted.appendChild(o);var s=i.eGridCell;!((null===(e=this.params.column)||void 0===e?void 0:e.isCellEditable(i.node))&&this.gridOptionsService.is("enableGroupEdit"))&&this.isExpandable()&&!i.suppressDoubleClickExpand&&this.addManagedListener(s,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(s,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(i.node,pe.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var l=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,pe.EVENT_ALL_CHILDREN_COUNT_CHANGED,l),this.addManagedListener(this.displayedGroupNode,pe.EVENT_MASTER_CHANGED,l),this.addManagedListener(this.displayedGroupNode,pe.EVENT_GROUP_CHANGED,l),this.addManagedListener(this.displayedGroupNode,pe.EVENT_HAS_CHILDREN_CHANGED,l)},t.prototype.onExpandClicked=function(e){Ii(e)||(on(e),this.onExpandOrContract(e))},t.prototype.onExpandOrContract=function(e){var i=this.displayedGroupNode,n=!i.expanded;!n&&i.sticky&&this.scrollToStickyNode(i),i.setExpanded(n,e)},t.prototype.scrollToStickyNode=function(e){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(e.rowTop-e.stickyRowTop)},t.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var e=this.displayedGroupNode,i=this.columnModel.isPivotMode()&&e.leafGroup;if(!e.isExpandable()||e.footer||i)return!1;var o=this.params.column;return null==o||"string"!=typeof o.getColDef().showRowGroup||this.isShowRowGroupForThisRow()},t.prototype.showExpandAndContractIcons=function(){var e=this,n=e.displayedGroupNode,o=e.columnModel,s=e.params.node,a=this.isExpandable();if(a){var l=!!this.showingValueForOpenedParent||s.expanded;this.comp.setExpandedDisplayed(l),this.comp.setContractedDisplayed(!l)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var u=o.isPivotMode(),c=u&&n.leafGroup,d=a&&!c,h=s.footer&&-1===s.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",d),this.comp.addOrRemoveCssClass("ag-row-group",d),u?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",c):h||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!d)},t.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()},t.prototype.setupIndent=function(){this.params.suppressPadding||(this.addManagedListener(this.params.node,pe.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},t.prototype.setIndent=function(){if(!this.gridOptionsService.is("groupHideOpenParents")){var e=this.params,i=e.node,n=!!e.colDef,o=this.gridOptionsService.is("treeData"),a=!n||o||!0===e.colDef.showRowGroup?i.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+a,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},t.prototype.addFullWidthRowDraggerIfNeeded=function(){var e=this;if(this.params.fullWidth&&this.params.rowDrag){var i=new al(function(){return e.params.value},this.params.node);this.createManagedBean(i,this.context),this.eGui.insertAdjacentElement("afterbegin",i.getGui())}},t.prototype.isUserWantsSelected=function(){var e=this.params.checkbox;return"function"==typeof e||!0===e},t.prototype.addCheckboxIfNeeded=function(){var e=this,i=this.displayedGroupNode,n=this.isUserWantsSelected()&&!i.footer&&!i.rowPinned&&!i.detail;if(n){var o=new Ff;this.getContext().createBean(o),o.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(o.getGui()),this.addDestroyFunc(function(){return e.getContext().destroyBean(o)})}this.comp.setCheckboxVisible(n)},t.prototype.onKeyDown=function(e){e.key!==M.ENTER||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(e)},t.prototype.onCellDblClicked=function(e){Ii(e)||Ha(this.eExpanded,e)||Ha(this.eContracted,e)||this.onExpandOrContract(e)},Rs([S("expressionService")],t.prototype,"expressionService",void 0),Rs([S("valueFormatterService")],t.prototype,"valueFormatterService",void 0),Rs([S("columnModel")],t.prototype,"columnModel",void 0),Rs([S("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Rs([S("ctrlsService")],t.prototype,"ctrlsService",void 0),t}(k),_S=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Os=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Nf=function(r){function t(){return r.call(this,t.TEMPLATE)||this}return _S(t,r),t.prototype.init=function(e){var i=this,n={setInnerRenderer:function(l,u){return i.setRenderDetails(l,u)},setChildCount:function(l){return i.eChildCount.innerHTML=l},addOrRemoveCssClass:function(l,u){return i.addOrRemoveCssClass(l,u)},setContractedDisplayed:function(l){return Ce(i.eContracted,l)},setExpandedDisplayed:function(l){return Ce(i.eExpanded,l)},setCheckboxVisible:function(l){return i.eCheckbox.classList.toggle("ag-invisible",!l)}},o=this.createManagedBean(new SS),s=!e.colDef,a=this.getGui();o.init(n,a,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),s&&ot(a,"gridcell")},t.prototype.setRenderDetails=function(e,i){var n=this;if(e){var o=e.newAgStackInstance();if(!o)return;o.then(function(s){if(s){var a=function(){return n.context.destroyBean(s)};n.isAlive()?(n.eValue.appendChild(s.getGui()),n.addDestroyFunc(a)):a()}})}else this.eValue.innerText=i},t.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),r.prototype.destroy.call(this)},t.prototype.refresh=function(){return!1},t.TEMPLATE='<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>',Os([U("eExpanded")],t.prototype,"eExpanded",void 0),Os([U("eContracted")],t.prototype,"eContracted",void 0),Os([U("eCheckbox")],t.prototype,"eCheckbox",void 0),Os([U("eValue")],t.prototype,"eValue",void 0),Os([U("eChildCount")],t.prototype,"eChildCount",void 0),t}(he),ES=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Gf=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},bS=function(r){function t(){return r.call(this,t.TEMPLATE)||this}return ES(t,r),t.prototype.init=function(e){e.node.failedLoad?this.setupFailed():this.setupLoading()},t.prototype.setupFailed=function(){var e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")},t.prototype.setupLoading=function(){var e=Ke("groupLoading",this.gridOptionsService,null);e&&this.eLoadingIcon.appendChild(e);var i=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=i("loadingOoo","Loading")},t.prototype.refresh=function(e){return!1},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',Gf([U("eLoadingIcon")],t.prototype,"eLoadingIcon",void 0),Gf([U("eLoadingText")],t.prototype,"eLoadingText",void 0),t}(he),RS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),OS=function(r){function t(){return r.call(this)||this}return RS(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){var i,n=null!==(i=this.gridOptionsService.get("overlayLoadingTemplate"))&&void 0!==i?i:t.DEFAULT_LOADING_OVERLAY_TEMPLATE,o=this.localeService.getLocaleTextFunc(),s=n.replace("[LOADING...]",o("loadingOoo","Loading..."));this.setTemplate(s)},t.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',t}(he),xS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),DS=function(r){function t(){return r.call(this)||this}return xS(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(e){var i,n=null!==(i=this.gridOptionsService.get("overlayNoRowsTemplate"))&&void 0!==i?i:t.DEFAULT_NO_ROWS_TEMPLATE,o=this.localeService.getLocaleTextFunc(),s=n.replace("[NO_ROWS_TO_SHOW]",o("noRowsToShow","No Rows To Show"));this.setTemplate(s)},t.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',t}(he),TS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),PS=function(r){function t(){return r.call(this,'<div class="ag-tooltip"></div>')||this}return TS(t,r),t.prototype.init=function(e){var i=e.value;this.getGui().innerHTML=Ye(i)},t}(jo),AS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),LS=function(){function r(){}return r.prototype.getTemplate=function(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'},r.prototype.init=function(t,e){this.eInput=t,this.params=e,null!=e.max&&t.setMax(e.max),null!=e.min&&t.setMin(e.min),null!=e.precision&&t.setPrecision(e.precision),null!=e.step&&t.setStep(e.step),e.showStepperButtons&&t.getInputElement().classList.add("ag-number-field-input-stepper")},r.prototype.getValue=function(){var t=this.eInput.getValue();if(!I(t)&&!I(this.params.value))return this.params.value;var e=this.params.parseValue(t);if(null==e)return e;if("string"==typeof e){if(""===e)return null;e=Number(e)}return isNaN(e)?null:e},r.prototype.getStartValue=function(){return this.params.value},r}(),MS=function(r){function t(){return r.call(this,new LS)||this}return AS(t,r),t}(nl),FS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),IS=function(){function r(){}return r.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},r.prototype.init=function(t,e){this.eInput=t,this.params=e,null!=e.min&&t.setMin(e.min),null!=e.max&&t.setMax(e.max),null!=e.step&&t.setStep(e.step)},r.prototype.getValue=function(){var t=this.eInput.getDate();return I(t)||I(this.params.value)?t??null:this.params.value},r.prototype.getStartValue=function(){var t=this.params.value;if(t instanceof Date)return bi(t,!1)},r}(),NS=function(r){function t(){return r.call(this,new IS)||this}return FS(t,r),t}(nl),GS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),HS=function(){function r(t){this.getDataTypeService=t}return r.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},r.prototype.init=function(t,e){this.eInput=t,this.params=e,null!=e.min&&t.setMin(e.min),null!=e.max&&t.setMax(e.max),null!=e.step&&t.setStep(e.step)},r.prototype.getValue=function(){var t=this.formatDate(this.eInput.getDate());return I(t)||I(this.params.value)?this.params.parseValue(t??""):this.params.value},r.prototype.getStartValue=function(){var t,e;return bi(null!==(e=this.parseDate(null!==(t=this.params.value)&&void 0!==t?t:void 0))&&void 0!==e?e:null,!1)},r.prototype.parseDate=function(t){return this.getDataTypeService().getDateParserFunction()(t)},r.prototype.formatDate=function(t){return this.getDataTypeService().getDateFormatterFunction()(t)},r}(),VS=function(r){function t(){var e=r.call(this,new HS(function(){return e.dataTypeService}))||this;return e}return GS(t,r),function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([S("dataTypeService")],t.prototype,"dataTypeService",void 0),t}(nl),BS=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),jS=function(r){function t(){return r.call(this,t.TEMPLATE)||this}return BS(t,r),t.prototype.init=function(e){var i=this;this.params=e,this.updateCheckbox(e),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.addManagedListener(this.eCheckbox.getInputElement(),"click",function(o){if(on(o),!i.eCheckbox.isDisabled()){var s=i.eCheckbox.getValue();i.onCheckboxChanged(s)}}),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",function(o){on(o)});var n=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",function(o){if(o.key===M.SPACE&&!i.eCheckbox.isDisabled()){i.params.eGridCell===n.activeElement&&i.eCheckbox.toggle();var s=i.eCheckbox.getValue();i.onCheckboxChanged(s),o.preventDefault()}})},t.prototype.refresh=function(e){return this.params=e,this.updateCheckbox(e),!0},t.prototype.updateCheckbox=function(e){var i,n,o,s,a=!0;if(e.node.group&&e.column){var l=e.column.getColId();l.startsWith(vr)?s=null==e.value||""===e.value?void 0:"true"===e.value:e.node.aggData&&void 0!==e.node.aggData[l]?s=null!==(i=e.value)&&void 0!==i?i:void 0:a=!1}else s=null!==(n=e.value)&&void 0!==n?n:void 0;if(a){this.eCheckbox.setValue(s);var u=null!=e.disabled?e.disabled:!(null!==(o=e.column)&&void 0!==o&&o.isCellEditable(e.node));this.eCheckbox.setDisabled(u);var c=this.localeService.getLocaleTextFunc(),d=Ua(c,s),h=u?d:c("ariaToggleCellValue","Press SPACE to toggle cell value")+" ("+d+")";this.eCheckbox.setInputAriaLabel(h)}else this.eCheckbox.setDisplayed(!1)},t.prototype.onCheckboxChanged=function(e){var i=this.params,n=i.column,o=i.node,s=i.rowIndex,a=i.value,l={type:E.EVENT_CELL_EDITING_STARTED,column:n,colDef:n?.getColDef(),data:o.data,node:o,rowIndex:s,rowPinned:o.rowPinned,value:a};this.eventService.dispatchEvent(l);var u=this.params.node.setDataValue(this.params.column,e,"edit"),c={type:E.EVENT_CELL_EDITING_STOPPED,column:n,colDef:n?.getColDef(),data:o.data,node:o,rowIndex:s,rowPinned:o.rowPinned,value:a,oldValue:a,newValue:e,valueChanged:u};this.eventService.dispatchEvent(c)},t.TEMPLATE='\n        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n        </div>',function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([U("eCheckbox")],t.prototype,"eCheckbox",void 0),t}(he),US=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),KS=function(r){function t(){return r.call(this,'\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return US(t,r),t.prototype.init=function(e){var n,i=this;this.params=e;var o=null!==(n=e.value)&&void 0!==n?n:void 0;this.eCheckbox.setValue(o),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(o),this.addManagedListener(this.eCheckbox,E.EVENT_FIELD_VALUE_CHANGED,function(s){return i.setAriaLabel(s.selected)})},t.prototype.getValue=function(){return this.eCheckbox.getValue()},t.prototype.focusIn=function(){this.eCheckbox.getFocusableElement().focus()},t.prototype.afterGuiAttached=function(){this.params.cellStartedEdit&&this.focusIn()},t.prototype.isPopup=function(){return!1},t.prototype.setAriaLabel=function(e){var i=this.localeService.getLocaleTextFunc(),n=Ua(i,e),o=i("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(o+" ("+n+")")},function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([U("eCheckbox")],t.prototype,"eCheckbox",void 0),t}(jo),$S=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Qc=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},kf=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},Hf=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},YS=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.agGridDefaults={agDateInput:Vw,agColumnHeader:Xw,agColumnGroupHeader:Zw,agSortIndicator:qc,agTextColumnFloatingFilter:Kw,agNumberColumnFloatingFilter:Uw,agDateColumnFloatingFilter:Nw,agReadOnlyFloatingFilter:pw,agAnimateShowChangeCellRenderer:hS,agAnimateSlideCellRenderer:vS,agGroupCellRenderer:Nf,agGroupRowRenderer:Nf,agLoadingCellRenderer:bS,agCheckboxCellRenderer:jS,agCellEditor:Lf,agTextCellEditor:Lf,agNumberCellEditor:MS,agDateCellEditor:NS,agDateStringCellEditor:VS,agSelectCellEditor:nS,agLargeTextCellEditor:tS,agCheckboxCellEditor:KS,agTextColumnFilter:Yc,agNumberColumnFilter:bf,agDateColumnFilter:wf,agLoadingOverlay:OS,agNoRowsOverlay:DS,agTooltipComponent:PS},e.enterpriseAgDefaultCompsModule={agSetColumnFilter:q.SetFilterModule,agSetColumnFloatingFilter:q.SetFilterModule,agMultiColumnFilter:q.MultiFilterModule,agMultiColumnFloatingFilter:q.MultiFilterModule,agGroupColumnFilter:q.RowGroupingModule,agGroupColumnFloatingFilter:q.RowGroupingModule,agRichSelect:q.RichSelectModule,agRichSelectCellEditor:q.RichSelectModule,agDetailCellRenderer:q.MasterDetailModule,agSparklineCellRenderer:q.SparklinesModule},e.jsComps={},e}return $S(t,r),t.prototype.init=function(){var e=this;null!=this.gridOptions.components&&He(this.gridOptions.components,function(i,n){return e.registerJsComponent(i,n)})},t.prototype.registerDefaultComponent=function(e,i){this.agGridDefaults[e]?console.error("Trying to overwrite a default component. You should call registerComponent"):this.agGridDefaults[e]=i},t.prototype.registerJsComponent=function(e,i){this.jsComps[e]=i},t.prototype.retrieve=function(e,i){var n=this,o=function(d,h){return{componentFromFramework:h,component:d}},s=this.getFrameworkOverrides().frameworkComponent(i,this.gridOptions.components);if(null!=s)return o(s,!0);var a=this.jsComps[i];if(a)return o(a,this.getFrameworkOverrides().isFrameworkComponent(a));var u=this.agGridDefaults[i];if(u)return o(u,!1);var c=this.enterpriseAgDefaultCompsModule[i];return c?oe.__assertRegistered(c,"AG Grid '"+e+"' component: "+i,this.context.getGridId()):ge(function(){n.warnAboutMissingComponent(e,i)},"MissingComp"+i),null},t.prototype.warnAboutMissingComponent=function(e,i){var o=hs(i,Hf(Hf([],kf(Object.keys(this.agGridDefaults).filter(function(s){return!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(s)}))),kf(Object.keys(this.jsComps))),!0,.8).values;console.warn("AG Grid: Could not find '"+i+"' component. It was configured as \""+e+": '"+i+"'\" but it wasn't found in the list of registered components."),o.length>0&&console.warn("         Did you mean: ["+o.slice(0,3)+"]?"),console.warn("If using a custom component check it has been registered as described in: https://ag-grid.com/javascript-data-grid/components/")},Qc([S("gridOptions")],t.prototype,"gridOptions",void 0),Qc([V],t.prototype,"init",null),Qc([X("userComponentRegistry")],t)}(k),XS={propertyName:"dateComponent",cellRenderer:!1},qS={propertyName:"headerComponent",cellRenderer:!1},ZS={propertyName:"headerGroupComponent",cellRenderer:!1},Vf={propertyName:"cellRenderer",cellRenderer:!0},QS={propertyName:"cellEditor",cellRenderer:!1},Bf={propertyName:"innerRenderer",cellRenderer:!0},JS={propertyName:"loadingOverlayComponent",cellRenderer:!1},e_={propertyName:"noRowsOverlayComponent",cellRenderer:!1},t_={propertyName:"tooltipComponent",cellRenderer:!1},Jc={propertyName:"filter",cellRenderer:!1},i_={propertyName:"floatingFilterComponent",cellRenderer:!1},n_={propertyName:"toolPanel",cellRenderer:!1},o_={propertyName:"statusPanel",cellRenderer:!1},r_={propertyName:"fullWidthCellRenderer",cellRenderer:!0},s_={propertyName:"loadingCellRenderer",cellRenderer:!0},a_={propertyName:"groupRowRenderer",cellRenderer:!0},l_={propertyName:"detailCellRenderer",cellRenderer:!0},u_=function(){function r(){}return r.getFloatingFilterType=function(t){return this.filterToFloatingFilterMapping[t]},r.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},r}(),c_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_r=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},d_=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return c_(t,r),t.prototype.getHeaderCompDetails=function(e,i){return this.getCompDetails(e,qS,"agColumnHeader",i)},t.prototype.getHeaderGroupCompDetails=function(e){var i=e.columnGroup.getColGroupDef();return this.getCompDetails(i,ZS,"agColumnGroupHeader",e)},t.prototype.getFullWidthCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,r_,null,e,!0)},t.prototype.getFullWidthLoadingCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,s_,"agLoadingCellRenderer",e,!0)},t.prototype.getFullWidthGroupCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,a_,"agGroupRowRenderer",e,!0)},t.prototype.getFullWidthDetailCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,l_,"agDetailCellRenderer",e,!0)},t.prototype.getInnerRendererDetails=function(e,i){return this.getCompDetails(e,Bf,null,i)},t.prototype.getFullWidthGroupRowInnerCellRenderer=function(e,i){return this.getCompDetails(e,Bf,null,i)},t.prototype.getCellRendererDetails=function(e,i){return this.getCompDetails(e,Vf,null,i)},t.prototype.getCellEditorDetails=function(e,i){return this.getCompDetails(e,QS,"agCellEditor",i,!0)},t.prototype.getFilterDetails=function(e,i,n){return this.getCompDetails(e,Jc,n,i,!0)},t.prototype.getDateCompDetails=function(e){return this.getCompDetails(this.gridOptions,XS,"agDateInput",e,!0)},t.prototype.getLoadingOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,JS,"agLoadingOverlay",e,!0)},t.prototype.getNoRowsOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,e_,"agNoRowsOverlay",e,!0)},t.prototype.getTooltipCompDetails=function(e){return this.getCompDetails(e.colDef,t_,"agTooltipComponent",e,!0)},t.prototype.getSetFilterCellRendererDetails=function(e,i){return this.getCompDetails(e,Vf,null,i)},t.prototype.getFloatingFilterCompDetails=function(e,i,n){return this.getCompDetails(e,i_,n,i)},t.prototype.getToolPanelCompDetails=function(e,i){return this.getCompDetails(e,n_,null,i,!0)},t.prototype.getStatusPanelCompDetails=function(e,i){return this.getCompDetails(e,o_,null,i,!0)},t.prototype.getCompDetails=function(e,i,n,o,s){var a=this;void 0===s&&(s=!1);var l=i.propertyName,u=i.cellRenderer,c=this.getCompKeys(e,i,o),d=c.compName,h=c.jsComp,p=c.fwComp,f=c.paramsFromSelector,v=c.popupFromSelector,g=c.popupPositionFromSelector,y=function(_){var b=a.userComponentRegistry.retrieve(l,_);b&&(h=b.componentFromFramework?void 0:b.component,p=b.componentFromFramework?b.component:void 0)};if(null!=d&&y(d),null==h&&null==p&&null!=n&&y(n),h&&u&&!this.agComponentUtils.doesImplementIComponent(h)&&(h=this.agComponentUtils.adaptFunction(l,h)),h||p){var m=this.mergeParamsWithApplicationProvidedParams(e,i,o,f),C=null==h,w=h||p;return{componentFromFramework:C,componentClass:w,params:m,type:i,popupFromSelector:v,popupPositionFromSelector:g,newAgStackInstance:function(){return a.newAgStackInstance(w,C,m,i)}}}s&&console.error("AG Grid: Could not find component "+d+", did you forget to configure this component?")},t.prototype.getCompKeys=function(e,i,n){var a,l,u,c,d,h,o=this,s=i.propertyName;if(e){var p=e,f=p[s+"Selector"],v=f?f(n):null,g=function(y){"string"==typeof y?a=y:null!=y&&!0!==y&&(o.getFrameworkOverrides().isFrameworkComponent(y)?u=y:l=y)};v?(g(v.component),c=v.params,d=v.popup,h=v.popupPosition):g(p[s])}return{compName:a,jsComp:l,fwComp:u,paramsFromSelector:c,popupFromSelector:d,popupPositionFromSelector:h}},t.prototype.newAgStackInstance=function(e,i,n,o){var l;if(i){var u=this.componentMetadataProvider.retrieve(o.propertyName);l=this.frameworkComponentWrapper.wrap(e,u.mandatoryMethodList,u.optionalMethodList,o)}else l=new e;var c=this.initComponent(l,n);return null==c?jt.resolve(l):c.then(function(){return l})},t.prototype.mergeParamsWithApplicationProvidedParams=function(e,i,n,o){void 0===o&&(o=null);var s={context:this.gridOptionsService.context,columnApi:this.gridOptionsService.columnApi,api:this.gridOptionsService.api};ti(s,n);var l=e&&e[i.propertyName+"Params"];return"function"==typeof l?ti(s,l(n)):"object"==typeof l&&ti(s,l),ti(s,o),s},t.prototype.initComponent=function(e,i){if(this.context.createBean(e),null!=e.init)return e.init(i)},t.prototype.getDefaultFloatingFilterType=function(e,i){if(null==e)return null;var n=null,o=this.getCompKeys(e,Jc),s=o.compName,a=o.jsComp,l=o.fwComp;return s?n=u_.getFloatingFilterType(s):null==a&&null==l&&!0===e.filter&&(n=i()),n},_r([S("gridOptions")],t.prototype,"gridOptions",void 0),_r([S("agComponentUtils")],t.prototype,"agComponentUtils",void 0),_r([S("componentMetadataProvider")],t.prototype,"componentMetadataProvider",void 0),_r([S("userComponentRegistry")],t.prototype,"userComponentRegistry",void 0),_r([we("frameworkComponentWrapper")],t.prototype,"frameworkComponentWrapper",void 0),_r([X("userComponentFactory")],t)}(k),ed=function(r){return r[r.SINGLE_SHEET=0]="SINGLE_SHEET",r[r.MULTI_SHEET=1]="MULTI_SHEET",r}(ed||{}),h_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),td=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},p_=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.dragEndFunctions=[],e.dragSources=[],e}return h_(t,r),t.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},t.prototype.removeListener=function(e){var i=e.dragSource.eElement;i.removeEventListener("mousedown",e.mouseDownListener),e.touchEnabled&&i.removeEventListener("touchstart",e.touchStartListener,{passive:!0})},t.prototype.removeDragSource=function(e){var i=this.dragSources.find(function(n){return n.dragSource===e});i&&(this.removeListener(i),ii(this.dragSources,i))},t.prototype.isDragging=function(){return this.dragging},t.prototype.addDragSource=function(e){var i=this,n=this.onMouseDown.bind(this,e),o=e.eElement,s=e.includeTouch,a=e.stopPropagationForTouch;o.addEventListener("mousedown",n);var l=null,u=this.gridOptionsService.is("suppressTouch");s&&!u&&o.addEventListener("touchstart",l=function(c){_c(c.target)||(c.cancelable&&(c.preventDefault(),a&&c.stopPropagation()),i.onTouchStart(e,c))},{passive:!1}),this.dragSources.push({dragSource:e,mouseDownListener:n,touchStartListener:l,touchEnabled:!!s})},t.prototype.getStartTarget=function(){return this.startTarget},t.prototype.onTouchStart=function(e,i){var n=this;this.currentDragParams=e,this.dragging=!1;var o=i.touches[0];this.touchLastTime=o,this.touchStart=o;var a=function(d){return n.onTouchUp(d,e.eElement)},u=i.target,c=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:function(d){d.cancelable&&d.preventDefault()},options:{passive:!1}},{target:u,type:"touchmove",listener:function(d){return n.onTouchMove(d,e.eElement)},options:{passive:!0}},{target:u,type:"touchend",listener:a,options:{passive:!0}},{target:u,type:"touchcancel",listener:a,options:{passive:!0}}];this.addTemporaryEvents(c),0===e.dragStartPixels&&this.onCommonMove(o,this.touchStart,e.eElement)},t.prototype.onMouseDown=function(e,i){var n=this,o=i;if(!(e.skipMouseEvent&&e.skipMouseEvent(i)||o._alreadyProcessedByDragService||(o._alreadyProcessedByDragService=!0,0!==i.button))){this.shouldPreventMouseEvent(i)&&i.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=i,this.startTarget=i.target;var u=this.gridOptionsService.getRootNode();this.addTemporaryEvents([{target:u,type:"mousemove",listener:function(d){return n.onMouseMove(d,e.eElement)}},{target:u,type:"mouseup",listener:function(d){return n.onMouseUp(d,e.eElement)}},{target:u,type:"contextmenu",listener:function(d){return d.preventDefault()}}]),0===e.dragStartPixels&&this.onMouseMove(i,e.eElement)}},t.prototype.addTemporaryEvents=function(e){e.forEach(function(i){i.target.addEventListener(i.type,i.listener,i.options)}),this.dragEndFunctions.push(function(){e.forEach(function(i){i.target.removeEventListener(i.type,i.listener,i.options)})})},t.prototype.isEventNearStartEvent=function(e,i){var n=this.currentDragParams.dragStartPixels;return Lc(e,i,I(n)?n:4)},t.prototype.getFirstActiveTouch=function(e){for(var i=0;i<e.length;i++)if(e[i].identifier===this.touchStart.identifier)return e[i];return null},t.prototype.onCommonMove=function(e,i,n){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,i))return;this.dragging=!0,this.eventService.dispatchEvent({type:E.EVENT_DRAG_STARTED,target:n}),this.currentDragParams.onDragStart(i),this.currentDragParams.onDragging(i)}this.currentDragParams.onDragging(e)},t.prototype.onTouchMove=function(e,i){var n=this.getFirstActiveTouch(e.touches);n&&this.onCommonMove(n,this.touchStart,i)},t.prototype.onMouseMove=function(e,i){this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,i)},t.prototype.shouldPreventMouseEvent=function(e){var i=this.gridOptionsService.is("enableCellTextSelection"),n=Ei();return(i&&"mousemove"===e.type||n)&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)},t.prototype.isOverFormFieldElement=function(e){var i=e.target,n=i?.tagName.toLocaleLowerCase();return!!n?.match("^a$|textarea|input|select|button")},t.prototype.onTouchUp=function(e,i){var n=this.getFirstActiveTouch(e.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,i)},t.prototype.onMouseUp=function(e,i){this.onUpCommon(e,i)},t.prototype.onUpCommon=function(e,i){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:E.EVENT_DRAG_STOPPED,target:i})),this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(o){return o()}),this.dragEndFunctions.length=0},td([S("mouseEventService")],t.prototype,"mouseEventService",void 0),td([lt],t.prototype,"removeAllListeners",null),td([X("dragService")],t)}(k),Wf=function(){function r(t){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=t.scrollContainer,this.scrollHorizontally=-1!==t.scrollAxis.indexOf("x"),this.scrollVertically=-1!==t.scrollAxis.indexOf("y"),this.scrollByTick=null!=t.scrollByTick?t.scrollByTick:20,t.onScrollCallback&&(this.onScrollCallback=t.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=t.getVerticalPosition,this.setVerticalPosition=t.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=t.getHorizontalPosition,this.setHorizontalPosition=t.setHorizontalPosition),this.shouldSkipVerticalScroll=t.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=t.shouldSkipHorizontalScroll||function(){return!1}}return r.prototype.check=function(t,e){void 0===e&&(e=!1);var i=e||this.shouldSkipVerticalScroll();if(!i||!this.shouldSkipHorizontalScroll()){var n=this.scrollContainer.getBoundingClientRect(),o=this.scrollByTick;this.tickLeft=t.clientX<n.left+o,this.tickRight=t.clientX>n.right-o,this.tickUp=t.clientY<n.top+o&&!i,this.tickDown=t.clientY>n.bottom-o&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},r.prototype.ensureTickingStarted=function(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},r.prototype.doTick=function(){var t;if(this.tickCount++,t=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-t),this.tickDown&&this.setVerticalPosition(e+t)}if(this.scrollHorizontally){var i=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(i-t),this.tickRight&&this.setHorizontalPosition(i+t)}this.onScrollCallback&&this.onScrollCallback()},r.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},r}(),f_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),jf=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},id="ag-list-item-hovered",ro=(function(r){function t(e,i,n){var o=r.call(this)||this;return o.comp=e,o.virtualList=i,o.params=n,o.currentDragValue=null,o.lastHoveredListItem=null,o}f_(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},t.prototype.listItemDragStart=function(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)},t.prototype.listItemDragEnd=function(){var e=this;window.setTimeout(function(){e.currentDragValue=null,e.moveBlocked=!1},10)},t.prototype.createDropTarget=function(){var e=this;this.dragAndDropService.addDropTarget({isInterestedIn:function(n){return n===e.params.dragSourceType},getIconName:function(){return ct[e.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"]},getContainer:function(){return e.comp.getGui()},onDragging:function(n){return e.onDragging(n)},onDragStop:function(){return e.onDragStop()},onDragLeave:function(){return e.onDragLeave()}})},t.prototype.createAutoScrollService=function(){var e=this.virtualList.getGui();this.autoScrollService=new Wf({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(i){return e.scrollTop=i}})},t.prototype.onDragging=function(e){if(this.currentDragValue&&!this.moveBlocked){var i=this.getListDragItem(e),n=this.virtualList.getComponentAt(i.rowIndex);if(n){var o=n.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===i.rowIndex&&this.lastHoveredListItem.position===i.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=i,wc(o,id),wc(o,"ag-item-highlight-"+i.position))}}},t.prototype.getListDragItem=function(e){var i=this.virtualList.getGui(),n=parseFloat(window.getComputedStyle(i).paddingTop),o=this.virtualList.getRowHeight(),s=this.virtualList.getScrollTop(),a=Math.max(0,(e.y-n+s)/o),l=this.params.getNumRows(this.comp)-1,u=0|Math.min(l,a);return{rowIndex:u,position:Math.round(a)>a||a>l?"bottom":"top",component:this.virtualList.getComponentAt(u)}},t.prototype.onDragStop=function(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())},t.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},t.prototype.clearHoveredItems=function(){this.virtualList.getGui().querySelectorAll("."+id).forEach(function(i){[id,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(function(n){i.classList.remove(n)})}),this.lastHoveredListItem=null},jf([S("dragAndDropService")],t.prototype,"dragAndDropService",void 0),jf([V],t.prototype,"postConstruct",null)}(k),function(r){return r[r.Above=0]="Above",r[r.Below=1]="Below",r}(ro||{})),Re=function(r){return r.EVERYTHING="group",r.FILTER="filter",r.SORT="sort",r.MAP="map",r.AGGREGATE="aggregate",r.FILTER_AGGREGATES="filter_aggregates",r.PIVOT="pivot",r.NOTHING="nothing",r}(Re||{}),Se=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function zo(r){return null!=r&&null!=r.getFrameworkComponentInstance?r.getFrameworkComponentInstance():r}var v_=function(){function r(){this.detailGridInfoMap={},this.destroyCalled=!1}return r.prototype.registerOverlayWrapperComp=function(t){this.overlayWrapperComp=t},r.prototype.registerSideBarComp=function(t){this.sideBarComp=t},r.prototype.init=function(){var t=this;switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel}this.ctrlsService.whenReady(function(){t.gridBodyCtrl=t.ctrlsService.getGridBodyCtrl()})},r.prototype.__getAlignedGridService=function(){return this.alignedGridsService},r.prototype.__getContext=function(){return this.context},r.prototype.getSetterMethod=function(t){return"set"+t.charAt(0).toUpperCase()+t.substring(1)},r.prototype.__setPropertyOnly=function(t,e){return this.gos.__setPropertyOnly(t,e)},r.prototype.__updateProperty=function(t,e,i,n){void 0===n&&(n=void 0),this.gos.set(t,e,i,{},n);var o=this.getSetterMethod(t);this[o]&&this[o](e)},r.prototype.getGridId=function(){return this.context.getGridId()},r.prototype.addDetailGridInfo=function(t,e){this.detailGridInfoMap[t]=e},r.prototype.removeDetailGridInfo=function(t){this.detailGridInfoMap[t]=void 0},r.prototype.getDetailGridInfo=function(t){return this.detailGridInfoMap[t]},r.prototype.forEachDetailGridInfo=function(t){var e=0;He(this.detailGridInfoMap,function(i,n){I(n)&&(t(n,e),e++)})},r.prototype.getDataAsCsv=function(t){if(oe.__assertRegistered(q.CsvExportModule,"api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(t)},r.prototype.exportDataAsCsv=function(t){oe.__assertRegistered(q.CsvExportModule,"api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(t)},r.prototype.getExcelExportMode=function(t){var e=this.gos.get("defaultExcelExportParams");return Object.assign({exportMode:"xlsx"},e,t).exportMode},r.prototype.assertNotExcelMultiSheet=function(t,e){if(!oe.__assertRegistered(q.ExcelExportModule,"api."+t,this.context.getGridId()))return!1;var i=this.getExcelExportMode(e);return this.excelCreator.getFactoryMode(i)!==ed.MULTI_SHEET||(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1)},r.prototype.getDataAsExcel=function(t){if(this.assertNotExcelMultiSheet("getDataAsExcel",t))return this.excelCreator.getDataAsExcel(t)},r.prototype.exportDataAsExcel=function(t){this.assertNotExcelMultiSheet("exportDataAsExcel",t)&&this.excelCreator.exportDataAsExcel(t)},r.prototype.getSheetDataForExcel=function(t){if(oe.__assertRegistered(q.ExcelExportModule,"api.getSheetDataForExcel",this.context.getGridId())){var e=this.getExcelExportMode(t);return this.excelCreator.setFactoryMode(ed.MULTI_SHEET,e),this.excelCreator.getSheetDataForExcel(t)}},r.prototype.getMultipleSheetsAsExcel=function(t){if(oe.__assertRegistered(q.ExcelExportModule,"api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(t)},r.prototype.exportMultipleSheetsAsExcel=function(t){if(oe.__assertRegistered(q.ExcelExportModule,"api.exportMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.exportMultipleSheetsAsExcel(t)},r.prototype.setTreeData=function(t){this.gos.set("treeData",t)},r.prototype.setGridAriaProperty=function(t,e){if(t){var i=this.ctrlsService.getGridBodyCtrl().getGui(),n="aria-"+t;null===e?i.removeAttribute(n):i.setAttribute(n,e)}},r.prototype.logMissingRowModel=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];console.error("AG Grid: api."+t+" can only be called when gridOptions.rowModelType is "+e.join(" or "))},r.prototype.setServerSideDatasource=function(t){this.serverSideRowModel?this.serverSideRowModel.setDatasource(t):this.logMissingRowModel("setServerSideDatasource","serverSide")},r.prototype.setCacheBlockSize=function(t){this.serverSideRowModel?(this.gos.set("cacheBlockSize",t),this.serverSideRowModel.resetRootStore()):this.logMissingRowModel("setCacheBlockSize","serverSide")},r.prototype.setDatasource=function(t){this.gos.isRowModelType("infinite")?this.rowModel.setDatasource(t):this.logMissingRowModel("setDatasource","infinite")},r.prototype.setViewportDatasource=function(t){this.gos.isRowModelType("viewport")?this.rowModel.setViewportDatasource(t):this.logMissingRowModel("setViewportDatasource","viewport")},r.prototype.setRowData=function(t){null==this.immutableService?this.logMissingRowModel("setRowData","clientSide"):this.immutableService.isActive()?this.immutableService.setRowData(t):(this.selectionService.reset(),this.clientSideRowModel.setRowData(t))},r.prototype.setPinnedTopRowData=function(t){this.pinnedRowModel.setPinnedTopRowData(t)},r.prototype.setPinnedBottomRowData=function(t){this.pinnedRowModel.setPinnedBottomRowData(t)},r.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},r.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},r.prototype.getPinnedTopRow=function(t){return this.pinnedRowModel.getPinnedTopRow(t)},r.prototype.getPinnedBottomRow=function(t){return this.pinnedRowModel.getPinnedBottomRow(t)},r.prototype.setColumnDefs=function(t,e){void 0===e&&(e="api"),this.columnModel.setColumnDefs(t,e),this.gos.set("columnDefs",t,!0,{source:e})},r.prototype.setAutoGroupColumnDef=function(t,e){void 0===e&&(e="api"),this.gos.set("autoGroupColumnDef",t,!0,{source:e})},r.prototype.setDefaultColDef=function(t,e){void 0===e&&(e="api"),this.gos.set("defaultColDef",t,!0,{source:e})},r.prototype.setColumnTypes=function(t,e){void 0===e&&(e="api"),this.gos.set("columnTypes",t,!0,{source:e})},r.prototype.expireValueCache=function(){this.valueCache.expire()},r.prototype.getVerticalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()},r.prototype.getHorizontalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()},r.prototype.setAlwaysShowHorizontalScroll=function(t){this.gos.set("alwaysShowHorizontalScroll",t)},r.prototype.setAlwaysShowVerticalScroll=function(t){this.gos.set("alwaysShowVerticalScroll",t)},r.prototype.refreshCells=function(t){void 0===t&&(t={}),this.rowRenderer.refreshCells(t)},r.prototype.flashCells=function(t){void 0===t&&(t={}),this.rowRenderer.flashCells(t)},r.prototype.redrawRows=function(t){void 0===t&&(t={}),this.rowRenderer.redrawRows(t?t.rowNodes:void 0)},r.prototype.setFunctionsReadOnly=function(t){this.gos.set("functionsReadOnly",t)},r.prototype.refreshHeader=function(){this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(t){return t.refresh()})},r.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},r.prototype.isColumnFilterPresent=function(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()},r.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},r.prototype.getModel=function(){return this.rowModel},r.prototype.setRowNodeExpanded=function(t,e,i){t&&(i&&t.parent&&-1!==t.parent.level&&this.setRowNodeExpanded(t.parent,e,i),t.setExpanded(e))},r.prototype.onGroupExpandedOrCollapsed=function(){ie(this.clientSideRowModel)?this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide"):this.clientSideRowModel.refreshModel({step:Re.MAP})},r.prototype.refreshClientSideRowModel=function(t){ie(this.clientSideRowModel)?this.logMissingRowModel("refreshClientSideRowModel","clientSide"):this.clientSideRowModel.refreshModel(t)},r.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},r.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},r.prototype.getRowNode=function(t){return this.rowModel.getRowNode(t)},r.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}},r.prototype.expandAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")},r.prototype.collapseAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):this.logMissingRowModel("expandAll","clientSide","serverSide")},r.prototype.addRenderedRowListener=function(t,e,i){this.rowRenderer.addRenderedRowListener(t,e,i)},r.prototype.getQuickFilter=function(){return this.gos.get("quickFilterText")},r.prototype.setQuickFilter=function(t){this.gos.set("quickFilterText",t)},r.prototype.setExcludeHiddenColumnsFromQuickFilter=function(t){Si("30","setExcludeHiddenColumnsFromQuickFilter",void 0,"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `setIncludeHiddenColumnsInQuickFilter`"),this.setIncludeHiddenColumnsInQuickFilter(!t)},r.prototype.setIncludeHiddenColumnsInQuickFilter=function(t){this.gos.set("includeHiddenColumnsInQuickFilter",t)},r.prototype.setQuickFilterParser=function(t){this.gos.set("quickFilterParser",t)},r.prototype.setQuickFilterMatcher=function(t){this.gos.set("quickFilterMatcher",t)},r.prototype.getAdvancedFilterModel=function(){return oe.__assertRegistered(q.AdvancedFilterModule,"api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null},r.prototype.setAdvancedFilterModel=function(t){this.gos.set("advancedFilterModel",t)},r.prototype.setEnableAdvancedFilter=function(t){this.gos.set("enableAdvancedFilter",t)},r.prototype.setIncludeHiddenColumnsInAdvancedFilter=function(t){this.gos.set("includeHiddenColumnsInAdvancedFilter",t)},r.prototype.setAdvancedFilterParent=function(t){this.gos.set("advancedFilterParent",t)},r.prototype.setAdvancedFilterBuilderParams=function(t){this.gos.set("advancedFilterBuilderParams",t)},r.prototype.showAdvancedFilterBuilder=function(){oe.__assertRegistered(q.AdvancedFilterModule,"api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")},r.prototype.setNodesSelected=function(t){t.nodes.every(function(a){return a.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):void 0!==a.id||(console.warn("AG Grid: cannot select node until id for node is known"),!1)})&&this.selectionService.setNodesSelected({nodes:t.nodes,source:t.source??"api",newValue:t.newValue})},r.prototype.selectAll=function(t){void 0===t&&(t="apiSelectAll"),this.selectionService.selectAllRowNodes({source:t})},r.prototype.deselectAll=function(t){void 0===t&&(t="apiSelectAll"),this.selectionService.deselectAllRowNodes({source:t})},r.prototype.selectAllFiltered=function(t){void 0===t&&(t="apiSelectAllFiltered"),this.selectionService.selectAllRowNodes({source:t,justFiltered:!0})},r.prototype.deselectAllFiltered=function(t){void 0===t&&(t="apiSelectAllFiltered"),this.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})},r.prototype.getServerSideSelectionState=function(){return ie(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getServerSideSelectionState()},r.prototype.setServerSideSelectionState=function(t){ie(this.serverSideRowModel)?this.logMissingRowModel("setServerSideSelectionState","serverSide"):this.selectionService.setServerSideSelectionState(t)},r.prototype.selectAllOnCurrentPage=function(t){void 0===t&&(t="apiSelectAllCurrentPage"),this.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})},r.prototype.deselectAllOnCurrentPage=function(t){void 0===t&&(t="apiSelectAllCurrentPage"),this.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})},r.prototype.sizeColumnsToFit=function(t){this.gridBodyCtrl.sizeColumnsToFit(t)},r.prototype.showLoadingOverlay=function(){this.overlayWrapperComp.showLoadingOverlay()},r.prototype.showNoRowsOverlay=function(){this.overlayWrapperComp.showNoRowsOverlay()},r.prototype.hideOverlay=function(){this.overlayWrapperComp.hideOverlay()},r.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},r.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},r.prototype.getBestCostNodeSelection=function(){if(!ie(this.clientSideRowModel))return this.selectionService.getBestCostNodeSelection();this.logMissingRowModel("getBestCostNodeSelection","clientSide")},r.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},r.prototype.ensureColumnVisible=function(t,e){void 0===e&&(e="auto"),this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(t,e)},r.prototype.ensureIndexVisible=function(t,e){this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t,e)},r.prototype.ensureNodeVisible=function(t,e){void 0===e&&(e=null),this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(t,e)},r.prototype.forEachLeafNode=function(t){ie(this.clientSideRowModel)?this.logMissingRowModel("forEachLeafNode","clientSide"):this.clientSideRowModel.forEachLeafNode(t)},r.prototype.forEachNode=function(t,e){this.rowModel.forEachNode(t,e)},r.prototype.forEachNodeAfterFilter=function(t){ie(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilter","clientSide"):this.clientSideRowModel.forEachNodeAfterFilter(t)},r.prototype.forEachNodeAfterFilterAndSort=function(t){ie(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide"):this.clientSideRowModel.forEachNodeAfterFilterAndSort(t)},r.prototype.getFilterInstance=function(t,e){return this.filterManager.getFilterInstance(t,e)},r.prototype.destroyFilter=function(t){var e=this.columnModel.getPrimaryColumn(t);if(e)return this.filterManager.destroyFilter(e,"api")},r.prototype.getStatusPanel=function(t){if(oe.__assertRegistered(q.StatusBarModule,"api.getStatusPanel",this.context.getGridId()))return zo(this.statusBarService.getStatusPanel(t))},r.prototype.getColumnDef=function(t){var e=this.columnModel.getPrimaryColumn(t);return e?e.getColDef():null},r.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},r.prototype.onFilterChanged=function(t){void 0===t&&(t="api"),this.filterManager.onFilterChanged({source:t})},r.prototype.onSortChanged=function(){this.sortController.onSortChanged("api")},r.prototype.setFilterModel=function(t){this.filterManager.setFilterModel(t)},r.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},r.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},r.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},r.prototype.setFocusedCell=function(t,e,i){this.focusService.setFocusedCell({rowIndex:t,column:e,rowPinned:i,forceBrowserFocus:!0})},r.prototype.setSuppressRowDrag=function(t){this.gos.set("suppressRowDrag",t)},r.prototype.setSuppressMoveWhenRowDragging=function(t){this.gos.set("suppressMoveWhenRowDragging",t)},r.prototype.setSuppressRowClickSelection=function(t){this.gos.set("suppressRowClickSelection",t)},r.prototype.addRowDropZone=function(t){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(t)},r.prototype.removeRowDropZone=function(t){var e=this.dragAndDropService.findExternalZone(t);e&&this.dragAndDropService.removeDropTarget(e)},r.prototype.getRowDropZoneParams=function(t){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(t)},r.prototype.setHeaderHeight=function(t){this.gos.set("headerHeight",t)},r.prototype.setDomLayout=function(t){this.gos.set("domLayout",t)},r.prototype.setEnableCellTextSelection=function(t){this.gridBodyCtrl.setCellTextSelection(t)},r.prototype.setFillHandleDirection=function(t){this.gos.set("fillHandleDirection",t)},r.prototype.setGroupHeaderHeight=function(t){this.gos.set("groupHeaderHeight",t)},r.prototype.setFloatingFiltersHeight=function(t){this.gos.set("floatingFiltersHeight",t)},r.prototype.setPivotHeaderHeight=function(t){this.gos.set("pivotHeaderHeight",t)},r.prototype.setPivotGroupHeaderHeight=function(t){this.gos.set("pivotGroupHeaderHeight",t)},r.prototype.setPivotMode=function(t){this.columnModel.setPivotMode(t)},r.prototype.setAnimateRows=function(t){this.gos.set("animateRows",t)},r.prototype.setIsExternalFilterPresent=function(t){this.gos.set("isExternalFilterPresent",t)},r.prototype.setDoesExternalFilterPass=function(t){this.gos.set("doesExternalFilterPass",t)},r.prototype.setNavigateToNextCell=function(t){this.gos.set("navigateToNextCell",t)},r.prototype.setTabToNextCell=function(t){this.gos.set("tabToNextCell",t)},r.prototype.setTabToNextHeader=function(t){this.gos.set("tabToNextHeader",t)},r.prototype.setNavigateToNextHeader=function(t){this.gos.set("navigateToNextHeader",t)},r.prototype.setRowGroupPanelShow=function(t){this.gos.set("rowGroupPanelShow",t)},r.prototype.setGetGroupRowAgg=function(t){this.gos.set("getGroupRowAgg",t)},r.prototype.setGetBusinessKeyForNode=function(t){this.gos.set("getBusinessKeyForNode",t)},r.prototype.setGetChildCount=function(t){this.gos.set("getChildCount",t)},r.prototype.setProcessRowPostCreate=function(t){this.gos.set("processRowPostCreate",t)},r.prototype.setGetRowId=function(t){this.gos.set("getRowId",t)},r.prototype.setGetRowClass=function(t){this.gos.set("getRowClass",t)},r.prototype.setIsFullWidthRow=function(t){this.gos.set("isFullWidthRow",t)},r.prototype.setIsRowSelectable=function(t){this.gos.set("isRowSelectable",t)},r.prototype.setIsRowMaster=function(t){this.gos.set("isRowMaster",t)},r.prototype.setPostSortRows=function(t){this.gos.set("postSortRows",t)},r.prototype.setGetDocument=function(t){this.gos.set("getDocument",t)},r.prototype.setGetContextMenuItems=function(t){this.gos.set("getContextMenuItems",t)},r.prototype.setGetMainMenuItems=function(t){this.gos.set("getMainMenuItems",t)},r.prototype.setProcessCellForClipboard=function(t){this.gos.set("processCellForClipboard",t)},r.prototype.setSendToClipboard=function(t){this.gos.set("sendToClipboard",t)},r.prototype.setProcessCellFromClipboard=function(t){this.gos.set("processCellFromClipboard",t)},r.prototype.setProcessSecondaryColDef=function(t){Si("28.0","setProcessSecondaryColDef","setProcessPivotResultColDef"),this.setProcessPivotResultColDef(t)},r.prototype.setProcessSecondaryColGroupDef=function(t){Si("28.0","setProcessSecondaryColGroupDef","setProcessPivotResultColGroupDef"),this.setProcessPivotResultColGroupDef(t)},r.prototype.setProcessPivotResultColDef=function(t){this.gos.set("processPivotResultColDef",t)},r.prototype.setProcessPivotResultColGroupDef=function(t){this.gos.set("processPivotResultColGroupDef",t)},r.prototype.setPostProcessPopup=function(t){this.gos.set("postProcessPopup",t)},r.prototype.setInitialGroupOrderComparator=function(t){this.gos.set("initialGroupOrderComparator",t)},r.prototype.setGetChartToolbarItems=function(t){this.gos.set("getChartToolbarItems",t)},r.prototype.setPaginationNumberFormatter=function(t){this.gos.set("paginationNumberFormatter",t)},r.prototype.setGetServerSideStoreParams=function(t){Si("28.0","setGetServerSideStoreParams","setGetServerSideGroupLevelParams"),this.setGetServerSideGroupLevelParams(t)},r.prototype.setGetServerSideGroupLevelParams=function(t){this.gos.set("getServerSideGroupLevelParams",t)},r.prototype.setIsServerSideGroupOpenByDefault=function(t){this.gos.set("isServerSideGroupOpenByDefault",t)},r.prototype.setIsApplyServerSideTransaction=function(t){this.gos.set("isApplyServerSideTransaction",t)},r.prototype.setIsServerSideGroup=function(t){this.gos.set("isServerSideGroup",t)},r.prototype.setGetServerSideGroupKey=function(t){this.gos.set("getServerSideGroupKey",t)},r.prototype.setGetRowStyle=function(t){this.gos.set("getRowStyle",t)},r.prototype.setGetRowHeight=function(t){this.gos.set("getRowHeight",t)},r.prototype.assertSideBarLoaded=function(t){return oe.__assertRegistered(q.SideBarModule,"api."+t,this.context.getGridId())},r.prototype.isSideBarVisible=function(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarComp.isDisplayed()},r.prototype.setSideBarVisible=function(t){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarComp.setDisplayed(t)},r.prototype.setSideBarPosition=function(t){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarComp.setSideBarPosition(t)},r.prototype.openToolPanel=function(t){this.assertSideBarLoaded("openToolPanel")&&this.sideBarComp.openToolPanel(t,"api")},r.prototype.closeToolPanel=function(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarComp.close("api")},r.prototype.getOpenedToolPanel=function(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarComp.openedItem():null},r.prototype.refreshToolPanel=function(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarComp.refresh()},r.prototype.isToolPanelShowing=function(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarComp.isToolPanelShowing()},r.prototype.getToolPanelInstance=function(t){if(this.assertSideBarLoaded("getToolPanelInstance"))return zo(this.sideBarComp.getToolPanelInstance(t))},r.prototype.getSideBar=function(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarComp.getDef()},r.prototype.setSideBar=function(t){this.gos.set("sideBar",t)},r.prototype.setSuppressClipboardPaste=function(t){this.gos.set("suppressClipboardPaste",t)},r.prototype.resetRowHeights=function(){if(I(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive())return void console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");this.clientSideRowModel.resetRowHeights()}},r.prototype.setGroupRemoveSingleChildren=function(t){this.gos.set("groupRemoveSingleChildren",t)},r.prototype.setGroupRemoveLowestSingleChildren=function(t){this.gos.set("groupRemoveLowestSingleChildren",t)},r.prototype.setGroupDisplayType=function(t){this.gos.set("groupDisplayType",t)},r.prototype.setGroupIncludeFooter=function(t){this.gos.set("groupIncludeFooter",t)},r.prototype.setGroupIncludeTotalFooter=function(t){this.gos.set("groupIncludeTotalFooter",t)},r.prototype.setRowClass=function(t){this.gos.set("rowClass",t)},r.prototype.setDeltaSort=function(t){this.gos.set("deltaSort",t)},r.prototype.setRowCount=function(t,e){if(this.serverSideRowModel)return this.columnModel.isRowGroupEmpty()?void this.serverSideRowModel.setRowCount(t,e):void console.error("AG Grid: setRowCount cannot be used while using row grouping.");this.infiniteRowModel?this.infiniteRowModel.setRowCount(t,e):this.logMissingRowModel("setRowCount","infinite","serverSide")},r.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},r.prototype.getValue=function(t,e){var i=this.columnModel.getPrimaryColumn(t);return ie(i)&&(i=this.columnModel.getGridColumn(t)),ie(i)?null:this.valueService.getValue(i,e)},r.prototype.addEventListener=function(t,e){var i=this.gos.useAsyncEvents();this.eventService.addEventListener(t,e,i)},r.prototype.addGlobalListener=function(t){var e=this.gos.useAsyncEvents();this.eventService.addGlobalListener(t,e)},r.prototype.removeEventListener=function(t,e){var i=this.gos.useAsyncEvents();this.eventService.removeEventListener(t,e,i)},r.prototype.removeGlobalListener=function(t){var e=this.gos.useAsyncEvents();this.eventService.removeGlobalListener(t,e)},r.prototype.dispatchEvent=function(t){this.eventService.dispatchEvent(t)},r.prototype.destroy=function(){if(!this.destroyCalled){this.destroyCalled=!0,this.dispatchEvent({type:E.EVENT_GRID_PRE_DESTROYED});var t=this.ctrlsService.getGridCtrl();t&&t.destroyGridUi(),this.context.destroy()}},r.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(Xh.bind(window,this,"Grid API"),100)},r.prototype.warnIfDestroyed=function(t){return this.destroyCalled&&console.warn("AG Grid: Grid API method "+t+" was called on a grid that was destroyed."),this.destroyCalled},r.prototype.resetQuickFilter=function(){this.warnIfDestroyed("resetQuickFilter")||this.filterManager.resetQuickFilterCache()},r.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(oe.__assertRegistered(q.RangeSelectionModule,"api.getCellRanges",this.context.getGridId()),null)},r.prototype.addCellRange=function(t){this.rangeService?this.rangeService.addCellRange(t):oe.__assertRegistered(q.RangeSelectionModule,"api.addCellRange",this.context.getGridId())},r.prototype.clearRangeSelection=function(){this.rangeService&&this.rangeService.removeAllCellRanges(),oe.__assertRegistered(q.RangeSelectionModule,"gridApi.clearRangeSelection",this.context.getGridId())},r.prototype.undoCellEditing=function(){this.undoRedoService.undo("api")},r.prototype.redoCellEditing=function(){this.undoRedoService.redo("api")},r.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},r.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},r.prototype.getChartModels=function(){if(oe.__assertRegistered(q.GridChartsModule,"api.getChartModels",this.context.getGridId()))return this.chartService.getChartModels()},r.prototype.getChartRef=function(t){if(oe.__assertRegistered(q.GridChartsModule,"api.getChartRef",this.context.getGridId()))return this.chartService.getChartRef(t)},r.prototype.getChartImageDataURL=function(t){if(oe.__assertRegistered(q.GridChartsModule,"api.getChartImageDataURL",this.context.getGridId()))return this.chartService.getChartImageDataURL(t)},r.prototype.downloadChart=function(t){if(oe.__assertRegistered(q.GridChartsModule,"api.downloadChart",this.context.getGridId()))return this.chartService.downloadChart(t)},r.prototype.openChartToolPanel=function(t){if(oe.__assertRegistered(q.GridChartsModule,"api.openChartToolPanel",this.context.getGridId()))return this.chartService.openChartToolPanel(t)},r.prototype.closeChartToolPanel=function(t){if(oe.__assertRegistered(q.GridChartsModule,"api.closeChartToolPanel",this.context.getGridId()))return this.chartService.closeChartToolPanel(t.chartId)},r.prototype.createRangeChart=function(t){if(oe.__assertRegistered(q.GridChartsModule,"api.createRangeChart",this.context.getGridId()))return this.chartService.createRangeChart(t)},r.prototype.createPivotChart=function(t){if(oe.__assertRegistered(q.GridChartsModule,"api.createPivotChart",this.context.getGridId()))return this.chartService.createPivotChart(t)},r.prototype.createCrossFilterChart=function(t){if(oe.__assertRegistered(q.GridChartsModule,"api.createCrossFilterChart",this.context.getGridId()))return this.chartService.createCrossFilterChart(t)},r.prototype.updateChart=function(t){oe.__assertRegistered(q.GridChartsModule,"api.updateChart",this.context.getGridId())&&this.chartService.updateChart(t)},r.prototype.restoreChart=function(t,e){if(oe.__assertRegistered(q.GridChartsModule,"api.restoreChart",this.context.getGridId()))return this.chartService.restoreChart(t,e)},r.prototype.copyToClipboard=function(t){oe.__assertRegistered(q.ClipboardModule,"api.copyToClipboard",this.context.getGridId())&&this.clipboardService.copyToClipboard(t)},r.prototype.cutToClipboard=function(t){oe.__assertRegistered(q.ClipboardModule,"api.cutToClipboard",this.context.getGridId())&&this.clipboardService.cutToClipboard(t,"api")},r.prototype.copySelectedRowsToClipboard=function(t){oe.__assertRegistered(q.ClipboardModule,"api.copySelectedRowsToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRowsToClipboard(t)},r.prototype.copySelectedRangeToClipboard=function(t){oe.__assertRegistered(q.ClipboardModule,"api.copySelectedRangeToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRangeToClipboard(t)},r.prototype.copySelectedRangeDown=function(){oe.__assertRegistered(q.ClipboardModule,"api.copySelectedRangeDown",this.context.getGridId())&&this.clipboardService.copyRangeDown()},r.prototype.pasteFromClipboard=function(){oe.__assertRegistered(q.ClipboardModule,"api.pasteFromClipboard",this.context.getGridId())&&this.clipboardService.pasteFromClipboard()},r.prototype.showColumnMenuAfterButtonClick=function(t,e){var i=this.columnModel.getGridColumn(t);this.menuFactory.showMenuAfterButtonClick(i,e,"columnMenu")},r.prototype.showColumnMenuAfterMouseClick=function(t,e){var i=this.columnModel.getGridColumn(t);i||(i=this.columnModel.getPrimaryColumn(t)),i?this.menuFactory.showMenuAfterMouseEvent(i,e):console.error("AG Grid: column '"+t+"' not found")},r.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},r.prototype.setPopupParent=function(t){this.gos.set("popupParent",t)},r.prototype.tabToNextCell=function(t){return this.navigationService.tabToNextCell(!1,t)},r.prototype.tabToPreviousCell=function(t){return this.navigationService.tabToNextCell(!0,t)},r.prototype.getCellRendererInstances=function(t){return void 0===t&&(t={}),this.rowRenderer.getCellRendererInstances(t).map(zo)},r.prototype.getCellEditorInstances=function(t){return void 0===t&&(t={}),this.rowRenderer.getCellEditorInstances(t).map(zo)},r.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},r.prototype.stopEditing=function(t){void 0===t&&(t=!1),this.rowRenderer.stopEditing(t)},r.prototype.startEditingCell=function(t){var e=this.columnModel.getGridColumn(t.colKey);if(e){var i={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:e};null==t.rowPinned&&this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t.rowIndex);var o=this.navigationService.getCellByPosition(i);o&&(this.focusService.isCellFocused(i)||this.focusService.setFocusedCell(i),o.startRowOrCellEdit(t.key))}else console.warn("AG Grid: no column found for "+t.colKey)},r.prototype.addAggFunc=function(t,e){this.aggFuncService&&this.aggFuncService.addAggFunc(t,e)},r.prototype.addAggFuncs=function(t){this.aggFuncService&&this.aggFuncService.addAggFuncs(t)},r.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},r.prototype.applyServerSideTransaction=function(t){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransaction(t);this.logMissingRowModel("applyServerSideTransaction","serverSide")},r.prototype.applyServerSideTransactionAsync=function(t,e){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransactionAsync(t,e);this.logMissingRowModel("applyServerSideTransactionAsync","serverSide")},r.prototype.applyServerSideRowData=function(t){var e,i,n=null!==(e=t.startRow)&&void 0!==e?e:0,o=null!==(i=t.route)&&void 0!==i?i:[];n<0?console.warn("AG Grid: invalid value "+t.startRow+" for startRow, the value should be >= 0"):this.serverSideRowModel?this.serverSideRowModel.applyRowData(t.successParams,n,o):this.logMissingRowModel("setServerSideDatasource","serverSide")},r.prototype.retryServerSideLoads=function(){this.serverSideRowModel?this.serverSideRowModel.retryLoads():this.logMissingRowModel("retryServerSideLoads","serverSide")},r.prototype.flushServerSideAsyncTransactions=function(){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.flushAsyncTransactions();this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide")},r.prototype.applyTransaction=function(t){if(this.clientSideRowModel)return this.clientSideRowModel.updateRowData(t);this.logMissingRowModel("applyTransaction","clientSide")},r.prototype.applyTransactionAsync=function(t,e){this.clientSideRowModel?this.clientSideRowModel.batchUpdateRowData(t,e):this.logMissingRowModel("applyTransactionAsync","clientSide")},r.prototype.flushAsyncTransactions=function(){this.clientSideRowModel?this.clientSideRowModel.flushAsyncTransactions():this.logMissingRowModel("flushAsyncTransactions","clientSide")},r.prototype.setSuppressModelUpdateAfterUpdateTransaction=function(t){this.gos.set("suppressModelUpdateAfterUpdateTransaction",t)},r.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")},r.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")},r.prototype.refreshServerSide=function(t){this.serverSideRowModel?this.serverSideRowModel.refreshStore(t):this.logMissingRowModel("refreshServerSide","serverSide")},r.prototype.refreshServerSideStore=function(t){return Si("28.0","refreshServerSideStore","refreshServerSide"),this.refreshServerSide(t)},r.prototype.getServerSideStoreState=function(){return Si("28.0","getServerSideStoreState","getServerSideGroupLevelState"),this.getServerSideGroupLevelState()},r.prototype.getServerSideGroupLevelState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])},r.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")},r.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")},r.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},r.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},r.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},r.prototype.getDisplayedRowAtIndex=function(t){return this.rowModel.getRow(t)},r.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},r.prototype.setDataTypeDefinitions=function(t){this.gos.set("dataTypeDefinitions",t)},r.prototype.setPagination=function(t){this.gos.set("pagination",t)},r.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},r.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},r.prototype.paginationSetPageSize=function(t){this.gos.set("paginationPageSize",t)},r.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},r.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},r.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},r.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},r.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},r.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},r.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},r.prototype.paginationGoToPage=function(t){this.paginationProxy.goToPage(t)},Se([we("immutableService")],r.prototype,"immutableService",void 0),Se([we("csvCreator")],r.prototype,"csvCreator",void 0),Se([we("excelCreator")],r.prototype,"excelCreator",void 0),Se([S("rowRenderer")],r.prototype,"rowRenderer",void 0),Se([S("navigationService")],r.prototype,"navigationService",void 0),Se([S("filterManager")],r.prototype,"filterManager",void 0),Se([S("columnModel")],r.prototype,"columnModel",void 0),Se([S("selectionService")],r.prototype,"selectionService",void 0),Se([S("gridOptionsService")],r.prototype,"gos",void 0),Se([S("valueService")],r.prototype,"valueService",void 0),Se([S("alignedGridsService")],r.prototype,"alignedGridsService",void 0),Se([S("eventService")],r.prototype,"eventService",void 0),Se([S("pinnedRowModel")],r.prototype,"pinnedRowModel",void 0),Se([S("context")],r.prototype,"context",void 0),Se([S("rowModel")],r.prototype,"rowModel",void 0),Se([S("sortController")],r.prototype,"sortController",void 0),Se([S("paginationProxy")],r.prototype,"paginationProxy",void 0),Se([S("focusService")],r.prototype,"focusService",void 0),Se([S("dragAndDropService")],r.prototype,"dragAndDropService",void 0),Se([we("rangeService")],r.prototype,"rangeService",void 0),Se([we("clipboardService")],r.prototype,"clipboardService",void 0),Se([we("aggFuncService")],r.prototype,"aggFuncService",void 0),Se([S("menuFactory")],r.prototype,"menuFactory",void 0),Se([we("contextMenuFactory")],r.prototype,"contextMenuFactory",void 0),Se([S("valueCache")],r.prototype,"valueCache",void 0),Se([S("animationFrameService")],r.prototype,"animationFrameService",void 0),Se([we("statusBarService")],r.prototype,"statusBarService",void 0),Se([we("chartService")],r.prototype,"chartService",void 0),Se([we("undoRedoService")],r.prototype,"undoRedoService",void 0),Se([we("rowNodeBlockLoader")],r.prototype,"rowNodeBlockLoader",void 0),Se([we("ssrmTransactionManager")],r.prototype,"serverSideTransactionManager",void 0),Se([S("ctrlsService")],r.prototype,"ctrlsService",void 0),Se([V],r.prototype,"init",null),Se([lt],r.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),Se([X("gridApi")],r)}(),g_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),xs=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Uf=function(r){function t(){var i=null!==r&&r.apply(this,arguments)||this;return i.quickFilter=null,i.quickFilterParts=null,i}var e;return g_(t,r),e=t,t.prototype.postConstruct=function(){var i=this;this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return i.resetQuickFilterCache()}),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,function(){return i.resetQuickFilterCache()}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return i.resetQuickFilterCache()}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VISIBLE,function(){i.gridOptionsService.is("includeHiddenColumnsInQuickFilter")||i.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",function(n){return i.setQuickFilter(n.currentValue)}),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",function(){return i.onIncludeHiddenColumnsInQuickFilterChanged()}),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.parser=this.gridOptionsService.get("quickFilterParser"),this.matcher=this.gridOptionsService.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],function(){return i.setQuickFilterParserAndMatcher()})},t.prototype.isQuickFilterPresent=function(){return null!==this.quickFilter},t.prototype.doesRowPassQuickFilter=function(i){var n=this,o=this.gridOptionsService.is("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(o,i):this.quickFilterParts.every(function(s){return o?n.doesRowPassQuickFilterCache(i,s):n.doesRowPassQuickFilterNoCache(i,s)})},t.prototype.resetQuickFilterCache=function(){this.rowModel.forEachNode(function(i){return i.quickFilterAggregateText=null})},t.prototype.setQuickFilterParts=function(){var n=this.quickFilter,o=this.parser;this.quickFilterParts=n?o?o(n):n.split(" "):null},t.prototype.parseQuickFilter=function(i){return I(i)?this.gridOptionsService.isRowModelType("clientSide")?i.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null},t.prototype.setQuickFilter=function(i){if(null==i||"string"==typeof i){var n=this.parseQuickFilter(i);this.quickFilter!==n&&(this.quickFilter=n,this.setQuickFilterParts(),this.dispatchEvent({type:e.EVENT_QUICK_FILTER_CHANGED}))}else console.warn("AG Grid - setQuickFilter() only supports string inputs, received: "+typeof i)},t.prototype.setQuickFilterParserAndMatcher=function(){var i=this.gridOptionsService.get("quickFilterParser"),n=this.gridOptionsService.get("quickFilterMatcher"),o=i!==this.parser||n!==this.matcher;this.parser=i,this.matcher=n,o&&(this.setQuickFilterParts(),this.dispatchEvent({type:e.EVENT_QUICK_FILTER_CHANGED}))},t.prototype.onIncludeHiddenColumnsInQuickFilterChanged=function(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:e.EVENT_QUICK_FILTER_CHANGED})},t.prototype.doesRowPassQuickFilterNoCache=function(i,n){var o=this;return this.columnModel.getAllColumnsForQuickFilter().some(function(a){var l=o.getQuickFilterTextForColumn(a,i);return I(l)&&l.indexOf(n)>=0})},t.prototype.doesRowPassQuickFilterCache=function(i,n){return this.checkGenerateQuickFilterAggregateText(i),i.quickFilterAggregateText.indexOf(n)>=0},t.prototype.doesRowPassQuickFilterMatcher=function(i,n){var o;return i?(this.checkGenerateQuickFilterAggregateText(n),o=n.quickFilterAggregateText):o=this.getQuickFilterAggregateText(n),(0,this.matcher)(this.quickFilterParts,o)},t.prototype.checkGenerateQuickFilterAggregateText=function(i){i.quickFilterAggregateText||(i.quickFilterAggregateText=this.getQuickFilterAggregateText(i))},t.prototype.getQuickFilterTextForColumn=function(i,n){var o=this.valueService.getValue(i,n,!0),s=i.getColDef();return s.getQuickFilterText&&(o=s.getQuickFilterText({value:o,node:n,data:n.data,column:i,colDef:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context})),I(o)?o.toString().toUpperCase():null},t.prototype.getQuickFilterAggregateText=function(i){var n=this,o=[];return this.columnModel.getAllColumnsForQuickFilter().forEach(function(a){var l=n.getQuickFilterTextForColumn(a,i);I(l)&&o.push(l)}),o.join(e.QUICK_FILTER_SEPARATOR)},t.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged",t.QUICK_FILTER_SEPARATOR="\n",xs([S("valueService")],t.prototype,"valueService",void 0),xs([S("columnModel")],t.prototype,"columnModel",void 0),xs([S("rowModel")],t.prototype,"rowModel",void 0),xs([V],t.prototype,"postConstruct",null),e=xs([X("quickFilterService")],t)}(k),y_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ul=function(){return ul=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},ul.apply(this,arguments)},an=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},m_=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.allColumnFilters=new Map,e.allColumnListeners=new Map,e.activeAggregateFilters=[],e.activeColumnFilters=[],e.processingFilterChange=!1,e.filterModelUpdateQueue=[],e}return y_(t,r),t.prototype.init=function(){var e=this;this.addManagedListener(this.eventService,E.EVENT_GRID_COLUMNS_CHANGED,function(){return e.onColumnsChanged()}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VALUE_CHANGED,function(){return e.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_CHANGED,function(){return e.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return e.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,function(){return e.updateAdvancedFilterColumns()}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VISIBLE,function(){return e.updateAdvancedFilterColumns()}),this.allowShowChangeAfterFilter=this.gridOptionsService.is("allowShowChangeAfterFilter"),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",function(){return e.updateAggFiltering()}),this.addManagedPropertyListener("advancedFilterModel",function(i){return e.setAdvancedFilterModel(i.currentValue)}),this.addManagedListener(this.eventService,E.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,function(i){return e.onAdvancedFilterEnabledChanged(i.enabled)}),this.addManagedListener(this.eventService,E.EVENT_DATA_TYPES_INFERRED,function(){return e.processFilterModelUpdateQueue()}),this.addManagedListener(this.quickFilterService,Uf.EVENT_QUICK_FILTER_CHANGED,function(){return e.onFilterChanged({source:"quickFilter"})})},t.prototype.isExternalFilterPresentCallback=function(){var e=this.gridOptionsService.getCallback("isExternalFilterPresent");return"function"==typeof e&&e({})},t.prototype.doesExternalFilterPass=function(e){var i=this.gridOptionsService.get("doesExternalFilterPass");return"function"==typeof i&&i(e)},t.prototype.setFilterModel=function(e){var i=this;if(this.isAdvancedFilterEnabled())this.warnAdvancedFilters();else if(this.dataTypeService.isPendingInference())this.filterModelUpdateQueue.push(e);else{var n=[],o=this.getFilterModel();if(e){var s=Mc(Object.keys(e));this.allColumnFilters.forEach(function(a,l){n.push(i.setModelOnFilterWrapper(a.filterPromise,e[l])),s.delete(l)}),s.forEach(function(a){var l=i.columnModel.getPrimaryColumn(a)||i.columnModel.getGridColumn(a);if(l)if(l.isFilterAllowed()){var u=i.getOrCreateFilterWrapper(l,"NO_UI");u?n.push(i.setModelOnFilterWrapper(u.filterPromise,e[a])):console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+a)}else console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+a);else console.warn("AG Grid: setFilterModel() - no column found for colId: "+a)})}else this.allColumnFilters.forEach(function(a){n.push(i.setModelOnFilterWrapper(a.filterPromise,null))});jt.all(n).then(function(){var a=i.getFilterModel(),l=[];i.allColumnFilters.forEach(function(u,c){ne.jsonEquals(o?o[c]:null,a?a[c]:null)||l.push(u.column)}),l.length>0&&i.onFilterChanged({columns:l,source:"api"})})}},t.prototype.setModelOnFilterWrapper=function(e,i){return new jt(function(n){e.then(function(o){"function"!=typeof o.setModel&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),n()),(o.setModel(i)||jt.resolve()).then(function(){return n()})})})},t.prototype.getFilterModel=function(){var e={};return this.allColumnFilters.forEach(function(i,n){var s=i.filterPromise.resolveNow(null,function(l){return l});if(null==s)return null;if("function"==typeof s.getModel){var a=s.getModel();I(a)&&(e[n]=a)}else console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel")}),e},t.prototype.isColumnFilterPresent=function(){return this.activeColumnFilters.length>0},t.prototype.isAggregateFilterPresent=function(){return!!this.activeAggregateFilters.length},t.prototype.isExternalFilterPresent=function(){return this.externalFilterPresent},t.prototype.isChildFilterPresent=function(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()},t.prototype.isAdvancedFilterPresent=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()},t.prototype.onAdvancedFilterEnabledChanged=function(e){var n,i=this;e?this.allColumnFilters.size&&(this.allColumnFilters.forEach(function(o){return i.disposeFilterWrapper(o,"advancedFilterEnabled")}),this.onFilterChanged({source:"advancedFilter"})):null!==(n=this.advancedFilterService)&&void 0!==n&&n.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))},t.prototype.isAdvancedFilterEnabled=function(){var e;return null===(e=this.advancedFilterService)||void 0===e?void 0:e.isEnabled()},t.prototype.isAdvancedFilterHeaderActive=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()},t.prototype.doAggregateFiltersPass=function(e,i){return this.doColumnFiltersPass(e,i,!0)},t.prototype.updateActiveFilters=function(){var e=this;this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;var i=function(s){return!!s&&(s.isFilterActive?s.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1))},n=!!this.gridOptionsService.getGroupAggFiltering();this.allColumnFilters.forEach(function(s){if(s.filterPromise.resolveNow(!1,i)){var a=s.filterPromise.resolveNow(null,function(l){return l});!function(s){if(!s.isPrimary())return!0;var l=!e.columnModel.isPivotActive();return!(!s.isValueActive()||!l)&&(!!e.columnModel.isPivotMode()||n)}(s.column)?e.activeColumnFilters.push(a):e.activeAggregateFilters.push(a)}})},t.prototype.updateFilterFlagInColumns=function(e,i){this.allColumnFilters.forEach(function(n){var o=n.filterPromise.resolveNow(!1,function(s){return s.isFilterActive()});n.column.setFilterActive(o,e,i)})},t.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()},t.prototype.doColumnFiltersPass=function(e,i,n){for(var a=n?this.activeAggregateFilters:this.activeColumnFilters,l=n?e.aggData:e.data,u=0;u<a.length;u++){var c=a[u];if(null!=c&&c!==i){if("function"!=typeof c.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!c.doesFilterPass({node:e,data:l}))return!1}}return!0},t.prototype.resetQuickFilterCache=function(){this.quickFilterService.resetQuickFilterCache()},t.prototype.refreshFiltersForAggregations=function(){this.gridOptionsService.getGroupAggFiltering()&&this.onFilterChanged()},t.prototype.callOnFilterChangedOutsideRenderCycle=function(e){var i=this,n=function(){return i.onFilterChanged(e)};this.rowRenderer.isRefreshInProgress()?setTimeout(n,0):n()},t.prototype.onFilterChanged=function(e){void 0===e&&(e={});var i=e.source,n=e.filterInstance,o=e.additionalEventAttributes,s=e.columns;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",o),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(function(l){l.filterPromise&&l.filterPromise.then(function(u){u&&u!==n&&u.onAnyFilterChanged&&u.onAnyFilterChanged()})});var a={source:i,type:E.EVENT_FILTER_CHANGED,columns:s||[]};o&&ti(a,o),this.processingFilterChange=!0,this.eventService.dispatchEvent(a),this.processingFilterChange=!1},t.prototype.isSuppressFlashingCellsBecauseFiltering=function(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange},t.prototype.isQuickFilterPresent=function(){return this.quickFilterService.isQuickFilterPresent()},t.prototype.updateAggFiltering=function(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()},t.prototype.isAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())},t.prototype.isNonAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())},t.prototype.doesRowPassOtherFilters=function(e,i){return this.doesRowPassFilter({rowNode:i,filterInstanceToSkip:e})},t.prototype.doesRowPassAggregateFilters=function(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))},t.prototype.doesRowPassFilter=function(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))},t.prototype.onNewRowsLoaded=function(e){this.allColumnFilters.forEach(function(i){i.filterPromise.then(function(n){n.onNewRowsLoaded&&n.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(e,{afterDataChange:!0}),this.updateActiveFilters()},t.prototype.createValueGetter=function(e){var i=this;return function(n){return i.valueService.getValue(e,n.node,!0)}},t.prototype.getFilterComponent=function(e,i,n){var o;if(void 0===n&&(n=!0),n)return(null===(o=this.getOrCreateFilterWrapper(e,i))||void 0===o?void 0:o.filterPromise)||null;var s=this.cachedFilter(e);return s?s.filterPromise:null},t.prototype.isFilterActive=function(e){var i=this.cachedFilter(e);return!!i&&i.filterPromise.resolveNow(!1,function(n){return n.isFilterActive()})},t.prototype.getOrCreateFilterWrapper=function(e,i){var n=this;if(!e.isFilterAllowed())return null;var o=this.cachedFilter(e);if(o)"NO_UI"!==i&&this.putIntoGui(o,i);else{o=this.createFilterWrapper(e,i);var s=e.getColId();this.allColumnFilters.set(s,o),this.allColumnListeners.set(s,this.addManagedListener(e,Ae.EVENT_COL_DEF_CHANGED,function(){return n.checkDestroyFilter(s)}))}return o},t.prototype.cachedFilter=function(e){return this.allColumnFilters.get(e.getColId())},t.prototype.getDefaultFilter=function(e){var i;if(oe.__isRegistered(q.SetFilterModule,this.context.getGridId()))i="agSetColumnFilter";else{var n=e.getColDef().cellDataType;i="number"===n?"agNumberColumnFilter":"date"===n||"dateString"===n?"agDateColumnFilter":"agTextColumnFilter"}return i},t.prototype.getDefaultFloatingFilter=function(e){var i;if(oe.__isRegistered(q.SetFilterModule,this.context.getGridId()))i="agSetColumnFloatingFilter";else{var n=e.getColDef().cellDataType;i="number"===n?"agNumberColumnFloatingFilter":"date"===n||"dateString"===n?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return i},t.prototype.createFilterInstance=function(e){var s,i=this,n=this.getDefaultFilter(e),o=e.getColDef(),a=ul(ul({},this.createFilterParams(e,o)),{filterModifiedCallback:function(){i.eventService.dispatchEvent({type:E.EVENT_FILTER_MODIFIED,column:e,filterInstance:s})},filterChangedCallback:function(u){var c,d=null!==(c=u?.source)&&void 0!==c?c:"api";i.callOnFilterChangedOutsideRenderCycle({filterInstance:s,additionalEventAttributes:u,columns:[e],source:d})},doesRowPassOtherFilter:function(u){return i.doesRowPassOtherFilters(s,u)}}),l=this.userComponentFactory.getFilterDetails(o,a,n);return l?{filterPromise:function(){var u=l.newAgStackInstance();return u&&u.then(function(c){return s=c}),u},compDetails:l}:{filterPromise:null,compDetails:null}},t.prototype.createFilterParams=function(e,i){return{column:e,colDef:Vu(i),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(e),doesRowPassOtherFilter:function(){return!0},api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},t.prototype.createFilterWrapper=function(e,i){var n,o={column:e,filterPromise:null,compiledElement:null,guiPromise:jt.resolve(null),compDetails:null},s=this.createFilterInstance(e),a=s.filterPromise,l=s.compDetails;return o.filterPromise=null!==(n=a?.())&&void 0!==n?n:null,o.compDetails=l,a&&this.putIntoGui(o,i),o},t.prototype.putIntoGui=function(e,i){var n=this,o=document.createElement("div");o.className="ag-filter",e.guiPromise=new jt(function(s){e.filterPromise.then(function(a){var l=a.getGui();I(l)||console.warn("AG Grid: getGui method from filter returned "+l+", it should be a DOM element or an HTML template string."),"string"==typeof l&&(l=Ct(l)),o.appendChild(l),s(o),n.eventService.dispatchEvent({type:E.EVENT_FILTER_OPENED,column:e.column,source:i,eGui:o})})})},t.prototype.onColumnsChanged=function(){var e=this,i=[];this.allColumnFilters.forEach(function(n,o){!(n.column.isPrimary()?e.columnModel.getPrimaryColumn(o):e.columnModel.getGridColumn(o))&&(i.push(n.column),e.disposeFilterWrapper(n,"columnChanged"),e.disposeColumnListener(o))}),i.length>0?this.onFilterChanged({columns:i,source:"api"}):this.updateDependantFilters()},t.prototype.updateDependantFilters=function(){var e=this,i=this.columnModel.getGroupAutoColumns();i?.forEach(function(n){"agGroupColumnFilter"===n.getColDef().filter&&e.getOrCreateFilterWrapper(n,"NO_UI")})},t.prototype.isFilterAllowed=function(e){var i,n;if(this.isAdvancedFilterEnabled())return!1;if(!e.isFilterAllowed())return!1;var s=this.allColumnFilters.get(e.getColId());return null===(n=null===(i=s?.filterPromise)||void 0===i?void 0:i.resolveNow(!0,function(a){var l,u;return"function"!=typeof(null===(l=a)||void 0===l?void 0:l.isFilterAllowed)||(null===(u=a)||void 0===u?void 0:u.isFilterAllowed())}))||void 0===n||n},t.prototype.getFloatingFilterCompDetails=function(e,i){var n=this,o=e.getColDef(),s=this.createFilterParams(e,o),a=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(o,Jc,s),l=this.userComponentFactory.getDefaultFloatingFilterType(o,function(){return n.getDefaultFloatingFilter(e)});return null==l&&(l="agReadOnlyFloatingFilter"),this.userComponentFactory.getFloatingFilterCompDetails(o,{column:e,filterParams:a,currentParentModel:function(){return n.getCurrentFloatingFilterParentModel(e)},parentFilterInstance:function(d){var h=n.getFilterComponent(e,"NO_UI");h?.then(function(p){d(zo(p))})},showParentFilter:i,suppressFilterButton:!1},l)},t.prototype.getCurrentFloatingFilterParentModel=function(e){var i=this.getFilterComponent(e,"NO_UI",!1);return i?i.resolveNow(null,function(n){return n&&n.getModel()}):null},t.prototype.destroyFilter=function(e,i){void 0===i&&(i="api");var n=e.getColId(),o=this.allColumnFilters.get(n);this.disposeColumnListener(n),o&&(this.disposeFilterWrapper(o,i),this.onFilterChanged({columns:[e],source:"api"}))},t.prototype.disposeColumnListener=function(e){var i=this.allColumnListeners.get(e);i&&(this.allColumnListeners.delete(e),i())},t.prototype.disposeFilterWrapper=function(e,i){var n=this;e.filterPromise.then(function(o){(o.setModel(null)||jt.resolve()).then(function(){n.getContext().destroyBean(o),e.column.setFilterActive(!1,"filterDestroyed"),n.allColumnFilters.delete(e.column.getColId()),n.eventService.dispatchEvent({type:E.EVENT_FILTER_DESTROYED,source:i,column:e.column})})})},t.prototype.checkDestroyFilter=function(e){var i=this.allColumnFilters.get(e);if(i){var n=i.column,o=(n.isFilterAllowed()?this.createFilterInstance(n):{compDetails:null}).compDetails;this.areFilterCompsDifferent(i.compDetails,o)&&this.destroyFilter(n,"columnChanged")}},t.prototype.areFilterCompsDifferent=function(e,i){if(!i||!e)return!0;var n=e.componentClass,o=i.componentClass;return!(n===o||n?.render&&o?.render&&n.render===o.render)},t.prototype.getAdvancedFilterModel=function(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null},t.prototype.setAdvancedFilterModel=function(e){this.isAdvancedFilterEnabled()&&(this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"}))},t.prototype.showAdvancedFilterBuilder=function(e){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(e,!0)},t.prototype.updateAdvancedFilterColumns=function(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})},t.prototype.hasFloatingFilters=function(){if(this.isAdvancedFilterEnabled())return!1;var e=this.columnModel.getAllGridColumns();return!!e&&e.some(function(i){return i.getColDef().floatingFilter})},t.prototype.getFilterInstance=function(e,i){if(!this.isAdvancedFilterEnabled()){var n=this.getFilterInstanceImpl(e,function(s){if(i){var a=zo(s);i(a)}});return zo(n)}this.warnAdvancedFilters()},t.prototype.getFilterInstanceImpl=function(e,i){var n=this.columnModel.getPrimaryColumn(e);if(n){var o=this.getFilterComponent(n,"NO_UI"),s=o&&o.resolveNow(null,function(a){return a});return s?setTimeout(i,0,s):o&&o.then(function(a){i(a)}),s}},t.prototype.warnAdvancedFilters=function(){ge(function(){console.warn("AG Grid: Column Filter API methods have been disabled as Advanced Filters are enabled.")},"advancedFiltersCompatibility")},t.prototype.setupAdvancedFilterHeaderComp=function(e){var i;null===(i=this.advancedFilterService)||void 0===i||i.getCtrl().setupHeaderComp(e)},t.prototype.getHeaderRowCount=function(){return this.isAdvancedFilterHeaderActive()?1:0},t.prototype.getHeaderHeight=function(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0},t.prototype.processFilterModelUpdateQueue=function(){var e=this;this.filterModelUpdateQueue.forEach(function(i){return e.setFilterModel(i)}),this.filterModelUpdateQueue=[]},t.prototype.destroy=function(){var e=this;r.prototype.destroy.call(this),this.allColumnFilters.forEach(function(i){return e.disposeFilterWrapper(i,"gridDestroyed")}),this.allColumnListeners.clear()},an([S("valueService")],t.prototype,"valueService",void 0),an([S("columnModel")],t.prototype,"columnModel",void 0),an([S("rowModel")],t.prototype,"rowModel",void 0),an([S("userComponentFactory")],t.prototype,"userComponentFactory",void 0),an([S("rowRenderer")],t.prototype,"rowRenderer",void 0),an([S("dataTypeService")],t.prototype,"dataTypeService",void 0),an([S("quickFilterService")],t.prototype,"quickFilterService",void 0),an([we("advancedFilterService")],t.prototype,"advancedFilterService",void 0),an([V],t.prototype,"init",null),an([X("filterManager")],t)}(k),C_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),nd=function(r){function t(e,i){var n=r.call(this,e)||this;return n.ctrl=i,n}return C_(t,r),t.prototype.getCtrl=function(){return this.ctrl},t}(he),w_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ds=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},S_=function(r){function t(e){return r.call(this,t.TEMPLATE,e)||this}return w_(t,r),t.prototype.postConstruct=function(){var e=this,i=this.getGui();this.ctrl.setComp({addOrRemoveCssClass:function(o,s){return e.addOrRemoveCssClass(o,s)},addOrRemoveBodyCssClass:function(o,s){return e.eFloatingFilterBody.classList.toggle(o,s)},setButtonWrapperDisplayed:function(o){return Ce(e.eButtonWrapper,o)},setCompDetails:function(o){return e.setCompDetails(o)},getFloatingFilterComp:function(){return e.compPromise},setWidth:function(o){return i.style.width=o},setMenuIcon:function(o){return e.eButtonShowMainFilter.appendChild(o)}},i,this.eButtonShowMainFilter,this.eFloatingFilterBody)},t.prototype.setCompDetails=function(e){var i=this;if(!e)return this.destroyFloatingFilterComp(),void(this.compPromise=null);this.compPromise=e.newAgStackInstance(),this.compPromise.then(function(n){return i.afterCompCreated(n)})},t.prototype.destroyFloatingFilterComp=function(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))},t.prototype.afterCompCreated=function(e){if(e){if(!this.isAlive())return void this.destroyBean(e);this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}},t.TEMPLATE='<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">\n            <div ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',Ds([U("eFloatingFilterBody")],t.prototype,"eFloatingFilterBody",void 0),Ds([U("eButtonWrapper")],t.prototype,"eButtonWrapper",void 0),Ds([U("eButtonShowMainFilter")],t.prototype,"eButtonShowMainFilter",void 0),Ds([V],t.prototype,"postConstruct",null),Ds([lt],t.prototype,"destroyFloatingFilterComp",null),t}(nd),__=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),rt=function(r){return r.AUTO_HEIGHT="ag-layout-auto-height",r.NORMAL="ag-layout-normal",r.PRINT="ag-layout-print",r}(rt||{}),od=function(r){function t(e){var i=r.call(this)||this;return i.view=e,i}return __(t,r),t.prototype.postConstruct=function(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},t.prototype.updateLayoutClasses=function(){var e=this.getDomLayout(),i={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e};this.view.updateLayoutClasses(i.autoHeight?rt.AUTO_HEIGHT:i.print?rt.PRINT:rt.NORMAL,i)},t.prototype.getDomLayout=function(){var e,i=null!==(e=this.gridOptionsService.get("domLayout"))&&void 0!==e?e:"normal";return-1===["normal","print","autoHeight"].indexOf(i)?(ge(function(){return console.warn("AG Grid: "+i+" is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.")},"warn about dom layout values"),"normal"):i},function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([V],t.prototype,"postConstruct",null),t}(k),b_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),cl=function(){return cl=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},cl.apply(this,arguments)},so=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ft=function(r){return r[r.Vertical=0]="Vertical",r[r.Horizontal=1]="Horizontal",r}(Ft||{}),zt=function(r){return r[r.Container=0]="Container",r[r.FakeContainer=1]="FakeContainer",r}(zt||{}),R_=function(r){function t(e){var i=r.call(this)||this;return i.lastScrollSource=[null,null],i.scrollLeft=-1,i.nextScrollTop=-1,i.scrollTop=-1,i.eBodyViewport=e,i.resetLastHScrollDebounced=Fi(function(){return i.lastScrollSource[Ft.Horizontal]=null},500),i.resetLastVScrollDebounced=Fi(function(){return i.lastScrollSource[Ft.Vertical]=null},500),i}return b_(t,r),t.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsService.is("enableRtl"),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(function(i){e.centerRowContainerCtrl=i.centerRowContainerCtrl,e.onDisplayedColumnsWidthChanged(),e.addScrollListener()})},t.prototype.addScrollListener=function(){var e=this.ctrlsService.getFakeHScrollComp(),i=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),e.onScrollCallback(this.onFakeHScroll.bind(this));var n=this.gridOptionsService.is("debounceVerticalScrollbar"),o=n?Fi(this.onVScroll.bind(this),100):this.onVScroll.bind(this),s=n?Fi(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",o),i.onScrollCallback(s)},t.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},t.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(e){if(null!=this.centerRowContainerCtrl){void 0===e&&(e=this.centerRowContainerCtrl.getCenterViewportScrollLeft());var n=this.enableRtl?e:-e,o=this.ctrlsService.getTopCenterRowContainerCtrl(),s=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),a=this.ctrlsService.getBottomCenterRowContainerCtrl(),l=this.ctrlsService.getFakeHScrollComp();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(-n),a.setContainerTranslateX(n),o.setContainerTranslateX(n),s.setContainerTranslateX(n);var c=this.centerRowContainerCtrl.getViewportElement(),d=this.lastScrollSource[Ft.Horizontal]===zt.Container;e=Math.abs(e),d?l.setScrollPosition(e):ms(c,e,this.enableRtl)}},t.prototype.isControllingScroll=function(e,i){return null==this.lastScrollSource[i]?(this.lastScrollSource[i]=e,!0):this.lastScrollSource[i]===e},t.prototype.onFakeHScroll=function(){this.isControllingScroll(zt.FakeContainer,Ft.Horizontal)&&this.onHScrollCommon(zt.FakeContainer)},t.prototype.onHScroll=function(){this.isControllingScroll(zt.Container,Ft.Horizontal)&&this.onHScrollCommon(zt.Container)},t.prototype.onHScrollCommon=function(e){var o,i=this.centerRowContainerCtrl.getViewportElement();this.shouldBlockScrollUpdate(Ft.Horizontal,i.scrollLeft,!0)||(o=e===zt.Container?ys(i,this.enableRtl):this.ctrlsService.getFakeHScrollComp().getScrollPosition(),this.doHorizontalScroll(Math.round(o)),this.resetLastHScrollDebounced())},t.prototype.onFakeVScroll=function(){this.isControllingScroll(zt.FakeContainer,Ft.Vertical)&&this.onVScrollCommon(zt.FakeContainer)},t.prototype.onVScroll=function(){this.isControllingScroll(zt.Container,Ft.Vertical)&&this.onVScrollCommon(zt.Container)},t.prototype.onVScrollCommon=function(e){var i;i=e===zt.Container?this.eBodyViewport.scrollTop:this.ctrlsService.getFakeVScrollComp().getScrollPosition(),!this.shouldBlockScrollUpdate(Ft.Vertical,i,!0)&&(this.animationFrameService.setScrollTop(i),this.nextScrollTop=i,e===zt.Container?this.ctrlsService.getFakeVScrollComp().setScrollPosition(i):this.eBodyViewport.scrollTop=i,this.gridOptionsService.is("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())},t.prototype.doHorizontalScroll=function(e){var i=this.ctrlsService.getFakeHScrollComp().getScrollPosition();this.scrollLeft===e&&e===i||(this.scrollLeft=e,this.fireScrollEvent(Ft.Horizontal),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowContainerCtrl.onHorizontalViewportChanged(!0))},t.prototype.fireScrollEvent=function(e){var i=this,n={type:E.EVENT_BODY_SCROLL,direction:e===Ft.Horizontal?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(n),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(function(){var o=cl(cl({},n),{type:E.EVENT_BODY_SCROLL_END});i.eventService.dispatchEvent(o)},100)},t.prototype.shouldBlockScrollUpdate=function(e,i,n){return void 0===n&&(n=!1),!(n&&!eo())&&(e===Ft.Vertical?this.shouldBlockVerticalScroll(i):this.shouldBlockHorizontalScroll(i))},t.prototype.shouldBlockVerticalScroll=function(e){var i=fs(this.eBodyViewport);return e<0||e+i>this.eBodyViewport.scrollHeight},t.prototype.shouldBlockHorizontalScroll=function(e){var i=this.centerRowContainerCtrl.getCenterWidth(),n=this.centerRowContainerCtrl.getViewportElement().scrollWidth;if(this.enableRtl&&gs()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+i>n},t.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent(Ft.Vertical)},t.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(zt.Container)},t.prototype.scrollGridIfNeeded=function(){var e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e},t.prototype.setHorizontalScrollPosition=function(e,i){void 0===i&&(i=!1);var o=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();!i&&this.shouldBlockScrollUpdate(Ft.Horizontal,e)&&(e=this.enableRtl&&gs()?e>0?0:o:Math.min(Math.max(e,0),o)),ms(this.centerRowContainerCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)},t.prototype.setVerticalScrollPosition=function(e){this.eBodyViewport.scrollTop=e},t.prototype.getVScrollPosition=function(){return{top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight}},t.prototype.getHScrollPosition=function(){return this.centerRowContainerCtrl.getHScrollPosition()},t.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()},t.prototype.scrollHorizontally=function(e){var i=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(i+e),this.centerRowContainerCtrl.getViewportElement().scrollLeft-i},t.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},t.prototype.ensureNodeVisible=function(e,i){void 0===i&&(i=null);for(var n=this.rowModel.getRowCount(),o=-1,s=0;s<n;s++){var a=this.rowModel.getRow(s);if("function"==typeof e){if(a&&e(a)){o=s;break}}else if(e===a||e===a.data){o=s;break}}o>=0&&this.ensureIndexVisible(o,i)},t.prototype.ensureIndexVisible=function(e,i){if(!this.gridOptionsService.isDomLayout("print")){var n=this.paginationProxy.getRowCount();if("number"!=typeof e||e<0||e>=n)return void console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+e);this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel")||this.paginationProxy.goToPageWithIndex(e);var c,l=this.ctrlsService.getGridBodyCtrl().getStickyTopHeight(),u=this.paginationProxy.getRow(e);do{var d=u.rowTop,h=u.rowHeight,p=this.paginationProxy.getPixelOffset(),f=u.rowTop-p,v=f+u.rowHeight,g=this.getVScrollPosition(),y=this.heightScaler.getDivStretchOffset(),m=g.top+y,C=g.bottom+y,w=C-m,_=this.heightScaler.getScrollPositionForPixel(f),b=this.heightScaler.getScrollPositionForPixel(v-w),O=Math.min((_+b)/2,f),T=null;"top"===i?T=_:"bottom"===i?T=b:"middle"===i?T=O:m+l>f?T=_-l:C<v&&(T=b),null!==T&&(this.setVerticalScrollPosition(T),this.rowRenderer.redraw({afterScroll:!0})),c=d!==u.rowTop||h!==u.rowHeight}while(c);this.animationFrameService.flushAllFrames()}},t.prototype.ensureColumnVisible=function(e,i){void 0===i&&(i="auto");var n=this.columnModel.getGridColumn(e);if(n&&!n.isPinned()&&this.columnModel.isColumnDisplayed(n)){var o=this.getPositionedHorizontalScroll(n,i);null!==o&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(o),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}},t.prototype.getPositionedHorizontalScroll=function(e,i){var n=this.isColumnOutsideViewport(e),o=n.columnBeforeStart,s=n.columnAfterEnd,a=this.centerRowContainerCtrl.getCenterWidth()<e.getActualWidth(),l=this.centerRowContainerCtrl.getCenterWidth(),u=this.enableRtl,c=(u?o:s)||a,d=u?s:o;"auto"!==i&&(c="start"===i,d="end"===i);var h="middle"===i;if(c||d||h){var p=this.getColumnBounds(e),f=p.colLeft,g=p.colRight;return h?p.colMiddle-l/2:c?u?g:f:u?f-l:g-l}return null},t.prototype.isColumnOutsideViewport=function(e){var i=this.getViewportBounds(),n=i.start,o=i.end,s=this.getColumnBounds(e),a=s.colLeft,l=s.colRight,u=this.enableRtl;return{columnBeforeStart:u?n>l:o<l,columnAfterEnd:u?o<a:n>a}},t.prototype.getColumnBounds=function(e){var i=this.enableRtl,n=this.columnModel.getBodyContainerWidth(),o=e.getActualWidth(),s=e.getLeft(),a=i?-1:1,l=i?n-s:s;return{colLeft:l,colMiddle:l+o/2*a,colRight:l+o*a}},t.prototype.getViewportBounds=function(){var e=this.centerRowContainerCtrl.getCenterWidth(),i=this.centerRowContainerCtrl.getCenterViewportScrollLeft();return{start:i,end:e+i,width:e}},so([S("ctrlsService")],t.prototype,"ctrlsService",void 0),so([S("animationFrameService")],t.prototype,"animationFrameService",void 0),so([S("paginationProxy")],t.prototype,"paginationProxy",void 0),so([S("rowModel")],t.prototype,"rowModel",void 0),so([S("rowContainerHeightService")],t.prototype,"heightScaler",void 0),so([S("rowRenderer")],t.prototype,"rowRenderer",void 0),so([S("columnModel")],t.prototype,"columnModel",void 0),so([V],t.prototype,"postConstruct",null),t}(k),O_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),rd=function(){return rd=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},rd.apply(this,arguments)},xi=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},T_=function(r){function t(e){var i=r.call(this)||this;return i.isMultiRowDrag=!1,i.isGridSorted=!1,i.isGridFiltered=!1,i.isRowGroupActive=!1,i.eContainer=e,i}return O_(t,r),t.prototype.postConstruct=function(){var e=this;this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel);var i=function(){e.onSortChanged(),e.onFilterChanged(),e.onRowGroupChanged()};this.addManagedListener(this.eventService,E.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,function(){i()}),i(),this.ctrlsService.whenReady(function(){var n=e.ctrlsService.getGridBodyCtrl();e.autoScrollService=new Wf({scrollContainer:n.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return n.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(o){return n.getScrollFeature().setVerticalScrollPosition(o)},onScrollCallback:function(){e.onDragging(e.lastDraggingEvent)}})})},t.prototype.onSortChanged=function(){this.isGridSorted=this.sortController.isSortActive()},t.prototype.onFilterChanged=function(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()},t.prototype.onRowGroupChanged=function(){var e=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!ei(e)},t.prototype.getContainer=function(){return this.eContainer},t.prototype.isInterestedIn=function(e){return e===Ut.RowDrag},t.prototype.getIconName=function(){return this.gridOptionsService.is("rowDragManaged")&&this.shouldPreventRowMove()?ct.ICON_NOT_ALLOWED:ct.ICON_MOVE},t.prototype.shouldPreventRowMove=function(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive},t.prototype.getRowNodes=function(e){var i=this;if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];var n=this.gridOptionsService.is("rowDragMultiRow"),o=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r}([],function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(this.selectionService.getSelectedNodes())).sort(function(a,l){return null==a.rowIndex||null==l.rowIndex?0:i.getRowIndexNumber(a)-i.getRowIndexNumber(l)}),s=e.dragItem.rowNode;return n&&-1!==o.indexOf(s)?(this.isMultiRowDrag=!0,o):(this.isMultiRowDrag=!1,[s])},t.prototype.onDragEnter=function(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent(E.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(function(i){i.setDragging(!0)}),this.onEnterOrDragging(e)},t.prototype.onDragging=function(e){this.onEnterOrDragging(e)},t.prototype.isFromThisGrid=function(e){return e.dragSource.dragSourceDomDataKey===this.gridOptionsService.getDomDataKey()},t.prototype.isDropZoneWithinThisGrid=function(e){return!this.ctrlsService.getGridBodyCtrl().getGui().contains(e.dropZoneTarget)},t.prototype.onEnterOrDragging=function(e){this.dispatchGridEvent(E.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;var i=this.mouseEventService.getNormalisedPosition(e).y;this.gridOptionsService.is("rowDragManaged")&&this.doManagedDrag(e,i),this.autoScrollService.check(e.event)},t.prototype.doManagedDrag=function(e,i){var n=this.isFromThisGrid(e),o=this.gridOptionsService.is("rowDragManaged"),s=e.dragItem.rowNodes;o&&this.shouldPreventRowMove()||(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!n?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(s[0],i):this.moveRows(s,i))},t.prototype.getRowIndexNumber=function(e){return parseInt(Pe(e.getRowIndexString().split("-")),10)},t.prototype.moveRowAndClearHighlight=function(e){var i=this,n=this.clientSideRowModel.getLastHighlightedRowNode(),o=n&&n.highlighted===ro.Below,s=this.mouseEventService.getNormalisedPosition(e).y,a=e.dragItem.rowNodes,l=o?1:0;if(this.isFromThisGrid(e))a.forEach(function(d){d.rowTop<s&&(l-=1)}),this.moveRows(a,s,l);else{var u=this.gridOptionsService.getCallback("getRowId"),c=this.clientSideRowModel.getRowIndexAtPixel(s)+1;this.clientSideRowModel.getHighlightPosition(s)===ro.Above&&c--,this.clientSideRowModel.updateRowData({add:a.map(function(d){return d.data}).filter(function(d){return!i.clientSideRowModel.getRowNode(u?u({data:d,level:0}):d.id)}),addIndex:c})}this.clearRowHighlight()},t.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},t.prototype.moveRows=function(e,i,n){void 0===n&&(n=0),this.clientSideRowModel.ensureRowsAtPixel(e,i,n)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},t.prototype.addRowDropZone=function(e){var i=this;if(e.getContainer())if(this.dragAndDropService.findExternalZone(e))console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");else{var n={getContainer:e.getContainer};e.fromGrid?(e.fromGrid=void 0,n=e):(e.onDragEnter&&(n.onDragEnter=function(o){e.onDragEnter(i.draggingToRowDragEvent(E.EVENT_ROW_DRAG_ENTER,o))}),e.onDragLeave&&(n.onDragLeave=function(o){e.onDragLeave(i.draggingToRowDragEvent(E.EVENT_ROW_DRAG_LEAVE,o))}),e.onDragging&&(n.onDragging=function(o){e.onDragging(i.draggingToRowDragEvent(E.EVENT_ROW_DRAG_MOVE,o))}),e.onDragStop&&(n.onDragStop=function(o){e.onDragStop(i.draggingToRowDragEvent(E.EVENT_ROW_DRAG_END,o))})),this.dragAndDropService.addDropTarget(rd({isInterestedIn:function(o){return o===Ut.RowDrag},getIconName:function(){return ct.ICON_MOVE},external:!0},n))}else ge(function(){return console.warn("AG Grid: addRowDropZone - A container target needs to be provided")},"add-drop-zone-empty-target")},t.prototype.getRowDropZone=function(e){var i=this,n=this.getContainer.bind(this),o=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),a=this.onDragging.bind(this),l=this.onDragStop.bind(this);return e?{getContainer:n,onDragEnter:e.onDragEnter?function(u){o(u),e.onDragEnter(i.draggingToRowDragEvent(E.EVENT_ROW_DRAG_ENTER,u))}:o,onDragLeave:e.onDragLeave?function(u){s(u),e.onDragLeave(i.draggingToRowDragEvent(E.EVENT_ROW_DRAG_LEAVE,u))}:s,onDragging:e.onDragging?function(u){a(u),e.onDragging(i.draggingToRowDragEvent(E.EVENT_ROW_DRAG_MOVE,u))}:a,onDragStop:e.onDragStop?function(u){l(u),e.onDragStop(i.draggingToRowDragEvent(E.EVENT_ROW_DRAG_END,u))}:l,fromGrid:!0}:{getContainer:n,onDragEnter:o,onDragLeave:s,onDragging:a,onDragStop:l,fromGrid:!0}},t.prototype.draggingToRowDragEvent=function(e,i){var a,l,n=this.mouseEventService.getNormalisedPosition(i).y,s=-1;switch(n>this.paginationProxy.getCurrentPageHeight()||(s=this.rowModel.getRowIndexAtPixel(n),a=this.rowModel.getRow(s)),i.vDirection){case Es.Down:l="down";break;case Es.Up:l="up";break;default:l=null}return{type:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,event:i.event,node:i.dragItem.rowNode,nodes:i.dragItem.rowNodes,overIndex:s,overNode:a,y:n,vDirection:l}},t.prototype.dispatchGridEvent=function(e,i){var n=this.draggingToRowDragEvent(e,i);this.eventService.dispatchEvent(n)},t.prototype.onDragLeave=function(e){this.dispatchGridEvent(E.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gridOptionsService.is("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(e)&&(this.isMultiRowDrag=!1)},t.prototype.onDragStop=function(e){this.dispatchGridEvent(E.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gridOptionsService.is("rowDragManaged")&&(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)},t.prototype.stopDragging=function(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(function(i){i.setDragging(!1)})},xi([S("dragAndDropService")],t.prototype,"dragAndDropService",void 0),xi([S("rowModel")],t.prototype,"rowModel",void 0),xi([S("paginationProxy")],t.prototype,"paginationProxy",void 0),xi([S("columnModel")],t.prototype,"columnModel",void 0),xi([S("focusService")],t.prototype,"focusService",void 0),xi([S("sortController")],t.prototype,"sortController",void 0),xi([S("filterManager")],t.prototype,"filterManager",void 0),xi([S("selectionService")],t.prototype,"selectionService",void 0),xi([S("mouseEventService")],t.prototype,"mouseEventService",void 0),xi([S("ctrlsService")],t.prototype,"ctrlsService",void 0),xi([we("rangeService")],t.prototype,"rangeService",void 0),xi([V],t.prototype,"postConstruct",null),t}(k),P_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Kt=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ts=function(r){return r.ANIMATION_ON="ag-row-animation",r.ANIMATION_OFF="ag-row-no-animation",r}(Ts||{}),zf="ag-force-vertical-scroll",M_=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.stickyTopHeight=0,e}return P_(t,r),t.prototype.getScrollFeature=function(){return this.bodyScrollFeature},t.prototype.getBodyViewportElement=function(){return this.eBodyViewport},t.prototype.setComp=function(e,i,n,o,s,a){this.comp=e,this.eGridBody=i,this.eBodyViewport=n,this.eTop=o,this.eBottom=s,this.eStickyTop=a,this.setCellTextSelection(this.gridOptionsService.is("enableCellTextSelection")),this.createManagedBean(new od(this.comp)),this.bodyScrollFeature=this.createManagedBean(new R_(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([o,n,s,a]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(o),this.ctrlsService.registerGridBodyCtrl(this)},t.prototype.getComp=function(){return this.comp},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,E.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},t.prototype.addFocusListeners=function(e){var i=this;e.forEach(function(n){i.addManagedListener(n,"focusin",function(o){var a=ko(o.target,"ag-root",n);n.classList.toggle("ag-has-focus",!a)}),i.addManagedListener(n,"focusout",function(o){var s=o.target,a=o.relatedTarget,l=n.contains(a),u=ko(a,"ag-root",n);ko(s,"ag-root",n)||(!l||u)&&n.classList.remove("ag-has-focus")})})},t.prototype.setColumnMovingCss=function(e){this.comp.setColumnMovingCss("ag-column-moving",e)},t.prototype.setCellTextSelection=function(e){void 0===e&&(e=!1),this.comp.setCellSelectableCss("ag-selectable",e)},t.prototype.onScrollVisibilityChanged=function(){var e=this,i=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(i),this.setStickyTopWidth(i);var s="calc(100% + "+((i&&this.gridOptionsService.getScrollbarWidth()||0)+(ps()?16:0))+"px)";this.animationFrameService.requestAnimationFrame(function(){return e.comp.setBodyViewportWidth(s)})},t.prototype.onGridColumnsChanged=function(){var e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e?e.length:0)},t.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",function(e){if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})},t.prototype.addStopEditingWhenGridLosesFocus=function(){var e=this;if(this.gridOptionsService.is("stopEditingWhenCellsLoseFocus")){var i=function(o){var s=o.relatedTarget;if(null!==Ya(s)){var a=n.some(function(u){return u.contains(s)})&&e.mouseEventService.isElementInThisGrid(s);if(!a){var l=e.popupService;a=l.getActivePopups().some(function(u){return u.contains(s)})||l.isElementWithinCustomPopup(s)}a||e.rowRenderer.stopEditing()}else e.rowRenderer.stopEditing()},n=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];n.forEach(function(o){return e.addManagedListener(o,"focusout",i)})}},t.prototype.updateRowCount=function(){var e=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),i=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1;this.comp.setRowCount(-1===i?-1:e+i)},t.prototype.registerBodyViewportResizeListener=function(e){this.comp.registerBodyViewportResizeListener(e)},t.prototype.setVerticalScrollPaddingVisible=function(e){this.comp.setPinnedTopBottomOverflowY(e?"scroll":"hidden")},t.prototype.isVerticalScrollShowing=function(){var e=this.gridOptionsService.is("alwaysShowVerticalScroll"),i=e?zf:null,n=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(i,e),e||n&&Xp(this.eBodyViewport)},t.prototype.setupRowAnimationCssClass=function(){var e=this,i=function(){var n=e.gridOptionsService.isAnimateRows()&&!e.rowContainerHeightService.isStretching();e.comp.setRowAnimationCssOnBodyViewport(n?Ts.ANIMATION_ON:Ts.ANIMATION_OFF,n)};i(),this.addManagedListener(this.eventService,E.EVENT_HEIGHT_SCALE_CHANGED,i),this.addManagedPropertyListener("animateRows",i)},t.prototype.getGridBodyElement=function(){return this.eGridBody},t.prototype.addBodyViewportListener=function(){var e=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",e),this.mockContextMenuForIPad(e),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()},t.prototype.addFullWidthContainerWheelListener=function(){var e=this,i=this.eBodyViewport.querySelector(".ag-full-width-container"),n=this.eBodyViewport.querySelector(".ag-center-cols-viewport");i&&n&&this.addManagedListener(i,"wheel",function(o){return e.onFullWidthContainerWheel(o,n)})},t.prototype.onFullWidthContainerWheel=function(e,i){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),i.scrollBy({left:e.deltaX}))},t.prototype.onBodyViewportContextMenu=function(e,i,n){if(e||n){this.gridOptionsService.is("preventDefaultOnContextMenu")&&(e||n).preventDefault();var s=(e||i).target;if(s===this.eBodyViewport||s===this.ctrlsService.getCenterRowContainerCtrl().getViewportElement()){if(!this.contextMenuFactory)return;e?this.contextMenuFactory.onContextMenu(e,null,null,null,null,this.eGridBody):n&&this.contextMenuFactory.onContextMenu(null,n,null,null,null,this.eGridBody)}}},t.prototype.mockContextMenuForIPad=function(e){if(eo()){var i=new ni(this.eBodyViewport);this.addManagedListener(i,ni.EVENT_LONG_TAP,function(o){e(void 0,o.touchStart,o.touchEvent)}),this.addDestroyFunc(function(){return i.destroy()})}},t.prototype.onBodyViewportWheel=function(e){this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()},t.prototype.onStickyTopWheel=function(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)},t.prototype.getGui=function(){return this.eGridBody},t.prototype.scrollVertically=function(e){var i=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(i+e),this.eBodyViewport.scrollTop-i},t.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new T_(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},t.prototype.getRowDragFeature=function(){return this.rowDragFeature},t.prototype.onPinnedRowDataChanged=function(){this.setFloatingHeights()},t.prototype.setFloatingHeights=function(){var e=this.pinnedRowModel,i=e.getPinnedTopTotalHeight();i&&(i+=1);var n=e.getPinnedBottomTotalHeight();n&&(n+=1),this.comp.setTopHeight(i),this.comp.setBottomHeight(n),this.comp.setTopDisplay(i?"inherit":"none"),this.comp.setBottomDisplay(n?"inherit":"none"),this.setStickyTopOffsetTop()},t.prototype.setStickyTopHeight=function(e){void 0===e&&(e=0),this.comp.setStickyTopHeight(e+"px"),this.stickyTopHeight=e},t.prototype.getStickyTopHeight=function(){return this.stickyTopHeight},t.prototype.setStickyTopWidth=function(e){if(e){var i=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - "+i+"px)")}else this.comp.setStickyTopWidth("100%")},t.prototype.onHeaderHeightChanged=function(){this.setStickyTopOffsetTop()},t.prototype.setStickyTopOffsetTop=function(){var i=this.ctrlsService.getGridHeaderCtrl().getHeaderHeight()+this.filterManager.getHeaderHeight(),n=this.pinnedRowModel.getPinnedTopTotalHeight(),o=0;i>0&&(o+=i+1),n>0&&(o+=n+1),this.comp.setStickyTopTop(o+"px")},t.prototype.sizeColumnsToFit=function(e,i){var n=this,s=this.isVerticalScrollShowing()?this.gridOptionsService.getScrollbarWidth():0,l=qa(this.eGridBody)-s;l>0?this.columnModel.sizeColumnsToFit(l,"sizeColumnsToFit",!1,e):void 0===i?window.setTimeout(function(){n.sizeColumnsToFit(e,100)},0):100===i?window.setTimeout(function(){n.sizeColumnsToFit(e,500)},100):500===i?window.setTimeout(function(){n.sizeColumnsToFit(e,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},t.prototype.addScrollEventListener=function(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})},t.prototype.removeScrollEventListener=function(e){this.eBodyViewport.removeEventListener("scroll",e)},Kt([S("animationFrameService")],t.prototype,"animationFrameService",void 0),Kt([S("rowContainerHeightService")],t.prototype,"rowContainerHeightService",void 0),Kt([S("ctrlsService")],t.prototype,"ctrlsService",void 0),Kt([S("columnModel")],t.prototype,"columnModel",void 0),Kt([S("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),Kt([we("contextMenuFactory")],t.prototype,"contextMenuFactory",void 0),Kt([S("headerNavigationService")],t.prototype,"headerNavigationService",void 0),Kt([S("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Kt([S("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Kt([S("rowRenderer")],t.prototype,"rowRenderer",void 0),Kt([S("popupService")],t.prototype,"popupService",void 0),Kt([S("mouseEventService")],t.prototype,"mouseEventService",void 0),Kt([S("rowModel")],t.prototype,"rowModel",void 0),Kt([S("filterManager")],t.prototype,"filterManager",void 0),t}(k),sd=function(r){return r[r.FILL=0]="FILL",r[r.RANGE=1]="RANGE",r}(sd||{}),Ps=function(r){return r[r.VALUE=0]="VALUE",r[r.DIMENSION=1]="DIMENSION",r}(Ps||{}),As="ag-cell-range-selected",W_=function(){function r(t,e){this.beans=t,this.cellCtrl=e}return r.prototype.setComp=function(t,e){this.cellComp=t,this.eGui=e,this.onRangeSelectionChanged()},r.prototype.onRangeSelectionChanged=function(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(As,0!==this.rangeCount),this.cellComp.addOrRemoveCssClass(As+"-1",1===this.rangeCount),this.cellComp.addOrRemoveCssClass(As+"-2",2===this.rangeCount),this.cellComp.addOrRemoveCssClass(As+"-3",3===this.rangeCount),this.cellComp.addOrRemoveCssClass(As+"-4",this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),Go(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())},r.prototype.updateRangeBorders=function(){var t=this.getRangeBorders(),e=this.isSingleCell(),n=!e&&t.right,o=!e&&t.bottom,s=!e&&t.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",!e&&t.top),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",n),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",o),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",s)},r.prototype.isSingleCell=function(){var t=this.beans.rangeService;return 1===this.rangeCount&&t&&!t.isMoreThanOneCell()},r.prototype.getHasChartRange=function(){var t=this.beans.rangeService;if(!this.rangeCount||!t)return!1;var e=t.getCellRanges();return e.length>0&&e.every(function(i){return wi([Ps.DIMENSION,Ps.VALUE],i.type)})},r.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},r.prototype.getRangeBorders=function(){var d,h,t=this,e=this.beans.gridOptionsService.is("enableRtl"),i=!1,n=!1,o=!1,s=!1,a=this.cellCtrl.getCellPosition().column,l=this.beans,u=l.rangeService,c=l.columnModel;e?(d=c.getDisplayedColAfter(a),h=c.getDisplayedColBefore(a)):(d=c.getDisplayedColBefore(a),h=c.getDisplayedColAfter(a));var p=u.getCellRanges().filter(function(m){return u.isCellInSpecificRange(t.cellCtrl.getCellPosition(),m)});d||(s=!0),h||(n=!0);for(var f=0;f<p.length&&!(i&&n&&o&&s);f++){var v=p[f],g=u.getRangeStartRow(v),y=u.getRangeEndRow(v);!i&&this.beans.rowPositionUtils.sameRow(g,this.cellCtrl.getCellPosition())&&(i=!0),!o&&this.beans.rowPositionUtils.sameRow(y,this.cellCtrl.getCellPosition())&&(o=!0),!s&&d&&v.columns.indexOf(d)<0&&(s=!0),!n&&h&&v.columns.indexOf(h)<0&&(n=!0)}return{top:i,right:n,bottom:o,left:s}},r.prototype.refreshHandle=function(){if(this.beans.rangeService){var t=this.shouldHaveSelectionHandle();this.selectionHandle&&!t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),t&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}},r.prototype.shouldHaveSelectionHandle=function(){var t=this.beans,e=t.gridOptionsService,i=t.rangeService,n=i.getCellRanges(),o=n.length;if(this.rangeCount<1||o<1)return!1;var s=Pe(n),a=this.cellCtrl.getCellPosition(),l=e.is("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),u=e.is("enableRangeHandle"),c=1===o&&!this.cellCtrl.isEditing()&&(l||u);if(this.hasChartRange){var h=n[0].type===Ps.DIMENSION&&i.isCellInSpecificRange(a,n[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",h),c=s.type===Ps.VALUE}return c&&null!=s.endRow&&i.isContiguousRange(s)&&i.isBottomRightCell(s,a)},r.prototype.addSelectionHandle=function(){var t=this.beans,e=t.gridOptionsService,n=Pe(t.rangeService.getCellRanges()).type,s=e.is("enableFillHandle")&&ie(n)?sd.FILL:sd.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==s&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(s)),this.selectionHandle.refresh(this.cellCtrl)},r.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},r}(),j_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),U_=function(r){function t(e,i){var n=r.call(this)||this;return n.cellCtrl=e,n.beans=i,n.column=e.getColumn(),n.rowNode=e.getRowNode(),n.setupColSpan(),n.setupRowSpan(),n}return j_(t,r),t.prototype.setupRowSpan=function(){this.rowSpan=this.column.getRowSpan(this.rowNode)},t.prototype.setComp=function(e){this.eGui=e,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},t.prototype.onDisplayColumnsChanged=function(){var e=this.getColSpanningList();Yn(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())},t.prototype.setupColSpan=function(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},t.prototype.onWidthChanged=function(){if(this.eGui){var e=this.getCellWidth();this.eGui.style.width=e+"px"}},t.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce(function(e,i){return e+i.getActualWidth()},0):this.column.getActualWidth()},t.prototype.getColSpanningList=function(){var e=this.column.getColSpan(this.rowNode),i=[];if(1===e)i.push(this.column);else for(var n=this.column,o=this.column.getPinned(),s=0;n&&s<e&&(i.push(n),(n=this.beans.columnModel.getDisplayedColAfter(n))&&!ie(n)&&o===n.getPinned());s++);return i},t.prototype.onLeftChanged=function(){if(this.eGui){var e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}},t.prototype.getCellLeft=function(){return(this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?Pe(this.colsSpanning):this.column).getLeft()},t.prototype.modifyLeftForPrintLayout=function(e){if(!this.cellCtrl.isPrintLayout()||"left"===this.column.getPinned())return e;var i=this.beans.columnModel.getDisplayedColumnsLeftWidth();return"right"===this.column.getPinned()?i+this.beans.columnModel.getBodyContainerWidth()+(e||0):i+(e||0)},t.prototype.applyRowSpan=function(){if(1!==this.rowSpan){var e=this.beans.gridOptionsService.getRowHeightAsNumber();this.eGui.style.height=e*this.rowSpan+"px",this.eGui.style.zIndex="1"}},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(k),z_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),K_=function(r){function t(e,i){var n=r.call(this)||this;return n.staticClasses=[],n.cellCtrl=e,n.beans=i,n.column=e.getColumn(),n.rowNode=e.getRowNode(),n}return z_(t,r),t.prototype.setComp=function(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},t.prototype.applyCellClassRules=function(){var e=this,i=this.column.getColDef(),n={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:i,column:this.column,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.beans.stylingService.processClassRules(i.cellClassRules,n,function(o){return e.cellComp.addOrRemoveCssClass(o,!0)},function(o){return e.cellComp.addOrRemoveCssClass(o,!1)})},t.prototype.applyUserStyles=function(){var e=this.column.getColDef();if(e.cellStyle){var i;if("function"==typeof e.cellStyle){var n={column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};i=(0,e.cellStyle)(n)}else i=e.cellStyle;i&&this.cellComp.setUserStyles(i)}},t.prototype.applyClassesFromColDef=function(){var e=this,i=this.column.getColDef(),n={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:i,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.staticClasses.length&&this.staticClasses.forEach(function(o){return e.cellComp.addOrRemoveCssClass(o,!1)}),this.staticClasses=this.beans.stylingService.getStaticCellClasses(i,n),this.staticClasses.length&&this.staticClasses.forEach(function(o){return e.cellComp.addOrRemoveCssClass(o,!0)})},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(k),$_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ad=function(r){function t(e,i){var n=r.call(this)||this;return n.ctrl=e,n.beans=i,n}return $_(t,r),t.prototype.setComp=function(e){this.eGui=e,this.setupTooltip()},t.prototype.setBrowserTooltip=function(e){var i="title";null!=e&&""!=e?this.eGui.setAttribute(i,e):this.eGui.removeAttribute(i)},t.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsService.is("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?this.setBrowserTooltip(this.tooltip):this.createTooltipFeatureIfNeeded()},t.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue()},t.prototype.createTooltipFeatureIfNeeded=function(){var i,n,o,s,e=this;null==this.genericTooltipFeature&&(this.genericTooltipFeature=this.createManagedBean(new Ic({getTooltipParams:function(){return e.getTooltipParams()},getGui:function(){return e.ctrl.getGui()}},null===(n=(i=this.ctrl).getTooltipShowDelayOverride)||void 0===n?void 0:n.call(i),null===(s=(o=this.ctrl).getTooltipHideDelayOverride)||void 0===s?void 0:s.call(o)),this.beans.context))},t.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.setBrowserTooltip(this.tooltip)},t.prototype.getTooltipParams=function(){var e=this,i=this.ctrl,n=i.getColumn?i.getColumn():void 0,o=i.getColDef?i.getColDef():void 0,s=i.getRowNode?i.getRowNode():void 0;return{location:i.getLocation(),colDef:o,column:n,rowIndex:i.getRowIndex?i.getRowIndex():void 0,node:s,data:s?s.data:void 0,value:this.getTooltipText(),valueFormatted:i.getValueFormatted?i.getValueFormatted():void 0,hideTooltipCallback:function(){return e.genericTooltipFeature.hideTooltip(!0)}}},t.prototype.getTooltipText=function(){return this.tooltip},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(k),ce=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Kf=function(){function r(){}return r.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsService.is("masterDetail"),this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)},ce([S("resizeObserverService")],r.prototype,"resizeObserverService",void 0),ce([S("paginationProxy")],r.prototype,"paginationProxy",void 0),ce([S("context")],r.prototype,"context",void 0),ce([S("columnApi")],r.prototype,"columnApi",void 0),ce([S("gridApi")],r.prototype,"gridApi",void 0),ce([S("gridOptionsService")],r.prototype,"gridOptionsService",void 0),ce([S("expressionService")],r.prototype,"expressionService",void 0),ce([S("environment")],r.prototype,"environment",void 0),ce([S("rowRenderer")],r.prototype,"rowRenderer",void 0),ce([S("templateService")],r.prototype,"templateService",void 0),ce([S("valueService")],r.prototype,"valueService",void 0),ce([S("eventService")],r.prototype,"eventService",void 0),ce([S("columnModel")],r.prototype,"columnModel",void 0),ce([S("headerNavigationService")],r.prototype,"headerNavigationService",void 0),ce([S("navigationService")],r.prototype,"navigationService",void 0),ce([S("columnAnimationService")],r.prototype,"columnAnimationService",void 0),ce([we("rangeService")],r.prototype,"rangeService",void 0),ce([S("focusService")],r.prototype,"focusService",void 0),ce([we("contextMenuFactory")],r.prototype,"contextMenuFactory",void 0),ce([S("popupService")],r.prototype,"popupService",void 0),ce([S("valueFormatterService")],r.prototype,"valueFormatterService",void 0),ce([S("stylingService")],r.prototype,"stylingService",void 0),ce([S("columnHoverService")],r.prototype,"columnHoverService",void 0),ce([S("userComponentFactory")],r.prototype,"userComponentFactory",void 0),ce([S("userComponentRegistry")],r.prototype,"userComponentRegistry",void 0),ce([S("animationFrameService")],r.prototype,"animationFrameService",void 0),ce([S("dragService")],r.prototype,"dragService",void 0),ce([S("dragAndDropService")],r.prototype,"dragAndDropService",void 0),ce([S("sortController")],r.prototype,"sortController",void 0),ce([S("filterManager")],r.prototype,"filterManager",void 0),ce([S("rowContainerHeightService")],r.prototype,"rowContainerHeightService",void 0),ce([S("frameworkOverrides")],r.prototype,"frameworkOverrides",void 0),ce([S("cellPositionUtils")],r.prototype,"cellPositionUtils",void 0),ce([S("rowPositionUtils")],r.prototype,"rowPositionUtils",void 0),ce([S("selectionService")],r.prototype,"selectionService",void 0),ce([we("selectionHandleFactory")],r.prototype,"selectionHandleFactory",void 0),ce([S("rowCssClassCalculator")],r.prototype,"rowCssClassCalculator",void 0),ce([S("rowModel")],r.prototype,"rowModel",void 0),ce([S("ctrlsService")],r.prototype,"ctrlsService",void 0),ce([S("ctrlsFactory")],r.prototype,"ctrlsFactory",void 0),ce([S("agStackComponentsRegistry")],r.prototype,"agStackComponentsRegistry",void 0),ce([S("valueCache")],r.prototype,"valueCache",void 0),ce([S("rowNodeEventThrottle")],r.prototype,"rowNodeEventThrottle",void 0),ce([S("localeService")],r.prototype,"localeService",void 0),ce([S("valueParserService")],r.prototype,"valueParserService",void 0),ce([V],r.prototype,"postConstruct",null),ce([X("beans")],r)}(),Y_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),X_=function(r){function t(e,i,n){var o=r.call(this)||this;return o.cellCtrl=e,o.beans=i,o.column=n,o}return Y_(t,r),t.prototype.onMouseEvent=function(e,i){if(!Ii(i))switch(e){case"click":this.onCellClicked(i);break;case"mousedown":case"touchstart":this.onMouseDown(i);break;case"dblclick":this.onCellDoubleClicked(i);break;case"mouseout":this.onMouseOut(i);break;case"mouseover":this.onMouseOver(i)}},t.prototype.onCellClicked=function(e){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(e),void e.preventDefault();var i=this.beans,n=i.eventService,o=i.rangeService,s=i.gridOptionsService;o&&(e.ctrlKey||e.metaKey)&&o.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&o.intersectLastRange(!0);var l=this.cellCtrl.createEvent(e,E.EVENT_CELL_CLICKED);n.dispatchEvent(l);var u=this.column.getColDef();u.onCellClicked&&window.setTimeout(function(){return u.onCellClicked(l)},0),(s.is("singleClickEdit")||u.singleClickEdit)&&!s.is("suppressClickEdit")&&(!e.shiftKey||0==o?.getCellRanges().length)&&this.cellCtrl.startRowOrCellEdit()},t.prototype.isDoubleClickOnIPad=function(){if(!eo()||qu("dblclick"))return!1;var e=(new Date).getTime(),i=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,i},t.prototype.onCellDoubleClicked=function(e){var i=this.column.getColDef(),n=this.cellCtrl.createEvent(e,E.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(n),"function"==typeof i.onCellDoubleClicked&&window.setTimeout(function(){return i.onCellDoubleClicked(n)},0),!this.beans.gridOptionsService.is("singleClickEdit")&&!this.beans.gridOptionsService.is("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,e)},t.prototype.onMouseDown=function(e){var i=e.ctrlKey,n=e.metaKey,o=e.shiftKey,s=e.target,l=this.cellCtrl,u=this.beans,c=u.eventService,d=u.rangeService,h=u.focusService;if(!this.isRightClickInExistingRange(e)){var p=d&&0!=d.getCellRanges().length;if(!o||!p){var f=Ei()&&!l.isEditing()&&!_c(s);l.focusCell(f)}if(o&&p&&!h.isCellFocused(l.getCellPosition())){e.preventDefault();var v=h.getFocusedCell();if(v){var g=v.column,y=v.rowIndex,m=v.rowPinned,C=u.rowRenderer.getRowByPosition({rowIndex:y,rowPinned:m}),w=C?.getCellCtrl(g);w?.isEditing()&&w.stopEditing(),h.setFocusedCell({column:g,rowIndex:y,rowPinned:m,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(s)){if(d){var _=this.cellCtrl.getCellPosition();o?d.extendLatestRangeToCell(_):d.setRangeToCell(_,i||n)}c.dispatchEvent(this.cellCtrl.createEvent(e,E.EVENT_CELL_MOUSE_DOWN))}}},t.prototype.isRightClickInExistingRange=function(e){var i=this.beans.rangeService;if(i){var n=i.isCellInAnyRange(this.cellCtrl.getCellPosition()),o=2===e.button||e.ctrlKey&&this.beans.gridOptionsService.is("allowContextMenuWithControlKey");if(n&&o)return!0}return!1},t.prototype.containsWidget=function(e){return ko(e,"ag-selection-checkbox",3)},t.prototype.onMouseOut=function(e){if(!this.mouseStayingInsideCell(e)){var i=this.cellCtrl.createEvent(e,E.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(i),this.beans.columnHoverService.clearMouseOver()}},t.prototype.onMouseOver=function(e){if(!this.mouseStayingInsideCell(e)){var i=this.cellCtrl.createEvent(e,E.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(i),this.beans.columnHoverService.setMouseOver([this.column])}},t.prototype.mouseStayingInsideCell=function(e){if(!e.target||!e.relatedTarget)return!1;var i=this.cellCtrl.getGui(),n=i.contains(e.target),o=i.contains(e.relatedTarget);return n&&o},t.prototype.destroy=function(){},t}(Kf),q_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Z_=function(r){function t(e,i,n,o,s){var a=r.call(this)||this;return a.cellCtrl=e,a.beans=i,a.rowNode=o,a.rowCtrl=s,a}return q_(t,r),t.prototype.setComp=function(e){this.eGui=e},t.prototype.onKeyDown=function(e){var i=e.key;switch(i){case M.ENTER:this.onEnterKeyDown(e);break;case M.F2:this.onF2KeyDown(e);break;case M.ESCAPE:this.onEscapeKeyDown(e);break;case M.TAB:this.onTabKeyDown(e);break;case M.BACKSPACE:case M.DELETE:this.onBackspaceOrDeleteKeyDown(i,e);break;case M.DOWN:case M.UP:case M.RIGHT:case M.LEFT:this.onNavigationKeyDown(e,i)}},t.prototype.onNavigationKeyDown=function(e,i){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,i,this.cellCtrl.getCellPosition(),!0),e.preventDefault())},t.prototype.onShiftRangeSelect=function(e){if(this.beans.rangeService){var i=this.beans.rangeService.extendLatestRangeInDirection(e);i&&this.beans.navigationService.ensureCellVisible(i)}},t.prototype.onTabKeyDown=function(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)},t.prototype.onBackspaceOrDeleteKeyDown=function(e,i){var n=this,o=n.cellCtrl,s=n.beans,a=n.rowNode,l=s.gridOptionsService,u=s.rangeService,c=s.eventService;o.isEditing()||(c.dispatchEvent({type:E.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),tf(e,l.is("enableCellEditingOnBackspace"))?u&&l.is("enableRangeSelection")?u.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):o.isCellEditable()&&a.setDataValue(o.getColumn(),null,"cellClear"):o.startRowOrCellEdit(e,i),c.dispatchEvent({type:E.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))},t.prototype.onEnterKeyDown=function(e){this.cellCtrl.isEditing()||this.rowCtrl.isEditing()?this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey):this.beans.gridOptionsService.is("enterNavigatesVertically")?this.beans.navigationService.navigateToNextCell(null,e.shiftKey?M.UP:M.DOWN,this.cellCtrl.getCellPosition(),!1):(this.cellCtrl.startRowOrCellEdit(M.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault())},t.prototype.onF2KeyDown=function(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(M.F2,e)},t.prototype.onEscapeKeyDown=function(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},t.prototype.processCharacter=function(e){if(e.target===this.eGui&&!this.cellCtrl.isEditing()){var o=e.key;" "===o?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(o,e),e.preventDefault())}},t.prototype.onSpaceKeyDown=function(e){var i=this.beans.gridOptionsService;if(!this.cellCtrl.isEditing()&&i.isRowSelection()){var n=this.rowNode.isSelected(),o=!n;if(o||!i.is("suppressRowDeselection")){var s=this.beans.gridOptionsService.is("groupSelectsFiltered"),a=this.rowNode.setSelectedParams({newValue:o,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"});void 0===n&&0===a&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"})}}e.preventDefault()},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(k),Q_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),e0=function(r){function t(e,i,n){var o=r.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return o.rowNode=e,o.column=i,o.eCell=n,o}return Q_(t,r),t.prototype.postConstruct=function(){this.getGui().appendChild(Ke("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",function(i){i.stopPropagation()}),this.addDragSource(),this.checkVisibility()},t.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},t.prototype.onDragStart=function(e){var i=this,n=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0),n?n({rowNode:this.rowNode,dragEvent:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}):function(){try{var a=JSON.stringify(i.rowNode.data);e.dataTransfer.setData("application/json",a),e.dataTransfer.setData("text/plain",a)}catch{}}()},t.prototype.checkVisibility=function(){var e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)},function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([V],t.prototype,"postConstruct",null),t}(he),t0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),dl=function(){return dl=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},dl.apply(this,arguments)},d0=0,Ko=function(r){function t(e,i,n,o){var s=r.call(this)||this;s.cellRangeFeature=null,s.cellPositionFeature=null,s.cellCustomStyleFeature=null,s.tooltipFeature=null,s.cellMouseListenerFeature=null,s.cellKeyboardListenerFeature=null,s.suppressRefreshCell=!1,s.onCellCompAttachedFuncs=[],s.column=e,s.rowNode=i,s.beans=n,s.rowCtrl=o,s.instanceId=e.getId()+"-"+d0++;var a=s.column.getColDef();return s.colIdSanitised=Ye(s.column.getId()),s.beans.gridOptionsService.is("suppressCellFocus")||(s.tabIndex=-1),s.isCellRenderer=null!=a.cellRenderer||null!=a.cellRendererSelector,s.createCellPosition(),s.addFeatures(),s.updateAndFormatValue(!0),s}return t0(t,r),t.prototype.shouldRestoreFocus=function(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)},t.prototype.addFeatures=function(){var e=this;this.cellPositionFeature=new U_(this,this.beans),this.addDestroyFunc(function(){var n;null===(n=e.cellPositionFeature)||void 0===n||n.destroy(),e.cellPositionFeature=null}),this.cellCustomStyleFeature=new K_(this,this.beans),this.addDestroyFunc(function(){var n;null===(n=e.cellCustomStyleFeature)||void 0===n||n.destroy(),e.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new X_(this,this.beans,this.column),this.addDestroyFunc(function(){var n;null===(n=e.cellMouseListenerFeature)||void 0===n||n.destroy(),e.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new Z_(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(function(){var n;null===(n=e.cellKeyboardListenerFeature)||void 0===n||n.destroy(),e.cellKeyboardListenerFeature=null}),this.beans.rangeService&&this.beans.gridOptionsService.is("enableRangeSelection")&&(this.cellRangeFeature=new W_(this.beans,this),this.addDestroyFunc(function(){var n;null===(n=e.cellRangeFeature)||void 0===n||n.destroy(),e.cellRangeFeature=null})),this.column.isTooltipEnabled()&&this.addTooltipFeature()},t.prototype.addTooltipFeature=function(){var e=this;this.tooltipFeature=new ad({getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getRowIndex:function(){return e.cellPosition.rowIndex},getRowNode:function(){return e.rowNode},getGui:function(){return e.getGui()},getLocation:function(){return"cell"},getTooltipValue:function(){var o=e.column.getColDef(),s=e.rowNode.data;if(o.tooltipField&&I(s))return fr(s,o.tooltipField,e.column.isTooltipFieldContainsDots());var a=o.tooltipValueGetter;return a?a({location:"cell",api:e.beans.gridOptionsService.api,columnApi:e.beans.gridOptionsService.columnApi,context:e.beans.gridOptionsService.context,colDef:e.column.getColDef(),column:e.column,rowIndex:e.cellPosition.rowIndex,node:e.rowNode,data:e.rowNode.data,value:e.value,valueFormatted:e.valueFormatted}):null},getValueFormatted:function(){return e.valueFormatted}},this.beans),this.addDestroyFunc(function(){var o;null===(o=e.tooltipFeature)||void 0===o||o.destroy(),e.tooltipFeature=null})},t.prototype.setComp=function(e,i,n,o,s){var a,l,u,c;this.cellComp=e,this.eGui=i,this.printLayout=o,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),n&&this.setupAutoHeight(n),this.setAriaColIndex(),null===(a=this.cellPositionFeature)||void 0===a||a.setComp(i),null===(l=this.cellCustomStyleFeature)||void 0===l||l.setComp(e),null===(u=this.tooltipFeature)||void 0===u||u.setComp(i),null===(c=this.cellKeyboardListenerFeature)||void 0===c||c.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,i),s&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(function(d){return d()}),this.onCellCompAttachedFuncs=[])},t.prototype.setupAutoHeight=function(e){var i=this;if(this.column.isAutoHeight()){var n=e.parentElement,o=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,s=function(u){if(!i.editing&&i.isAlive()){var c=to(n),y=e.offsetHeight+(c.paddingTop+c.paddingBottom+c.borderBottomWidth+c.borderTopWidth);if(u<5){var m=i.beans.gridOptionsService.getDocument();if(!m||!m.contains(e)||0==y)return void i.beans.frameworkOverrides.setTimeout(function(){return s(u+1)},0)}var _=Math.max(y,o);i.rowNode.setRowAutoHeight(_,i.column)}},a=function(){return s(0)};a();var l=this.beans.resizeObserverService.observeResize(e,a);this.addDestroyFunc(function(){l(),i.rowNode.setRowAutoHeight(void 0,i.column)})}},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.getIncludeSelection=function(){return this.includeSelection},t.prototype.getIncludeRowDrag=function(){return this.includeRowDrag},t.prototype.getIncludeDndSource=function(){return this.includeDndSource},t.prototype.getColumnIdSanitised=function(){return this.colIdSanitised},t.prototype.getTabIndex=function(){return this.tabIndex},t.prototype.getIsCellRenderer=function(){return this.isCellRenderer},t.prototype.getValueToDisplay=function(){return null!=this.valueFormatted?this.valueFormatted:this.value},t.prototype.showValue=function(e){void 0===e&&(e=!1);var n,i=this.getValueToDisplay();if(this.isCellRenderer){var o=this.createCellRendererParams();n=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),o)}this.cellComp.setRenderDetails(n,i,e),this.refreshHandle()},t.prototype.setupControlComps=function(){var e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)},t.prototype.isForceWrapper=function(){return this.beans.gridOptionsService.is("enableCellTextSelection")||this.column.isAutoHeight()},t.prototype.isIncludeControl=function(e){return!(null!=this.rowNode.rowPinned||"function"!=typeof e&&!0!==e)},t.prototype.refreshShouldDestroy=function(){var e=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),o=this.includeDndSource!=this.isIncludeControl(e.dndSource);return i||n||o},t.prototype.startEditing=function(e,i,n){var o=this;if(void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=null),this.isCellEditable()&&!this.editing){if(!this.cellComp)return void this.onCellCompAttachedFuncs.push(function(){o.startEditing(e,i,n)});var s=this.createCellEditorParams(e,i),a=this.column.getColDef(),l=this.beans.userComponentFactory.getCellEditorDetails(a,s),u=null!=l?.popupFromSelector?l.popupFromSelector:!!a.cellEditorPopup,c=null!=l?.popupPositionFromSelector?l.popupPositionFromSelector:a.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(l,u,c);var d=this.createEvent(n,E.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(d)}},t.prototype.setEditing=function(e){this.editing!==e&&(this.editing=e,this.refreshHandle())},t.prototype.stopRowOrCellEdit=function(e){void 0===e&&(e=!1),"fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.stopRowEditing(e):this.stopEditing(e)},t.prototype.onPopupEditorClosed=function(){this.isEditing()&&this.stopEditingAndFocus()},t.prototype.takeValueFromCellEditor=function(e){var i={newValueExists:!1};if(e)return i;var n=this.cellComp.getCellEditor();return n?n.isCancelAfterEnd&&n.isCancelAfterEnd()?i:{newValue:n.getValue(),newValueExists:!0}:i},t.prototype.saveNewValue=function(e,i){if(i===e)return!1;this.suppressRefreshCell=!0;var n=this.rowNode.setDataValue(this.column,i,"edit");return this.suppressRefreshCell=!1,n},t.prototype.stopEditing=function(e){if(void 0===e&&(e=!1),!this.editing)return!1;var i=this.takeValueFromCellEditor(e),n=i.newValue,o=i.newValueExists,s=this.rowNode.getValueFromValueService(this.column),a=!1;return o&&(a=this.saveNewValue(s,n)),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(s,n,!e&&!!a),a},t.prototype.dispatchEditingStoppedEvent=function(e,i,n){var o=dl(dl({},this.createEvent(null,E.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:i,valueChanged:n});this.beans.eventService.dispatchEvent(o)},t.prototype.createCellEditorParams=function(e,i){return{value:this.rowNode.getValueFromValueService(this.column),eventKey:e,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsService.api,cellStartedEdit:i,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)}},t.prototype.createCellRendererParams=function(){var e=this;return{value:this.value,valueFormatted:this.valueFormatted,getValue:function(){return e.rowNode.getValueFromValueService(e.column)},setValue:function(n){return e.beans.valueService.setValue(e.rowNode,e.column,n)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(n,o,s,a){return e.registerRowDragger(n,o,a)}}},t.prototype.parseValue=function(e){return this.beans.valueParserService.parseValue(this.column,this.rowNode,e,this.getValue())},t.prototype.setFocusOutOnEditor=function(){if(this.editing){var e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}},t.prototype.setFocusInOnEditor=function(){if(this.editing){var e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}},t.prototype.onCellChanged=function(e){this.cellComp&&e.column===this.column&&this.refreshCell({})},t.prototype.refreshCell=function(e){var i,n,o;if(!this.suppressRefreshCell&&!this.editing&&this.cellComp){var s=this.column.getColDef(),a=null!=e&&!!e.newData,l=null!=e&&!!e.suppressFlash||!!s.suppressCellFlash,c=e&&e.forceRefresh||null==s.field&&null==s.valueGetter&&null==s.showRowGroup||a,d=this.updateAndFormatValue();if(c||d){this.showValue(a);var p=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!l&&!p&&(this.beans.gridOptionsService.is("enableCellChangeFlash")||s.enableCellChangeFlash)&&this.flashCell(),null===(i=this.cellCustomStyleFeature)||void 0===i||i.applyUserStyles(),null===(n=this.cellCustomStyleFeature)||void 0===n||n.applyClassesFromColDef()}this.refreshToolTip(),null===(o=this.cellCustomStyleFeature)||void 0===o||o.applyCellClassRules()}},t.prototype.stopEditingAndFocus=function(e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit(i)},t.prototype.navigateAfterEdit=function(e){this.beans.gridOptionsService.is("enterNavigatesVerticallyAfterEdit")&&this.beans.navigationService.navigateToNextCell(null,e?M.UP:M.DOWN,this.getCellPosition(),!1)},t.prototype.flashCell=function(e){this.animateCell("data-changed",e&&e.flashDelay,e&&e.fadeDelay)},t.prototype.animateCell=function(e,i,n){var s,a,o=this;if(this.cellComp){var l="ag-cell-"+e,u="ag-cell-"+e+"-animation",c=this.beans.gridOptionsService;i||(i=null!==(s=c.getNum("cellFlashDelay"))&&void 0!==s?s:500),I(n)||(n=null!==(a=c.getNum("cellFadeDelay"))&&void 0!==a?a:1e3),this.cellComp.addOrRemoveCssClass(l,!0),this.cellComp.addOrRemoveCssClass(u,!1),window.setTimeout(function(){o.isAlive()&&(o.cellComp.addOrRemoveCssClass(l,!1),o.cellComp.addOrRemoveCssClass(u,!0),o.eGui.style.transition="background-color "+n+"ms",window.setTimeout(function(){o.isAlive()&&(o.cellComp.addOrRemoveCssClass(u,!1),o.eGui.style.transition="")},n))},i)}},t.prototype.onFlashCells=function(e){if(this.cellComp){var i=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[i]&&this.animateCell("highlight")}},t.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},t.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},t.prototype.formatValue=function(e){var i;return null!==(i=this.callValueFormatter(e))&&void 0!==i?i:e},t.prototype.callValueFormatter=function(e){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,e)},t.prototype.updateAndFormatValue=function(e){void 0===e&&(e=!1);var i=this.value,n=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),!!e||!this.valuesAreEqual(i,this.value)||this.valueFormatted!=n},t.prototype.valuesAreEqual=function(e,i){var n=this.column.getColDef();return n.equals?n.equals(e,i):e===i},t.prototype.getComp=function(){return this.cellComp},t.prototype.getValue=function(){return this.value},t.prototype.getValueFormatted=function(){return this.valueFormatted},t.prototype.addDomData=function(){var e=this,i=this.getGui();this.beans.gridOptionsService.setDomData(i,t.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(function(){return e.beans.gridOptionsService.setDomData(i,t.DOM_DATA_KEY_CELL_CTRL,null)})},t.prototype.createEvent=function(e,i){return{type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex}},t.prototype.processCharacter=function(e){var i;null===(i=this.cellKeyboardListenerFeature)||void 0===i||i.processCharacter(e)},t.prototype.onKeyDown=function(e){var i;null===(i=this.cellKeyboardListenerFeature)||void 0===i||i.onKeyDown(e)},t.prototype.onMouseEvent=function(e,i){var n;null===(n=this.cellMouseListenerFeature)||void 0===n||n.onMouseEvent(e,i)},t.prototype.getGui=function(){return this.eGui},t.prototype.refreshToolTip=function(){var e;null===(e=this.tooltipFeature)||void 0===e||e.refreshToolTip()},t.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},t.prototype.onLeftChanged=function(){var e;this.cellComp&&(null===(e=this.cellPositionFeature)||void 0===e||e.onLeftChanged())},t.prototype.onDisplayedColumnsChanged=function(){this.eGui&&this.setAriaColIndex()},t.prototype.setAriaColIndex=function(){var e=this.beans.columnModel.getAriaColumnIndex(this.column);sc(this.getGui(),e)},t.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},t.prototype.onWidthChanged=function(){var e;return null===(e=this.cellPositionFeature)||void 0===e?void 0:e.onWidthChanged()},t.prototype.getColumn=function(){return this.column},t.prototype.getRowNode=function(){return this.rowNode},t.prototype.getBeans=function(){return this.beans},t.prototype.isPrintLayout=function(){return this.printLayout},t.prototype.appendChild=function(e){this.eGui.appendChild(e)},t.prototype.refreshHandle=function(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},t.prototype.getCellPosition=function(){return this.cellPosition},t.prototype.isEditing=function(){return this.editing},t.prototype.startRowOrCellEdit=function(e,i){void 0===i&&(i=null),this.cellComp&&("fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,i))},t.prototype.getRowCtrl=function(){return this.rowCtrl},t.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},t.prototype.updateRangeBordersIfRangeCount=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},t.prototype.onRangeSelectionChanged=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},t.prototype.isRangeSelectionEnabled=function(){return null!=this.cellRangeFeature},t.prototype.focusCell=function(e){void 0===e&&(e=!1),this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})},t.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},t.prototype.onFirstRightPinnedChanged=function(){if(this.cellComp){var e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",e)}},t.prototype.onLastLeftPinnedChanged=function(){if(this.cellComp){var e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",e)}},t.prototype.onCellFocused=function(e){if(!this.beans.gridOptionsService.is("suppressCellFocus")){var i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp)return void(i&&e?.forceBrowserFocus&&(this.focusEventToRestore=e));this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass("ag-cell-focus",i),i&&e&&e.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!e.preventScrollOnBrowserFocus});var o="fullRow"===this.beans.gridOptionsService.get("editType");!i&&!o&&this.editing&&this.stopRowOrCellEdit()}},t.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:en(this.rowNode.rowPinned),column:this.column}},t.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);var e=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",e),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!e)},t.prototype.onColumnHover=function(){if(this.cellComp&&this.beans.gridOptionsService.is("columnHoverHighlight")){var e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",e)}},t.prototype.onColDefChanged=function(){this.cellComp&&(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))},t.prototype.setWrapText=function(){var e=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",e)},t.prototype.dispatchCellContextMenuEvent=function(e){var i=this.column.getColDef(),n=this.createEvent(e,E.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(n),i.onCellContextMenu&&window.setTimeout(function(){return i.onCellContextMenu(n)},0)},t.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},t.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},t.prototype.destroy=function(){this.onCellCompAttachedFuncs=[],r.prototype.destroy.call(this)},t.prototype.createSelectionCheckbox=function(){var e=new Ff;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e},t.prototype.createDndSource=function(){var e=new e0(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e},t.prototype.registerRowDragger=function(e,i,n){var o=this;if(this.customRowDragComp)this.customRowDragComp.setDragElement(e,i);else{var s=this.createRowDragComp(e,i,n);s&&(this.customRowDragComp=s,this.addDestroyFunc(function(){o.beans.context.destroyBean(s),o.customRowDragComp=null}))}},t.prototype.createRowDragComp=function(e,i,n){var o=this,s=this.beans.gridOptionsService.is("pagination"),a=this.beans.gridOptionsService.is("rowDragManaged"),l=this.beans.gridOptionsService.isRowModelType("clientSide");if(a){if(!l)return void ge(function(){return console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model")},"CellComp.addRowDragging");if(s)return void ge(function(){return console.warn("AG Grid: managed row dragging is not possible when doing pagination")},"CellComp.addRowDragging")}var u=new al(function(){return o.value},this.rowNode,this.column,e,i,n);return this.beans.context.createBean(u),u},t.DOM_DATA_KEY_CELL_CTRL="cellCtrl",t}(k),h0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ld=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},ud=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},ri=function(r){return r.Normal="Normal",r.FullWidth="FullWidth",r.FullWidthLoading="FullWidthLoading",r.FullWidthGroup="FullWidthGroup",r.FullWidthDetail="FullWidthDetail",r}(ri||{}),f0=0,$o=function(r){function t(e,i,n,o,s){var a=r.call(this)||this;return a.allRowGuis=[],a.active=!0,a.centerCellCtrls={list:[],map:{}},a.leftCellCtrls={list:[],map:{}},a.rightCellCtrls={list:[],map:{}},a.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},a.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},a.lastMouseDownOnDragger=!1,a.emptyStyle={},a.updateColumnListsPending=!1,a.rowId=null,a.businessKeySanitised=null,a.beans=i,a.gridOptionsService=i.gridOptionsService,a.rowNode=e,a.paginationPage=i.paginationProxy.getCurrentPage(),a.useAnimationFrameForCreate=o,a.printLayout=s,a.instanceId=e.id+"-"+f0++,a.rowId=Ye(e.id),a.initRowBusinessKey(),a.rowFocused=i.focusService.isRowFocused(a.rowNode.rowIndex,a.rowNode.rowPinned),a.rowLevel=i.rowCssClassCalculator.calculateRowLevel(a.rowNode),a.setRowType(),a.setAnimateFlags(n),a.rowStyles=a.processStylesFromGridOptions(),a.isFullWidth()&&!a.gridOptionsService.is("suppressCellFocus")&&(a.tabIndex=-1),a.addListeners(),a}return h0(t,r),t.prototype.initRowBusinessKey=function(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()},t.prototype.updateRowBusinessKey=function(){if("function"==typeof this.businessKeyForNodeFunc){var e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=Ye(e)}},t.prototype.getRowId=function(){return this.rowId},t.prototype.getRowStyles=function(){return this.rowStyles},t.prototype.getTabIndex=function(){return this.tabIndex},t.prototype.isSticky=function(){return this.rowNode.sticky},t.prototype.getBeans=function(){return this.beans},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.setComp=function(e,i,n){var o={rowComp:e,element:i,containerType:n};this.allRowGuis.push(o),n===dt.LEFT?this.leftGui=o:n===dt.RIGHT?this.rightGui=o:n===dt.FULL_WIDTH?this.fullWidthGui=o:this.centerGui=o,this.initialiseRowComp(o),"FullWidthLoading"!==this.rowType&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()},t.prototype.unsetComp=function(e){switch(this.allRowGuis=this.allRowGuis.filter(function(i){return i.containerType!==e}),e){case dt.LEFT:this.leftGui=void 0;break;case dt.RIGHT:this.rightGui=void 0;break;case dt.FULL_WIDTH:this.fullWidthGui=void 0;break;case dt.CENTER:this.centerGui=void 0}},t.prototype.isCacheable=function(){return this.rowType===ri.FullWidthDetail&&this.gridOptionsService.is("keepDetailRows")},t.prototype.setCached=function(e){var i=e?"none":"";this.allRowGuis.forEach(function(n){return n.element.style.display=i})},t.prototype.initialiseRowComp=function(e){var i=this,n=this.gridOptionsService;this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),n.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);var o=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(function(a){return o.addOrRemoveCssClass(a,!0)}),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&Hi(e.element,1==this.rowNode.expanded),this.setRowCompRowId(o),this.setRowCompRowBusinessKey(o),n.setDomData(e.element,t.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(function(){return n.setDomData(e.element,t.DOM_DATA_KEY_ROW_CTRL,null)}),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,e.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e.element),this.isFullWidth()&&this.setupFullWidth(e),n.is("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(function(){i.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()},t.prototype.setRowCompRowBusinessKey=function(e){null!=this.businessKeySanitised&&e.setRowBusinessKey(this.businessKeySanitised)},t.prototype.getBusinessKey=function(){return this.businessKeySanitised},t.prototype.setRowCompRowId=function(e){this.rowId=Ye(this.rowNode.id),null!=this.rowId&&e.setRowId(this.rowId)},t.prototype.executeSlideAndFadeAnimations=function(e){var i=this,n=e.containerType;this.slideInAnimation[n]&&(ju(function(){i.onTopChanged()}),this.slideInAnimation[n]=!1),this.fadeInAnimation[n]&&(ju(function(){e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[n]=!1)},t.prototype.addRowDraggerToRow=function(e){if(this.gridOptionsService.is("enableRangeSelection"))ge(function(){console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")},"rowDragAndRangeSelectionEnabled");else{var i=this.beans.localeService.getLocaleTextFunc(),n=new al(function(){return"1 "+i("rowDragRow","row")},this.rowNode,void 0,e.element,void 0,!0);this.createManagedBean(n,this.beans.context)}},t.prototype.setupFullWidth=function(e){var i=this.getPinnedForContainer(e.containerType),n=this.createFullWidthParams(e.element,i);if(this.rowType!=ri.FullWidthDetail||oe.__assertRegistered(q.MasterDetailModule,"cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId())){var o;switch(this.rowType){case ri.FullWidthDetail:o=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(n);break;case ri.FullWidthGroup:o=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(n);break;case ri.FullWidthLoading:o=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(n);break;default:o=this.beans.userComponentFactory.getFullWidthCellRendererDetails(n)}e.rowComp.showFullWidth(o)}},t.prototype.isPrintLayout=function(){return this.printLayout},t.prototype.getFullWidthCellRenderer=function(){var e,i;return null===(i=null===(e=this.fullWidthGui)||void 0===e?void 0:e.rowComp)||void 0===i?void 0:i.getFullWidthCellRenderer()},t.prototype.getCellElement=function(e){var i=this.getCellCtrl(e);return i?i.getGui():null},t.prototype.executeProcessRowPostCreateFunc=function(){var e=this.gridOptionsService.getCallback("processRowPostCreate");e&&this.areAllContainersReady()&&e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})},t.prototype.areAllContainersReady=function(){var e=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),i=!!this.centerGui,n=!!this.rightGui||!this.beans.columnModel.isPinningRight();return e&&i&&n},t.prototype.setRowType=function(){var e=this.rowNode.stub,i=this.rowNode.isFullWidthCell(),n=this.beans.doingMasterDetail&&this.rowNode.detail,o=this.beans.columnModel.isPivotMode(),a=!!this.rowNode.group&&!this.rowNode.footer&&this.gridOptionsService.isGroupUseEntireRow(o);this.rowType=e?ri.FullWidthLoading:n?ri.FullWidthDetail:i?ri.FullWidth:a?ri.FullWidthGroup:ri.Normal},t.prototype.updateColumnLists=function(e,i){var n=this;if(void 0===e&&(e=!1),void 0===i&&(i=!1),!this.isFullWidth()){if(e||this.gridOptionsService.is("suppressAnimationFrame")||this.printLayout)return void this.updateColumnListsImpl(i);this.updateColumnListsPending||(this.beans.animationFrameService.createTask(function(){n.active&&n.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}},t.prototype.createCellCtrls=function(e,i,n){var o=this;void 0===n&&(n=null);var s={list:[],map:{}},a=function(l,u){s.list.push(u),s.map[l]=u};return i.forEach(function(l){var u=l.getInstanceId(),c=e.map[u];c||(c=new Ko(l,o.rowNode,o.beans,o)),a(u,c)}),e.list.forEach(function(l){if(null==s.map[l.getColumn().getInstanceId()]){if(!o.isCellEligibleToBeRemoved(l,n))return void a(l.getColumn().getInstanceId(),l);l.destroy()}}),s},t.prototype.updateColumnListsImpl=function(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)},t.prototype.setCellCtrls=function(e){var i=this;this.allRowGuis.forEach(function(n){var o=i.getCellCtrlsForContainer(n.containerType);n.rowComp.setCellCtrls(o,e)})},t.prototype.getCellCtrlsForContainer=function(e){switch(e){case dt.LEFT:return this.leftCellCtrls.list;case dt.RIGHT:return this.rightCellCtrls.list;case dt.FULL_WIDTH:return[];case dt.CENTER:return this.centerCellCtrls.list;default:throw new Error("Unhandled case: "+e)}},t.prototype.createAllCellCtrls=function(){var e=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var i=e.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);var n=e.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");var o=e.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}},t.prototype.isCellEligibleToBeRemoved=function(e,i){var n=!0;if(e.getColumn().getPinned()!=i)return n;var a=e.isEditing(),l=this.beans.focusService.isCellFocused(e.getCellPosition());if(a||l){var c=e.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(c)>=0)&&n}return n},t.prototype.getDomOrder=function(){return this.gridOptionsService.is("ensureDomOrder")||this.gridOptionsService.isDomLayout("print")},t.prototype.listenOnDomOrder=function(e){var i=this,n=function(){e.rowComp.setDomOrder(i.getDomOrder())};this.addManagedPropertyListener("domLayout",n),this.addManagedPropertyListener("ensureDomOrder",n)},t.prototype.setAnimateFlags=function(e){if(!this.isSticky()&&e){var i=I(this.rowNode.oldRowTop),n=this.beans.columnModel.isPinningLeft(),o=this.beans.columnModel.isPinningRight();if(i){if(this.isFullWidth()&&!this.gridOptionsService.is("embedFullWidthRows"))return void(this.slideInAnimation.fullWidth=!0);this.slideInAnimation.center=!0,this.slideInAnimation.left=n,this.slideInAnimation.right=o}else{if(this.isFullWidth()&&!this.gridOptionsService.is("embedFullWidthRows"))return void(this.fadeInAnimation.fullWidth=!0);this.fadeInAnimation.center=!0,this.fadeInAnimation.left=n,this.fadeInAnimation.right=o}}},t.prototype.isEditing=function(){return this.editingRow},t.prototype.stopRowEditing=function(e){this.stopEditing(e)},t.prototype.isFullWidth=function(){return this.rowType!==ri.Normal},t.prototype.getRowType=function(){return this.rowType},t.prototype.refreshFullWidth=function(){var e=this,i=function(u,c){if(!u)return!0;var d=u.rowComp.getFullWidthCellRenderer();if(!d||!d.refresh)return!1;var h=e.createFullWidthParams(u.element,c);return d.refresh(h)},n=i(this.fullWidthGui,null),o=i(this.centerGui,null),s=i(this.leftGui,"left"),a=i(this.rightGui,"right");return n&&o&&s&&a},t.prototype.addListeners=function(){var e=this;this.addManagedListener(this.rowNode,pe.EVENT_HEIGHT_CHANGED,function(){return e.onRowHeightChanged()}),this.addManagedListener(this.rowNode,pe.EVENT_ROW_SELECTED,function(){return e.onRowSelected()}),this.addManagedListener(this.rowNode,pe.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,pe.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,pe.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var i=this.beans.eventService;this.addManagedListener(i,E.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(i,E.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(i,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(i,E.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(i,E.EVENT_CELL_FOCUSED,this.onCellFocused.bind(this)),this.addManagedListener(i,E.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusCleared.bind(this)),this.addManagedListener(i,E.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(i,E.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(i,E.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()},t.prototype.onColumnMoved=function(){this.updateColumnLists()},t.prototype.addListenersForCellComps=function(){var e=this;this.addManagedListener(this.rowNode,pe.EVENT_ROW_INDEX_CHANGED,function(){e.getAllCellCtrls().forEach(function(i){return i.onRowIndexChanged()})}),this.addManagedListener(this.rowNode,pe.EVENT_CELL_CHANGED,function(i){e.getAllCellCtrls().forEach(function(n){return n.onCellChanged(i)})})},t.prototype.onRowNodeDataChanged=function(e){var i=this;this.isFullWidth()!==!!this.rowNode.isFullWidthCell()?this.beans.rowRenderer.redrawRow(this.rowNode):this.isFullWidth()?this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode):(this.getAllCellCtrls().forEach(function(s){return s.refreshCell({suppressFlash:!e.update,newData:!e.update})}),this.allRowGuis.forEach(function(s){i.setRowCompRowId(s.rowComp),i.updateRowBusinessKey(),i.setRowCompRowBusinessKey(s.rowComp)}),this.onRowSelected(),this.postProcessCss())},t.prototype.onRowNodeCellChanged=function(){this.postProcessCss()},t.prototype.postProcessCss=function(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},t.prototype.onRowNodeHighlightChanged=function(){var e=this.rowNode.highlighted;this.allRowGuis.forEach(function(i){var o=e===ro.Below;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",e===ro.Above),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",o)})},t.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},t.prototype.postProcessRowDragging=function(){var e=this.rowNode.dragging;this.allRowGuis.forEach(function(i){return i.rowComp.addOrRemoveCssClass("ag-row-dragging",e)})},t.prototype.updateExpandedCss=function(){var e=this.rowNode.isExpandable(),i=1==this.rowNode.expanded;this.allRowGuis.forEach(function(n){n.rowComp.addOrRemoveCssClass("ag-row-group",e),n.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&i),n.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!i),Hi(n.element,e&&i)})},t.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},t.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists(!1,!0)},t.prototype.getRowPosition=function(){return{rowPinned:en(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}},t.prototype.onKeyboardNavigate=function(e){var i=this.allRowGuis.find(function(u){return u.element.contains(e.target)});if((i?i.element:null)===e.target){var s=this.rowNode,a=this.beans.focusService.getFocusedCell();this.beans.navigationService.navigateToNextCell(e,e.key,{rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:a&&a.column},!0),e.preventDefault()}},t.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented&&!Ii(e)){var i=this.allRowGuis.find(function(a){return a.element.contains(e.target)}),n=i?i.element:null,o=n===e.target,s=null;o||(s=this.beans.focusService.findNextFocusableElement(n,!1,e.shiftKey)),(this.isFullWidth()&&o||!s)&&this.beans.navigationService.onTabKeyDown(this,e)}},t.prototype.onFullWidthRowFocused=function(e){var i,n=this.rowNode,o=!!e&&this.isFullWidth()&&e.rowIndex===n.rowIndex&&e.rowPinned==n.rowPinned,s=this.fullWidthGui?this.fullWidthGui.element:null===(i=this.centerGui)||void 0===i?void 0:i.element;s&&(s.classList.toggle("ag-full-width-focus",o),o&&s.focus({preventScroll:!0}))},t.prototype.refreshCell=function(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),this.updateColumnLists()},t.prototype.removeCellCtrl=function(e,i){var n={list:[],map:{}};return e.list.forEach(function(o){o!==i&&(n.list.push(o),n.map[o.getInstanceId()]=o)}),n},t.prototype.onMouseEvent=function(e,i){switch(e){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i)}},t.prototype.createRowEvent=function(e,i){return{type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,event:i}},t.prototype.createRowEventWithSource=function(e,i){var n=this.createRowEvent(e,i);return n.source=this,n},t.prototype.onRowDblClick=function(e){if(!Ii(e)){var i=this.createRowEventWithSource(E.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(i)}},t.prototype.onRowMouseDown=function(e){if(this.lastMouseDownOnDragger=ko(e.target,"ag-row-drag",3),this.isFullWidth()){var i=this.rowNode,n=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:n.getAllDisplayedColumns()[0],rowPinned:i.rowPinned,forceBrowserFocus:!0})}},t.prototype.onRowClick=function(e){if(!Ii(e)&&!this.lastMouseDownOnDragger){var n=this.createRowEventWithSource(E.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(n);var o=e.ctrlKey||e.metaKey,s=e.shiftKey;if(!(this.gridOptionsService.is("groupSelectsChildren")&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()||this.gridOptionsService.is("suppressRowClickSelection"))){var l=this.gridOptionsService.is("rowMultiSelectWithClick"),u=!this.gridOptionsService.is("suppressRowDeselection"),c="rowClicked";this.rowNode.isSelected()?l?this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):o?u&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!s,rangeSelect:s,event:e,source:c}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!l&&!o,rangeSelect:s,event:e,source:c})}}},t.prototype.setupDetailRowAutoHeight=function(e){var i=this;if(this.rowType===ri.FullWidthDetail&&this.gridOptionsService.is("detailRowAutoHeight")){var n=function(){var s=e.clientHeight;null!=s&&s>0&&i.beans.frameworkOverrides.setTimeout(function(){i.rowNode.setRowHeight(s),i.beans.clientSideRowModel?i.beans.clientSideRowModel.onRowHeightChanged():i.beans.serverSideRowModel&&i.beans.serverSideRowModel.onRowHeightChanged()},0)},o=this.beans.resizeObserverService.observeResize(e,n);this.addDestroyFunc(o),n()}},t.prototype.createFullWidthParams=function(e,i){var n=this;return{fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,eGridCell:e,eParentOfValue:e,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(s,a,l,u){return n.addFullWidthRowDragging(s,a,l,u)}}},t.prototype.addFullWidthRowDragging=function(e,i,n,o){if(void 0===n&&(n=""),this.isFullWidth()){var s=new al(function(){return n},this.rowNode,void 0,e,i,o);this.createManagedBean(s,this.beans.context)}},t.prototype.onUiLevelChanged=function(){var e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){var i="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(function(o){o.rowComp.addOrRemoveCssClass(i,!0),o.rowComp.addOrRemoveCssClass(n,!1)})}this.rowLevel=e},t.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},t.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},t.prototype.onModelUpdated=function(){this.refreshFirstAndLastRowStyles()},t.prototype.refreshFirstAndLastRowStyles=function(){var e=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass("ag-row-first",e)})),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass("ag-row-last",i)}))},t.prototype.stopEditing=function(e){var i,n;if(void 0===e&&(e=!1),!this.stoppingRowEdit){var o=this.getAllCellCtrls(),s=this.editingRow;this.stoppingRowEdit=!0;var a=!1;try{for(var l=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),u=l.next();!u.done;u=l.next()){var d=u.value.stopEditing(e);s&&!e&&!a&&d&&(a=!0)}}catch(p){i={error:p}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}if(a){var h=this.createRowEvent(E.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(h)}s&&this.setEditingRow(!1),this.stoppingRowEdit=!1}},t.prototype.setInlineEditingCss=function(e){this.allRowGuis.forEach(function(i){i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})},t.prototype.setEditingRow=function(e){this.editingRow=e,this.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass("ag-row-editing",e)});var i=this.createRowEvent(e?E.EVENT_ROW_EDITING_STARTED:E.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(i)},t.prototype.startRowEditing=function(e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this.editingRow||this.getAllCellCtrls().reduce(function(s,a){var l=a===i;return a.startEditing(l?e:null,l,n),!!s||a.isEditing()},!1)&&this.setEditingRow(!0)},t.prototype.getAllCellCtrls=function(){return 0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length?this.centerCellCtrls.list:ud(ud(ud([],ld(this.centerCellCtrls.list)),ld(this.leftCellCtrls.list)),ld(this.rightCellCtrls.list))},t.prototype.postProcessClassesFromGridOptions=function(){var e=this,i=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!i||!i.length||i.forEach(function(n){e.allRowGuis.forEach(function(o){return o.rowComp.addOrRemoveCssClass(n,!0)})})},t.prototype.postProcessRowClassRules=function(){var e=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,function(i){e.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass(i,!0)})},function(i){e.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass(i,!1)})})},t.prototype.setStylesFromGridOptions=function(e,i){var n=this;e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,function(o){return o.rowComp.setUserStyles(n.rowStyles)})},t.prototype.getPinnedForContainer=function(e){return e===dt.LEFT?"left":e===dt.RIGHT?"right":null},t.prototype.getInitialRowClasses=function(e){var i=this.getPinnedForContainer(e),n={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2==0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(n)},t.prototype.processStylesFromGridOptions=function(){var e=this.gridOptionsService.get("rowStyle");if(!e||"function"!=typeof e){var n,i=this.gridOptionsService.getCallback("getRowStyle");return i&&(n=i({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex})),n||e?Object.assign({},e,n):this.emptyStyle}console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead")},t.prototype.onRowSelected=function(e){var i=this,n=!!this.rowNode.isSelected();this.forEachGui(e,function(o){o.rowComp.addOrRemoveCssClass("ag-row-selected",n),Go(o.element,!!n||void 0);var s=i.createAriaLabel();xn(o.element,s??"")})},t.prototype.createAriaLabel=function(){var e=this.rowNode.isSelected();if(!e||!this.gridOptionsService.is("suppressRowDeselection"))return this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect","Press SPACE to "+(e?"deselect":"select")+" this row.")},t.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},t.prototype.addHoverFunctionality=function(e){var i=this;this.active&&(this.addManagedListener(e,"mouseenter",function(){return i.rowNode.onMouseEnter()}),this.addManagedListener(e,"mouseleave",function(){return i.rowNode.onMouseLeave()}),this.addManagedListener(this.rowNode,pe.EVENT_MOUSE_ENTER,function(){!i.beans.dragService.isDragging()&&!i.gridOptionsService.is("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),i.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,pe.EVENT_MOUSE_LEAVE,function(){e.classList.remove("ag-row-hover"),i.rowNode.setHovered(!1)}))},t.prototype.roundRowTopToBounds=function(e){var n=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),o=this.applyPaginationOffset(n.top,!0)-100,s=this.applyPaginationOffset(n.bottom,!0)+100;return Math.min(Math.max(o,e),s)},t.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},t.prototype.forEachGui=function(e,i){e?i(e):this.allRowGuis.forEach(i)},t.prototype.onRowHeightChanged=function(e){if(null!=this.rowNode.rowHeight){var i=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),s=this.gridOptionsService.isGetRowHeightFunction()?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,a=s?Math.min(n,s)-2+"px":void 0;this.forEachGui(e,function(l){l.element.style.height=i+"px",a&&l.element.style.setProperty("--ag-line-height",a)})}},t.prototype.addEventListener=function(e,i){r.prototype.addEventListener.call(this,e,i)},t.prototype.removeEventListener=function(e,i){r.prototype.removeEventListener.call(this,e,i)},t.prototype.destroyFirstPass=function(){this.active=!1,this.gridOptionsService.isAnimateRows()&&this.setupRemoveAnimation(),this.rowNode.setHovered(!1);var e=this.createRowEvent(E.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(e),this.beans.eventService.dispatchEvent(e),r.prototype.destroy.call(this)},t.prototype.setupRemoveAnimation=function(){if(!this.isSticky())if(null!=this.rowNode.rowTop){var i=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(i)}else this.allRowGuis.forEach(function(n){return n.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)})},t.prototype.destroySecondPass=function(){this.allRowGuis.length=0;var e=function(i){return i.list.forEach(function(n){return n.destroy()}),{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)},t.prototype.setFocusedClasses=function(e){var i=this;this.forEachGui(e,function(n){n.rowComp.addOrRemoveCssClass("ag-row-focus",i.rowFocused),n.rowComp.addOrRemoveCssClass("ag-row-no-focus",!i.rowFocused)})},t.prototype.onCellFocused=function(){this.onCellFocusChanged()},t.prototype.onCellFocusCleared=function(){this.onCellFocusChanged()},t.prototype.onCellFocusChanged=function(){var e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)},t.prototype.onPaginationChanged=function(){var e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()},t.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},t.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},t.prototype.applyPaginationOffset=function(e,i){return void 0===i&&(i=!1),this.rowNode.isRowPinned()||this.rowNode.sticky?e:e+this.beans.paginationProxy.getPixelOffset()*(i?1:-1)},t.prototype.setRowTop=function(e){if(!this.printLayout&&I(e)){var i=this.applyPaginationOffset(e),o=this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i);this.setRowTopStyle(o+"px")}},t.prototype.getInitialRowTop=function(e){return this.gridOptionsService.is("suppressRowTransform")?this.getInitialRowTopShared(e):void 0},t.prototype.getInitialTransform=function(e){return this.gridOptionsService.is("suppressRowTransform")?void 0:"translateY("+this.getInitialRowTopShared(e)+")"},t.prototype.getInitialRowTopShared=function(e){if(this.printLayout)return"";var i;if(this.isSticky())i=this.rowNode.stickyRowTop;else{var n=this.slideInAnimation[e]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,o=this.applyPaginationOffset(n);i=this.rowNode.isRowPinned()?o:this.beans.rowContainerHeightService.getRealPixelPosition(o)}return i+"px"},t.prototype.setRowTopStyle=function(e){var i=this.gridOptionsService.is("suppressRowTransform");this.allRowGuis.forEach(function(n){return i?n.rowComp.setTop(e):n.rowComp.setTransform("translateY("+e+")")})},t.prototype.getRowNode=function(){return this.rowNode},t.prototype.getCellCtrl=function(e){var i=null;return this.getAllCellCtrls().forEach(function(n){n.getColumn()==e&&(i=n)}),null!=i||this.getAllCellCtrls().forEach(function(n){n.getColSpanningList().indexOf(e)>=0&&(i=n)}),i},t.prototype.onRowIndexChanged=function(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())},t.prototype.getRowIndex=function(){return this.rowNode.getRowIndexString()},t.prototype.updateRowIndexes=function(e){var i=this.rowNode.getRowIndexString(),n=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),o=this.rowNode.rowIndex%2==0,s=n+this.rowNode.rowIndex+1;this.forEachGui(e,function(a){a.rowComp.setRowIndex(i),a.rowComp.addOrRemoveCssClass("ag-row-even",o),a.rowComp.addOrRemoveCssClass("ag-row-odd",!o),rc(a.element,s)})},t.prototype.getPinnedLeftRowElement=function(){return this.leftGui?this.leftGui.element:void 0},t.prototype.getPinnedRightRowElement=function(){return this.rightGui?this.rightGui.element:void 0},t.prototype.getBodyRowElement=function(){return this.centerGui?this.centerGui.element:void 0},t.prototype.getFullWidthRowElement=function(){return this.fullWidthGui?this.fullWidthGui.element:void 0},t.DOM_DATA_KEY_ROW_CTRL="renderedRow",t}(k),v0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),si=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},y0=function(r){function t(e){var i=r.call(this)||this;return i.element=e,i}return v0(t,r),t.prototype.postConstruct=function(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()},t.prototype.addKeyboardListeners=function(){var e="keydown",i=this.processKeyboardEvent.bind(this,e);this.addManagedListener(this.element,e,i)},t.prototype.addMouseListeners=function(){var e=this;["dblclick","contextmenu","mouseover","mouseout","click",qu("touchstart")?"touchstart":"mousedown"].forEach(function(o){var s=e.processMouseEvent.bind(e,o);e.addManagedListener(e.element,o,s)})},t.prototype.processMouseEvent=function(e,i){if(this.mouseEventService.isEventFromThisGrid(i)&&!Ii(i)){var n=this.getRowForEvent(i),o=this.mouseEventService.getRenderedCellForEvent(i);"contextmenu"===e?this.handleContextMenuMouseEvent(i,null,n,o):(o&&o.onMouseEvent(e,i),n&&n.onMouseEvent(e,i))}},t.prototype.mockContextMenuForIPad=function(){var e=this;if(eo()){var i=new ni(this.element);this.addManagedListener(i,ni.EVENT_LONG_TAP,function(o){var s=e.getRowForEvent(o.touchEvent),a=e.mouseEventService.getRenderedCellForEvent(o.touchEvent);e.handleContextMenuMouseEvent(null,o.touchEvent,s,a)}),this.addDestroyFunc(function(){return i.destroy()})}},t.prototype.getRowForEvent=function(e){for(var i=e.target;i;){var n=this.gridOptionsService.getDomData(i,$o.DOM_DATA_KEY_ROW_CTRL);if(n)return n;i=i.parentElement}return null},t.prototype.handleContextMenuMouseEvent=function(e,i,n,o){var s=n?n.getRowNode():null,a=o?o.getColumn():null,l=null;a&&(o.dispatchCellContextMenuEvent(e||i),l=this.valueService.getValue(a,s));var c=this.ctrlsService.getGridBodyCtrl(),d=o?o.getGui():c.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(e,i,s,a,l,d)},t.prototype.getControlsForEventTarget=function(e){return{cellCtrl:ka(this.gridOptionsService,e,Ko.DOM_DATA_KEY_CELL_CTRL),rowCtrl:ka(this.gridOptionsService,e,$o.DOM_DATA_KEY_ROW_CTRL)}},t.prototype.processKeyboardEvent=function(e,i){var n=this.getControlsForEventTarget(i.target),o=n.cellCtrl,s=n.rowCtrl;i.defaultPrevented||(o?this.processCellKeyboardEvent(o,e,i):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,i))},t.prototype.processCellKeyboardEvent=function(e,i,n){var o=e.getRowNode(),s=e.getColumn(),a=e.isEditing();if(Ja(this.gridOptionsService,n,o,s,a)||"keydown"!==i||(!a&&this.navigationService.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,e.isEditing()),Qa(n)&&e.processCharacter(n)),"keydown"===i){var c=e.createEvent(n,E.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(c)}},t.prototype.processFullWidthRowKeyboardEvent=function(e,i,n){var o=e.getRowNode(),s=this.focusService.getFocusedCell();if(!Ja(this.gridOptionsService,n,o,s&&s.column,!1)&&"keydown"===i)switch(n.key){case M.PAGE_HOME:case M.PAGE_END:case M.PAGE_UP:case M.PAGE_DOWN:this.navigationService.handlePageScrollingKey(n,!0);break;case M.UP:case M.DOWN:e.onKeyboardNavigate(n);break;case M.TAB:e.onTabKeyDown(n)}if("keydown"===i){var c=e.createRowEvent(E.EVENT_CELL_KEY_DOWN,n);this.eventService.dispatchEvent(c)}},t.prototype.doGridOperations=function(e,i){if((e.ctrlKey||e.metaKey)&&!i&&this.mouseEventService.isEventFromThisGrid(e)){var n=ef(e);if(n===M.A)return this.onCtrlAndA(e);if(n===M.C)return this.onCtrlAndC(e);if(n===M.D)return this.onCtrlAndD(e);if(n===M.V)return this.onCtrlAndV(e);if(n===M.X)return this.onCtrlAndX(e);if(n===M.Y)return this.onCtrlAndY();if(n===M.Z)return this.onCtrlAndZ(e)}},t.prototype.onCtrlAndA=function(e){var i=this,n=i.pinnedRowModel,s=i.rangeService;if(s&&i.paginationProxy.isRowsToRender()){var a=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}([n.isEmpty("top"),n.isEmpty("bottom")],2),c=a[0]?null:"top",d=void 0,h=void 0;a[1]?(d=null,h=this.paginationProxy.getRowCount()-1):(d="bottom",h=n.getPinnedBottomRowData().length-1);var p=this.columnModel.getAllDisplayedColumns();if(ei(p))return;s.setCellRange({rowStartIndex:0,rowStartPinned:c,rowEndIndex:h,rowEndPinned:d,columnStart:p[0],columnEnd:Pe(p)})}e.preventDefault()},t.prototype.onCtrlAndC=function(e){if(this.clipboardService&&!this.gridOptionsService.is("enableCellTextSelection")){var i=this.getControlsForEventTarget(e.target),n=i.cellCtrl,o=i.rowCtrl;n?.isEditing()||o?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}},t.prototype.onCtrlAndX=function(e){if(this.clipboardService&&!this.gridOptionsService.is("enableCellTextSelection")&&!this.gridOptionsService.is("suppressCutToClipboard")){var i=this.getControlsForEventTarget(e.target),n=i.cellCtrl,o=i.rowCtrl;n?.isEditing()||o?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}},t.prototype.onCtrlAndV=function(e){var i=this.getControlsForEventTarget(e.target),n=i.cellCtrl,o=i.rowCtrl;n?.isEditing()||o?.isEditing()||this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()},t.prototype.onCtrlAndD=function(e){this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()},t.prototype.onCtrlAndZ=function(e){this.gridOptionsService.is("undoRedoCellEditing")&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))},t.prototype.onCtrlAndY=function(){this.undoRedoService.redo("ui")},si([S("mouseEventService")],t.prototype,"mouseEventService",void 0),si([S("valueService")],t.prototype,"valueService",void 0),si([we("contextMenuFactory")],t.prototype,"contextMenuFactory",void 0),si([S("ctrlsService")],t.prototype,"ctrlsService",void 0),si([S("navigationService")],t.prototype,"navigationService",void 0),si([S("focusService")],t.prototype,"focusService",void 0),si([S("undoRedoService")],t.prototype,"undoRedoService",void 0),si([S("columnModel")],t.prototype,"columnModel",void 0),si([S("paginationProxy")],t.prototype,"paginationProxy",void 0),si([S("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),si([we("rangeService")],t.prototype,"rangeService",void 0),si([we("clipboardService")],t.prototype,"clipboardService",void 0),si([V],t.prototype,"postConstruct",null),t}(k),m0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),hl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},C0=function(r){function t(e){var i=r.call(this)||this;return i.centerContainerCtrl=e,i}return m0(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl(),e.listenForResize()}),this.addManagedListener(this.eventService,E.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))},t.prototype.listenForResize=function(){var e=this,i=function(){return e.onCenterViewportResized()};this.centerContainerCtrl.registerViewportResizeListener(i),this.gridBodyCtrl.registerBodyViewportResizeListener(i)},t.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},t.prototype.onCenterViewportResized=function(){if(this.centerContainerCtrl.isViewportVisible()){this.checkViewportAndScrolls();var e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},t.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()},t.prototype.getBodyHeight=function(){return this.bodyHeight},t.prototype.checkBodyHeight=function(){var i=fs(this.gridBodyCtrl.getBodyViewportElement());this.bodyHeight!==i&&(this.bodyHeight=i,this.eventService.dispatchEvent({type:E.EVENT_BODY_HEIGHT_CHANGED}))},t.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},t.prototype.updateScrollVisibleServiceImpl=function(){var e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)},t.prototype.isHorizontalScrollShowing=function(){return this.centerContainerCtrl.isHorizontalScrollShowing()},t.prototype.onHorizontalViewportChanged=function(){var e=this.centerContainerCtrl.getCenterWidth(),i=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(e,i)},hl([S("ctrlsService")],t.prototype,"ctrlsService",void 0),hl([S("columnModel")],t.prototype,"columnModel",void 0),hl([S("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),hl([V],t.prototype,"postConstruct",null),t}(k),w0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),$f=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},S0=function(r){function t(e){var i=r.call(this)||this;return i.element=e,i}return w0(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,E.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},t.prototype.onPinnedLeftWidthChanged=function(){var e=this.pinnedWidthService.getPinnedLeftWidth();Ce(this.element,e>0),Ri(this.element,e)},t.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedLeftWidth()},$f([S("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),$f([V],t.prototype,"postConstruct",null),t}(k),_0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Yf=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},E0=function(r){function t(e){var i=r.call(this)||this;return i.element=e,i}return _0(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,E.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},t.prototype.onPinnedRightWidthChanged=function(){var e=this.pinnedWidthService.getPinnedRightWidth();Ce(this.element,e>0),Ri(this.element,e)},t.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedRightWidth()},Yf([S("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),Yf([V],t.prototype,"postConstruct",null),t}(k),b0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xf=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},qf=function(r){function t(e,i){var n=r.call(this)||this;return n.eContainer=e,n.eViewport=i,n}return b0(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,E.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},t.prototype.onHeightChanged=function(){var e=this.maxDivHeightScaler.getUiContainerHeight(),i=null!=e?e+"px":"";this.eContainer.style.height=i,this.eViewport&&(this.eViewport.style.height=i)},Xf([S("rowContainerHeightService")],t.prototype,"maxDivHeightScaler",void 0),Xf([V],t.prototype,"postConstruct",null),t}(k),R0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),cd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},O0=function(r){function t(e){var i=r.call(this)||this;return i.eContainer=e,i}return R0(t,r),t.prototype.postConstruct=function(){var e=this;if(this.gridOptionsService.is("enableRangeSelection")&&!ie(this.rangeService)){var i={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(i),this.addDestroyFunc(function(){return e.dragService.removeDragSource(i)})}},cd([we("rangeService")],t.prototype,"rangeService",void 0),cd([S("dragService")],t.prototype,"dragService",void 0),cd([V],t.prototype,"postConstruct",null),t}(k),x0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),dd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},hd=function(r){function t(e,i){void 0===i&&(i=!1);var n=r.call(this)||this;return n.callback=e,n.addSpacer=i,n}return x0(t,r),t.prototype.postConstruct=function(){var e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_LEFT_PINNED_WIDTH_CHANGED,e),this.addSpacer&&(this.addManagedListener(this.eventService,E.EVENT_RIGHT_PINNED_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_SCROLL_VISIBILITY_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_SCROLLBAR_WIDTH_CHANGED,e)),this.setWidth()},t.prototype.setWidth=function(){var a,e=this.columnModel,i=this.gridOptionsService.isDomLayout("print"),n=e.getBodyContainerWidth(),o=e.getDisplayedColumnsLeftWidth(),s=e.getDisplayedColumnsRightWidth();i?a=n+o+s:(a=n,this.addSpacer&&0===(this.gridOptionsService.is("enableRtl")?o:s)&&this.scrollVisibleService.isVerticalScrollShowing()&&(a+=this.gridOptionsService.getScrollbarWidth())),this.callback(a)},dd([S("columnModel")],t.prototype,"columnModel",void 0),dd([S("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),dd([V],t.prototype,"postConstruct",null),t}(k),D0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ao=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},pl=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},fl=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},F=function(r){return r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth",r.TOP_LEFT="topLeft",r.TOP_RIGHT="topRight",r.TOP_CENTER="topCenter",r.TOP_FULL_WIDTH="topFullWidth",r.STICKY_TOP_LEFT="stickyTopLeft",r.STICKY_TOP_RIGHT="stickyTopRight",r.STICKY_TOP_CENTER="stickyTopCenter",r.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",r.BOTTOM_LEFT="bottomLeft",r.BOTTOM_RIGHT="bottomRight",r.BOTTOM_CENTER="bottomCenter",r.BOTTOM_FULL_WIDTH="bottomFullWidth",r}(F||{}),dt=function(r){return r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth",r}(dt||{}),P0=Xn([[F.CENTER,"ag-center-cols-container"],[F.LEFT,"ag-pinned-left-cols-container"],[F.RIGHT,"ag-pinned-right-cols-container"],[F.FULL_WIDTH,"ag-full-width-container"],[F.TOP_CENTER,"ag-floating-top-container"],[F.TOP_LEFT,"ag-pinned-left-floating-top"],[F.TOP_RIGHT,"ag-pinned-right-floating-top"],[F.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[F.STICKY_TOP_CENTER,"ag-sticky-top-container"],[F.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[F.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[F.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[F.BOTTOM_CENTER,"ag-floating-bottom-container"],[F.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[F.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[F.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),A0=Xn([[F.CENTER,"ag-center-cols-viewport"],[F.TOP_CENTER,"ag-floating-top-viewport"],[F.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[F.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),Zf=function(r){function t(e){var i=r.call(this)||this;return i.visible=!0,i.EMPTY_CTRLS=[],i.name=e,i.isFullWithContainer=i.name===F.TOP_FULL_WIDTH||i.name===F.STICKY_TOP_FULL_WIDTH||i.name===F.BOTTOM_FULL_WIDTH||i.name===F.FULL_WIDTH,i}return D0(t,r),t.getRowContainerCssClasses=function(e){return{container:P0.get(e),viewport:A0.get(e)}},t.getPinned=function(e){switch(e){case F.BOTTOM_LEFT:case F.TOP_LEFT:case F.STICKY_TOP_LEFT:case F.LEFT:return"left";case F.BOTTOM_RIGHT:case F.TOP_RIGHT:case F.STICKY_TOP_RIGHT:case F.RIGHT:return"right";default:return null}},t.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsService.is("enableRtl"),this.embedFullWidthRows=this.gridOptionsService.is("embedFullWidthRows"),this.forContainers([F.CENTER],function(){return e.viewportSizeFeature=e.createManagedBean(new C0(e))})},t.prototype.registerWithCtrlsService=function(){switch(this.name){case F.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case F.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case F.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case F.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case F.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case F.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case F.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case F.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case F.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case F.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case F.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case F.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this)}},t.prototype.forContainers=function(e,i){e.indexOf(this.name)>=0&&i()},t.prototype.getContainerElement=function(){return this.eContainer},t.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},t.prototype.setComp=function(e,i,n){var o=this;this.comp=e,this.eContainer=i,this.eViewport=n,this.createManagedBean(new y0(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var a=[F.STICKY_TOP_CENTER,F.STICKY_TOP_LEFT,F.STICKY_TOP_RIGHT],l=[F.BOTTOM_CENTER,F.BOTTOM_LEFT,F.BOTTOM_RIGHT],u=[F.CENTER,F.LEFT,F.RIGHT],c=fl(fl(fl(fl([],pl([F.TOP_CENTER,F.TOP_LEFT,F.TOP_RIGHT])),pl(l)),pl(u)),pl(a)),d=[F.CENTER,F.LEFT,F.RIGHT,F.FULL_WIDTH],h=[F.CENTER,F.TOP_CENTER,F.STICKY_TOP_CENTER,F.BOTTOM_CENTER],f=[F.RIGHT,F.BOTTOM_RIGHT,F.TOP_RIGHT,F.STICKY_TOP_RIGHT];this.forContainers([F.LEFT,F.BOTTOM_LEFT,F.TOP_LEFT,F.STICKY_TOP_LEFT],function(){o.pinnedWidthFeature=o.createManagedBean(new S0(o.eContainer)),o.addManagedListener(o.eventService,E.EVENT_LEFT_PINNED_WIDTH_CHANGED,function(){return o.onPinnedWidthChanged()})}),this.forContainers(f,function(){o.pinnedWidthFeature=o.createManagedBean(new E0(o.eContainer)),o.addManagedListener(o.eventService,E.EVENT_RIGHT_PINNED_WIDTH_CHANGED,function(){return o.onPinnedWidthChanged()})}),this.forContainers(d,function(){return o.createManagedBean(new qf(o.eContainer,o.name===F.CENTER?n:void 0))}),this.forContainers(c,function(){return o.createManagedBean(new O0(o.eContainer))}),this.forContainers(h,function(){return o.createManagedBean(new hd(function(v){return o.comp.setContainerWidth(v+"px")}))}),ps()&&(this.forContainers([F.CENTER],function(){o.addManagedListener(o.eventService,o.enableRtl?E.EVENT_LEFT_PINNED_WIDTH_CHANGED:E.EVENT_RIGHT_PINNED_WIDTH_CHANGED,function(){return o.refreshPaddingForFakeScrollbar()})}),this.refreshPaddingForFakeScrollbar()),this.addListeners(),this.registerWithCtrlsService()},t.prototype.refreshPaddingForFakeScrollbar=function(){var e=this,i=e.enableRtl,n=e.columnModel,o=e.eContainer,s=i?F.LEFT:F.RIGHT;this.forContainers([F.CENTER,s],function(){var a=n.getContainerWidth(s);o.style[i?"marginLeft":"marginRight"]=a?"16px":"0px"})},t.prototype.addListeners=function(){var e=this;this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){return e.onDisplayedColumnsChanged()}),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){return e.onDisplayedColumnsWidthChanged()}),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_ROWS_CHANGED,function(i){return e.onDisplayedRowsChanged(i.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()},t.prototype.listenOnDomOrder=function(){var e=this;if([F.STICKY_TOP_CENTER,F.STICKY_TOP_LEFT,F.STICKY_TOP_RIGHT,F.STICKY_TOP_FULL_WIDTH].indexOf(this.name)>=0)this.comp.setDomOrder(!0);else{var o=function(){var s=e.gridOptionsService.is("ensureDomOrder"),a=e.gridOptionsService.isDomLayout("print");e.comp.setDomOrder(s||a)};this.addManagedPropertyListener("domLayout",o),o()}},t.prototype.stopHScrollOnPinnedRows=function(){var e=this;this.forContainers([F.TOP_CENTER,F.STICKY_TOP_CENTER,F.BOTTOM_CENTER],function(){e.addManagedListener(e.eViewport,"scroll",function(){return e.eViewport.scrollLeft=0})})},t.prototype.onDisplayedColumnsChanged=function(){var e=this;this.forContainers([F.CENTER],function(){return e.onHorizontalViewportChanged()})},t.prototype.onDisplayedColumnsWidthChanged=function(){var e=this;this.forContainers([F.CENTER],function(){return e.onHorizontalViewportChanged()})},t.prototype.addPreventScrollWhileDragging=function(){var e=this,i=function(n){e.dragService.isDragging()&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",i,{passive:!1}),this.addDestroyFunc(function(){return e.eContainer.removeEventListener("touchmove",i)})},t.prototype.onHorizontalViewportChanged=function(e){void 0===e&&(e=!1);var i=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(i,n,e)},t.prototype.getCenterWidth=function(){return qa(this.eViewport)},t.prototype.getCenterViewportScrollLeft=function(){return ys(this.eViewport,this.enableRtl)},t.prototype.registerViewportResizeListener=function(e){var i=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(function(){return i()})},t.prototype.isViewportVisible=function(){return io(this.eViewport)},t.prototype.getViewportScrollLeft=function(){return ys(this.eViewport,this.enableRtl)},t.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsService.is("alwaysShowHorizontalScroll")||Yp(this.eViewport)},t.prototype.getViewportElement=function(){return this.eViewport},t.prototype.setContainerTranslateX=function(e){this.eContainer.style.transform="translateX("+e+"px)"},t.prototype.getHScrollPosition=function(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}},t.prototype.setCenterViewportScrollLeft=function(e){ms(this.eViewport,e,this.enableRtl)},t.prototype.isContainerVisible=function(){return!t.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0},t.prototype.onPinnedWidthChanged=function(){var e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged()),ps()&&this.refreshPaddingForFakeScrollbar()},t.prototype.onDisplayedRowsChanged=function(e){var i=this;if(void 0===e&&(e=!1),this.visible){var n=this.gridOptionsService.isDomLayout("print"),s=this.getRowCtrls().filter(function(a){var l=a.isFullWidth(),u=i.embedFullWidthRows||n;return i.isFullWithContainer?!u&&l:u||!l});this.comp.setRowCtrls(s,e)}else this.comp.setRowCtrls(this.EMPTY_CTRLS,!1)},t.prototype.getRowCtrls=function(){switch(this.name){case F.TOP_CENTER:case F.TOP_LEFT:case F.TOP_RIGHT:case F.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case F.STICKY_TOP_CENTER:case F.STICKY_TOP_LEFT:case F.STICKY_TOP_RIGHT:case F.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case F.BOTTOM_CENTER:case F.BOTTOM_LEFT:case F.BOTTOM_RIGHT:case F.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}},ao([S("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),ao([S("dragService")],t.prototype,"dragService",void 0),ao([S("ctrlsService")],t.prototype,"ctrlsService",void 0),ao([S("columnModel")],t.prototype,"columnModel",void 0),ao([S("resizeObserverService")],t.prototype,"resizeObserverService",void 0),ao([S("animationFrameService")],t.prototype,"animationFrameService",void 0),ao([S("rowRenderer")],t.prototype,"rowRenderer",void 0),ao([V],t.prototype,"postConstruct",null),t}(k),L0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),An=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},M0='<div class="ag-root ag-unselectable" role="treegrid">\n        <ag-header-root ref="gridHeader"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation">\n            <ag-row-container ref="topLeftContainer" name="'+F.TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="'+F.TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="'+F.TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="'+F.TOP_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-body" ref="eBody" role="presentation">\n            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n                <ag-row-container ref="leftContainer" name="'+F.LEFT+'"></ag-row-container>\n                <ag-row-container ref="centerContainer" name="'+F.CENTER+'"></ag-row-container>\n                <ag-row-container ref="rightContainer" name="'+F.RIGHT+'"></ag-row-container>\n                <ag-row-container ref="fullWidthContainer" name="'+F.FULL_WIDTH+'"></ag-row-container>\n            </div>\n            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>\n        </div>\n        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">\n            <ag-row-container ref="stickyTopLeftContainer" name="'+F.STICKY_TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="stickyTopCenterContainer" name="'+F.STICKY_TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="stickyTopRightContainer" name="'+F.STICKY_TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="stickyTopFullWidthContainer" name="'+F.STICKY_TOP_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation">\n            <ag-row-container ref="bottomLeftContainer" name="'+F.BOTTOM_LEFT+'"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="'+F.BOTTOM_CENTER+'"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="'+F.BOTTOM_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="'+F.BOTTOM_FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>',F0=function(r){function t(){return r.call(this,M0)||this}return L0(t,r),t.prototype.init=function(){var e=this,i=function(o,s){var a=o+"px";s.style.minHeight=a,s.style.height=a},n={setRowAnimationCssOnBodyViewport:function(o,s){return e.setRowAnimationCssOnBodyViewport(o,s)},setColumnCount:function(o){return Mp(e.getGui(),o)},setRowCount:function(o){return Lp(e.getGui(),o)},setTopHeight:function(o){return i(o,e.eTop)},setBottomHeight:function(o){return i(o,e.eBottom)},setTopDisplay:function(o){return e.eTop.style.display=o},setBottomDisplay:function(o){return e.eBottom.style.display=o},setStickyTopHeight:function(o){return e.eStickyTop.style.height=o},setStickyTopTop:function(o){return e.eStickyTop.style.top=o},setStickyTopWidth:function(o){return e.eStickyTop.style.width=o},setColumnMovingCss:function(o,s){return e.addOrRemoveCssClass(o,s)},updateLayoutClasses:function(o,s){[e.eBodyViewport.classList,e.eBody.classList].forEach(function(l){l.toggle(rt.AUTO_HEIGHT,s.autoHeight),l.toggle(rt.NORMAL,s.normal),l.toggle(rt.PRINT,s.print)}),e.addOrRemoveCssClass(rt.AUTO_HEIGHT,s.autoHeight),e.addOrRemoveCssClass(rt.NORMAL,s.normal),e.addOrRemoveCssClass(rt.PRINT,s.print)},setAlwaysVerticalScrollClass:function(o,s){return e.eBodyViewport.classList.toggle(zf,s)},registerBodyViewportResizeListener:function(o){var s=e.resizeObserverService.observeResize(e.eBodyViewport,o);e.addDestroyFunc(function(){return s()})},setPinnedTopBottomOverflowY:function(o){return e.eTop.style.overflowY=e.eBottom.style.overflowY=o},setCellSelectableCss:function(o,s){[e.eTop,e.eBodyViewport,e.eBottom].forEach(function(a){return a.classList.toggle(o,s)})},setBodyViewportWidth:function(o){return e.eBodyViewport.style.width=o}};this.ctrl=this.createManagedBean(new M_),this.ctrl.setComp(n,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService||"multiple"===this.gridOptionsService.get("rowSelection"))&&Ap(this.getGui(),!0)},t.prototype.setRowAnimationCssOnBodyViewport=function(e,i){var n=this.eBodyViewport.classList;n.toggle(Ts.ANIMATION_ON,i),n.toggle(Ts.ANIMATION_OFF,!i)},t.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},An([S("resizeObserverService")],t.prototype,"resizeObserverService",void 0),An([we("rangeService")],t.prototype,"rangeService",void 0),An([U("eBodyViewport")],t.prototype,"eBodyViewport",void 0),An([U("eStickyTop")],t.prototype,"eStickyTop",void 0),An([U("eTop")],t.prototype,"eTop",void 0),An([U("eBottom")],t.prototype,"eBottom",void 0),An([U("gridHeader")],t.prototype,"headerRootComp",void 0),An([U("eBody")],t.prototype,"eBody",void 0),An([V],t.prototype,"init",null),t}(he),I0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),pd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},N0=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return I0(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},t.prototype.onDisplayedColumnsChanged=function(){this.update()},t.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},t.prototype.update=function(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)},t.prototype.updateImpl=function(){var e=this.ctrlsService.getCenterRowContainerCtrl();if(e){var i={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(i)}},t.prototype.setScrollsVisible=function(e){this.horizontalScrollShowing===e.horizontalScrollShowing&&this.verticalScrollShowing===e.verticalScrollShowing||(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:E.EVENT_SCROLL_VISIBILITY_CHANGED}))},t.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},t.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},pd([S("ctrlsService")],t.prototype,"ctrlsService",void 0),pd([V],t.prototype,"postConstruct",null),pd([X("scrollVisibleService")],t)}(k),G0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Qf=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},k0=function(r){function t(){var i=null!==r&&r.apply(this,arguments)||this;return i.gridInstanceId=e.gridInstanceSequence.next(),i}var e;return G0(t,r),e=t,t.prototype.stampTopLevelGridCompWithGridInstance=function(i){i[e.GRID_DOM_KEY]=this.gridInstanceId},t.prototype.getRenderedCellForEvent=function(i){return ka(this.gridOptionsService,i.target,Ko.DOM_DATA_KEY_CELL_CTRL)},t.prototype.isEventFromThisGrid=function(i){return this.isElementInThisGrid(i.target)},t.prototype.isElementInThisGrid=function(i){for(var n=i;n;){var o=n[e.GRID_DOM_KEY];if(I(o))return o===this.gridInstanceId;n=n.parentElement}return!1},t.prototype.getCellPositionForEvent=function(i){var n=this.getRenderedCellForEvent(i);return n?n.getCellPosition():null},t.prototype.getNormalisedPosition=function(i){var s,a,n=this.gridOptionsService.isDomLayout("normal");if(null!=i.clientX||null!=i.clientY?(s=i.clientX,a=i.clientY):(s=i.x,a=i.y),n){var l=this.ctrlsService.getGridBodyCtrl(),u=l.getScrollFeature().getVScrollPosition();s+=l.getScrollFeature().getHScrollPosition().left,a+=u.top}return{x:s,y:a}},t.gridInstanceSequence=new wr,t.GRID_DOM_KEY="__ag_grid_instance",Qf([S("ctrlsService")],t.prototype,"ctrlsService",void 0),e=Qf([X("mouseEventService")],t)}(k),H0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),vl=function(){return vl=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},vl.apply(this,arguments)},$t=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},V0=function(r){function t(){var e=r.call(this)||this;return e.onPageDown=Uu(e.onPageDown,100),e.onPageUp=Uu(e.onPageUp,100),e}return H0(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(i){e.gridBodyCon=i.gridBodyCtrl})},t.prototype.handlePageScrollingKey=function(e,i){void 0===i&&(i=!1);var n=e.key,o=e.altKey,s=e.ctrlKey||e.metaKey,a=!!this.rangeService&&e.shiftKey,l=this.mouseEventService.getCellPositionForEvent(e),u=!1;switch(n){case M.PAGE_HOME:case M.PAGE_END:!s&&!o&&(this.onHomeOrEndKey(n),u=!0);break;case M.LEFT:case M.RIGHT:case M.UP:case M.DOWN:if(!l)return!1;s&&!o&&!a&&(this.onCtrlUpDownLeftRight(n,l),u=!0);break;case M.PAGE_DOWN:case M.PAGE_UP:!s&&!o&&(u=this.handlePageUpDown(n,l,i))}return u&&e.preventDefault(),u},t.prototype.handlePageUpDown=function(e,i,n){return n&&(i=this.focusService.getFocusedCell()),!!i&&(e===M.PAGE_UP?this.onPageUp(i):this.onPageDown(i),!0)},t.prototype.navigateTo=function(e){var i=e.scrollIndex,n=e.scrollType,o=e.scrollColumn,s=e.focusIndex,a=e.focusColumn;I(o)&&!o.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(o),I(i)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(i,n),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:a,rowPinned:null,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell({rowIndex:s,rowPinned:null,column:a})},t.prototype.onPageDown=function(e){var n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),o=this.getViewportHeight(),s=this.paginationProxy.getPixelOffset(),l=this.paginationProxy.getRowIndexAtPixel(n.top+o+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,l):this.navigateToNextPage(e,l)},t.prototype.onPageUp=function(e){var n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),o=this.paginationProxy.getPixelOffset(),a=this.paginationProxy.getRowIndexAtPixel(n.top+o);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,a,!0):this.navigateToNextPage(e,a,!0)},t.prototype.navigateToNextPage=function(e,i,n){void 0===n&&(n=!1);var f,o=this.getViewportHeight(),s=this.paginationProxy.getPageFirstRow(),a=this.paginationProxy.getPageLastRow(),l=this.paginationProxy.getPixelOffset(),u=this.paginationProxy.getRow(e.rowIndex),c=n?u?.rowHeight-o-l:o-l,h=this.paginationProxy.getRowIndexAtPixel(u?.rowTop+c+l);h===e.rowIndex&&(i=h=e.rowIndex+(n?-1:1)),n?(f="bottom",h<s&&(h=s),i<s&&(i=s)):(f="top",h>a&&(h=a),i>a&&(i=a)),this.isRowTallerThanView(h)&&(i=h,f="top"),this.navigateTo({scrollIndex:i,scrollType:f,scrollColumn:null,focusIndex:h,focusColumn:e.column})},t.prototype.navigateToNextPageWithAutoHeight=function(e,i,n){var o=this;void 0===n&&(n=!1),this.navigateTo({scrollIndex:i,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column}),setTimeout(function(){var s=o.getNextFocusIndexForAutoHeight(e,n);o.navigateTo({scrollIndex:i,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})},50)},t.prototype.getNextFocusIndexForAutoHeight=function(e,i){var n;void 0===i&&(i=!1);for(var o=i?-1:1,s=this.getViewportHeight(),a=this.paginationProxy.getPageLastRow(),l=0,u=e.rowIndex;u>=0&&u<=a;){var c=this.paginationProxy.getRow(u);if(c){var d=null!==(n=c.rowHeight)&&void 0!==n?n:0;if(l+d>s)break;l+=d}u+=o}return Math.max(0,Math.min(u,a))},t.prototype.getViewportHeight=function(){var i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.gridOptionsService.getScrollbarWidth(),o=i.bottom-i.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(o-=n),o},t.prototype.isRowTallerThanView=function(e){var i=this.paginationProxy.getRow(e);if(!i)return!1;var n=i.rowHeight;return"number"==typeof n&&n>this.getViewportHeight()},t.prototype.onCtrlUpDownLeftRight=function(e,i){var n=this.cellNavigationService.getNextCellToFocus(e,i,!0),o=n.rowIndex,s=n.column;this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:s,focusIndex:o,focusColumn:s})},t.prototype.onHomeOrEndKey=function(e){var i=e===M.PAGE_HOME,n=this.columnModel.getAllDisplayedColumns(),o=i?n[0]:Pe(n),s=i?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:o,focusIndex:s,focusColumn:o})},t.prototype.onTabKeyDown=function(e,i){var n=i.shiftKey;if(this.tabToNextCellCommon(e,n,i))i.preventDefault();else if(n){var s=e.getRowPosition(),a=s.rowIndex;(s.rowPinned?0===a:a===this.paginationProxy.getPageFirstRow())&&(0===this.gridOptionsService.getNum("headerHeight")?this.focusService.focusNextGridCoreContainer(!0,!0):(i.preventDefault(),this.focusService.focusPreviousFromFirstCell(i)))}else e instanceof Ko&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(n)&&i.preventDefault()},t.prototype.tabToNextCell=function(e,i){var n=this.focusService.getFocusedCell();if(!n)return!1;var o=this.getCellByPosition(n);return!!(o||(o=this.rowRenderer.getRowByPosition(n),o&&o.isFullWidth()))&&this.tabToNextCellCommon(o,e,i)},t.prototype.tabToNextCellCommon=function(e,i,n){var o=e.isEditing();if(!o&&e instanceof Ko){var a=e.getRowCtrl();a&&(o=a.isEditing())}return(o?"fullRow"===this.gridOptionsService.get("editType")?this.moveToNextEditingRow(e,i,n):this.moveToNextEditingCell(e,i,n):this.moveToNextCellNotEditing(e,i))||!!this.focusService.getFocusedHeader()},t.prototype.moveToNextEditingCell=function(e,i,n){void 0===n&&(n=null);var o=e.getCellPosition();e.getGui().focus(),e.stopEditing();var s=this.findNextCellToFocusOn(o,i,!0);return null!=s&&(s.startEditing(null,!0,n),s.focusCell(!1),!0)},t.prototype.moveToNextEditingRow=function(e,i,n){void 0===n&&(n=null);var o=e.getCellPosition(),s=this.findNextCellToFocusOn(o,i,!0);if(null==s)return!1;var a=s.getCellPosition(),l=this.isCellEditable(o),u=this.isCellEditable(a),c=a&&o.rowIndex===a.rowIndex&&o.rowPinned===a.rowPinned;return l&&e.setFocusOutOnEditor(),c||(e.getRowCtrl().stopEditing(),s.getRowCtrl().startRowEditing(void 0,void 0,n)),u?(s.setFocusInOnEditor(),s.focusCell()):s.focusCell(!0),!0},t.prototype.moveToNextCellNotEditing=function(e,i){var o,n=this.columnModel.getAllDisplayedColumns();o=e instanceof $o?vl(vl({},e.getRowPosition()),{column:i?n[0]:Pe(n)}):e.getCellPosition();var s=this.findNextCellToFocusOn(o,i,!1);if(s instanceof Ko)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s.getRowPosition(),i);return I(s)},t.prototype.findNextCellToFocusOn=function(e,i,n){for(var o=e;;){e!==o&&(e=o),i||(o=this.getLastCellOfColSpan(o)),o=this.cellNavigationService.getNextTabbedCell(o,i);var s=this.gridOptionsService.getCallback("tabToNextCell");if(I(s)){var l=s({backwards:i,editing:n,previousCellPosition:e,nextCellPosition:o||null});I(l)?(l.floating&&(ge(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),l.rowPinned=l.floating),o={rowIndex:l.rowIndex,column:l.column,rowPinned:l.rowPinned}):o=null}if(!o)return null;if(o.rowIndex<0){var u=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:u+o.rowIndex,column:o.column},fromCell:!0}),null}var c="fullRow"===this.gridOptionsService.get("editType");if(!n||c||this.isCellEditable(o)){this.ensureCellVisible(o);var h=this.getCellByPosition(o);if(!h){var p=this.rowRenderer.getRowByPosition(o);if(!p||!p.isFullWidth()||n)continue;return p}if(!h.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(o),h}}},t.prototype.isCellEditable=function(e){var i=this.lookupRowNodeForCell(e);return!!i&&e.column.isCellEditable(i)},t.prototype.getCellByPosition=function(e){var i=this.rowRenderer.getRowByPosition(e);return i?i.getCellCtrl(e.column):null},t.prototype.lookupRowNodeForCell=function(e){return"top"===e.rowPinned?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):"bottom"===e.rowPinned?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)},t.prototype.navigateToNextCell=function(e,i,n,o){for(var s=n,a=!1;s&&(s===n||!this.isValidNavigateCell(s));)this.gridOptionsService.is("enableRtl")?i===M.LEFT&&(s=this.getLastCellOfColSpan(s)):i===M.RIGHT&&(s=this.getLastCellOfColSpan(s)),a=ie(s=this.cellNavigationService.getNextCellToFocus(i,s));if(a&&e&&e.key===M.UP&&(s={rowIndex:-1,rowPinned:null,column:n.column}),o){var l=this.gridOptionsService.getCallback("navigateToNextCell");if(I(l)){var c=l({key:i,previousCellPosition:n,nextCellPosition:s||null,event:e});I(c)?(c.floating&&(ge(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),c.rowPinned=c.floating),s={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}):s=null}}if(s){if(s.rowIndex<0){var d=this.headerNavigationService.getHeaderRowCount();return void this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:d+s.rowIndex,column:n.column},event:e||void 0,fromCell:!0})}var h=this.getNormalisedPosition(s);h?this.focusPosition(h):this.tryToFocusFullWidthRow(s)}},t.prototype.getNormalisedPosition=function(e){this.ensureCellVisible(e);var i=this.getCellByPosition(e);return i?(e=i.getCellPosition(),this.ensureCellVisible(e),e):null},t.prototype.tryToFocusFullWidthRow=function(e,i){void 0===i&&(i=!1);var n=this.columnModel.getAllDisplayedColumns(),o=this.rowRenderer.getRowByPosition(e);if(!o||!o.isFullWidth())return!1;var s=this.focusService.getFocusedCell(),a={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(i?Pe(n):n[0])};this.focusPosition(a);var l=null!=s&&this.rowPositionUtils.before(a,s);return this.eventService.dispatchEvent({type:E.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:a.rowIndex,rowPinned:a.rowPinned,column:a.column,isFullWidthCell:!0,floating:a.rowPinned,fromBelow:l}),!0},t.prototype.focusPosition=function(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(e)},t.prototype.isValidNavigateCell=function(e){return!!this.rowPositionUtils.getRowNode(e)},t.prototype.getLastCellOfColSpan=function(e){var i=this.getCellByPosition(e);if(!i)return e;var n=i.getColSpanningList();return 1===n.length?e:{rowIndex:e.rowIndex,column:Pe(n),rowPinned:e.rowPinned}},t.prototype.ensureCellVisible=function(e){var i=this.gridOptionsService.isGroupRowsSticky(),n=this.rowModel.getRow(e.rowIndex);!(i&&n?.sticky)&&ie(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)},$t([S("mouseEventService")],t.prototype,"mouseEventService",void 0),$t([S("paginationProxy")],t.prototype,"paginationProxy",void 0),$t([S("focusService")],t.prototype,"focusService",void 0),$t([we("rangeService")],t.prototype,"rangeService",void 0),$t([S("columnModel")],t.prototype,"columnModel",void 0),$t([S("rowModel")],t.prototype,"rowModel",void 0),$t([S("ctrlsService")],t.prototype,"ctrlsService",void 0),$t([S("rowRenderer")],t.prototype,"rowRenderer",void 0),$t([S("headerNavigationService")],t.prototype,"headerNavigationService",void 0),$t([S("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),$t([S("cellNavigationService")],t.prototype,"cellNavigationService",void 0),$t([S("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),$t([V],t.prototype,"postConstruct",null),$t([X("navigationService")],t)}(k),B0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),j0=function(r){function t(e){var i=r.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return i.params=e,i}return B0(t,r),t.prototype.postConstruct=function(){this.gridOptionsService.setDomData(this.getGui(),t.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},t.prototype.addKeyDownListener=function(){var e=this,i=this.getGui(),n=this.params;this.addManagedListener(i,"keydown",function(s){Ja(e.gridOptionsService,s,n.node,n.column,!0)||n.onKeyDown(s)})},t.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([V],t.prototype,"postConstruct",null),t}(jo),U0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),z0=function(r){function t(e,i,n,o,s){var a=r.call(this)||this;a.rendererVersion=0,a.editorVersion=0,a.beans=e,a.column=i.getColumn(),a.rowNode=i.getRowNode(),a.rowCtrl=i.getRowCtrl(),a.eRow=o,a.cellCtrl=i,a.setTemplate('<div comp-id="'+a.getCompId()+'"/>');var l=a.getGui();a.forceWrapper=i.isForceWrapper(),a.refreshWrapper(!1);var u=function(h,p){null!=p&&""!=p?l.setAttribute(h,p):l.removeAttribute(h)};ot(l,"gridcell"),u("col-id",i.getColumnIdSanitised());var c=i.getTabIndex();return void 0!==c&&u("tabindex",c.toString()),i.setComp({addOrRemoveCssClass:function(h,p){return a.addOrRemoveCssClass(h,p)},setUserStyles:function(h){return Tc(l,h)},getFocusableElement:function(){return a.getFocusableElement()},setIncludeSelection:function(h){return a.includeSelection=h},setIncludeRowDrag:function(h){return a.includeRowDrag=h},setIncludeDndSource:function(h){return a.includeDndSource=h},setRenderDetails:function(h,p,f){return a.setRenderDetails(h,p,f)},setEditDetails:function(h,p,f){return a.setEditDetails(h,p,f)},getCellEditor:function(){return a.cellEditor||null},getCellRenderer:function(){return a.cellRenderer||null},getParentOfValue:function(){return a.getParentOfValue()}},a.getGui(),a.eCellWrapper,n,s),a}return U0(t,r),t.prototype.getParentOfValue=function(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()},t.prototype.setRenderDetails=function(e,i,n){if(!this.cellEditor||this.cellEditorPopupWrapper){this.firstRender=null==this.firstRender;var s=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!n&&!s&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(i))}},t.prototype.setEditDetails=function(e,i,n){e?this.createCellEditorInstance(e,i,n):this.destroyEditor()},t.prototype.removeControls=function(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},t.prototype.refreshWrapper=function(e){var i=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=i||this.forceWrapper,o=n&&null==this.eCellWrapper;o&&(this.eCellWrapper=Ct('<div class="ag-cell-wrapper" role="presentation"></div>'),this.getGui().appendChild(this.eCellWrapper));var s=!n&&null!=this.eCellWrapper;s&&(Dn(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!n);var a=!e&&n,l=a&&null==this.eCellValue;l&&(this.eCellValue=Ct('<span class="ag-cell-value" role="presentation"></span>'),this.eCellWrapper.appendChild(this.eCellValue));var u=!a&&null!=this.eCellValue;u&&(Dn(this.eCellValue),this.eCellValue=void 0);var c=o||s||l||u;return c&&this.removeControls(),e||i&&this.addControls(),c},t.prototype.addControls=function(){this.includeRowDrag&&null==this.rowDraggingComp&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&null==this.dndSourceComp&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))},t.prototype.createCellEditorInstance=function(e,i,n){var o=this,s=this.editorVersion,a=e.newAgStackInstance();if(a){var l=e.params;a.then(function(c){return o.afterCellEditorCreated(s,c,l,i,n)}),ie(this.cellEditor)&&l.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},t.prototype.insertValueWithoutCellRenderer=function(e){var i=this.getParentOfValue();Pt(i);var n=null!=e?Ye(e):null;null!=n&&(i.innerHTML=n)},t.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},t.prototype.destroyRenderer=function(){this.cellRenderer=this.beans.context.destroyBean(this.cellRenderer),Dn(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},t.prototype.destroyEditor=function(){var e=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),Dn(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},t.prototype.refreshCellRenderer=function(e){if(null==this.cellRenderer||null==this.cellRenderer.refresh||this.cellRendererClass!==e.componentClass)return!1;var i=this.cellRenderer.refresh(e.params);return!0===i||void 0===i},t.prototype.createCellRendererInstance=function(e){var i=this,n=this.beans.gridOptionsService.is("suppressAnimationFrame"),s=this.rendererVersion,a=e.componentClass,l=function(){if(i.rendererVersion===s&&i.isAlive()){var c=e.newAgStackInstance(),d=i.afterCellRendererCreated.bind(i,s,a);c&&c.then(d)}};!n&&this.firstRender?this.beans.animationFrameService.createTask(l,this.rowNode.rowIndex,"createTasksP2"):l()},t.prototype.getCtrl=function(){return this.cellCtrl},t.prototype.getRowCtrl=function(){return this.rowCtrl},t.prototype.getCellRenderer=function(){return this.cellRenderer},t.prototype.getCellEditor=function(){return this.cellEditor},t.prototype.afterCellRendererCreated=function(e,i,n){if(this.isAlive()&&e===this.rendererVersion){if(this.cellRenderer=n,this.cellRendererClass=i,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui){var s=this.getParentOfValue();Pt(s),s.appendChild(this.cellRendererGui)}}else this.beans.context.destroyBean(n)},t.prototype.afterCellEditorCreated=function(e,i,n,o,s){if(e!==this.editorVersion)this.beans.context.destroyBean(i);else{if(i.isCancelBeforeStart&&i.isCancelBeforeStart())return this.beans.context.destroyBean(i),void this.cellCtrl.stopEditing(!0);if(!i.getGui)return console.warn("AG Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),void this.beans.context.destroyBean(i);this.cellEditor=i,this.cellEditorGui=i.getGui();var u=o||void 0!==i.isPopup&&i.isPopup();u?this.addPopupCellEditor(n,s):this.addInCellEditor(),this.refreshEditStyles(!0,u),i.afterGuiAttached&&i.afterGuiAttached()}},t.prototype.refreshEditStyles=function(e,i){var n;this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!i),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!i),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!i),null===(n=this.rowCtrl)||void 0===n||n.setInlineEditingCss(e)},t.prototype.addInCellEditor=function(){var e=this.getGui(),i=this.beans.gridOptionsService.getDocument();e.contains(i.activeElement)&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)},t.prototype.addPopupCellEditor=function(e,i){var n=this;"fullRow"===this.beans.gridOptionsService.get("editType")&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var o=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new j0(e));var s=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&s.appendChild(this.cellEditorGui);var a=this.beans.popupService,l=this.beans.gridOptionsService.is("stopEditingWhenCellsLoseFocus"),u=i??(o.getPopupPosition?o.getPopupPosition():"over"),c=this.beans.gridOptionsService.is("enableRtl"),d={ePopup:s,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:u,alignSide:c?"right":"left",keepWithinBounds:!0},h=a.positionPopupByComponent.bind(a,d),p=this.beans.localeService.getLocaleTextFunc(),f=a.addPopup({modal:l,eChild:s,closeOnEsc:!0,closedCallback:function(){n.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:h,ariaLabel:p("ariaLabelCellEditor","Cell Editor")});f&&(this.hideEditorPopup=f.hideFunc)},t.prototype.detach=function(){this.eRow.removeChild(this.getGui())},t.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),r.prototype.destroy.call(this)},t.prototype.clearParentOfValue=function(){var e=this.getGui(),i=this.beans.gridOptionsService.getDocument();e.contains(i.activeElement)&&$a()&&e.focus({preventScroll:!0}),Pt(this.getParentOfValue())},t}(he),K0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),$0=function(r){function t(e,i,n){var o=r.call(this)||this;o.cellComps={},o.beans=i,o.rowCtrl=e,o.setTemplate('<div comp-id="'+o.getCompId()+'" style="'+o.getInitialStyle(n)+'"/>');var s=o.getGui(),a=s.style;o.domOrder=o.rowCtrl.getDomOrder(),ot(s,"row");var l=o.rowCtrl.getTabIndex();return null!=l&&s.setAttribute("tabindex",l.toString()),e.setComp({setDomOrder:function(c){return o.domOrder=c},setCellCtrls:function(c){return o.setCellCtrls(c)},showFullWidth:function(c){return o.showFullWidth(c)},getFullWidthCellRenderer:function(){return o.getFullWidthCellRenderer()},addOrRemoveCssClass:function(c,d){return o.addOrRemoveCssClass(c,d)},setUserStyles:function(c){return Tc(s,c)},setTop:function(c){return a.top=c},setTransform:function(c){return a.transform=c},setRowIndex:function(c){return s.setAttribute("row-index",c)},setRowId:function(c){return s.setAttribute("row-id",c)},setRowBusinessKey:function(c){return s.setAttribute("row-business-key",c)}},o.getGui(),n),o.addDestroyFunc(function(){e.unsetComp(n)}),o}return K0(t,r),t.prototype.getInitialStyle=function(e){var i=this.rowCtrl.getInitialTransform(e),n=this.rowCtrl.getInitialRowTop(e);return i?"transform: "+i:"top: "+n},t.prototype.showFullWidth=function(e){var i=this,o=e.newAgStackInstance();o&&o.then(function(s){if(i.isAlive()){var a=s.getGui();i.getGui().appendChild(a),i.rowCtrl.setupDetailRowAutoHeight(a),i.setFullWidthRowComp(s)}else i.beans.context.destroyBean(s)})},t.prototype.setCellCtrls=function(e){var i=this,n=Object.assign({},this.cellComps);e.forEach(function(s){var a=s.getInstanceId();null==i.cellComps[a]?i.newCellComp(s):n[a]=null});var o=nn(n).filter(function(s){return null!=s});this.destroyCells(o),this.ensureDomOrder(e)},t.prototype.ensureDomOrder=function(e){var i=this;if(this.domOrder){var n=[];e.forEach(function(o){var s=i.cellComps[o.getInstanceId()];s&&n.push(s.getGui())}),Dc(this.getGui(),n)}},t.prototype.newCellComp=function(e){var i=new z0(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=i,this.getGui().appendChild(i.getGui())},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.destroyAllCells()},t.prototype.destroyAllCells=function(){var e=nn(this.cellComps).filter(function(i){return null!=i});this.destroyCells(e)},t.prototype.setFullWidthRowComp=function(e){var i=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(function(){i.fullWidthCellRenderer=i.beans.context.destroyBean(i.fullWidthCellRenderer)})},t.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},t.prototype.destroyCells=function(e){var i=this;e.forEach(function(n){if(n){var o=n.getCtrl().getInstanceId();i.cellComps[o]===n&&(n.detach(),n.destroy(),i.cellComps[o]=null)}})},t}(he),Y0=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),fd=function(){return fd=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},fd.apply(this,arguments)},Ls=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},q0=function(r){function t(){var e=r.call(this,function X0(){var r=he.elementGettingCreated.getAttribute("name"),t=Zf.getRowContainerCssClasses(r);return r===F.CENTER||r===F.TOP_CENTER||r===F.STICKY_TOP_CENTER||r===F.BOTTOM_CENTER?'<div class="'+t.viewport+'" ref="eViewport" role="presentation">\n                <div class="'+t.container+'" ref="eContainer"></div>\n            </div>':'<div class="'+t.container+'" ref="eContainer"></div>'}())||this;return e.rowComps={},e.name=he.elementGettingCreated.getAttribute("name"),e.type=function T0(r){switch(r){case F.CENTER:case F.TOP_CENTER:case F.STICKY_TOP_CENTER:case F.BOTTOM_CENTER:return dt.CENTER;case F.LEFT:case F.TOP_LEFT:case F.STICKY_TOP_LEFT:case F.BOTTOM_LEFT:return dt.LEFT;case F.RIGHT:case F.TOP_RIGHT:case F.STICKY_TOP_RIGHT:case F.BOTTOM_RIGHT:return dt.RIGHT;case F.FULL_WIDTH:case F.TOP_FULL_WIDTH:case F.STICKY_TOP_FULL_WIDTH:case F.BOTTOM_FULL_WIDTH:return dt.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}(e.name),e}return Y0(t,r),t.prototype.postConstruct=function(){var e=this,i={setViewportHeight:function(o){return e.eViewport.style.height=o},setRowCtrls:function(o){return e.setRowCtrls(o)},setDomOrder:function(o){e.domOrder=o},setContainerWidth:function(o){return e.eContainer.style.width=o}};this.createManagedBean(new Zf(this.name)).setComp(i,this.eContainer,this.eViewport)},t.prototype.preDestroy=function(){this.setRowCtrls([])},t.prototype.setRowCtrls=function(e){var i=this,n=fd({},this.rowComps);this.rowComps={},this.lastPlacedElement=null,e.forEach(function(s){var a=s.getInstanceId(),l=n[a];if(l)i.rowComps[a]=l,delete n[a],i.ensureDomOrder(l.getGui());else{if(!s.getRowNode().displayed)return;var u=new $0(s,i.beans,i.type);i.rowComps[a]=u,i.appendRow(u.getGui())}}),nn(n).forEach(function(s){i.eContainer.removeChild(s.getGui()),s.destroy()}),ot(this.eContainer,e.length?"rowgroup":"presentation")},t.prototype.appendRow=function(e){this.domOrder?$p(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e},t.prototype.ensureDomOrder=function(e){this.domOrder&&(xc(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)},Ls([S("beans")],t.prototype,"beans",void 0),Ls([U("eViewport")],t.prototype,"eViewport",void 0),Ls([U("eContainer")],t.prototype,"eContainer",void 0),Ls([V],t.prototype,"postConstruct",null),Ls([lt],t.prototype,"preDestroy",null),t}(he),Jf=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Z0=function(){function r(t){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=t}return r.prototype.onDragEnter=function(t){var e=this;if(this.clearColumnsList(),!this.gridOptionsService.is("functionsReadOnly")){var i=t.dragItem.columns;i&&i.forEach(function(n){n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?e.columnsToAggregate.push(n):n.isAllowRowGroup()?e.columnsToGroup.push(n):n.isAllowPivot()&&e.columnsToPivot.push(n)))})}},r.prototype.getIconName=function(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?ct.ICON_PINNED:ct.ICON_MOVE:null},r.prototype.onDragLeave=function(t){this.clearColumnsList()},r.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},r.prototype.onDragging=function(t){},r.prototype.onDragStop=function(t){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},Jf([S("columnModel")],r.prototype,"columnModel",void 0),Jf([S("gridOptionsService")],r.prototype,"gridOptionsService",void 0),r}(),Ms=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},J0=function(){function r(t,e){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=t,this.eContainer=e,this.centerContainer=!I(t)}return r.prototype.init=function(){var t=this;this.ctrlsService.whenReady(function(){t.gridBodyCon=t.ctrlsService.getGridBodyCtrl()})},r.prototype.getIconName=function(){return this.pinned?ct.ICON_PINNED:ct.ICON_MOVE},r.prototype.onDragEnter=function(t){var e=t.dragItem.columns;if(t.dragSource.type===Ut.ToolPanel)this.setColumnsVisible(e,!0,"uiColumnDragged");else{var n=t.dragItem.visibleState,o=(e||[]).filter(function(s){return n[s.getId()]});this.setColumnsVisible(o,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(t,!0,!0)},r.prototype.onDragLeave=function(){this.ensureIntervalCleared(),this.lastMovedInfo=null},r.prototype.setColumnsVisible=function(t,e,i){if(void 0===i&&(i="api"),t){var n=t.filter(function(o){return!o.getColDef().lockVisible});this.columnModel.setColumnsVisible(n,e,i)}},r.prototype.setColumnsPinned=function(t,e,i){if(void 0===i&&(i="api"),t){var n=t.filter(function(o){return!o.getColDef().lockPinned});this.columnModel.setColumnsPinned(n,e,i)}},r.prototype.onDragStop=function(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null},r.prototype.normaliseX=function(t){return this.gridOptionsService.is("enableRtl")&&(t=this.eContainer.clientWidth-t),this.centerContainer&&(t+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),t},r.prototype.checkCenterForScrolling=function(t){if(this.centerContainer){var e=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),i=e+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.is("enableRtl")?(this.needToMoveRight=t<e+50,this.needToMoveLeft=t>i-50):(this.needToMoveLeft=t<e+50,this.needToMoveRight=t>i-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},r.prototype.onDragging=function(t,e,i,n){var s,o=this;if(void 0===t&&(t=this.lastDraggingEvent),void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),n){if(this.lastMovedInfo){var a=this.lastMovedInfo;this.moveColumns(a.columns,a.toIndex,"uiColumnMoved",!0)}}else if(this.lastDraggingEvent=t,!ie(t.hDirection)){var c=this.normaliseX(t.x);e||this.checkCenterForScrolling(c);var d=this.normaliseDirection(t.hDirection),h=t.dragSource.type,p=(null===(s=t.dragSource.getDragItem().columns)||void 0===s?void 0:s.filter(function(f){return!f.getColDef().lockPinned||f.getPinned()==o.pinned}))||[];this.attemptMoveColumns({dragSourceType:h,allMovingColumns:p,hDirection:d,mouseX:c,fromEnter:e,fakeEvent:i})}},r.prototype.normaliseDirection=function(t){if(!this.gridOptionsService.is("enableRtl"))return t;switch(t){case Pn.Left:return Pn.Right;case Pn.Right:return Pn.Left;default:console.error("AG Grid: Unknown direction "+t)}},r.prototype.attemptMoveColumns=function(t){var e=t.dragSourceType,i=t.hDirection,n=t.mouseX,o=t.fromEnter,s=t.fakeEvent,a=i===Pn.Left,l=i===Pn.Right,u=t.allMovingColumns;if(e===Ut.HeaderCell){var c=[];u.forEach(function(x){for(var D,T=null,L=x.getParent();null!=L&&1===L.getDisplayedLeafColumns().length;)T=L,L=L.getParent();null!=T?(null!==(D=T.getColGroupDef())&&void 0!==D&&D.marryChildren?T.getProvidedColumnGroup().getLeafColumns():T.getLeafColumns()).forEach(function(H){c.includes(H)||c.push(H)}):c.includes(x)||c.push(x)}),u=c}var d=u.slice();this.columnModel.sortColumnsLikeGridColumns(d);var h=this.calculateValidMoves(d,l,n),p=this.calculateOldIndex(d);if(0!==h.length){var f=h[0],v=null!==p&&!o;if(e==Ut.HeaderCell&&(v=null!==p),!v||s||!(a&&f>=p||l&&f<=p)){for(var g=this.columnModel.getAllDisplayedColumns(),y=[],m=null,C=0;C<h.length;C++){var w=h[C],_=this.columnModel.getProposedColumnOrder(d,w);if(this.columnModel.doesOrderPassRules(_)){var b=_.filter(function(x){return g.includes(x)});if(null===m)m=b;else if(!ne.areEqual(b,m))break;var O=this.groupFragCount(_);y.push({move:w,fragCount:O})}}0!==y.length&&(y.sort(function(x,D){return x.fragCount-D.fragCount}),this.moveColumns(u,y[0].move,"uiColumnMoved",!1))}}},r.prototype.calculateOldIndex=function(t){var e=this.columnModel.getAllGridColumns(),i=lp(t.map(function(l){return e.indexOf(l)})),n=i[0];return Pe(i)-n!=i.length-1?null:n},r.prototype.moveColumns=function(t,e,i,n){this.columnModel.moveColumns(t,e,i,n),this.lastMovedInfo=n?null:{columns:t,toIndex:e}},r.prototype.groupFragCount=function(t){function e(s){for(var a=[],l=s.getOriginalParent();null!=l;)a.push(l),l=l.getOriginalParent();return a}for(var i=0,n=function(s){var a,l=e(t[s]),u=e(t[s+1]);a=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(l.length>u.length?[l,u]:[u,l],2),u=a[1],(l=a[0]).forEach(function(c){-1===u.indexOf(c)&&i++})},o=0;o<t.length-1;o++)n(o);return i},r.prototype.calculateValidMoves=function(t,e,i){if(this.gridOptionsService.is("suppressMovableColumns")||t.some(function(O){return O.getColDef().suppressMovable}))return[];var v,o=this.columnModel.getDisplayedColumns(this.pinned),s=this.columnModel.getAllGridColumns(),a=o.filter(function(O){return wi(t,O)}),l=o.filter(function(O){return!wi(t,O)}),u=s.filter(function(O){return!wi(t,O)}),c=0,d=i;if(e){var h=0;a.forEach(function(O){return h+=O.getActualWidth()}),d-=h}if(d>0){for(var p=0;p<l.length&&!((d-=l[p].getActualWidth())<0);p++)c++;e&&c++}c>0?v=u.indexOf(l[c-1])+1:-1===(v=u.indexOf(l[0]))&&(v=0);var y=[v],m=function(O,x){return O-x};if(e){for(var C=v+1,w=s.length-1;C<=w;)y.push(C),C++;y.sort(m)}else{w=s.length-1;for(var _=s[C=v];C<=w&&this.isColumnHidden(o,_);)C++,y.push(C),_=s[C];for(C=v-1;C>=0;)y.push(C),C--;y.sort(m).reverse()}return y},r.prototype.isColumnHidden=function(t,e){return t.indexOf(e)<0},r.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.setGhostIcon(this.needToMoveLeft?ct.ICON_LEFT:ct.ICON_RIGHT,!0))},r.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(ct.ICON_MOVE))},r.prototype.moveInterval=function(){var t;this.intervalCount++,(t=10+5*this.intervalCount)>100&&(t=100);var e=null,i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=i.scrollHorizontally(-t):this.needToMoveRight&&(e=i.scrollHorizontally(t)),0!==e)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var o=this.lastDraggingEvent.dragItem.columns.filter(function(a){return!a.getColDef().lockPinned});o.length>0&&(this.dragAndDropService.setGhostIcon(ct.ICON_PINNED),this.failedMoveAttempts>7)&&(this.setColumnsPinned(o,this.needToMoveLeft?"left":"right","uiColumnDragged"),this.dragAndDropService.nudge())}},Ms([S("columnModel")],r.prototype,"columnModel",void 0),Ms([S("dragAndDropService")],r.prototype,"dragAndDropService",void 0),Ms([S("gridOptionsService")],r.prototype,"gridOptionsService",void 0),Ms([S("ctrlsService")],r.prototype,"ctrlsService",void 0),Ms([V],r.prototype,"init",null),r}(),eE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Fs=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},tE=function(r){function t(e,i){var n=r.call(this)||this;return n.pinned=e,n.eContainer=i,n}return eE(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(i){switch(e.pinned){case"left":e.eSecondaryContainers=[[i.gridBodyCtrl.getBodyViewportElement(),i.leftRowContainerCtrl.getContainerElement()],[i.bottomLeftRowContainerCtrl.getContainerElement()],[i.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":e.eSecondaryContainers=[[i.gridBodyCtrl.getBodyViewportElement(),i.rightRowContainerCtrl.getContainerElement()],[i.bottomRightRowContainerCtrl.getContainerElement()],[i.topRightRowContainerCtrl.getContainerElement()]];break;default:e.eSecondaryContainers=[[i.gridBodyCtrl.getBodyViewportElement(),i.centerRowContainerCtrl.getViewportElement()],[i.bottomCenterRowContainerCtrl.getViewportElement()],[i.topCenterRowContainerCtrl.getViewportElement()]]}})},t.prototype.isInterestedIn=function(e){return e===Ut.HeaderCell||e===Ut.ToolPanel&&this.gridOptionsService.is("allowDragFromColumnsToolPanel")},t.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},t.prototype.getContainer=function(){return this.eContainer},t.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new J0(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new Z0(this.pinned)),this.dragAndDropService.addDropTarget(this)},t.prototype.getIconName=function(){return this.currentDropListener.getIconName()},t.prototype.isDropColumnInPivotMode=function(e){return this.columnModel.isPivotMode()&&e.dragSource.type===Ut.ToolPanel},t.prototype.onDragEnter=function(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)},t.prototype.onDragLeave=function(e){this.currentDropListener.onDragLeave(e)},t.prototype.onDragging=function(e){this.currentDropListener.onDragging(e)},t.prototype.onDragStop=function(e){this.currentDropListener.onDragStop(e)},Fs([S("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Fs([S("columnModel")],t.prototype,"columnModel",void 0),Fs([S("ctrlsService")],t.prototype,"ctrlsService",void 0),Fs([V],t.prototype,"postConstruct",null),Fs([V],t.prototype,"init",null),t}(k),ev=function(){function r(){}return r.getHeaderClassesFromColDef=function(t,e,i,n){return ie(t)?[]:this.getColumnClassesFromCollDef(t.headerClass,t,e,i,n)},r.getToolPanelClassesFromColDef=function(t,e,i,n){return ie(t)?[]:this.getColumnClassesFromCollDef(t.toolPanelClass,t,e,i,n)},r.getClassParams=function(t,e,i,n){return{colDef:t,column:i,columnGroup:n,api:e.api,columnApi:e.columnApi,context:e.context}},r.getColumnClassesFromCollDef=function(t,e,i,n,o){return ie(t)?[]:"string"==typeof(s="function"==typeof t?t(this.getClassParams(e,i,n,o)):t)?[s]:Array.isArray(s)?function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r}([],function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(s)):[];var s},r}(),oE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),gl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},rE=function(r){function t(e){var i=r.call(this,t.TEMPLATE,e)||this;return i.headerCompVersion=0,i.column=e.getColumnGroupChild(),i.pinned=e.getPinned(),i}return oE(t,r),t.prototype.postConstruct=function(){var a,l,e=this,i=this.getGui();a="col-id",null!=(l=this.column.getColId())&&""!=l?i.setAttribute(a,l):i.removeAttribute(a);var o={setWidth:function(a){return i.style.width=a},addOrRemoveCssClass:function(a,l){return e.addOrRemoveCssClass(a,l)},setAriaDescription:function(a){return Op(i,a)},setAriaSort:function(a){return a?Ip(i,a):Np(i)},setUserCompDetails:function(a){return e.setUserCompDetails(a)},getUserCompInstance:function(){return e.headerComp}};this.ctrl.setComp(o,this.getGui(),this.eResize,this.eHeaderCompWrapper);var s=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",s)},t.prototype.destroyHeaderComp=function(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},t.prototype.setUserCompDetails=function(e){var i=this;this.headerCompVersion++;var n=this.headerCompVersion;e.newAgStackInstance().then(function(o){return i.afterCompCreated(n,o)})},t.prototype.afterCompCreated=function(e,i){e==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=i,this.headerCompGui=i.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())):this.destroyBean(i)},t.TEMPLATE='<div class="ag-header-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n        </div>',gl([U("eResize")],t.prototype,"eResize",void 0),gl([U("eHeaderCompWrapper")],t.prototype,"eHeaderCompWrapper",void 0),gl([V],t.prototype,"postConstruct",null),gl([lt],t.prototype,"destroyHeaderComp",null),t}(nd),sE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),vd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},aE=function(r){function t(e){return r.call(this,t.TEMPLATE,e)||this}return sE(t,r),t.prototype.postConstruct=function(){var e=this,i=this.getGui();i.setAttribute("col-id",this.ctrl.getColId()),this.ctrl.setComp({addOrRemoveCssClass:function(s,a){return e.addOrRemoveCssClass(s,a)},setResizableDisplayed:function(s){return Ce(e.eResize,s)},setWidth:function(s){return i.style.width=s},setAriaExpanded:function(s){return function(s,a){return null!=a?i.setAttribute(s,a):i.removeAttribute(s)}("aria-expanded",s)},setUserCompDetails:function(s){return e.setUserCompDetails(s)}},i,this.eResize)},t.prototype.setUserCompDetails=function(e){var i=this;e.newAgStackInstance().then(function(n){return i.afterHeaderCompCreated(n)})},t.prototype.afterHeaderCompCreated=function(e){var i=this,n=function(){return i.destroyBean(e)};if(this.isAlive()){var o=this.getGui(),s=e.getGui();o.appendChild(s),this.addDestroyFunc(n),this.ctrl.setDragSource(o)}else n()},t.TEMPLATE='<div class="ag-header-group-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',vd([S("userComponentFactory")],t.prototype,"userComponentFactory",void 0),vd([U("eResize")],t.prototype,"eResize",void 0),vd([V],t.prototype,"postConstruct",null),t}(nd),lE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),tv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},At=function(r){return r.COLUMN_GROUP="group",r.COLUMN="column",r.FLOATING_FILTER="filter",r}(At||{}),uE=function(r){function t(e){var i=r.call(this)||this;return i.headerComps={},i.ctrl=e,i.setTemplate('<div class="'+i.ctrl.getHeaderRowClass()+'" role="row"></div>'),i}return lE(t,r),t.prototype.init=function(){var e=this;this.getGui().style.transform=this.ctrl.getTransform(),rc(this.getGui(),this.ctrl.getAriaRowIndex()),this.ctrl.setComp({setHeight:function(n){return e.getGui().style.height=n},setTop:function(n){return e.getGui().style.top=n},setHeaderCtrls:function(n,o){return e.setHeaderCtrls(n,o)},setWidth:function(n){return e.getGui().style.width=n}})},t.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([],!1)},t.prototype.setHeaderCtrls=function(e,i){var n=this;if(this.isAlive()){var o=this.headerComps;if(this.headerComps={},e.forEach(function(l){var u=l.getInstanceId(),c=o[u];delete o[u],null==c&&(c=n.createHeaderComp(l),n.getGui().appendChild(c.getGui())),n.headerComps[u]=c}),He(o,function(l,u){n.getGui().removeChild(u.getGui()),n.destroyBean(u)}),i){var s=nn(this.headerComps);s.sort(function(l,u){return l.getCtrl().getColumnGroupChild().getLeft()-u.getCtrl().getColumnGroupChild().getLeft()});var a=s.map(function(l){return l.getGui()});Dc(this.getGui(),a)}}},t.prototype.createHeaderComp=function(e){var i;switch(this.ctrl.getType()){case At.COLUMN_GROUP:i=new aE(e);break;case At.FLOATING_FILTER:i=new S_(e);break;default:i=new rE(e)}return this.createBean(i),i.setParentComponent(this),i},tv([V],t.prototype,"init",null),tv([lt],t.prototype,"destroyHeaderCtrls",null),t}(he),cE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),gd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},dE=0,yl=function(r){function t(e,i){var n=r.call(this)||this;return n.lastFocusEvent=null,n.columnGroupChild=e,n.parentRowCtrl=i,n.instanceId=e.getUniqueId()+"-"+dE++,n}return cE(t,r),t.prototype.shouldStopEventPropagation=function(e){var i=this.focusService.getFocusedHeader();return Jp(this.gridOptionsService,e,i.headerRowIndex,i.column)},t.prototype.getWrapperHasFocus=function(){return this.gridOptionsService.getDocument().activeElement===this.eGui},t.prototype.setGui=function(e){this.eGui=e,this.addDomData()},t.prototype.handleKeyDown=function(e){var i=this.getWrapperHasFocus();switch(e.key){case M.PAGE_DOWN:case M.PAGE_UP:case M.PAGE_HOME:case M.PAGE_END:i&&e.preventDefault()}},t.prototype.addDomData=function(){var e=this,i=t.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,i,this),this.addDestroyFunc(function(){return e.gridOptionsService.setDomData(e.eGui,i,null)})},t.prototype.getGui=function(){return this.eGui},t.prototype.focus=function(e){return!!this.eGui&&(this.lastFocusEvent=e||null,this.eGui.focus(),!0)},t.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},t.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},t.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.getColumnGroupChild=function(){return this.columnGroupChild},t.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",gd([S("focusService")],t.prototype,"focusService",void 0),gd([S("beans")],t.prototype,"beans",void 0),gd([S("userComponentFactory")],t.prototype,"userComponentFactory",void 0),t}(k),hE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),yd=function(r){function t(e,i,n,o){var s=r.call(this)||this;return s.columnOrGroup=e,s.eCell=i,s.ariaEl=s.eCell.querySelector("[role=columnheader]")||s.eCell,s.colsSpanning=o,s.beans=n,s}return hE(t,r),t.prototype.setColsSpanning=function(e){this.colsSpanning=e,this.onLeftChanged()},t.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?Pe(this.colsSpanning):this.columnOrGroup},t.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,Ae.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))},t.prototype.setLeftFirstTime=function(){var e=this.beans.gridOptionsService.is("suppressColumnMoveAnimation"),i=I(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&i&&!e?this.animateInLeft():this.onLeftChanged()},t.prototype.animateInLeft=function(){var e=this,i=this.getColumnOrGroup(),n=i.getLeft(),o=i.getOldLeft(),s=this.modifyLeftForPrintLayout(i,o),a=this.modifyLeftForPrintLayout(i,n);this.setLeft(s),this.actualLeft=a,this.beans.columnAnimationService.executeNextVMTurn(function(){e.actualLeft===a&&e.setLeft(a)})},t.prototype.onLeftChanged=function(){var e=this.getColumnOrGroup(),i=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,i),this.setLeft(this.actualLeft)},t.prototype.modifyLeftForPrintLayout=function(e,i){if(!this.beans.gridOptionsService.isDomLayout("print")||"left"===e.getPinned())return i;var o=this.beans.columnModel.getDisplayedColumnsLeftWidth();return"right"===e.getPinned()?o+this.beans.columnModel.getBodyContainerWidth()+i:o+i},t.prototype.setLeft=function(e){var i;if(I(e)&&(this.eCell.style.left=e+"px"),this.columnOrGroup instanceof Ae)i=this.columnOrGroup;else{var o=this.columnOrGroup.getLeafColumns();if(!o.length)return;o.length>1&&Fp(this.ariaEl,o.length),i=o[0]}var s=this.beans.columnModel.getAriaColumnIndex(i);sc(this.ariaEl,s)},function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([V],t.prototype,"postConstruct",null),t}(k),fE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),iv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},md=function(r){function t(e,i){var n=r.call(this)||this;return n.columns=e,n.element=i,n}return fE(t,r),t.prototype.postConstruct=function(){this.gridOptionsService.is("columnHoverHighlight")&&this.addMouseHoverListeners()},t.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},t.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},t.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},iv([S("columnHoverService")],t.prototype,"columnHoverService",void 0),iv([V],t.prototype,"postConstruct",null),t}(k),vE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Cd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},gE=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.iconCreated=!1,n.column=e,n}return vE(t,r),t.prototype.setComp=function(e,i,n,o){r.prototype.setGui.call(this,i),this.comp=e,this.eButtonShowMainFilter=n,this.eFloatingFilterBody=o,this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,Ae.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))},t.prototype.setupActive=function(){var e=this.column.getColDef();this.active=!!e.filter&&!!e.floatingFilter},t.prototype.setupUi=function(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),this.active&&!this.iconCreated){var e=Ke("filter",this.gridOptionsService,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}},t.prototype.setupFocus=function(){this.createManagedBean(new no(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},t.prototype.setupAria=function(){var e=this.localeService.getLocaleTextFunc();xn(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))},t.prototype.onTabKeyDown=function(e){if(this.gridOptionsService.getDocument().activeElement!==this.eGui){var s=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(s)return this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),void s.focus();var a=this.findNextColumnWithFloatingFilter(e.shiftKey);a&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:a},event:e})&&e.preventDefault()}},t.prototype.findNextColumnWithFloatingFilter=function(e){var i=this.beans.columnModel,n=this.column;do{if(!(n=e?i.getDisplayedColBefore(n):i.getDisplayedColAfter(n)))break}while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n},t.prototype.handleKeyDown=function(e){r.prototype.handleKeyDown.call(this,e);var i=this.getWrapperHasFocus();switch(e.key){case M.UP:case M.DOWN:i||e.preventDefault();case M.LEFT:case M.RIGHT:if(i)return;e.stopPropagation();case M.ENTER:i&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case M.ESCAPE:i||this.eGui.focus()}},t.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),o=!!e.relatedTarget&&ko(e.relatedTarget,"ag-floating-filter");if(n&&o&&e.target===this.eGui){var s=this.lastFocusEvent;s&&s&&s.key===M.TAB&&this.focusService.focusInto(this.eGui,s.shiftKey)}var u=this.getRowIndex();this.beans.focusService.setFocusedHeader(u,this.column)}},t.prototype.setupHover=function(){var e=this;this.createManagedBean(new md([this.column],this.eGui));var i=function(){if(e.gridOptionsService.is("columnHoverHighlight")){var n=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",n)}};this.addManagedListener(this.eventService,E.EVENT_COLUMN_HOVER_CHANGED,i),i()},t.prototype.setupLeft=function(){var e=new yd(this.column,this.eGui,this.beans);this.createManagedBean(e)},t.prototype.setupFilterButton=function(){var e=this.column.getColDef();this.suppressFilterButton=!!e.floatingFilterComponentParams&&!!e.floatingFilterComponentParams.suppressFilterButton},t.prototype.setupUserComp=function(){var e=this;if(this.active){var i=this.filterManager.getFloatingFilterCompDetails(this.column,function(){return e.showParentFilter()});i&&this.setCompDetails(i)}},t.prototype.setCompDetails=function(e){this.userCompDetails=e,this.comp.setCompDetails(e)},t.prototype.showParentFilter=function(){this.menuFactory.showMenuAfterButtonClick(this.column,this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter,"floatingFilter","filterMenuTab",["filterMenuTab"])},t.prototype.setupSyncWithFilter=function(){var e=this;if(this.active){var i=function(n){var o=e.comp.getFloatingFilterComp();o&&o.then(function(s){if(s){var a=e.filterManager.getCurrentFloatingFilterParentModel(e.column);s.onParentModelChanged(a,n)}})};this.destroySyncListener=this.addManagedListener(this.column,Ae.EVENT_FILTER_CHANGED,i),this.filterManager.isFilterActive(this.column)&&i(null)}},t.prototype.setupWidth=function(){var e=this,i=function(){var n=e.column.getActualWidth()+"px";e.comp.setWidth(n)};this.addManagedListener(this.column,Ae.EVENT_WIDTH_CHANGED,i),i()},t.prototype.setupFilterChangedListener=function(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,Ae.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)))},t.prototype.updateFilterButton=function(){!this.suppressFilterButton&&this.comp&&this.comp.setButtonWrapperDisplayed(this.filterManager.isFilterAllowed(this.column))},t.prototype.onColDefChanged=function(){var i,n,e=this,o=this.active;this.setupActive();var s=!o&&this.active;o&&!this.active&&(null===(i=this.destroySyncListener)||void 0===i||i.call(this),null===(n=this.destroyFilterChangedListener)||void 0===n||n.call(this));var a=this.active?this.filterManager.getFloatingFilterCompDetails(this.column,function(){return e.showParentFilter()}):null,l=this.comp.getFloatingFilterComp();l&&a?l.then(function(u){var c;!u||e.filterManager.areFilterCompsDifferent(null!==(c=e.userCompDetails)&&void 0!==c?c:null,a)?e.updateCompDetails(a,s):e.updateFloatingFilterParams(a)}):this.updateCompDetails(a,s)},t.prototype.updateCompDetails=function(e,i){this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(),this.setupFilterChangedListener())},t.prototype.updateFloatingFilterParams=function(e){var i;if(e){var n=e.params;null===(i=this.comp.getFloatingFilterComp())||void 0===i||i.then(function(o){o?.onParamsUpdated&&"function"==typeof o.onParamsUpdated&&o.onParamsUpdated(n)})}},Cd([S("filterManager")],t.prototype,"filterManager",void 0),Cd([S("columnHoverService")],t.prototype,"columnHoverService",void 0),Cd([S("menuFactory")],t.prototype,"menuFactory",void 0),t}(yl),yE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),wd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},mE=function(r){function t(e,i,n,o,s){var a=r.call(this)||this;return a.pinned=e,a.column=i,a.eResize=n,a.comp=o,a.ctrl=s,a}return yE(t,r),t.prototype.postConstruct=function(){var o,s,e=this,i=this.column.getColDef(),n=[],l=function(){n.forEach(function(c){return c()}),n.length=0},u=function(){var c=e.column.isResizable(),d=!e.gridOptionsService.is("suppressAutoSize")&&!i.suppressAutoSize;(c!==o||d!==s)&&(o=c,s=d,l(),function(){if(Ce(e.eResize,o),o){var c=e.horizontalResizeService.addResizeBar({eResizeBar:e.eResize,onResizeStart:e.onResizeStart.bind(e),onResizing:e.onResizing.bind(e,!1),onResizeEnd:e.onResizing.bind(e,!0)});if(n.push(c),s){var d=e.gridOptionsService.is("skipHeaderOnAutoSize"),h=function(){e.columnModel.autoSizeColumn(e.column,d,"uiColumnResized")};e.eResize.addEventListener("dblclick",h);var p=new ni(e.eResize);p.addEventListener(ni.EVENT_DOUBLE_TAP,h),e.addDestroyFunc(function(){e.eResize.removeEventListener("dblclick",h),p.removeEventListener(ni.EVENT_DOUBLE_TAP,h),p.destroy()})}}}())};u(),this.addDestroyFunc(l),this.ctrl.addRefreshFunction(u)},t.prototype.onResizing=function(e,i){var n=this.normaliseResizeAmount(i);this.columnModel.setColumnWidths([{key:this.column,newWidth:this.resizeStartWidth+n}],this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},t.prototype.onResizeStart=function(e){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=e,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},t.prototype.normaliseResizeAmount=function(e){var i=e,n="left"!==this.pinned,o="right"===this.pinned;return this.gridOptionsService.is("enableRtl")?n&&(i*=-1):o&&(i*=-1),i},wd([S("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),wd([S("columnModel")],t.prototype,"columnModel",void 0),wd([V],t.prototype,"postConstruct",null),t}(k),CE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ml=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},wE=function(r){function t(e){var i=r.call(this)||this;i.cbSelectAllVisible=!1,i.processingEventFromCheckbox=!1,i.column=e;var n=e.getColDef();return i.filteredOnly=!!n?.headerCheckboxSelectionFilteredOnly,i.currentPageOnly=!!n?.headerCheckboxSelectionCurrentPageOnly,i}return CE(t,r),t.prototype.onSpaceKeyDown=function(e){var i=this.cbSelectAll,n=this.gridOptionsService.getDocument();i.isDisplayed()&&!i.getGui().contains(n.activeElement)&&(e.preventDefault(),i.setValue(!i.getValue()))},t.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},t.prototype.setComp=function(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new tl),this.cbSelectAll.addCssClass("ag-header-select-all"),ot(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,E.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,E.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),ja(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},t.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()},t.prototype.onModelChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},t.prototype.onSelectionChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},t.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var e=this.selectionService.getSelectAllState(this.filteredOnly,this.currentPageOnly);this.cbSelectAll.setValue(e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},t.prototype.refreshSelectAllLabel=function(){var e=this.localeService.getLocaleTextFunc(),n=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),o=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.headerCellCtrl.setAriaDescriptionProperty("selectAll",this.cbSelectAllVisible?o+" ("+n+")":null),this.cbSelectAll.setInputAriaLabel(o+" ("+n+")"),this.headerCellCtrl.refreshAriaDescription()},t.prototype.checkSelectionType=function(e){return!("multiple"!==this.gridOptionsService.get("rowSelection")&&(console.warn("AG Grid: "+e+" is only available if using 'multiple' rowSelection."),1))},t.prototype.checkRightRowModelType=function(e){var i=this.rowModel.getType();return!("clientSide"!==i&&"serverSide"!==i&&(console.warn("AG Grid: "+e+" is only available if using 'clientSide' or 'serverSide' rowModelType, you are using "+i+"."),1))},t.prototype.onCbSelectAll=function(){if(!this.processingEventFromCheckbox&&this.cbSelectAllVisible){var e=this.cbSelectAll.getValue(),i="uiSelectAll";this.currentPageOnly?i="uiSelectAllCurrentPage":this.filteredOnly&&(i="uiSelectAllFiltered");var n={source:i,justFiltered:this.filteredOnly,justCurrentPage:this.currentPageOnly};e?this.selectionService.selectAllRowNodes(n):this.selectionService.deselectAllRowNodes(n)}},t.prototype.isCheckboxSelection=function(){var e=this.column.getColDef().headerCheckboxSelection;return"function"==typeof e&&(e=e({column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi,context:this.gridOptionsService.context})),!!e&&this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection")},ml([S("gridApi")],t.prototype,"gridApi",void 0),ml([S("columnApi")],t.prototype,"columnApi",void 0),ml([S("rowModel")],t.prototype,"rowModel",void 0),ml([S("selectionService")],t.prototype,"selectionService",void 0),t}(k),SE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),nv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Is=function(r){return r.TAB_GUARD="ag-tab-guard",r.TAB_GUARD_TOP="ag-tab-guard-top",r.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",r}(Is||{}),_E=function(r){function t(e){var i=r.call(this)||this;i.skipTabGuardFocus=!1;var o=e.eTopGuard,s=e.eBottomGuard,a=e.focusInnerElement,l=e.onFocusIn,u=e.onFocusOut,c=e.shouldStopEventPropagation,d=e.onTabKeyDown,h=e.handleKeyDown,p=e.eFocusableElement;return i.comp=e.comp,i.eTopGuard=o,i.eBottomGuard=s,i.providedFocusInnerElement=a,i.eFocusableElement=p,i.providedFocusIn=l,i.providedFocusOut=u,i.providedShouldStopEventPropagation=c,i.providedOnTabKeyDown=d,i.providedHandleKeyDown=h,i}return SE(t,r),t.prototype.postConstruct=function(){var e=this;this.createManagedBean(new no(this.eFocusableElement,{shouldStopEventPropagation:function(){return e.shouldStopEventPropagation()},onTabKeyDown:function(i){return e.onTabKeyDown(i)},handleKeyDown:function(i){return e.handleKeyDown(i)},onFocusIn:function(i){return e.onFocusIn(i)},onFocusOut:function(i){return e.onFocusOut(i)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(function(i){return e.addManagedListener(i,"focus",e.onFocus.bind(e))})},t.prototype.handleKeyDown=function(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)},t.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},t.prototype.shouldStopEventPropagation=function(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()},t.prototype.activateTabGuards=function(){var e=this.gridOptionsService.getNum("tabIndex")||0;this.comp.setTabIndex(e.toString())},t.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},t.prototype.onFocus=function(e){if(this.skipTabGuardFocus)this.skipTabGuardFocus=!1;else{var i=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(i):this.focusInnerElement(i)}},t.prototype.onFocusIn=function(e){this.providedFocusIn&&this.providedFocusIn(e)||this.deactivateTabGuards()},t.prototype.onFocusOut=function(e){this.providedFocusOut&&this.providedFocusOut(e)||this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards()},t.prototype.onTabKeyDown=function(e){var i=this;if(this.providedOnTabKeyDown)this.providedOnTabKeyDown(e);else if(!e.defaultPrevented){var n=this.tabGuardsAreActive();n&&this.deactivateTabGuards();var o=this.getNextFocusableElement(e.shiftKey);n&&setTimeout(function(){return i.activateTabGuards()},0),o&&(o.focus(),e.preventDefault())}},t.prototype.focusInnerElement=function(e){void 0===e&&(e=!1);var i=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(i.splice(0,1),i.splice(i.length-1,1)),i.length&&i[e?i.length-1:0].focus({preventScroll:!0})},t.prototype.getNextFocusableElement=function(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)},t.prototype.forceFocusOutOfContainer=function(e){void 0===e&&(e=!1);var i=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,i.focus()},nv([S("focusService")],t.prototype,"focusService",void 0),nv([V],t.prototype,"postConstruct",null),t}(k),EE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ns=function(){return Ns=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Ns.apply(this,arguments)},ai=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Er=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}var e;return EE(t,r),e=t,t.addKeyboardModeEvents=function(i,n){var o=e.instancesMonitored.get(i);o&&o.length>0?-1===o.indexOf(n)&&o.push(n):(e.instancesMonitored.set(i,[n]),i.addEventListener("keydown",e.toggleKeyboardMode),i.addEventListener("mousedown",e.toggleKeyboardMode))},t.removeKeyboardModeEvents=function(i,n){var o=e.instancesMonitored.get(i),s=[];o&&o.length&&(s=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r}([],function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(o)).filter(function(a){return a!==n}),e.instancesMonitored.set(i,s)),0===s.length&&(i.removeEventListener("keydown",e.toggleKeyboardMode),i.removeEventListener("mousedown",e.toggleKeyboardMode))},t.toggleKeyboardMode=function(i){var n=e.keyboardModeActive,o="keydown"===i.type;if(!(o&&(i.ctrlKey||i.metaKey||i.altKey)||n&&o||!n&&!o)){e.keyboardModeActive=o;var s=i.target.ownerDocument;if(s){var a=e.instancesMonitored.get(s);a&&a.forEach(function(l){l.dispatchEvent({type:o?E.EVENT_KEYBOARD_FOCUS:E.EVENT_MOUSE_FOCUS})})}}},t.prototype.init=function(){var i=this,n=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,n),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_GROUP_OPENED,n),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,n),this.ctrlsService.whenReady(function(o){i.gridCtrl=o.gridCtrl;var s=i.gridOptionsService.getDocument();e.addKeyboardModeEvents(s,i.gridCtrl),i.addDestroyFunc(function(){return i.unregisterGridCompController(i.gridCtrl)})})},t.prototype.unregisterGridCompController=function(i){var n=this.gridOptionsService.getDocument();e.removeKeyboardModeEvents(n,i)},t.prototype.onColumnEverythingChanged=function(){if(this.focusedCellPosition){var i=this.focusedCellPosition.column,n=this.columnModel.getGridColumn(i.getId());i!==n&&this.clearFocusedCell()}},t.prototype.isKeyboardMode=function(){return e.keyboardModeActive},t.prototype.getFocusCellToUseAfterRefresh=function(){var i=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(i.activeElement,$o.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},t.prototype.getFocusHeaderToUseAfterRefresh=function(){var i=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(i.activeElement,yl.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},t.prototype.isDomDataMissingInHierarchy=function(i,n){for(var o=i;o;){if(this.gridOptionsService.getDomData(o,n))return!1;o=o.parentNode}return!0},t.prototype.getFocusedCell=function(){return this.focusedCellPosition},t.prototype.shouldRestoreFocus=function(i){var n=this;return!!this.isCellRestoreFocused(i)&&(setTimeout(function(){n.restoredFocusedCellPosition=null},0),!0)},t.prototype.isCellRestoreFocused=function(i){return null!=this.restoredFocusedCellPosition&&this.cellPositionUtils.equals(i,this.restoredFocusedCellPosition)},t.prototype.setRestoreFocusedCell=function(i){"react"===this.getFrameworkOverrides().renderingEngine&&(this.restoredFocusedCellPosition=i)},t.prototype.getFocusEventParams=function(){var i=this.focusedCellPosition,n=i.rowIndex,o=i.rowPinned,a={rowIndex:n,rowPinned:o,column:i.column,isFullWidthCell:!1},l=this.rowRenderer.getRowByPosition({rowIndex:n,rowPinned:o});return l&&(a.isFullWidthCell=l.isFullWidth()),a},t.prototype.clearFocusedCell=function(){if(this.restoredFocusedCellPosition=null,null!=this.focusedCellPosition){var i=Ns({type:E.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(i)}},t.prototype.setFocusedCell=function(i){var o=i.rowIndex,s=i.rowPinned,a=i.forceBrowserFocus,l=void 0!==a&&a,u=i.preventScrollOnBrowserFocus,c=void 0!==u&&u,d=this.columnModel.getGridColumn(i.column);if(d){this.focusedCellPosition=d?{rowIndex:o,rowPinned:en(s),column:d}:null;var h=Ns(Ns({type:E.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:l,preventScrollOnBrowserFocus:c,floating:null});this.eventService.dispatchEvent(h)}else this.focusedCellPosition=null},t.prototype.isCellFocused=function(i){return null!=this.focusedCellPosition&&this.cellPositionUtils.equals(i,this.focusedCellPosition)},t.prototype.isRowNodeFocused=function(i){return this.isRowFocused(i.rowIndex,i.rowPinned)},t.prototype.isHeaderWrapperFocused=function(i){if(null==this.focusedHeaderPosition)return!1;var n=i.getColumnGroupChild(),o=i.getRowIndex(),s=i.getPinned(),a=this.focusedHeaderPosition,l=a.column;return n===l&&o===a.headerRowIndex&&s==l.getPinned()},t.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},t.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},t.prototype.setFocusedHeader=function(i,n){this.focusedHeaderPosition={headerRowIndex:i,column:n}},t.prototype.focusHeaderPosition=function(i){var n=i.direction,o=i.fromTab,s=i.allowUserOverride,a=i.event,u=i.headerPosition;if(i.fromCell&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(u);if(s){var h,c=this.getFocusedHeader(),d=this.headerNavigationService.getHeaderRowCount();o?(h=this.gridOptionsService.getCallback("tabToNextHeader"))&&(u=h({backwards:"Before"===n,previousHeaderPosition:c,nextHeaderPosition:u,headerRowCount:d})):(h=this.gridOptionsService.getCallback("navigateToNextHeader"))&&a&&(u=h({key:a.key,previousHeaderPosition:c,nextHeaderPosition:u,headerRowCount:d,event:a}))}return!!u&&(-1===u.headerRowIndex?this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(u):this.focusGridView(u.column):(this.headerNavigationService.scrollToColumn(u.column,n),this.ctrlsService.getHeaderRowContainerCtrl(u.column.getPinned()).focusHeader(u.headerRowIndex,u.column,a)))},t.prototype.focusFirstHeader=function(){var i=this.columnModel.getAllDisplayedColumns()[0];return!!i&&(i.getParent()&&(i=this.columnModel.getColumnGroupAtLevel(i,0)),this.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:i}}))},t.prototype.focusLastHeader=function(i){var n=this.headerNavigationService.getHeaderRowCount()-1,o=Pe(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:n,column:o},event:i})},t.prototype.focusPreviousFromFirstCell=function(i){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(i)},t.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},t.prototype.isRowFocused=function(i,n){return null!=this.focusedCellPosition&&this.focusedCellPosition.rowIndex===i&&this.focusedCellPosition.rowPinned===en(n)},t.prototype.findFocusableElements=function(i,n,o){void 0===o&&(o=!1);var a=Sc;n&&(a+=", "+n),o&&(a+=', [tabindex="-1"]');var h,l=Array.prototype.slice.apply(i.querySelectorAll(zp)),u=Array.prototype.slice.apply(i.querySelectorAll(a));return u.length?(h=u,l.filter(function(p){return-1===h.indexOf(p)})):l},t.prototype.focusInto=function(i,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var s=this.findFocusableElements(i,null,o),a=n?Pe(s):s[0];return!!a&&(a.focus({preventScroll:!0}),!0)},t.prototype.findFocusableElementBeforeTabGuard=function(i,n){if(!n)return null;var o=this.findFocusableElements(i),s=o.indexOf(n);if(-1===s)return null;for(var a=-1,l=s-1;l>=0;l--)if(o[l].classList.contains(Is.TAB_GUARD_TOP)){a=l;break}return a<=0?null:o[a-1]},t.prototype.findNextFocusableElement=function(i,n,o){void 0===i&&(i=this.eGridDiv);var s=this.findFocusableElements(i,n?':not([tabindex="-1"])':null),l=this.gridOptionsService.getDocument().activeElement,c=(n?s.findIndex(function(d){return d.contains(l)}):s.indexOf(l))+(o?-1:1);return c<0||c>=s.length?null:s[c]},t.prototype.isTargetUnderManagedComponent=function(i,n){if(!n)return!1;var o=i.querySelectorAll("."+no.FOCUS_MANAGED_CLASS);if(!o.length)return!1;for(var s=0;s<o.length;s++)if(o[s].contains(n))return!0;return!1},t.prototype.findTabbableParent=function(i,n){void 0===n&&(n=5);for(var o=0;i&&null===Ya(i)&&++o<=n;)i=i.parentElement;return null===Ya(i)?null:i},t.prototype.focusGridView=function(i,n){if(this.gridOptionsService.is("suppressCellFocus"))return n?this.focusLastHeader():this.focusNextGridCoreContainer(!1);var o=n?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!o)return!1;var s=o.rowIndex,a=o.rowPinned,l=this.getFocusedHeader();return!i&&l&&(i=l.column),!(null==s||!i)&&(this.navigationService.ensureCellVisible({rowIndex:s,column:i,rowPinned:a}),this.setFocusedCell({rowIndex:s,column:i,rowPinned:en(a),forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell({rowIndex:s,rowPinned:a,column:i}),!0)},t.prototype.focusNextGridCoreContainer=function(i,n){return void 0===n&&(n=!1),!(n||!this.gridCtrl.focusNextInnerContainer(i))||((n||!i&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(i),!1)},t.prototype.focusAdvancedFilter=function(i){return this.advancedFilterFocusColumn=i?.column,this.advancedFilterService.getCtrl().focusHeaderComp()},t.prototype.focusNextFromAdvancedFilter=function(i,n){var o,s,a=null!==(o=n?void 0:this.advancedFilterFocusColumn)&&void 0!==o?o:null===(s=this.columnModel.getAllDisplayedColumns())||void 0===s?void 0:s[0];return i?this.focusHeaderPosition({headerPosition:{column:a,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(a)},t.prototype.clearAdvancedFilterColumn=function(){this.advancedFilterFocusColumn=void 0},t.AG_KEYBOARD_FOCUS="ag-keyboard-focus",t.keyboardModeActive=!1,t.instancesMonitored=new Map,ai([S("eGridDiv")],t.prototype,"eGridDiv",void 0),ai([S("columnModel")],t.prototype,"columnModel",void 0),ai([S("headerNavigationService")],t.prototype,"headerNavigationService",void 0),ai([S("rowRenderer")],t.prototype,"rowRenderer",void 0),ai([S("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),ai([S("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),ai([we("rangeService")],t.prototype,"rangeService",void 0),ai([S("navigationService")],t.prototype,"navigationService",void 0),ai([S("ctrlsService")],t.prototype,"ctrlsService",void 0),ai([S("filterManager")],t.prototype,"filterManager",void 0),ai([we("advancedFilterService")],t.prototype,"advancedFilterService",void 0),ai([V],t.prototype,"init",null),e=ai([X("focusService")],t)}(k),OE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ln=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},xE=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.refreshFunctions=[],n.userHeaderClasses=new Set,n.ariaDescriptionProperties=new Map,n.column=e,n}return OE(t,r),t.prototype.setComp=function(e,i,n,o){var s=this;r.prototype.setGui.call(this,i),this.comp=e,this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(o),this.addColumnHoverListener(),this.setupFilterCss(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.createManagedBean(new mE(this.getPinned(),this.column,n,e,this)),this.createManagedBean(new md([this.column],i)),this.createManagedBean(new yd(this.column,i,this.beans)),this.createManagedBean(new no(i,{shouldStopEventPropagation:function(a){return s.shouldStopEventPropagation(a)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addMouseDownListenerIfNeeded(i),this.addManagedListener(this.column,Ae.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onHeaderHeightChanged.bind(this))},t.prototype.addMouseDownListenerIfNeeded=function(e){var i=this;if(Ei()){var o=this.gridOptionsService.getDocument();["mousedown","touchstart"].forEach(function(s){i.addManagedListener(e,s,function(a){var l=o.activeElement;l!==e&&!e.contains(l)&&(e.focus(),Er.toggleKeyboardMode(a))})})}},t.prototype.setupUserComp=function(){var e=this.lookupUserCompDetails();this.setCompDetails(e)},t.prototype.setCompDetails=function(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)},t.prototype.lookupUserCompDetails=function(){var e=this.createParams(),i=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(i,e)},t.prototype.createParams=function(){var e=this,i=this.column.getColDef();return{column:this.column,displayName:this.displayName,enableSorting:i.sortable,enableMenu:this.menuEnabled,showColumnMenu:function(o){e.gridApi.showColumnMenuAfterButtonClick(e.column,o)},progressSort:function(o){e.sortController.progressSort(e.column,!!o,"uiColumnSorted")},setSort:function(o,s){e.sortController.setSortForColumn(e.column,o,!!s,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context,eGridHeader:this.getGui()}},t.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new wE(this.column)),this.selectAllFeature.setComp(this)},t.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},t.prototype.handleKeyDown=function(e){r.prototype.handleKeyDown.call(this,e),e.key===M.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===M.ENTER&&this.onEnterKeyDown(e)},t.prototype.onEnterKeyDown=function(e){var i=this.comp.getUserCompInstance();i&&(e.ctrlKey||e.metaKey?this.menuEnabled&&i.showMenu&&(e.preventDefault(),i.showMenu()):this.sortable&&this.sortController.progressSort(this.column,e.shiftKey,"uiColumnSorted"))},t.prototype.isMenuEnabled=function(){return this.menuEnabled},t.prototype.onFocusIn=function(e){if(!this.getGui().contains(e.relatedTarget)){var i=this.getRowIndex();this.focusService.setFocusedHeader(i,this.column)}this.setActiveHeader(!0)},t.prototype.onFocusOut=function(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)},t.prototype.setupTooltip=function(){var e=this,n=this.createManagedBean(new ad({getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getGui:function(){return e.eGui},getLocation:function(){return"header"},getTooltipValue:function(){return e.column.getColDef().headerTooltip}},this.beans));n.setComp(this.eGui),this.refreshFunctions.push(function(){return n.refreshToolTip()})},t.prototype.setupClassesFromColDef=function(){var e=this,i=function(){var n=e.column.getColDef(),o=ev.getHeaderClassesFromColDef(n,e.gridOptionsService,e.column,null),s=e.userHeaderClasses;e.userHeaderClasses=new Set(o),o.forEach(function(a){s.has(a)?s.delete(a):e.comp.addOrRemoveCssClass(a,!0)}),s.forEach(function(a){return e.comp.addOrRemoveCssClass(a,!1)})};this.refreshFunctions.push(i),i()},t.prototype.setDragSource=function(e){var i=this;if(this.dragSourceElement=e,this.removeDragSource(),e&&this.draggable){var n=!this.gridOptionsService.is("suppressDragLeaveHidesColumns");this.moveDragSource={type:Ut.HeaderCell,eElement:e,getDefaultIconName:function(){return n?ct.ICON_HIDE:ct.ICON_NOT_ALLOWED},getDragItem:function(){return i.createDragItem()},dragItemName:this.displayName,onDragStarted:function(){n=!i.gridOptionsService.is("suppressDragLeaveHidesColumns"),i.column.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return i.column.setMoving(!1,"uiColumnMoved")},onGridEnter:function(o){var s;if(n){var a=(null===(s=o?.columns)||void 0===s?void 0:s.filter(function(l){return!l.getColDef().lockVisible}))||[];i.columnModel.setColumnsVisible(a,!0,"uiColumnMoved")}},onGridExit:function(o){var s;if(n){var a=(null===(s=o?.columns)||void 0===s?void 0:s.filter(function(l){return!l.getColDef().lockVisible}))||[];i.columnModel.setColumnsVisible(a,!1,"uiColumnMoved")}}},this.dragAndDropService.addDragSource(this.moveDragSource,!0)}},t.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},t.prototype.removeDragSource=function(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)},t.prototype.onColDefChanged=function(){this.refresh()},t.prototype.updateState=function(){var e=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!e.suppressMenu,this.sortable=e.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},t.prototype.addRefreshFunction=function(e){this.refreshFunctions.push(e)},t.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(function(e){return e()})},t.prototype.refreshHeaderComp=function(){var e=this.lookupUserCompDetails();null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)},t.prototype.attemptHeaderCompRefresh=function(e){var i=this.comp.getUserCompInstance();return!(!i||!i.refresh)&&i.refresh(e)},t.prototype.calculateDisplayName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)},t.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},t.prototype.workOutDraggable=function(){var e=this.column.getColDef();return!(this.gridOptionsService.is("suppressMovableColumns")||e.suppressMovable||e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot},t.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},t.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},t.prototype.onColumnValueChanged=function(){this.checkDisplayName()},t.prototype.setupWidth=function(){var e=this,i=function(){var n=e.column.getActualWidth();e.comp.setWidth(n+"px")};this.addManagedListener(this.column,Ae.EVENT_WIDTH_CHANGED,i),i()},t.prototype.setupMovingCss=function(){var e=this,i=function(){e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.column.isMoving())};this.addManagedListener(this.column,Ae.EVENT_MOVING_CHANGED,i),i()},t.prototype.setupMenuClass=function(){var e=this,i=function(){e.comp.addOrRemoveCssClass("ag-column-menu-visible",e.column.isMenuVisible())};this.addManagedListener(this.column,Ae.EVENT_MENU_VISIBLE_CHANGED,i),i()},t.prototype.setupSortableClass=function(){var e=this,i=function(){e.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!e.sortable)};i(),this.addRefreshFunction(i),this.addManagedListener(this.eventService,Ae.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))},t.prototype.setupWrapTextClass=function(){var e=this,i=function(){var n=!!e.column.getColDef().wrapHeaderText;e.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",n)};i(),this.addRefreshFunction(i)},t.prototype.onHeaderHeightChanged=function(){this.refreshSpanHeaderHeight()},t.prototype.refreshSpanHeaderHeight=function(){var e=this,i=e.eGui,o=e.comp,s=e.columnModel,a=e.gridOptionsService;if(e.column.isSpanHeaderHeight()){var l=this.getColumnGroupPaddingInfo(),u=l.numberOfParents,c=l.isSpanningTotal;o.addOrRemoveCssClass("ag-header-span-height",u>0);var d=s.getColumnHeaderRowHeight();if(0===u)return o.addOrRemoveCssClass("ag-header-span-total",!1),i.style.setProperty("top","0px"),void i.style.setProperty("height",d+"px");o.addOrRemoveCssClass("ag-header-span-total",c);var f=u*(a.is("pivotMode")?s.getPivotGroupHeaderHeight():s.getGroupHeaderHeight());i.style.setProperty("top",-f+"px"),i.style.setProperty("height",d+f+"px")}},t.prototype.getColumnGroupPaddingInfo=function(){var e=this.column.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};for(var i=e.getPaddingLevel()+1,n=!0;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:i,isSpanningTotal:n}},t.prototype.setupAutoHeight=function(e){var s,i=this,n=function(c){if(i.isAlive()){var d=to(i.getGui()),m=e.offsetHeight+(d.paddingTop+d.paddingBottom+d.borderBottomWidth+d.borderTopWidth);if(c<5){var C=i.beans.gridOptionsService.getDocument();if(!C||!C.contains(e)||0==m)return void i.beans.frameworkOverrides.setTimeout(function(){return n(c+1)},0)}i.columnModel.setColumnHeaderHeight(i.column,m)}},o=!1,a=function(){var c=i.column.isAutoHeaderHeight();c&&!o&&l(),!c&&o&&u()},l=function(){o=!0,n(0),i.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),s=i.resizeObserverService.observeResize(e,function(){return n(0)})},u=function(){o=!1,s&&s(),i.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),s=void 0};a(),this.addDestroyFunc(function(){return u()}),this.addManagedListener(this.column,Ae.EVENT_WIDTH_CHANGED,function(){return o&&n(0)}),this.addManagedListener(this.eventService,Ae.EVENT_SORT_CHANGED,function(){o&&i.beans.frameworkOverrides.setTimeout(function(){return n(0)})}),this.addRefreshFunction(a)},t.prototype.refreshAriaSort=function(){if(this.sortable){var e=this.localeService.getLocaleTextFunc(),i=this.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(Ep(i)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort."))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)},t.prototype.refreshAriaMenu=function(){if(this.menuEnabled){var e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press CTRL ENTER to open column menu."))}else this.setAriaDescriptionProperty("menu",null)},t.prototype.setAriaDescriptionProperty=function(e,i){null!=i?this.ariaDescriptionProperties.set(e,i):this.ariaDescriptionProperties.delete(e)},t.prototype.refreshAriaDescription=function(){var e=Array.from(this.ariaDescriptionProperties.values());this.comp.setAriaDescription(e.length?e.join(" "):void 0)},t.prototype.refreshAria=function(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaDescription()},t.prototype.addColumnHoverListener=function(){var e=this,i=function(){if(e.gridOptionsService.is("columnHoverHighlight")){var n=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",n)}};this.addManagedListener(this.eventService,E.EVENT_COLUMN_HOVER_CHANGED,i),i()},t.prototype.setupFilterCss=function(){var e=this,i=function(){e.comp.addOrRemoveCssClass("ag-header-cell-filtered",e.column.isFilterActive())};this.addManagedListener(this.column,Ae.EVENT_FILTER_ACTIVE_CHANGED,i),i()},t.prototype.getColId=function(){return this.column.getColId()},t.prototype.addActiveHeaderMouseListeners=function(){var e=this,i=function(n){return e.setActiveHeader("mouseenter"===n.type)};this.addManagedListener(this.getGui(),"mouseenter",i),this.addManagedListener(this.getGui(),"mouseleave",i)},t.prototype.setActiveHeader=function(e){this.comp.addOrRemoveCssClass("ag-header-active",e)},Ln([S("columnModel")],t.prototype,"columnModel",void 0),Ln([S("columnHoverService")],t.prototype,"columnHoverService",void 0),Ln([S("sortController")],t.prototype,"sortController",void 0),Ln([S("menuFactory")],t.prototype,"menuFactory",void 0),Ln([S("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Ln([S("resizeObserverService")],t.prototype,"resizeObserverService",void 0),Ln([S("gridApi")],t.prototype,"gridApi",void 0),Ln([S("columnApi")],t.prototype,"columnApi",void 0),Ln([lt],t.prototype,"removeDragSource",null),t}(yl),DE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Cl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},TE=function(r){function t(e,i,n,o){var s=r.call(this)||this;return s.eResize=i,s.comp=e,s.pinned=n,s.columnGroup=o,s}return DE(t,r),t.prototype.postConstruct=function(){var e=this;if(this.columnGroup.isResizable()){var i=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(i),!this.gridOptionsService.is("suppressAutoSize")){var n=this.gridOptionsService.is("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",function(){var o=[];e.columnGroup.getDisplayedLeafColumns().forEach(function(a){a.getColDef().suppressAutoSize||o.push(a.getColId())}),o.length>0&&e.columnModel.autoSizeColumns({columns:o,skipHeader:n,stopAtGroup:e.columnGroup,source:"uiColumnResized"}),e.resizeLeafColumnsToFit("uiColumnResized")})}}else this.comp.setResizableDisplayed(!1)},t.prototype.onResizeStart=function(e){var i=this;this.calculateInitialValues();var n=null;if(e&&(n=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),n){var o=n.getDisplayedLeafColumns();this.resizeTakeFromCols=o.filter(function(s){return s.isResizable()}),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach(function(s){return i.resizeTakeFromStartWidth+=s.getActualWidth()}),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach(function(s){return i.resizeTakeFromRatios.push(s.getActualWidth()/i.resizeTakeFromStartWidth)})}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},t.prototype.onResizing=function(e,i,n){void 0===n&&(n="uiColumnResized");var o=this.normaliseDragChange(i);this.resizeColumns(this.resizeStartWidth+o,n,e)},t.prototype.resizeLeafColumnsToFit=function(e){var i=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup);this.calculateInitialValues(),i>this.resizeStartWidth&&this.resizeColumns(i,e,!0)},t.prototype.resizeColumns=function(e,i,n){void 0===n&&(n=!0);var o=[];o.push({columns:this.resizeCols,ratios:this.resizeRatios,width:e}),this.resizeTakeFromCols&&o.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-(e-this.resizeStartWidth)}),this.columnModel.resizeColumnSets({resizeSets:o,finished:n,source:i}),n&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},t.prototype.calculateInitialValues=function(){var e=this,i=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=i.filter(function(n){return n.isResizable()}),this.resizeStartWidth=0,this.resizeCols.forEach(function(n){return e.resizeStartWidth+=n.getActualWidth()}),this.resizeRatios=[],this.resizeCols.forEach(function(n){return e.resizeRatios.push(n.getActualWidth()/e.resizeStartWidth)})},t.prototype.normaliseDragChange=function(e){var i=e;return this.gridOptionsService.is("enableRtl")?"left"!==this.pinned&&(i*=-1):"right"===this.pinned&&(i*=-1),i},Cl([S("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),Cl([S("autoWidthCalculator")],t.prototype,"autoWidthCalculator",void 0),Cl([S("columnModel")],t.prototype,"columnModel",void 0),Cl([V],t.prototype,"postConstruct",null),t}(k),PE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),LE=function(r){function t(e,i){var n=r.call(this)||this;return n.removeChildListenersFuncs=[],n.columnGroup=i,n.comp=e,n}return PE(t,r),t.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,yt.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},t.prototype.addListenersToChildrenColumns=function(){var e=this;this.removeListenersOnChildrenColumns();var i=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(function(n){n.addEventListener("widthChanged",i),n.addEventListener("visibleChanged",i),e.removeChildListenersFuncs.push(function(){n.removeEventListener("widthChanged",i),n.removeEventListener("visibleChanged",i)})})},t.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach(function(e){return e()}),this.removeChildListenersFuncs=[]},t.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},t.prototype.onWidthChanged=function(){var e=this.columnGroup.getActualWidth();this.comp.setWidth(e+"px"),this.comp.addOrRemoveCssClass("ag-hidden",0===e)},function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([V],t.prototype,"postConstruct",null),t}(k),ME=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),wl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},FE=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.columnGroup=e,n}return ME(t,r),t.prototype.setComp=function(e,i,n){r.prototype.setGui.call(this,i),this.comp=e,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();var o=this.getParentRowCtrl().getPinned(),s=this.columnGroup.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new md(s,i)),this.createManagedBean(new yd(this.columnGroup,i,this.beans)),this.createManagedBean(new LE(e,this.columnGroup)),this.groupResizeFeature=this.createManagedBean(new TE(e,n,o,this.columnGroup)),this.createManagedBean(new no(i,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},t.prototype.resizeLeafColumnsToFit=function(e){this.groupResizeFeature&&this.groupResizeFeature.resizeLeafColumnsToFit(e)},t.prototype.setupUserComp=function(){var e=this,i=this.displayName,n={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:function(u){e.columnModel.setColumnGroupOpened(e.columnGroup.getProvidedColumnGroup(),u,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};if(!i){for(var o=this.columnGroup,s=o.getLeafColumns();o.getParent()&&o.getParent().getLeafColumns().length===s.length;)o=o.getParent();var a=o.getColGroupDef();a&&(i=a.headerName),i||(i=s?this.columnModel.getDisplayNameForColumn(s[0],"header",!0):"")}var l=this.userComponentFactory.getHeaderGroupCompDetails(n);this.comp.setUserCompDetails(l)},t.prototype.setupTooltip=function(){var e=this,i=this.columnGroup.getColGroupDef(),n={getColumn:function(){return e.columnGroup},getGui:function(){return e.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return i&&i.headerTooltip}};i&&(n.getColDef=function(){return i}),this.createManagedBean(new ad(n,this.beans)).setComp(this.eGui)},t.prototype.setupExpandable=function(){var e=this.columnGroup.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(e,ze.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,ze.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},t.prototype.refreshExpanded=function(){var e=this.columnGroup;this.expandable=e.isExpandable();var i=e.isExpanded();this.comp.setAriaExpanded(this.expandable?i?"true":"false":void 0)},t.prototype.getColId=function(){return this.columnGroup.getUniqueId()},t.prototype.addClasses=function(){var e=this,i=this.columnGroup.getColGroupDef(),n=ev.getHeaderClassesFromColDef(i,this.gridOptionsService,null,this.columnGroup);this.columnGroup.isPadding()?(n.push("ag-header-group-cell-no-group"),this.columnGroup.getLeafColumns().every(function(s){return s.isSpanHeaderHeight()})&&n.push("ag-header-span-height")):n.push("ag-header-group-cell-with-group"),n.forEach(function(s){return e.comp.addOrRemoveCssClass(s,!0)})},t.prototype.setupMovingCss=function(){var e=this,n=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),o=function(){return e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.columnGroup.isMoving())};n.forEach(function(s){e.addManagedListener(s,Ae.EVENT_MOVING_CHANGED,o)}),o()},t.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var i=this.getRowIndex();this.beans.focusService.setFocusedHeader(i,this.columnGroup)}},t.prototype.handleKeyDown=function(e){r.prototype.handleKeyDown.call(this,e);var i=this.getWrapperHasFocus();if(this.expandable&&i&&e.key===M.ENTER){var n=this.columnGroup,o=!n.isExpanded();this.columnModel.setColumnGroupOpened(n.getProvidedColumnGroup(),o,"uiColumnExpanded")}},t.prototype.setDragSource=function(e){var i=this;if(!this.isSuppressMoving()){var n=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),o=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),s={type:Ut.HeaderCell,eElement:e,getDefaultIconName:function(){return o?ct.ICON_HIDE:ct.ICON_NOT_ALLOWED},dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:function(){o=!i.gridOptionsService.is("suppressDragLeaveHidesColumns"),n.forEach(function(a){return a.setMoving(!0,"uiColumnDragged")})},onDragStopped:function(){return n.forEach(function(a){return a.setMoving(!1,"uiColumnDragged")})},onGridEnter:function(a){var l;if(o){var u=(null===(l=a?.columns)||void 0===l?void 0:l.filter(function(c){return!c.getColDef().lockVisible}))||[];i.columnModel.setColumnsVisible(u,!0,"uiColumnMoved")}},onGridExit:function(a){var l;if(o){var u=(null===(l=a?.columns)||void 0===l?void 0:l.filter(function(c){return!c.getColDef().lockVisible}))||[];i.columnModel.setColumnsVisible(u,!1,"uiColumnMoved")}}};this.dragAndDropService.addDragSource(s,!0),this.addDestroyFunc(function(){return i.dragAndDropService.removeDragSource(s)})}},t.prototype.getDragItemForGroup=function(){var e=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),i={};e.forEach(function(o){return i[o.getId()]=o.isVisible()});var n=[];return this.columnModel.getAllDisplayedColumns().forEach(function(o){e.indexOf(o)>=0&&(n.push(o),ii(e,o))}),e.forEach(function(o){return n.push(o)}),{columns:n,visibleState:i}},t.prototype.isSuppressMoving=function(){var e=!1;return this.columnGroup.getLeafColumns().forEach(function(n){(n.getColDef().suppressMovable||n.getColDef().lockPosition)&&(e=!0)}),e||this.gridOptionsService.is("suppressMovableColumns")},wl([S("columnModel")],t.prototype,"columnModel",void 0),wl([S("dragAndDropService")],t.prototype,"dragAndDropService",void 0),wl([S("gridApi")],t.prototype,"gridApi",void 0),wl([S("columnApi")],t.prototype,"columnApi",void 0),t}(yl),IE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Sl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},NE=0,Sd=function(r){function t(e,i,n){var o=r.call(this)||this;return o.instanceId=NE++,o.headerCellCtrls={},o.rowIndex=e,o.pinned=i,o.type=n,o.headerRowClass="ag-header-row "+(n==At.COLUMN_GROUP?"ag-header-row-column-group":n==At.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column"),o}return IE(t,r),t.prototype.postConstruct=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.isEnsureDomOrder=this.gridOptionsService.is("ensureDomOrder")},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.setComp=function(e,i){void 0===i&&(i=!0),this.comp=e,i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()},t.prototype.getHeaderRowClass=function(){return this.headerRowClass},t.prototype.getAriaRowIndex=function(){return this.rowIndex+1},t.prototype.getTransform=function(){if(Ei())return"translateZ(0)"},t.prototype.addEventListeners=function(){var e=this;this.addManagedListener(this.eventService,E.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_VIRTUAL_COLUMNS_CHANGED,function(i){return e.onVirtualColumnsChanged(i.afterScroll)}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",function(i){return e.isEnsureDomOrder=i.currentValue}),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))},t.prototype.getHeaderCellCtrl=function(e){return Fo(this.headerCellCtrls).find(function(i){return i.getColumnGroupChild()===e})},t.prototype.onDisplayedColumnsChanged=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()},t.prototype.getType=function(){return this.type},t.prototype.onColumnResized=function(){this.setWidth()},t.prototype.setWidth=function(){var e=this.getWidthForRow();this.comp.setWidth(e+"px")},t.prototype.getWidthForRow=function(){return this.isPrintLayout?null!=this.pinned?0:this.columnModel.getContainerWidth("right")+this.columnModel.getContainerWidth("left")+this.columnModel.getContainerWidth(null):this.columnModel.getContainerWidth(this.pinned)},t.prototype.onRowHeightChanged=function(){var e=this.getTopAndHeight(),n=e.rowHeight;this.comp.setTop(e.topOffset+"px"),this.comp.setHeight(n+"px")},t.prototype.getTopAndHeight=function(){var e=this.columnModel.getHeaderRowCount(),i=[],n=0;this.filterManager.hasFloatingFilters()&&(e++,n=1);for(var o=this.columnModel.getColumnGroupHeaderRowHeight(),s=this.columnModel.getColumnHeaderRowHeight(),l=e-(1+n),u=0;u<l;u++)i.push(o);for(i.push(s),u=0;u<n;u++)i.push(this.columnModel.getFloatingFiltersHeight());var c=0;for(u=0;u<this.rowIndex;u++)c+=i[u];return{topOffset:c,rowHeight:i[this.rowIndex]}},t.prototype.getPinned=function(){return this.pinned},t.prototype.getRowIndex=function(){return this.rowIndex},t.prototype.onVirtualColumnsChanged=function(e){void 0===e&&(e=!1);var i=this.getHeaderCtrls();this.comp.setHeaderCtrls(i,this.isEnsureDomOrder||this.isPrintLayout,e)},t.prototype.getHeaderCtrls=function(){var e=this,i=this.headerCellCtrls;return this.headerCellCtrls={},this.getColumnsInViewport().forEach(function(a){if(!a.isEmptyGroup()){var l=a.getUniqueId(),u=i[l];if(delete i[l],u&&u.getColumnGroupChild()!=a&&(e.destroyBean(u),u=void 0),null==u)switch(e.type){case At.FLOATING_FILTER:u=e.createBean(new gE(a,e));break;case At.COLUMN_GROUP:u=e.createBean(new FE(a,e));break;default:u=e.createBean(new xE(a,e))}e.headerCellCtrls[l]=u}}),He(i,function(a,l){var u=function(a){return!!e.focusService.isHeaderWrapperFocused(a)&&e.columnModel.isDisplayed(a.getColumnGroupChild())}(l);u?e.headerCellCtrls[a]=l:e.destroyBean(l)}),nn(this.headerCellCtrls)},t.prototype.getColumnsInViewport=function(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},t.prototype.getColumnsInViewportPrintLayout=function(){var e=this;if(null!=this.pinned)return[];var i=[],n=this.getActualDepth();return["left",null,"right"].forEach(function(o){var s=e.columnModel.getVirtualHeaderGroupRow(o,n);i=i.concat(s)}),i},t.prototype.getActualDepth=function(){return this.type==At.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},t.prototype.getColumnsInViewportNormalLayout=function(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},t.prototype.focusHeader=function(e,i){var o=nn(this.headerCellCtrls).find(function(s){return s.getColumnGroupChild()==e});return!!o&&(o.focus(i),!0)},t.prototype.destroy=function(){var e=this;He(this.headerCellCtrls,function(i,n){e.destroyBean(n)}),this.headerCellCtrls={},r.prototype.destroy.call(this)},Sl([S("columnModel")],t.prototype,"columnModel",void 0),Sl([S("focusService")],t.prototype,"focusService",void 0),Sl([S("filterManager")],t.prototype,"filterManager",void 0),Sl([V],t.prototype,"postConstruct",null),t}(k),GE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),br=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},VE=function(r){function t(e){var i=r.call(this)||this;return i.hidden=!1,i.includeFloatingFilter=!1,i.groupsRowCtrls=[],i.pinned=e,i}return GE(t,r),t.prototype.setComp=function(e,i){this.comp=e,this.eViewport=i,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,E.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},t.prototype.setupDragAndDrop=function(e){var i=new tE(this.pinned,e);this.createManagedBean(i)},t.prototype.refresh=function(e){var i=this;void 0===e&&(e=!1);var c,d,n=new wr,o=this.focusService.getFocusHeaderToUseAfterRefresh();(function(){var c=i.columnModel.getHeaderRowCount()-1;i.groupsRowCtrls=i.destroyBeans(i.groupsRowCtrls);for(var d=0;d<c;d++){var h=i.createBean(new Sd(n.next(),i.pinned,At.COLUMN_GROUP));i.groupsRowCtrls.push(h)}})(),c=n.next(),((d=!(i.hidden||null!=i.columnsRowCtrl&&e&&i.columnsRowCtrl.getRowIndex()===c))||i.hidden)&&(i.columnsRowCtrl=i.destroyBean(i.columnsRowCtrl)),d&&(i.columnsRowCtrl=i.createBean(new Sd(c,i.pinned,At.COLUMN))),function(){i.includeFloatingFilter=i.filterManager.hasFloatingFilters()&&!i.hidden;var c=function(){i.filtersRowCtrl=i.destroyBean(i.filtersRowCtrl)};if(i.includeFloatingFilter){var d=n.next();if(i.filtersRowCtrl){var h=i.filtersRowCtrl.getRowIndex()!==d;(!e||h)&&c()}i.filtersRowCtrl||(i.filtersRowCtrl=i.createBean(new Sd(d,i.pinned,At.FLOATING_FILTER)))}else c()}();var u=this.getAllCtrls();this.comp.setCtrls(u),this.restoreFocusOnHeader(o)},t.prototype.restoreFocusOnHeader=function(e){null==e||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})},t.prototype.getAllCtrls=function(){var e=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r}([],function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(this.groupsRowCtrls));return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e},t.prototype.onGridColumnsChanged=function(){this.refresh(!0)},t.prototype.onDisplayedColumnsChanged=function(){var e=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)},t.prototype.setupCenterWidth=function(){var e=this;null==this.pinned&&this.createManagedBean(new hd(function(i){return e.comp.setCenterWidth(i+"px")},!0))},t.prototype.setHorizontalScroll=function(e){this.comp.setViewportScrollLeft(e)},t.prototype.setupPinnedWidth=function(){var e=this;if(null!=this.pinned){var i="left"===this.pinned,n="right"===this.pinned;this.hidden=!0;var o=function(){var s=i?e.pinnedWidthService.getPinnedLeftWidth():e.pinnedWidthService.getPinnedRightWidth();if(null!=s){var a=0==s,l=e.hidden!==a,u=e.gridOptionsService.is("enableRtl"),c=e.gridOptionsService.getScrollbarWidth(),d=e.scrollVisibleService.isVerticalScrollShowing()&&(u&&i||!u&&n);e.comp.setPinnedContainerWidth((d?s+c:s)+"px"),e.comp.setDisplayed(!a),l&&(e.hidden=a,e.refresh())}};this.addManagedListener(this.eventService,E.EVENT_LEFT_PINNED_WIDTH_CHANGED,o),this.addManagedListener(this.eventService,E.EVENT_RIGHT_PINNED_WIDTH_CHANGED,o),this.addManagedListener(this.eventService,E.EVENT_SCROLL_VISIBILITY_CHANGED,o),this.addManagedListener(this.eventService,E.EVENT_SCROLLBAR_WIDTH_CHANGED,o)}},t.prototype.getHeaderCtrlForColumn=function(e){if(e instanceof Ae)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(0!==this.groupsRowCtrls.length)for(var i=0;i<this.groupsRowCtrls.length;i++){var n=this.groupsRowCtrls[i].getHeaderCellCtrl(e);if(n)return n}},t.prototype.getHtmlElementForColumnHeader=function(e){var i=this.getHeaderCtrlForColumn(e);return i?i.getGui():null},t.prototype.getRowType=function(e){var n=this.getAllCtrls()[e];return n?n.getType():void 0},t.prototype.focusHeader=function(e,i,n){var s=this.getAllCtrls()[e];return!!s&&s.focusHeader(i,n)},t.prototype.getRowCount=function(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)},t.prototype.destroy=function(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),r.prototype.destroy.call(this)},br([S("ctrlsService")],t.prototype,"ctrlsService",void 0),br([S("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),br([S("pinnedWidthService")],t.prototype,"pinnedWidthService",void 0),br([S("columnModel")],t.prototype,"columnModel",void 0),br([S("focusService")],t.prototype,"focusService",void 0),br([S("filterManager")],t.prototype,"filterManager",void 0),t}(k),BE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_d=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ed=function(r){function t(e){var i=r.call(this)||this;return i.headerRowComps={},i.rowCompsList=[],i.pinned=e,i}return BE(t,r),t.prototype.init=function(){var e=this;this.selectAndSetTemplate();var i={setDisplayed:function(o){return e.setDisplayed(o)},setCtrls:function(o){return e.setCtrls(o)},setCenterWidth:function(o){return e.eCenterContainer.style.width=o},setViewportScrollLeft:function(o){return e.getGui().scrollLeft=o},setPinnedContainerWidth:function(o){var s=e.getGui();s.style.width=o,s.style.maxWidth=o,s.style.minWidth=o}};this.createManagedBean(new VE(this.pinned)).setComp(i,this.getGui())},t.prototype.selectAndSetTemplate=function(){this.setTemplate("left"==this.pinned?t.PINNED_LEFT_TEMPLATE:"right"==this.pinned?t.PINNED_RIGHT_TEMPLATE:t.CENTER_TEMPLATE),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},t.prototype.destroyRowComps=function(){this.setCtrls([])},t.prototype.destroyRowComp=function(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())},t.prototype.setCtrls=function(e){var o,i=this,n=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[],e.forEach(function(a){var l=a.getInstanceId(),u=n[l];delete n[l];var c=u||i.createBean(new uE(a));i.headerRowComps[l]=c,i.rowCompsList.push(c),function(a){var l=a.getGui();l.parentElement!=i.eRowContainer&&i.eRowContainer.appendChild(l),o&&xc(i.eRowContainer,l,o),o=l}(c)}),nn(n).forEach(function(a){return i.destroyRowComp(a)})},t.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"></div>',t.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"></div>',t.CENTER_TEMPLATE='<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>',_d([U("eCenterContainer")],t.prototype,"eCenterContainer",void 0),_d([V],t.prototype,"init",null),_d([lt],t.prototype,"destroyRowComps",null),t}(he),WE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Gs=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Mn=function(r){return r[r.UP=0]="UP",r[r.DOWN=1]="DOWN",r[r.LEFT=2]="LEFT",r[r.RIGHT=3]="RIGHT",r}(Mn||{}),jE=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return WE(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(i){e.gridBodyCon=i.gridBodyCtrl})},t.prototype.getHeaderRowCount=function(){var e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0},t.prototype.navigateVertically=function(e,i,n){if(i||(i=this.focusService.getFocusedHeader()),!i)return!1;var o=i.headerRowIndex,s=i.column,a=this.getHeaderRowCount(),u=e===Mn.UP?this.headerPositionUtils.getColumnVisibleParent(s,o):this.headerPositionUtils.getColumnVisibleChild(s,o),c=u.nextRow,d=u.nextFocusColumn,h=!1;return c<0&&(c=0,d=s,h=!0),c>=a&&(c=-1),!(!h&&!d)&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:c,column:d},allowUserOverride:!0,event:n})},t.prototype.navigateHorizontally=function(e,i,n){void 0===i&&(i=!1);var l,u,o=this.focusService.getFocusedHeader();return(l=e===Mn.LEFT!==this.gridOptionsService.is("enableRtl")?this.headerPositionUtils.findHeader(o,u="Before"):this.headerPositionUtils.findHeader(o,u="After"))||!i?this.focusService.focusHeaderPosition({headerPosition:l,direction:u,fromTab:i,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(o,u,n)},t.prototype.focusNextHeaderRow=function(e,i,n){var o=e.headerRowIndex,s=null;return"Before"===i?o>0&&(s=this.headerPositionUtils.findColAtEdgeForHeaderRow(o-1,"end")):s=this.headerPositionUtils.findColAtEdgeForHeaderRow(o+1,"start"),this.focusService.focusHeaderPosition({headerPosition:s,direction:i,fromTab:!0,allowUserOverride:!0,event:n})},t.prototype.scrollToColumn=function(e,i){if(void 0===i&&(i="After"),!e.getPinned()){var n;if(e instanceof yt){var o=e.getDisplayedLeafColumns();n="Before"===i?Pe(o):o[0]}else n=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(n)}},Gs([S("focusService")],t.prototype,"focusService",void 0),Gs([S("headerPositionUtils")],t.prototype,"headerPositionUtils",void 0),Gs([S("ctrlsService")],t.prototype,"ctrlsService",void 0),Gs([V],t.prototype,"postConstruct",null),Gs([X("headerNavigationService")],t)}(k),UE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ks=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},zE=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return UE(t,r),t.prototype.setComp=function(e,i,n){this.comp=e,this.eGui=i,this.createManagedBean(new no(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)},t.prototype.setupHeaderHeight=function(){var e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_GRID_STYLES_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,e)},t.prototype.getHeaderHeight=function(){return this.headerHeight},t.prototype.setHeaderHeight=function(){var o,e=this.columnModel,i=0,n=e.getHeaderRowCount();this.filterManager.hasFloatingFilters()&&(n++,i=1);var a=this.columnModel.getColumnGroupHeaderRowHeight(),l=this.columnModel.getColumnHeaderRowHeight(),c=n-(1+i);o=i*e.getFloatingFiltersHeight(),o+=c*a,this.headerHeight!==(o+=l)&&(this.headerHeight=o,this.comp.setHeightAndMinHeight(o+1+"px"),this.eventService.dispatchEvent({type:E.EVENT_HEADER_HEIGHT_CHANGED}))},t.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)},t.prototype.onDisplayedColumnsChanged=function(){var i=this.columnModel.getAllDisplayedColumns().some(function(n){return n.isSpanHeaderHeight()});this.comp.addOrRemoveCssClass("ag-header-allow-overflow",i)},t.prototype.onTabKeyDown=function(e){var i=this.gridOptionsService.is("enableRtl");(this.headerNavigationService.navigateHorizontally(e.shiftKey!==i?Mn.LEFT:Mn.RIGHT,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()},t.prototype.handleKeyDown=function(e){var i=null;switch(e.key){case M.LEFT:i=Mn.LEFT;case M.RIGHT:I(i)||(i=Mn.RIGHT),this.headerNavigationService.navigateHorizontally(i,!1,e);break;case M.UP:i=Mn.UP;case M.DOWN:I(i)||(i=Mn.DOWN),this.headerNavigationService.navigateVertically(i,null,e)&&e.preventDefault();break;default:return}},t.prototype.onFocusOut=function(e){var i=this.gridOptionsService.getDocument(),n=e.relatedTarget;!n&&this.eGui.contains(i.activeElement)||this.eGui.contains(n)||this.focusService.clearFocusedHeader()},ks([S("headerNavigationService")],t.prototype,"headerNavigationService",void 0),ks([S("focusService")],t.prototype,"focusService",void 0),ks([S("columnModel")],t.prototype,"columnModel",void 0),ks([S("ctrlsService")],t.prototype,"ctrlsService",void 0),ks([S("filterManager")],t.prototype,"filterManager",void 0),t}(k),KE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),YE=function(r){function t(){return r.call(this,t.TEMPLATE)||this}return KE(t,r),t.prototype.postConstruct=function(){var e=this,i={addOrRemoveCssClass:function(s,a){return e.addOrRemoveCssClass(s,a)},setHeightAndMinHeight:function(s){e.getGui().style.height=s,e.getGui().style.minHeight=s}};this.createManagedBean(new zE).setComp(i,this.getGui(),this.getFocusableElement());var o=function(s){e.createManagedBean(s),e.appendChild(s)};o(new Ed("left")),o(new Ed(null)),o(new Ed("right"))},t.TEMPLATE='<div class="ag-header" role="presentation"/>',function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([V],t.prototype,"postConstruct",null),t}(he),XE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),bd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},qE=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return XE(t,r),t.prototype.addResizeBar=function(e){var i=this,n={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(n),function(){return i.dragService.removeDragSource(n)}},t.prototype.onDragStart=function(e,i){this.dragStartX=i.clientX,this.setResizeIcons();var n=i instanceof MouseEvent&&!0===i.shiftKey;e.onResizeStart(n)},t.prototype.setResizeIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!0),e.disableUserSelect(!0)},t.prototype.onDragStop=function(e,i){e.onResizeEnd(this.resizeAmount),this.resetIcons()},t.prototype.resetIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!1),e.disableUserSelect(!1)},t.prototype.onDragging=function(e,i){this.resizeAmount=i.clientX-this.dragStartX,e.onResizing(this.resizeAmount)},bd([S("dragService")],t.prototype,"dragService",void 0),bd([S("ctrlsService")],t.prototype,"ctrlsService",void 0),bd([X("horizontalResizeService")],t)}(k),ZE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Hs=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},QE=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return ZE(t,r),t.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},t.prototype.showMenuAfterMouseEvent=function(e,i){var n=this;this.showPopup(e,function(o){n.popupService.positionPopupUnderMouseEvent({column:e,type:"columnMenu",mouseEvent:i,ePopup:o})},"columnMenu",i.target)},t.prototype.showMenuAfterButtonClick=function(e,i,n){var o=this;this.showPopup(e,function(s){o.popupService.positionPopupByComponent({type:n,eventSource:i,ePopup:s,keepWithinBounds:!0,position:"under",column:e})},n,i)},t.prototype.showPopup=function(e,i,n,o){var s=this,a=this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU");if(!a)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");var l=document.createElement("div");ot(l,"presentation"),l.classList.add("ag-menu"),this.tabListener=this.addManagedListener(l,"keydown",function(v){return s.trapFocusWithin(v,l)}),a.guiPromise.then(function(v){return l.appendChild(v)});var u,d=o||this.ctrlsService.getGridBodyCtrl().getGui(),p=this.localeService.getLocaleTextFunc(),f=this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:function(v){e.setMenuVisible(!1,"contextMenu");var g=v instanceof KeyboardEvent;if(s.tabListener&&(s.tabListener=s.tabListener()),g&&o&&io(o)){var y=s.focusService.findTabbableParent(o);y&&y.focus()}!function(){var v;null===(v=a.filterPromise)||void 0===v||v.then(function(g){var y;return null===(y=g?.afterGuiDetached)||void 0===y?void 0:y.call(g)})}()},positionCallback:function(){return i(l)},anchorToElement:d,ariaLabel:p("ariaLabelColumnMenu","Column Menu")});f&&(this.hidePopup=u=f.hideFunc),a.filterPromise.then(function(v){i(l),v.afterGuiAttached&&v.afterGuiAttached({container:n,hidePopup:u})}),e.setMenuVisible(!0,"contextMenu")},t.prototype.trapFocusWithin=function(e,i){e.key!==M.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(i,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(i,e.shiftKey))},t.prototype.isMenuEnabled=function(e){return e.isFilterAllowed()&&e.getMenuTabs(["filterMenuTab"]).includes("filterMenuTab")},Hs([S("filterManager")],t.prototype,"filterManager",void 0),Hs([S("popupService")],t.prototype,"popupService",void 0),Hs([S("focusService")],t.prototype,"focusService",void 0),Hs([S("ctrlsService")],t.prototype,"ctrlsService",void 0),Hs([X("menuFactory")],t)}(k),JE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_l=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};!function(r){function t(e){var i=r.call(this,t.getTemplate(e.cssClass))||this;return i.items=[],i.tabbedItemScrollMap=new Map,i.params=e,e.items&&e.items.forEach(function(n){return i.addItem(n)}),i}JE(t,r),t.prototype.postConstruct=function(){var e=this;this.createManagedBean(new no(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),this.addDestroyFunc(function(){var i,n,o;return null===(o=null===(n=null===(i=e.activeItem)||void 0===i?void 0:i.tabbedItem)||void 0===n?void 0:n.afterDetachedCallback)||void 0===o?void 0:o.call(n)})},t.getTemplate=function(e){return'<div class="ag-tabs '+e+'">\n            <div ref="eHeader" role="tablist" class="ag-tabs-header '+(e?e+"-header":"")+'"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body '+(e?e+"-body":"")+'"></div>\n        </div>'},t.prototype.handleKeyDown=function(e){var i=this.gridOptionsService.getDocument();switch(e.key){case M.RIGHT:case M.LEFT:if(!this.eHeader.contains(i.activeElement))return;var n=e.key===M.RIGHT,o=this.gridOptionsService.is("enableRtl"),s=this.items.indexOf(this.activeItem),a=n!==o?Math.min(s+1,this.items.length-1):Math.max(s-1,0);if(s===a)return;e.preventDefault();var l=this.items[a];this.showItemWrapper(l),l.eHeaderButton.focus();break;case M.UP:case M.DOWN:e.stopPropagation()}},t.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var i=this,n=i.focusService,o=i.eHeader,s=i.eBody,a=i.activeItem,u=this.gridOptionsService.getDocument().activeElement,c=e.target;if(e.preventDefault(),o.contains(u))return void n.focusInto(s,e.shiftKey);var d=null;n.isTargetUnderManagedComponent(s,c)&&(e.shiftKey&&(d=this.focusService.findFocusableElementBeforeTabGuard(s,c)),d||(d=a.eHeaderButton)),!d&&s.contains(u)&&((d=n.findNextFocusableElement(s,!1,e.shiftKey))||(d=a.eHeaderButton)),d&&d.focus()}},t.prototype.setAfterAttachedParams=function(e){this.afterAttachedParams=e},t.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},t.prototype.addItem=function(e){var i=document.createElement("span");ot(i,"tab"),i.setAttribute("tabindex","-1"),i.appendChild(e.title),i.classList.add("ag-tab"),this.eHeader.appendChild(i),xn(i,e.titleLabel);var n={tabbedItem:e,eHeaderButton:i};this.items.push(n),i.addEventListener("click",this.showItemWrapper.bind(this,n))},t.prototype.showItem=function(e){var i=this.items.find(function(n){return n.tabbedItem===e});i&&this.showItemWrapper(i)},t.prototype.showItemWrapper=function(e){var n,o,i=this,s=e.tabbedItem,a=e.eHeaderButton;this.params.onItemClicked&&this.params.onItemClicked({item:s}),this.activeItem!==e?(this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),Pt(this.eBody),s.bodyPromise.then(function(l){i.eBody.appendChild(l);var u=!i.focusService.isKeyboardMode();if(i.focusService.focusInto(i.eBody,!1,u),s.afterAttachedCallback&&s.afterAttachedCallback(i.afterAttachedParams),i.params.keepScrollPosition){var c=s.getScrollableContainer&&s.getScrollableContainer()||l;i.lastScrollListener=i.addManagedListener(c,"scroll",function(){i.tabbedItemScrollMap.set(s.name,c.scrollTop)});var d=i.tabbedItemScrollMap.get(s.name);void 0!==d&&setTimeout(function(){c.scrollTop=d},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),null===(o=(n=this.activeItem.tabbedItem).afterDetachedCallback)||void 0===o||o.call(n)),a.classList.add("ag-tab-selected"),this.activeItem=e):Jh(this.params.onActiveItemClicked)},_l([S("focusService")],t.prototype,"focusService",void 0),_l([U("eHeader")],t.prototype,"eHeader",void 0),_l([U("eBody")],t.prototype,"eBody",void 0),_l([V],t.prototype,"postConstruct",null)}(he);var eb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),nb=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.polyfillFunctions=[],e}return eb(t,r),t.prototype.observeResize=function(e,i){var c,n=this,o=this.gridOptionsService.getWindow(),l=this.gridOptionsService.is("suppressBrowserResizeObserver");return o.ResizeObserver&&!l?((c=new o.ResizeObserver(i)).observe(e),function(){return c.disconnect()}):function(){var c=Oc(e),d=Rc(e),h=!0,p=function(){if(h){var f=Oc(e),v=Rc(e);(f!==c||v!==d)&&(c=f,d=v,i()),n.doNextPolyfillTurn(p)}};return p(),function(){return h=!1}}()},t.prototype.doNextPolyfillTurn=function(e){this.polyfillFunctions.push(e),this.schedulePolyfill()},t.prototype.schedulePolyfill=function(){var e=this;this.polyfillScheduled||(this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout(function(){var n=e.polyfillFunctions;e.polyfillScheduled=!1,e.polyfillFunctions=[],n.forEach(function(o){return o()})},50))},t=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}([X("resizeObserverService")],t),t}(k),ob=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),El=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},rb=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.createTasksP1={list:[],sorted:!1},e.createTasksP2={list:[],sorted:!1},e.destroyTasks=[],e.ticking=!1,e.scrollGoingDown=!0,e.lastPage=0,e.lastScrollTop=0,e.taskCount=0,e.cancelledTasks=new Set,e}return ob(t,r),t.prototype.setScrollTop=function(e){var i=this.gridOptionsService.is("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,i&&0===e){var n=this.paginationProxy.getCurrentPage();n!==this.lastPage&&(this.lastPage=n,this.scrollGoingDown=!0)}this.lastScrollTop=e},t.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsService.is("suppressAnimationFrame")},t.prototype.isOn=function(){return this.useAnimationFrame},t.prototype.verifyAnimationFrameOn=function(e){!1===this.useAnimationFrame&&console.warn("AG Grid: AnimationFrameService."+e+" called but animation frames are off")},t.prototype.createTask=function(e,i,n){this.verifyAnimationFrameOn(n);var o={task:e,index:i,createOrder:++this.taskCount};this.addTaskToList(this[n],o),this.schedule()},t.prototype.cancelTask=function(e){this.cancelledTasks.add(e)},t.prototype.addTaskToList=function(e,i){e.list.push(i),e.sorted=!1},t.prototype.sortTaskList=function(e){if(!e.sorted){var i=this.scrollGoingDown?1:-1;e.list.sort(function(n,o){return n.index!==o.index?i*(o.index-n.index):o.createOrder-n.createOrder}),e.sorted=!0}},t.prototype.addDestroyTask=function(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()},t.prototype.executeFrame=function(e){this.verifyAnimationFrameOn("executeFrame");for(var i=this.createTasksP1,n=i.list,o=this.createTasksP2,s=o.list,a=this.destroyTasks,l=(new Date).getTime(),u=(new Date).getTime()-l,c=e<=0,d=this.ctrlsService.getGridBodyCtrl();c||u<e;){if(!d.getScrollFeature().scrollGridIfNeeded()){var p=void 0;if(n.length)this.sortTaskList(i),p=n.pop().task;else if(s.length)this.sortTaskList(o),p=s.pop().task;else{if(!a.length){this.cancelledTasks.clear();break}p=a.pop()}this.cancelledTasks.has(p)||p()}u=(new Date).getTime()-l}n.length||s.length||a.length?this.requestFrame():this.stopTicking()},t.prototype.stopTicking=function(){this.ticking=!1},t.prototype.flushAllFrames=function(){this.useAnimationFrame&&this.executeFrame(-1)},t.prototype.schedule=function(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))},t.prototype.requestFrame=function(){var e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)},t.prototype.requestAnimationFrame=function(e){var i=this.gridOptionsService.getWindow();i.requestAnimationFrame?i.requestAnimationFrame(e):i.webkitRequestAnimationFrame?i.webkitRequestAnimationFrame(e):i.setTimeout(e,0)},t.prototype.isQueueEmpty=function(){return!this.ticking},t.prototype.debounce=function(e){var i=this,n=!1;return function(){i.isOn()?n||(n=!0,i.addDestroyTask(function(){n=!1,e()})):i.getFrameworkOverrides().setTimeout(e,0)}},El([S("ctrlsService")],t.prototype,"ctrlsService",void 0),El([S("paginationProxy")],t.prototype,"paginationProxy",void 0),El([V],t.prototype,"init",null),El([X("animationFrameService")],t)}(k),sb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Vs=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ab=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sb(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(i){e.centerRowContainerCtrl=i.centerRowContainerCtrl})},t.prototype.getPreferredWidthForColumn=function(e,i){var n=this.getHeaderCellForColumn(e);if(!n)return-1;var o=this.rowRenderer.getAllCellsForColumn(e);return i||o.push(n),this.addElementsToContainerAndGetWidth(o)},t.prototype.getPreferredWidthForColumnGroup=function(e){var i=this.getHeaderCellForColumn(e);return i?this.addElementsToContainerAndGetWidth([i]):-1},t.prototype.addElementsToContainerAndGetWidth=function(e){var i=this,n=document.createElement("form");n.style.position="fixed";var o=this.centerRowContainerCtrl.getContainerElement();e.forEach(function(l){return i.cloneItemIntoDummy(l,n)}),o.appendChild(n);var s=n.offsetWidth;return o.removeChild(n),s+this.getAutoSizePadding()},t.prototype.getAutoSizePadding=function(){var e=this.gridOptionsService.getNum("autoSizePadding");return null!=e&&e>=0?e:20},t.prototype.getHeaderCellForColumn=function(e){var i=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(n){var o=n.getHtmlElementForColumnHeader(e);null!=o&&(i=o)}),i},t.prototype.cloneItemIntoDummy=function(e,i){var n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";var o=document.createElement("div"),s=o.classList;["ag-header-cell","ag-header-group-cell"].some(function(h){return n.classList.contains(h)})?(s.add("ag-header","ag-header-row"),o.style.position="static"):s.add("ag-row");for(var l=e.parentElement;l;){if(["ag-header-row","ag-row"].some(function(h){return l.classList.contains(h)})){for(var c=0;c<l.classList.length;c++){var d=l.classList[c];"ag-row-position-absolute"!=d&&s.add(d)}break}l=l.parentElement}o.appendChild(n),i.appendChild(o)},Vs([S("rowRenderer")],t.prototype,"rowRenderer",void 0),Vs([S("ctrlsService")],t.prototype,"ctrlsService",void 0),Vs([S("rowCssClassCalculator")],t.prototype,"rowCssClassCalculator",void 0),Vs([V],t.prototype,"postConstruct",null),Vs([X("autoWidthCalculator")],t)}(k),lb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),bl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},hb=function(r){function t(e,i){var n=r.call(this)||this;return n.createRowCon=e,n.destroyRowCtrls=i,n.stickyRowCtrls=[],n.containerHeight=0,n}return lb(t,r),t.prototype.postConstruct=function(){var e=this;this.isClientSide="clientSide"===this.rowModel.getType(),this.ctrlsService.whenReady(function(i){e.gridBodyCtrl=i.gridBodyCtrl})},t.prototype.getStickyRowCtrls=function(){return this.stickyRowCtrls},t.prototype.checkStickyRows=function(){var e=this,i=0;if(!this.gridOptionsService.isGroupRowsSticky())return this.refreshNodesAndContainerHeight([],i);for(var n=[],o=this.rowRenderer.getFirstVisibleVerticalPixel(),s=function(p){var f,v,g,y;if(n.push(p),e.isClientSide){for(var m=p;m.expanded;)if(m.master)m=m.detailNode;else if(m.childrenAfterSort){if(0===m.childrenAfterSort.length)break;m=Pe(m.childrenAfterSort)}y=m.rowTop+m.rowHeight}else if(p.master)y=p.detailNode.rowTop+p.detailNode.rowHeight;else{var C=null===(f=p.childStore)||void 0===f?void 0:f.getStoreBounds();y=(null!==(v=C?.heightPx)&&void 0!==v?v:0)+(null!==(g=C?.topPx)&&void 0!==g?g:0)}var w=o+i+p.rowHeight;p.stickyRowTop=y<w?i+(y-w):i,i=0,n.forEach(function(_){var b=_.stickyRowTop+_.rowHeight;i<b&&(i=b)})};;){var a=o+i,l=this.rowModel.getRowIndexAtPixel(a),u=this.rowModel.getRow(l);if(null==u||u.level<0)break;for(var c=[],d=u.parent;d.level>=0;)c.push(d),d=d.parent;var h=c.reverse().find(function(p){return n.indexOf(p)<0&&p.displayed});if(h)s(h);else{if(!(u.isExpandable()&&u.expanded&&u.rowTop<a))break;s(u)}}return this.refreshNodesAndContainerHeight(n,i)},t.prototype.refreshStickyNode=function(e){for(var i=[],n=0;n<this.stickyRowCtrls.length;n++){var o=this.stickyRowCtrls[n].getRowNode();o!==e&&i.push(o)}this.refreshNodesAndContainerHeight(i,this.containerHeight)&&this.checkStickyRows()},t.prototype.refreshNodesAndContainerHeight=function(e,i){var n,o,s,a=this,l=!1,u=this.stickyRowCtrls.filter(function(g){return-1===e.indexOf(g.getRowNode())}),c=e.filter(function(g){return-1===a.stickyRowCtrls.findIndex(function(y){return y.getRowNode()===g})});(u.length||c.length)&&(l=!0);var d={};u.forEach(function(g){d[g.getRowNode().id]=g,a.stickyRowCtrls=a.stickyRowCtrls.filter(function(y){return y!==g})});try{for(var h=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.values(d)),p=h.next();!p.done;p=h.next())p.value.getRowNode().sticky=!1}catch(g){n={error:g}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}this.destroyRowCtrls(d,!1);var v=c.map(function(g){return g.sticky=!0,a.createRowCon(g,!1,!1)});return(s=this.stickyRowCtrls).push.apply(s,function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r}([],function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(v))),this.stickyRowCtrls.forEach(function(g){return g.setRowTop(g.getRowNode().stickyRowTop)}),this.stickyRowCtrls.sort(function(g,y){return y.getRowNode().rowIndex-g.getRowNode().rowIndex}),this.containerHeight!==i&&(this.containerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),l=!0),l},bl([S("rowModel")],t.prototype,"rowModel",void 0),bl([S("rowRenderer")],t.prototype,"rowRenderer",void 0),bl([S("ctrlsService")],t.prototype,"ctrlsService",void 0),bl([V],t.prototype,"postConstruct",null),t}(k),pb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Vi=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},lo=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},uo=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},gb=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.destroyFuncsForColumnListeners=[],e.rowCtrlsByRowIndex={},e.zombieRowCtrls={},e.allRowCtrls=[],e.topRowCtrls=[],e.bottomRowCtrls=[],e.refreshInProgress=!1,e.dataFirstRenderedFired=!1,e}return pb(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl(),e.initialise()})},t.prototype.initialise=function(){if(this.addManagedListener(this.eventService,E.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,E.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,E.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListener("domLayout",this.onDomLayoutChanged.bind(this)),this.addManagedPropertyListener("rowClass",this.redrawRows.bind(this)),this.gridOptionsService.isGroupRowsSticky()){var e=this.rowModel.getType();("clientSide"===e||"serverSide"===e)&&(this.stickyRowFeature=this.createManagedBean(new hb(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.is("embedFullWidthRows"),this.redrawAfterModelUpdate()},t.prototype.initialiseCache=function(){if(this.gridOptionsService.is("keepDetailRows")){var e=this.getKeepDetailRowsCount();this.cachedRowCtrls=new yb(e??3)}},t.prototype.getKeepDetailRowsCount=function(){var e=this.gridOptionsService.getNum("keepDetailRowsCount");return I(e)&&e>0?e:10},t.prototype.getStickyTopRowCtrls=function(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]},t.prototype.updateAllRowCtrls=function(){var e=nn(this.rowCtrlsByRowIndex),i=this.gridOptionsService.is("ensureDomOrder"),n=this.gridOptionsService.isDomLayout("print");(i||n)&&e.sort(function(a,l){return a.getRowNode().rowIndex-l.getRowNode.rowIndex});var o=nn(this.zombieRowCtrls),s=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];this.allRowCtrls=o.length>0||s.length>0?uo(uo(uo([],lo(e)),lo(o)),lo(s)):e},t.prototype.onCellFocusChanged=function(e){this.getAllCellCtrls().forEach(function(i){return i.onCellFocused(e)}),this.getFullWidthRowCtrls().forEach(function(i){return i.onFullWidthRowFocused(e)})},t.prototype.registerCellEventListeners=function(){var e=this;this.addManagedListener(this.eventService,E.EVENT_CELL_FOCUSED,function(n){e.onCellFocusChanged(n)}),this.addManagedListener(this.eventService,E.EVENT_CELL_FOCUS_CLEARED,function(){e.onCellFocusChanged()}),this.addManagedListener(this.eventService,E.EVENT_FLASH_CELLS,function(n){e.getAllCellCtrls().forEach(function(o){return o.onFlashCells(n)})}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_HOVER_CHANGED,function(){e.getAllCellCtrls().forEach(function(n){return n.onColumnHover()})}),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){e.getAllCellCtrls().forEach(function(n){return n.onDisplayedColumnsChanged()})}),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){e.printLayout&&e.getAllCellCtrls().forEach(function(n){return n.onLeftChanged()})}),this.gridOptionsService.is("enableRangeSelection")&&(this.addManagedListener(this.eventService,E.EVENT_RANGE_SELECTION_CHANGED,function(){e.getAllCellCtrls().forEach(function(n){return n.onRangeSelectionChanged()})}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_MOVED,function(){e.getAllCellCtrls().forEach(function(n){return n.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PINNED,function(){e.getAllCellCtrls().forEach(function(n){return n.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VISIBLE,function(){e.getAllCellCtrls().forEach(function(n){return n.updateRangeBordersIfRangeCount()})})),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,E.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},t.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach(function(e){return e()}),this.destroyFuncsForColumnListeners.length=0},t.prototype.refreshListenersToColumnsForCellComps=function(){var e=this;this.removeGridColumnListeners();var i=this.columnModel.getAllGridColumns();i&&i.forEach(function(n){var o=function(d){e.getAllCellCtrls().forEach(function(h){h.getColumn()===n&&d(h)})},s=function(){o(function(d){return d.onLeftChanged()})},a=function(){o(function(d){return d.onWidthChanged()})},l=function(){o(function(d){return d.onFirstRightPinnedChanged()})},u=function(){o(function(d){return d.onLastLeftPinnedChanged()})},c=function(){o(function(d){return d.onColDefChanged()})};n.addEventListener("leftChanged",s),n.addEventListener("widthChanged",a),n.addEventListener("firstRightPinnedChanged",l),n.addEventListener("lastLeftPinnedChanged",u),n.addEventListener("colDefChanged",c),e.destroyFuncsForColumnListeners.push(function(){n.removeEventListener("leftChanged",s),n.removeEventListener("widthChanged",a),n.removeEventListener("firstRightPinnedChanged",l),n.removeEventListener("lastLeftPinnedChanged",u),n.removeEventListener("colDefChanged",c)})})},t.prototype.onDomLayoutChanged=function(){var e=this.gridOptionsService.isDomLayout("print"),i=e||this.gridOptionsService.is("embedFullWidthRows"),n=i!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=i,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})},t.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},t.prototype.onPageLoaded=function(e){this.redrawAfterModelUpdate({recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0})},t.prototype.getAllCellsForColumn=function(e){var i=[];return this.getAllRowCtrls().forEach(function(n){var o=n.getCellElement(e);o&&i.push(o)}),i},t.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},t.prototype.getTopRowCtrls=function(){return this.topRowCtrls},t.prototype.getCentreRowCtrls=function(){return this.allRowCtrls},t.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},t.prototype.refreshFloatingRows=function(e,i){var n=this;e.forEach(function(o){o.destroyFirstPass(),o.destroySecondPass()}),e.length=0,i&&i.forEach(function(o){var s=new $o(o,n.beans,!1,!1,n.printLayout);e.push(s)})},t.prototype.onPinnedRowDataChanged=function(){this.redrawAfterModelUpdate({recycleRows:!0})},t.prototype.redrawRow=function(e,i){var n=this;if(void 0===i&&(i=!1),e.sticky)this.stickyRowFeature.refreshStickyNode(e);else{var o=function(s){var a=s[e.rowIndex];a&&a.getRowNode()===e&&(a.destroyFirstPass(),a.destroySecondPass(),s[e.rowIndex]=n.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":o(this.topRowCtrls);case"bottom":o(this.bottomRowCtrls);default:o(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}i||this.dispatchDisplayedRowsChanged(!1)},t.prototype.redrawRows=function(e){var i=this;if(null!=e)return e?.forEach(function(o){return i.redrawRow(o,!0)}),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()},t.prototype.getCellToRestoreFocusToAfterRefresh=function(e){var i=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==i)return null;var o=this.gridOptionsService.getDocument().activeElement,s=this.gridOptionsService.getDomData(o,Ko.DOM_DATA_KEY_CELL_CTRL),a=this.gridOptionsService.getDomData(o,$o.DOM_DATA_KEY_ROW_CTRL);return s||a?i:null},t.prototype.redrawAfterModelUpdate=function(e){void 0===e&&(e={}),this.getLockOnRefresh();var i=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);var n=!e.domLayoutChanged&&!!e.recycleRows,o=e.animate&&this.gridOptionsService.isAnimateRows(),s=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(s,o),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=i&&this.restoreFocusedCell(i),this.releaseLockOnRefresh()},t.prototype.scrollToTopIfNewData=function(e){var i=e.newData||e.newPage,n=this.gridOptionsService.is("suppressScrollOnNewData");i&&!n&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},t.prototype.updateContainerHeights=function(){if(this.printLayout)this.rowContainerHeightService.setModelHeight(null);else{var e=this.paginationProxy.getCurrentPageHeight();0===e&&(e=1),this.rowContainerHeightService.setModelHeight(e)}},t.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},t.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},t.prototype.isRefreshInProgress=function(){return this.refreshInProgress},t.prototype.restoreFocusedCell=function(e){e&&(this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,api:this.beans.gridApi,columnApi:this.beans.columnApi,context:this.beans.gridOptionsService.context,type:"mock"}))},t.prototype.stopEditing=function(e){void 0===e&&(e=!1),this.getAllRowCtrls().forEach(function(i){i.stopEditing(e)})},t.prototype.getAllCellCtrls=function(){for(var e=[],i=this.getAllRowCtrls(),n=i.length,o=0;o<n;o++)for(var s=i[o].getAllCellCtrls(),a=s.length,l=0;l<a;l++)e.push(s[l]);return e},t.prototype.getAllRowCtrls=function(){var e,i,n=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],o=uo(uo(uo([],lo(this.topRowCtrls)),lo(this.bottomRowCtrls)),lo(n));try{for(var s=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(this.rowCtrlsByRowIndex)),a=s.next();!a.done;a=s.next())o.push(this.rowCtrlsByRowIndex[a.value])}catch(u){e={error:u}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return o},t.prototype.addRenderedRowListener=function(e,i,n){var o=this.rowCtrlsByRowIndex[i];o&&o.addEventListener(e,n)},t.prototype.flashCells=function(e){void 0===e&&(e={});var i=e.flashDelay,n=e.fadeDelay;this.getCellCtrls(e.rowNodes,e.columns).forEach(function(o){return o.flashCell({flashDelay:i,fadeDelay:n})})},t.prototype.refreshCells=function(e){var i=this;void 0===e&&(e={});var n={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(function(o){if(o.refreshShouldDestroy()){var s=o.getRowCtrl();s&&s.refreshCell(o)}else o.refreshCell(n)}),e.rowNodes&&(this.getRowCtrls(e.rowNodes).forEach(function(o){o.isFullWidth()&&(o.refreshFullWidth()||i.redrawRow(o.getRowNode(),!0))}),this.dispatchDisplayedRowsChanged(!1))},t.prototype.getCellRendererInstances=function(e){var n,i=this,o=this.getCellCtrls(e.rowNodes,e.columns).map(function(l){return l.getCellRenderer()}).filter(function(l){return null!=l});if(null!==(n=e.columns)&&void 0!==n&&n.length)return o;var s=[],a=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(function(l){if((!a||i.isRowInMap(l.getRowNode(),a))&&l.isFullWidth()){var u=l.getFullWidthCellRenderer();u&&s.push(u)}}),uo(uo([],lo(s)),lo(o))},t.prototype.getCellEditorInstances=function(e){var i=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(function(n){var o=n.getCellEditor();o&&i.push(o)}),i},t.prototype.getEditingCells=function(){var e=[];return this.getAllCellCtrls().forEach(function(i){if(i.isEditing()){var n=i.getCellPosition();e.push(n)}}),e},t.prototype.mapRowNodes=function(e){if(e){var i={top:{},bottom:{},normal:{}};return e.forEach(function(n){var o=n.id;"top"===n.rowPinned?i.top[o]=n:"bottom"===n.rowPinned?i.bottom[o]=n:i.normal[o]=n}),i}},t.prototype.isRowInMap=function(e,i){var n=e.id,o=e.rowPinned;return"bottom"===o?null!=i.bottom[n]:"top"===o?null!=i.top[n]:null!=i.normal[n]},t.prototype.getRowCtrls=function(e){var i=this,n=this.mapRowNodes(e),o=this.getAllRowCtrls();return e&&n?o.filter(function(s){var a=s.getRowNode();return i.isRowInMap(a,n)}):o},t.prototype.getCellCtrls=function(e,i){var o,n=this;I(i)&&(o={},i.forEach(function(a){var l=n.columnModel.getGridColumn(a);I(l)&&(o[l.getId()]=!0)}));var s=[];return this.getRowCtrls(e).forEach(function(a){a.getAllCellCtrls().forEach(function(l){var u=l.getColumn().getId();o&&!o[u]||s.push(l)})}),s},t.prototype.destroy=function(){this.removeAllRowComps(),r.prototype.destroy.call(this)},t.prototype.removeAllRowComps=function(){var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},t.prototype.getRowsToRecycle=function(){var e=[];He(this.rowCtrlsByRowIndex,function(n,o){null==o.getRowNode().id&&e.push(n)}),this.removeRowCtrls(e);var i={};return He(this.rowCtrlsByRowIndex,function(n,o){var s=o.getRowNode();i[s.id]=o}),this.rowCtrlsByRowIndex={},i},t.prototype.removeRowCtrls=function(e){var i=this;e.forEach(function(n){var o=i.rowCtrlsByRowIndex[n];o&&(o.destroyFirstPass(),o.destroySecondPass()),delete i.rowCtrlsByRowIndex[n]})},t.prototype.onBodyScroll=function(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})},t.prototype.redraw=function(e){void 0===e&&(e={});var n,i=e.afterScroll;this.stickyRowFeature&&$a()&&(n=this.getCellToRestoreFocusToAfterRefresh()||void 0);var o=this.firstRenderedRow,s=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();var a=!1;if(this.stickyRowFeature&&(a=this.stickyRowFeature.checkStickyRows()),(!i||a||this.firstRenderedRow!==o||this.lastRenderedRow!==s)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,i),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(i),null!=n)){var u=this.getCellToRestoreFocusToAfterRefresh();null!=n&&null==u&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(n))}},t.prototype.removeRowCompsNotToDraw=function(e){var i={};e.forEach(function(s){return i[s]=!0});var o=Object.keys(this.rowCtrlsByRowIndex).filter(function(s){return!i[s]});this.removeRowCtrls(o)},t.prototype.calculateIndexesToDraw=function(e){var i=this,n=Up(this.firstRenderedRow,this.lastRenderedRow),o=function(c,d){var h=d.getRowNode().rowIndex;null!=h&&(h<i.firstRenderedRow||h>i.lastRenderedRow)&&i.doNotUnVirtualiseRow(d)&&n.push(h)};He(this.rowCtrlsByRowIndex,o),He(e,o),n.sort(function(c,d){return c-d});for(var s=[],a=0;a<n.length;a++){var l=n[a],u=this.paginationProxy.getRow(l);u&&!u.sticky&&s.push(l)}return s},t.prototype.recycleRows=function(e,i,n){var o=this;void 0===i&&(i=!1),void 0===n&&(n=!1);var s=this.calculateIndexesToDraw(e);this.removeRowCompsNotToDraw(s),this.printLayout&&(i=!1),s.forEach(function(l){I(o.createOrUpdateRowCtrl(l,e,i,n))}),e&&(!n||this.gridOptionsService.is("suppressAnimationFrame")||this.printLayout?this.destroyRowCtrls(e,i):this.beans.animationFrameService.addDestroyTask(function(){o.destroyRowCtrls(e,i),o.updateAllRowCtrls(),o.dispatchDisplayedRowsChanged()})),this.updateAllRowCtrls()},t.prototype.dispatchDisplayedRowsChanged=function(e){void 0===e&&(e=!1),this.eventService.dispatchEvent({type:E.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:e})},t.prototype.onDisplayedColumnsChanged=function(){var e=this.columnModel.isPinningLeft(),i=this.columnModel.isPinningRight();(this.pinningLeft!==e||i!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=i,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},t.prototype.redrawFullWidthEmbeddedRows=function(){var e=[];this.getFullWidthRowCtrls().forEach(function(i){var n=i.getRowNode().rowIndex;e.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})},t.prototype.getFullWidthRowCtrls=function(e){var i=this,n=this.mapRowNodes(e);return this.getAllRowCtrls().filter(function(o){if(!o.isFullWidth())return!1;var s=o.getRowNode();return!(null!=n&&!i.isRowInMap(s,n))})},t.prototype.createOrUpdateRowCtrl=function(e,i,n,o){var s,a=this.rowCtrlsByRowIndex[e];if(a||I(s=this.paginationProxy.getRow(e))&&I(i)&&i[s.id]&&s.alreadyRendered&&(a=i[s.id],i[s.id]=null),!a){if(s||(s=this.paginationProxy.getRow(e)),!I(s))return;a=this.createRowCon(s,n,o)}return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=a,a},t.prototype.destroyRowCtrls=function(e,i){var n=this,o=[];He(e,function(s,a){if(a){if(n.cachedRowCtrls&&a.isCacheable())return void n.cachedRowCtrls.addRow(a);a.destroyFirstPass(),i?(n.zombieRowCtrls[a.getInstanceId()]=a,o.push(function(){a.destroySecondPass(),delete n.zombieRowCtrls[a.getInstanceId()]})):a.destroySecondPass()}}),i&&(o.push(function(){n.updateAllRowCtrls(),n.dispatchDisplayedRowsChanged()}),Zh(o))},t.prototype.getRowBuffer=function(){var e=this.gridOptionsService.getNum("rowBuffer");return"number"==typeof e?e<0&&(ge(function(){return console.warn("AG Grid: rowBuffer should not be negative")},"warn rowBuffer negative"),e=0,this.gridOptionsService.set("rowBuffer",0)):e=10,e},t.prototype.getRowBufferInPixels=function(){return this.getRowBuffer()*this.gridOptionsService.getRowHeightAsNumber()},t.prototype.workOutFirstAndLastRowsToRender=function(){var e,i;if(this.rowContainerHeightService.updateOffset(),this.paginationProxy.isRowsToRender())if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.paginationProxy.getPageFirstRow(),i=this.paginationProxy.getPageLastRow();else{var n=this.getRowBufferInPixels(),o=this.ctrlsService.getGridBodyCtrl(),s=this.gridOptionsService.is("suppressRowVirtualisation"),a=!1,l=void 0,u=void 0;do{var c=this.paginationProxy.getPixelOffset(),d=this.paginationProxy.getCurrentPagePixelRange(),h=d.pageFirstPixel,p=d.pageLastPixel,f=this.rowContainerHeightService.getDivStretchOffset(),v=o.getScrollFeature().getVScrollPosition(),g=v.top,y=v.bottom;s?(l=h+f,u=p+f):(l=Math.max(g+c-n,h)+f,u=Math.min(y+c+n,p)+f),this.firstVisibleVPixel=Math.max(g+c,h)+f,a=this.ensureAllRowsInRangeHaveHeightsCalculated(l,u)}while(a);var m=this.paginationProxy.getRowIndexAtPixel(l),C=this.paginationProxy.getRowIndexAtPixel(u),w=this.paginationProxy.getPageFirstRow(),_=this.paginationProxy.getPageLastRow();m<w&&(m=w),C>_&&(C=_),e=m,i=C}else e=0,i=-1;var b=this.gridOptionsService.isDomLayout("normal"),O=this.gridOptionsService.is("suppressMaxRenderedRowRestriction"),x=Math.max(this.getRowBuffer(),500);b&&!O&&i-e>x&&(i=e+x),(e!==this.firstRenderedRow||i!==this.lastRenderedRow)&&(this.firstRenderedRow=e,this.lastRenderedRow=i,this.eventService.dispatchEvent({type:E.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:i}))},t.prototype.dispatchFirstDataRenderedEvent=function(){var e=this;if(!this.dataFirstRenderedFired){this.dataFirstRenderedFired=!0;var i={type:E.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(function(){e.beans.eventService.dispatchEvent(i)})}},t.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(e,i){var n=this.paginationProxy.ensureRowHeightsValid(e,i,-1,-1);return n&&this.updateContainerHeights(),n},t.prototype.getFirstVisibleVerticalPixel=function(){return this.firstVisibleVPixel},t.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},t.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},t.prototype.doNotUnVirtualiseRow=function(e){var o=e.getRowNode(),s=this.focusService.isRowNodeFocused(o),a=e.isEditing();return!!(s||a||o.detail)&&!!this.paginationProxy.isRowPresent(o)},t.prototype.createRowCon=function(e,i,n){var o=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(o)return o;var s=this.gridOptionsService.is("suppressAnimationFrame");return new $o(e,this.beans,i,n&&!s&&!this.printLayout,this.printLayout)},t.prototype.getRenderedNodes=function(){var e=this.rowCtrlsByRowIndex;return Object.keys(e).map(function(i){return e[i].getRowNode()})},t.prototype.getRowByPosition=function(e){var i,n=e.rowIndex;switch(e.rowPinned){case"top":i=this.topRowCtrls[n];break;case"bottom":i=this.bottomRowCtrls[n];break;default:(i=this.rowCtrlsByRowIndex[n])||(i=this.getStickyTopRowCtrls().find(function(o){return o.getRowNode().rowIndex===n})||null)}return i},t.prototype.getRowNode=function(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},t.prototype.isRangeInRenderedViewport=function(e,i){return!(null==e||null==i||i<this.firstRenderedRow||e>this.lastRenderedRow)},Vi([S("animationFrameService")],t.prototype,"animationFrameService",void 0),Vi([S("paginationProxy")],t.prototype,"paginationProxy",void 0),Vi([S("columnModel")],t.prototype,"columnModel",void 0),Vi([S("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Vi([S("rowModel")],t.prototype,"rowModel",void 0),Vi([S("focusService")],t.prototype,"focusService",void 0),Vi([S("beans")],t.prototype,"beans",void 0),Vi([S("rowContainerHeightService")],t.prototype,"rowContainerHeightService",void 0),Vi([S("ctrlsService")],t.prototype,"ctrlsService",void 0),Vi([V],t.prototype,"postConstruct",null),Vi([X("rowRenderer")],t)}(k),yb=function(){function r(t){this.entriesMap={},this.entriesList=[],this.maxCount=t}return r.prototype.addRow=function(t){if(this.entriesMap[t.getRowNode().id]=t,this.entriesList.push(t),t.setCached(!0),this.entriesList.length>this.maxCount){var e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}},r.prototype.getRow=function(t){if(null==t||null==t.id)return null;var e=this.entriesMap[t.id];return e?(this.removeFromCache(e),e.setCached(!1),e.getRowNode()!=t?null:e):null},r.prototype.removeFromCache=function(t){var e=t.getRowNode().id;delete this.entriesMap[e],ii(this.entriesList,t)},r.prototype.getEntries=function(){return this.entriesList},r}(),mb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ov=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Cb=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return mb(t,r),t.prototype.formatValue=function(e,i,n,o,s){void 0===s&&(s=!0);var l,a=null,u=e.getColDef();if(o?l=o:s&&(l=u.valueFormatter),l){var c={value:n,node:i,data:i?i.data:null,colDef:u,column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};a="function"==typeof l?l(c):this.expressionService.evaluate(l,c)}else if(u.refData)return u.refData[n]||"";return null==a&&Array.isArray(n)&&(a=n.join(", ")),a},ov([S("expressionService")],t.prototype,"expressionService",void 0),ov([X("valueFormatterService")],t)}(k),wb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Rd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Sb=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return wb(t,r),t.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsService.get("pinnedTopRowData")),this.setPinnedBottomRowData(this.gridOptionsService.get("pinnedBottomRowData"))},t.prototype.isEmpty=function(e){return ei("top"===e?this.pinnedTopRows:this.pinnedBottomRows)},t.prototype.isRowsToRender=function(e){return!this.isEmpty(e)},t.prototype.getRowAtPixel=function(e,i){var n="top"===i?this.pinnedTopRows:this.pinnedBottomRows;if(ei(n))return 0;for(var o=0;o<n.length;o++){var s=n[o];if(s.rowTop+s.rowHeight-1>=e)return o}return n.length-1},t.prototype.setPinnedTopRowData=function(e){this.pinnedTopRows=this.createNodesFromData(e,!0),this.eventService.dispatchEvent({type:E.EVENT_PINNED_ROW_DATA_CHANGED})},t.prototype.setPinnedBottomRowData=function(e){this.pinnedBottomRows=this.createNodesFromData(e,!1),this.eventService.dispatchEvent({type:E.EVENT_PINNED_ROW_DATA_CHANGED})},t.prototype.createNodesFromData=function(e,i){var n=this,o=[];if(e){var s=0;e.forEach(function(a,l){var u=new pe(n.beans);u.data=a,u.id=(i?pe.ID_PREFIX_TOP_PINNED:pe.ID_PREFIX_BOTTOM_PINNED)+l,u.rowPinned=i?"top":"bottom",u.setRowTop(s),u.setRowHeight(n.gridOptionsService.getRowHeightForNode(u).height),u.setRowIndex(l),s+=u.rowHeight,o.push(u)})}return o},t.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},t.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},t.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},t.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},t.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},t.prototype.getPinnedTopRow=function(e){return this.pinnedTopRows[e]},t.prototype.getPinnedBottomRow=function(e){return this.pinnedBottomRows[e]},t.prototype.forEachPinnedTopRow=function(e){ei(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)},t.prototype.forEachPinnedBottomRow=function(e){ei(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)},t.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},t.prototype.getTotalHeight=function(e){if(!e||0===e.length)return 0;var i=Pe(e);return i.rowTop+i.rowHeight},Rd([S("beans")],t.prototype,"beans",void 0),Rd([V],t.prototype,"init",null),Rd([X("pinnedRowModel")],t)}(k),Od=function(){function r(t,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=t,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}return r.prototype.setInactive=function(){this.active=!1},r.prototype.isActive=function(){return this.active},r.prototype.depthFirstSearchChangedPath=function(t,e){if(t.children)for(var i=0;i<t.children.length;i++)this.depthFirstSearchChangedPath(t.children[i],e);e(t.rowNode)},r.prototype.depthFirstSearchEverything=function(t,e,i){if(t.childrenAfterGroup)for(var n=0;n<t.childrenAfterGroup.length;n++){var o=t.childrenAfterGroup[n];o.childrenAfterGroup?this.depthFirstSearchEverything(t.childrenAfterGroup[n],e,i):i&&e(o)}e(t)},r.prototype.forEachChangedNodeDepthFirst=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,t):this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)},r.prototype.executeFromRootNode=function(t){t(this.pathRoot.rowNode)},r.prototype.createPathItems=function(t){for(var e=t,i=0;!this.mapToItems[e.id];)this.mapToItems[e.id]={rowNode:e,children:null},i++,e=e.parent;return i},r.prototype.populateColumnsMap=function(t,e){var i=this;if(this.keepingColumns&&e)for(var n=t;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),e.forEach(function(o){return i.nodeIdsToColumns[n.id][o.getId()]=!0}),n=n.parent},r.prototype.linkPathItems=function(t,e){for(var i=t,n=0;n<e;n++){var o=this.mapToItems[i.id],s=this.mapToItems[i.parent.id];s.children||(s.children=[]),s.children.push(o),i=i.parent}},r.prototype.addParentNode=function(t,e){if(t&&!t.isRowPinned()){var i=this.createPathItems(t);this.linkPathItems(t,i),this.populateColumnsMap(t,e)}},r.prototype.canSkip=function(t){return this.active&&!this.mapToItems[t.id]},r.prototype.getValueColumnsForNode=function(t,e){if(!this.keepingColumns)return e;var i=this.nodeIdsToColumns[t.id];return e.filter(function(o){return i[o.getId()]})},r.prototype.getNotValueColumnsForNode=function(t,e){if(!this.keepingColumns)return null;var i=this.nodeIdsToColumns[t.id];return e.filter(function(o){return!i[o.getId()]})},r}(),Eb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),xd=function(r){function t(e){var i=r.call(this)||this;return i.state=t.STATE_WAITING_TO_LOAD,i.version=0,i.id=e,i}return Eb(t,r),t.prototype.getId=function(){return this.id},t.prototype.load=function(){this.state=t.STATE_LOADING,this.loadFromDatasource()},t.prototype.getVersion=function(){return this.version},t.prototype.setStateWaitingToLoad=function(){this.version++,this.state=t.STATE_WAITING_TO_LOAD},t.prototype.getState=function(){return this.state},t.prototype.pageLoadFailed=function(e){this.isRequestMostRecentAndLive(e)&&(this.state=t.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},t.prototype.success=function(e,i){this.successCommon(e,i)},t.prototype.pageLoaded=function(e,i,n){this.successCommon(e,{rowData:i,rowCount:n})},t.prototype.isRequestMostRecentAndLive=function(e){var i=e===this.version,n=this.isAlive();return i&&n},t.prototype.successCommon=function(e,i){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state=t.STATE_LOADED,this.processServerResult(i))},t.prototype.dispatchLoadCompleted=function(e){void 0===e&&(e=!0),this.dispatchEvent({type:t.EVENT_LOAD_COMPLETE,success:e,block:this})},t.EVENT_LOAD_COMPLETE="loadComplete",t.STATE_WAITING_TO_LOAD="needsLoading",t.STATE_LOADING="loading",t.STATE_LOADED="loaded",t.STATE_FAILED="failed",t}(k),bb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Rl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Rb=function(r,t){return function(e,i){t(e,i,r)}},Ob=function(r){function t(){var i=null!==r&&r.apply(this,arguments)||this;return i.activeBlockLoadsCount=0,i.blocks=[],i.active=!0,i}var e;return bb(t,r),e=t,t.prototype.postConstruct=function(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();var i=this.gridOptionsService.getNum("blockLoadDebounceMillis");i&&i>0&&(this.checkBlockToLoadDebounce=ne.debounce(this.performCheckBlocksToLoad.bind(this),i))},t.prototype.setBeans=function(i){this.logger=i.create("RowNodeBlockLoader")},t.prototype.getMaxConcurrentDatasourceRequests=function(){var i=this.gridOptionsService.getNum("maxConcurrentDatasourceRequests");return null==i?2:i<=0?void 0:i},t.prototype.addBlock=function(i){this.blocks.push(i),i.addEventListener(xd.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},t.prototype.removeBlock=function(i){ne.removeFromArray(this.blocks,i)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.active=!1},t.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:e.BLOCK_LOADED_EVENT}),0==this.activeBlockLoadsCount&&this.dispatchEvent({type:e.BLOCK_LOADER_FINISHED_EVENT})},t.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},t.prototype.performCheckBlocksToLoad=function(){if(this.active){if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void this.logger.log("checkBlockToLoad: max loads exceeded");var i=this.getAvailableLoadingCount(),n=this.blocks.filter(function(o){return o.getState()===xd.STATE_WAITING_TO_LOAD}).slice(0,i);this.registerLoads(n.length),n.forEach(function(o){return o.load()}),this.printCacheStatus()}},t.prototype.getBlockState=function(){if(this.gridOptionsService.isRowModelType("serverSide"))return this.rowModel.getBlockStates();var n={};return this.blocks.forEach(function(o){var s=o.getBlockStateJson();n[s.id]=s.state}),n},t.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+", blocks = "+JSON.stringify(this.getBlockState()))},t.prototype.isLoading=function(){return this.activeBlockLoadsCount>0},t.prototype.registerLoads=function(i){this.activeBlockLoadsCount+=i},t.prototype.getAvailableLoadingCount=function(){return void 0!==this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0},t.BLOCK_LOADED_EVENT="blockLoaded",t.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",Rl([S("rowModel")],t.prototype,"rowModel",void 0),Rl([V],t.prototype,"postConstruct",null),Rl([Rb(0,Tt("loggerFactory"))],t.prototype,"setBeans",null),e=Rl([X("rowNodeBlockLoader")],t)}(k),xb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Dd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Db=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.currentPage=0,e.topDisplayedRowIndex=0,e.bottomDisplayedRowIndex=0,e.pixelOffset=0,e.masterRowCount=0,e}return xb(t,r),t.prototype.postConstruct=function(){this.active=this.gridOptionsService.is("pagination"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationPageSizeChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()},t.prototype.ensureRowHeightsValid=function(e,i,n,o){var s=this.rowModel.ensureRowHeightsValid(e,i,this.getPageFirstRow(),this.getPageLastRow());return s&&this.calculatePages(),s},t.prototype.isPaginateChildRows=function(){return!(!this.gridOptionsService.is("groupRemoveSingleChildren")&&!this.gridOptionsService.is("groupRemoveLowestSingleChildren"))||this.gridOptionsService.is("paginateChildRows")},t.prototype.onModelUpdated=function(e){this.calculatePages(),this.eventService.dispatchEvent({type:E.EVENT_PAGINATION_CHANGED,animate:!!e&&e.animate,newData:!!e&&e.newData,newPage:!!e&&e.newPage,keepRenderedRows:!!e&&e.keepRenderedRows})},t.prototype.onPaginationPageSizeChanged=function(){this.active=this.gridOptionsService.is("pagination"),this.calculatePages(),this.eventService.dispatchEvent({type:E.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0})},t.prototype.goToPage=function(e){this.active&&this.currentPage!==e&&"number"==typeof this.currentPage&&(this.currentPage=e,this.onModelUpdated({type:E.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0}))},t.prototype.getPixelOffset=function(){return this.pixelOffset},t.prototype.getRow=function(e){return this.rowModel.getRow(e)},t.prototype.getRowNode=function(e){return this.rowModel.getRowNode(e)},t.prototype.getRowIndexAtPixel=function(e){return this.rowModel.getRowIndexAtPixel(e)},t.prototype.getCurrentPageHeight=function(){return ie(this.topRowBounds)||ie(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},t.prototype.getCurrentPagePixelRange=function(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}},t.prototype.isRowPresent=function(e){return!!this.rowModel.isRowPresent(e)&&e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex},t.prototype.isEmpty=function(){return this.rowModel.isEmpty()},t.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},t.prototype.forEachNode=function(e){return this.rowModel.forEachNode(e)},t.prototype.forEachNodeOnPage=function(e){for(var i=this.getPageFirstRow(),n=this.getPageLastRow(),o=i;o<=n;o++){var s=this.getRow(o);s&&e(s)}},t.prototype.getType=function(){return this.rowModel.getType()},t.prototype.getRowBounds=function(e){var i=this.rowModel.getRowBounds(e);return i.rowIndex=e,i},t.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},t.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},t.prototype.getRowCount=function(){return this.rowModel.getRowCount()},t.prototype.getPageForIndex=function(e){return Math.floor(e/this.pageSize)},t.prototype.goToPageWithIndex=function(e){if(this.active){var i=this.getPageForIndex(e);this.goToPage(i)}},t.prototype.isRowInPage=function(e){return!this.active||this.getPageForIndex(e.rowIndex)===this.currentPage},t.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},t.prototype.getCurrentPage=function(){return this.currentPage},t.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},t.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},t.prototype.goToFirstPage=function(){this.goToPage(0)},t.prototype.goToLastPage=function(){var e=this.rowModel.getRowCount(),i=Math.floor(e/this.pageSize);this.goToPage(i)},t.prototype.getPageSize=function(){return this.pageSize},t.prototype.getTotalPages=function(){return this.totalPages},t.prototype.setPageSize=function(){this.pageSize=this.gridOptionsService.getNum("paginationPageSize"),(null==this.pageSize||this.pageSize<1)&&(this.pageSize=100)},t.prototype.calculatePages=function(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(I(this.topRowBounds)?this.topRowBounds.rowTop:0)},t.prototype.setPixelOffset=function(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:E.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},t.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},t.prototype.adjustCurrentPageIfInvalid=function(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)},t.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)this.setZeroRows();else{var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();var n=this.pageSize*(this.currentPage+1)-1;if(n>e&&(n=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(this.pageSize*this.currentPage),n===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var o=this.rowModel.getTopLevelRowDisplayedIndex(n+1);this.bottomDisplayedRowIndex=o-1}}},t.prototype.getMasterRowCount=function(){return this.masterRowCount},t.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),0!==this.masterRowCount){var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}else this.setZeroRows()},t.prototype.calculatedPagesNotActive=function(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},Dd([S("rowModel")],t.prototype,"rowModel",void 0),Dd([V],t.prototype,"postConstruct",null),Dd([X("paginationProxy")],t)}(k),Tb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),rv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Pb=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Tb(t,r),t.prototype.processAllCellClasses=function(e,i,n,o){this.processClassRules(e.cellClassRules,i,n,o),this.processStaticCellClasses(e,i,n)},t.prototype.processClassRules=function(e,i,n,o){if(null!=e){for(var s=Object.keys(e),a={},l={},u=function(h){var v,p=s[h],f=e[p];"string"==typeof f?v=c.expressionService.evaluate(f,i):"function"==typeof f&&(v=f(i)),p.split(" ").forEach(function(g){null==g||""==g.trim()||(v?a[g]=!0:l[g]=!0)})},c=this,d=0;d<s.length;d++)u(d);o&&Object.keys(l).forEach(o),Object.keys(a).forEach(n)}},t.prototype.getStaticCellClasses=function(e,i){var o,n=e.cellClass;return n?("string"==typeof(o="function"==typeof n?n(i):n)&&(o=[o]),o||[]):[]},t.prototype.processStaticCellClasses=function(e,i,n){this.getStaticCellClasses(e,i).forEach(function(s){n(s)})},rv([S("expressionService")],t.prototype,"expressionService",void 0),rv([X("stylingService")],t)}(k),Ab=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Lb=function(r){function t(e){return r.call(this,e,"ag-toggle-button")||this}return Ab(t,r),t.prototype.setValue=function(e,i){return r.prototype.setValue.call(this,e,i),this.addOrRemoveCssClass("ag-selected",this.getValue()),this},t}(tl),Mb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Fb=function(r){function t(e){return r.call(this,e,"ag-text-area",null,"textarea")||this}return Mb(t,r),t.prototype.setValue=function(e,i){var n=r.prototype.setValue.call(this,e,i);return this.eInput.value=e,n},t.prototype.setCols=function(e){return this.eInput.cols=e,this},t.prototype.setRows=function(e){return this.eInput.rows=e,this},t}(oo),Ib=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Nb=function(r){function t(e){return r.call(this,e,"ag-date-field","date")||this}return Ib(t,r),t.prototype.postConstruct=function(){var e=this;r.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));var i=Ei();this.addManagedListener(this.eInput,"mousedown",function(){e.isDisabled()||i||e.eInput.focus()}),this.eInput.step="any"},t.prototype.onWheel=function(e){document.activeElement===this.eInput&&e.preventDefault()},t.prototype.setMin=function(e){var i,n=e instanceof Date?null!==(i=bi(e??null,!1))&&void 0!==i?i:void 0:e;return this.min===n||(this.min=n,rn(this.eInput,"min",n)),this},t.prototype.setMax=function(e){var i,n=e instanceof Date?null!==(i=bi(e??null,!1))&&void 0!==i?i:void 0:e;return this.max===n||(this.max=n,rn(this.eInput,"max",n)),this},t.prototype.setStep=function(e){return this.step===e||(this.step=e,rn(this.eInput,"step",e)),this},t.prototype.getDate=function(){var e;if(this.eInput.validity.valid)return null!==(e=Wt(this.getValue()))&&void 0!==e?e:void 0},t.prototype.setDate=function(e,i){this.setValue(bi(e??null,!1),i)},t}(Bo),Gb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),kb=function(r){function t(e){return r.call(this,e,"ag-range-field","range")||this}return Gb(t,r),t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this);var e=this.config,i=e.min,n=e.max,o=e.step;null!=i&&this.setMinValue(i),null!=n&&this.setMaxValue(n),this.setStep(o||1)},t.prototype.addInputListeners=function(){var e=this;this.addManagedListener(this.eInput,"input",function(i){e.setValue(i.target.value)})},t.prototype.setMinValue=function(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this},t.prototype.setMaxValue=function(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this},t.prototype.setStep=function(e){return this.eInput.setAttribute("step",e.toString()),this},t.prototype.setValue=function(e,i){null!=this.min&&(e=Math.max(parseFloat(e),this.min).toString()),null!=this.max&&(e=Math.min(parseFloat(e),this.max).toString());var n=r.prototype.setValue.call(this,e,i);return this.eInput.value=e,n},t}(oo),Hb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),sv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Vb=function(r){function t(e,i){var n=r.call(this,'<div class="ag-rich-select-row" role="presentation"></div>')||this;return n.params=e,n.wrapperEl=i,n}return Hb(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.getGui(),"mouseup",this.onMouseUp.bind(this))},t.prototype.setState=function(e){var i="";this.params.valueFormatter&&(i=this.params.valueFormatter(e)),this.populateWithRenderer(e,i)||this.populateWithoutRenderer(e,i),this.value=e},t.prototype.highlightString=function(e){var i=this.parsedValue;if(!this.params.cellRenderer&&I(i))if(I(e)){var n=i?.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(n>=0){var o=n+e.length,s=Ye(i.slice(0,n),!0),a=Ye(i.slice(n,o),!0),l=Ye(i.slice(o));this.renderValueWithoutRenderer(s+'<span class="ag-rich-select-row-text-highlight">'+a+"</span>"+l)}}else this.renderValueWithoutRenderer(i)},t.prototype.updateHighlighted=function(e){var i,n=this.getGui(),o="ag-rich-select-row-"+this.getCompId();null===(i=n.parentElement)||void 0===i||i.setAttribute("id",o),e&&(ic(this.getParentComponent().getAriaElement(),o),this.wrapperEl.setAttribute("data-active-option",o)),Go(n.parentElement,e),this.addOrRemoveCssClass("ag-rich-select-row-selected",e)},t.prototype.populateWithoutRenderer=function(e,i){var n=this.gridOptionsService.getDocument(),o=this.getGui(),s=n.createElement("span");s.style.overflow="hidden",s.style.textOverflow="ellipsis";var a=Ye(I(i)?i:e,!0);this.parsedValue=I(a)?a:null,o.appendChild(s),this.renderValueWithoutRenderer(a)},t.prototype.renderValueWithoutRenderer=function(e){var i=this.getGui().querySelector("span");i&&(i.innerHTML=I(e)?e:"&nbsp;")},t.prototype.populateWithRenderer=function(e,i){var o,s,n=this;return this.params.cellRenderer&&(s=this.userComponentFactory.getCellRendererDetails(this.params,{value:e,valueFormatted:i,api:this.gridOptionsService.api})),s&&(o=s.newAgStackInstance()),o&&Ac(o,this.getGui()),!!o&&(o.then(function(a){n.addDestroyFunc(function(){n.getContext().destroyBean(a)})}),!0)},t.prototype.onMouseUp=function(){var e=this.getParentComponent(),i={type:E.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};e?.dispatchEvent(i)},sv([S("userComponentFactory")],t.prototype,"userComponentFactory",void 0),sv([V],t.prototype,"postConstruct",null),t}(he),Bb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ol=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Bb(t,r),t.prototype.initialiseTabGuard=function(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var i=[this.eTopGuard,this.eBottomGuard],n={setTabIndex:function(o){i.forEach(function(s){return null!=o?s.setAttribute("tabindex",o):s.removeAttribute("tabindex")})}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new _E({comp:n,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation}))},t.prototype.createTabGuard=function(e){var i=document.createElement("div");return i.classList.add(Is.TAB_GUARD,"top"===e?Is.TAB_GUARD_TOP:Is.TAB_GUARD_BOTTOM),ot(i,"presentation"),i},t.prototype.addTabGuards=function(e,i){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",i)},t.prototype.removeAllChildrenExceptTabGuards=function(){var e=[this.eTopGuard,this.eBottomGuard];Pt(this.getFocusableElement()),this.addTabGuards.apply(this,function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r}([],function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(e)))},t.prototype.forceFocusOutOfContainer=function(e){void 0===e&&(e=!1),this.tabGuardCtrl.forceFocusOutOfContainer(e)},t.prototype.appendChild=function(e,i){ws(e)||(e=e.getGui());var n=this.eBottomGuard;n?n.insertAdjacentElement("beforebegin",e):r.prototype.appendChild.call(this,e,i)},t}(he),Ub=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),xl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},av=function(r){function t(e){var i=r.call(this,t.getTemplate(e?.cssIdentifier||"default"))||this;i.renderedRows=new Map,i.rowHeight=20;var n=e||{},o=n.cssIdentifier,a=n.ariaRole,l=void 0===a?"listbox":a,u=n.listName;return i.cssIdentifier=void 0===o?"default":o,i.ariaRole=l,i.listName=u,i}return Ub(t,r),t.prototype.postConstruct=function(){var e=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(i){return e.onFocusIn(i)},onFocusOut:function(i){return e.onFocusOut(i)},focusInnerElement:function(i){return e.focusInnerElement(i)},onTabKeyDown:function(i){return e.onTabKeyDown(i)},handleKeyDown:function(i){return e.handleKeyDown(i)}}),this.setAriaProperties(),this.addManagedListener(this.eventService,E.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))},t.prototype.onGridStylesChanged=function(){this.rowHeight=this.getItemHeight(),this.refresh()},t.prototype.setAriaProperties=function(){var i=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),n=this.eContainer;ot(n,this.ariaRole),xn(n,i)},t.prototype.addResizeObserver=function(){var e=this,n=this.resizeObserverService.observeResize(this.getGui(),function(){return e.animationFrameService.requestAnimationFrame(function(){return e.drawVirtualRows()})});this.addDestroyFunc(n)},t.prototype.focusInnerElement=function(e){this.focusRow(e?this.model.getRowCount()-1:0)},t.prototype.onFocusIn=function(e){var i=e.target;return i.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=Rp(i)-1),!1},t.prototype.onFocusOut=function(e){return this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null),!1},t.prototype.handleKeyDown=function(e){switch(e.key){case M.UP:case M.DOWN:this.navigate(e.key===M.UP)&&e.preventDefault()}},t.prototype.onTabKeyDown=function(e){this.navigate(e.shiftKey)?e.preventDefault():(on(e),this.forceFocusOutOfContainer(e.shiftKey))},t.prototype.navigate=function(e){if(null==this.lastFocusedRowIndex)return!1;var i=this.lastFocusedRowIndex+(e?-1:1);return!(i<0||i>=this.model.getRowCount()||(this.focusRow(i),0))},t.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},t.prototype.focusRow=function(e){var i=this;this.ensureIndexVisible(e),window.setTimeout(function(){if(i.isAlive()){var n=i.renderedRows.get(e);n&&n.eDiv.focus()}},10)},t.prototype.getComponentAt=function(e){var i=this.renderedRows.get(e);return i&&i.rowComponent},t.prototype.forEachRenderedRow=function(e){this.renderedRows.forEach(function(i,n){return e(i.rowComponent,n)})},t.getTemplate=function(e){return'<div class="ag-virtual-list-viewport ag-'+e+'-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-'+e+'-virtual-list-container" ref="eContainer"></div>\n            </div>'},t.prototype.getItemHeight=function(){return this.environment.getListItemHeight()},t.prototype.ensureIndexVisible=function(e,i){void 0===i&&(i=!0);var n=this.model.getRowCount();if("number"!=typeof e||e<0||e>=n)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e),!1;var o=e*this.rowHeight,s=o+this.rowHeight,a=this.getGui(),l=a.scrollTop,u=a.offsetHeight,d=i?0:this.rowHeight,p=l+u<s-d;return l>o+d?(a.scrollTop=o,!0):!!p&&(a.scrollTop=s-u,!0)},t.prototype.setComponentCreator=function(e){this.componentCreator=e},t.prototype.setComponentUpdater=function(e){this.componentUpdater=e},t.prototype.getRowHeight=function(){return this.rowHeight},t.prototype.getScrollTop=function(){return this.getGui().scrollTop},t.prototype.setRowHeight=function(e){this.rowHeight=e,this.refresh()},t.prototype.refresh=function(e){var i=this;if(null!=this.model&&this.isAlive()){var n=this.model.getRowCount();this.eContainer.style.height=n*this.rowHeight+"px",zu(function(){return i.eContainer.clientHeight>=n*i.rowHeight},function(){i.isAlive()&&(i.canSoftRefresh(e)?i.drawVirtualRows(!0):(i.clearVirtualRows(),i.drawVirtualRows()))})}},t.prototype.canSoftRefresh=function(e){return!!(e&&this.renderedRows.size&&"function"==typeof this.model.areRowsEqual&&this.componentUpdater)},t.prototype.clearVirtualRows=function(){var e=this;this.renderedRows.forEach(function(i,n){return e.removeRow(n)})},t.prototype.drawVirtualRows=function(e){if(this.isAlive()&&this.model){var i=this.getGui(),n=i.scrollTop,o=n+i.offsetHeight,s=Math.floor(n/this.rowHeight),a=Math.floor(o/this.rowHeight);this.ensureRowsRendered(s,a,e)}},t.prototype.ensureRowsRendered=function(e,i,n){var o=this;this.renderedRows.forEach(function(a,l){(l<e||l>i)&&l!==o.lastFocusedRowIndex&&o.removeRow(l)}),n&&this.refreshRows();for(var s=e;s<=i;s++)this.renderedRows.has(s)||s<this.model.getRowCount()&&this.insertRow(s)},t.prototype.insertRow=function(e){var i=this,n=this.model.getRow(e),o=document.createElement("div");if(o.classList.add("ag-virtual-list-item","ag-"+this.cssIdentifier+"-virtual-list-item"),ot(o,"tree"===this.ariaRole?"treeitem":"option"),nc(o,this.model.getRowCount()),oc(o,e+1),o.setAttribute("tabindex","-1"),"function"==typeof this.model.isRowSelected){var s=this.model.isRowSelected(e);Go(o,!!s),Gp(o,s)}o.style.height=this.rowHeight+"px",o.style.top=this.rowHeight*e+"px";var a=this.componentCreator(n,o);a.addGuiEventListener("focusin",function(){return i.lastFocusedRowIndex=e}),o.appendChild(a.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",o):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",o):this.eContainer.appendChild(o),this.renderedRows.set(e,{rowComponent:a,eDiv:o,value:n})},t.prototype.removeRow=function(e){var i=this.renderedRows.get(e);this.eContainer.removeChild(i.eDiv),this.destroyBean(i.rowComponent),this.renderedRows.delete(e)},t.prototype.refreshRows=function(){var e=this,i=this.model.getRowCount();this.renderedRows.forEach(function(n,o){var s,a;if(o>=i)e.removeRow(o);else{var l=e.model.getRow(o);null!==(a=(s=e.model).areRowsEqual)&&void 0!==a&&a.call(s,n.value,l)?e.componentUpdater(l,n.rowComponent):e.removeRow(o)}})},t.prototype.addScrollListener=function(){var e=this;this.addGuiEventListener("scroll",function(){return e.drawVirtualRows()},{passive:!0})},t.prototype.setModel=function(e){this.model=e},t.prototype.getAriaElement=function(){return this.eContainer},t.prototype.destroy=function(){this.isAlive()&&(this.clearVirtualRows(),r.prototype.destroy.call(this))},xl([S("resizeObserverService")],t.prototype,"resizeObserverService",void 0),xl([S("animationFrameService")],t.prototype,"animationFrameService",void 0),xl([U("eContainer")],t.prototype,"eContainer",void 0),xl([V],t.prototype,"postConstruct",null),t}(Ol),zb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Dl=function(){return Dl=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Dl.apply(this,arguments)},lv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},$b=function(r){function t(e){var i,n,o=r.call(this,Dl(Dl({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:null!==(i=e?.template)&&void 0!==i?i:'\n    <div class="ag-picker-field" role="presentation">\n        <div ref="eLabel"></div>\n            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">\n            <div ref="eDisplayField" class="ag-picker-field-display"></div>\n            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n        </div>\n    </div>',modalPicker:!1},e),{maxPickerHeight:null!==(n=e?.maxPickerHeight)&&void 0!==n?n:"calc(var(--ag-row-height) * 6.5)"}))||this;o.searchString="",o.highlightedItem=-1,o.lastRowHovered=-1,o.searchStringCreator=null;var s=e||{},a=s.cellRowHeight,l=s.value,u=s.valueList,c=s.searchStringCreator;return null!=a&&(o.cellRowHeight=a),null!=l&&(o.value=l),null!=u&&(o.values=u),c&&(o.searchStringCreator=c),o}return zb(t,r),t.prototype.postConstruct=function(){var i,e=this;r.prototype.postConstruct.call(this),this.createLoadingElement(),this.createListComponent();var n=this.config,o=n.allowTyping,s=n.placeholder;o?(this.eInput.setAutoComplete(!1).setInputPlaceholder(s),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=null!==(i=this.gridOptionsService.getNum("tabIndex"))&&void 0!==i?i:0;var a=this.config.searchDebounceDelay;this.clearSearchString=Fi(this.clearSearchString,void 0===a?300:a),this.renderSelectedValue(),o&&(this.eInput.onValueChange(function(u){return e.searchTextFromString(u)}),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))},t.prototype.createLoadingElement=function(){var e=this.gridOptionsService.getDocument(),i=this.localeService.getLocaleTextFunc(),n=e.createElement("div");n.classList.add("ag-loading-text"),n.innerText=i("loadingOoo","Loading..."),this.eLoading=n},t.prototype.createListComponent=function(){var e=this;this.listComponent=this.createBean(new av({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this)),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,E.EVENT_FIELD_PICKER_VALUE_SELECTED,function(u){e.onListValueSelected(u.value,u.fromEnterKey)});var i=this.cellRowHeight;i&&this.listComponent.setRowHeight(i);var n=this.listComponent.getGui(),o=this.listComponent.getAriaElement();this.addManagedListener(n,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(n,"mousedown",function(u){return u.preventDefault()}),n.classList.add("ag-rich-select-list");var s="ag-rich-select-list-"+this.listComponent.getCompId();o.setAttribute("id",s),xn(o,this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue)),kp(this.eWrapper,o)},t.prototype.renderSelectedValue=function(){var l,u,e=this,i=this,n=i.value,o=i.eDisplayField,s=i.config,a=this.config.valueFormatter?this.config.valueFormatter(n):n;if(s.allowTyping)this.eInput.setValue(a);else if(s.cellRenderer&&(l=this.userComponentFactory.getCellRendererDetails(this.config,{value:n,valueFormatted:a,api:this.gridOptionsService.api})),l&&(u=l.newAgStackInstance()),u)Pt(o),Ac(u,o),u.then(function(d){e.addDestroyFunc(function(){return e.getContext().destroyBean(d)})});else if(I(this.value))o.innerText=a,o.classList.remove("ag-display-as-placeholder");else{var c=s.placeholder;I(c)?(o.innerHTML=""+Ye(c),o.classList.add("ag-display-as-placeholder")):Pt(o)}},t.prototype.getCurrentValueIndex=function(){var i=this.currentList,n=this.value;if(null==n)return-1;for(var o=0;o<i.length;o++)if(i[o]===n)return o;return-1},t.prototype.highlightFilterMatch=function(){var i,e=this;null===(i=this.listComponent)||void 0===i||i.forEachRenderedRow(function(n,o){n.highlightString(e.searchString)})},t.prototype.highlightSelectedValue=function(e){var n,i=this;null==e&&(e=this.getCurrentValueIndex()),this.highlightedItem=e,null===(n=this.listComponent)||void 0===n||n.forEachRenderedRow(function(o,s){o.updateHighlighted(-1!==e&&i.highlightedItem===s)})},t.prototype.setRowHeight=function(e){e!==this.cellRowHeight&&(this.cellRowHeight=e),this.listComponent&&this.listComponent.setRowHeight(e)},t.prototype.createPickerComponent=function(){var e=this.values;return e&&this.setValueList({valueList:e}),this.listComponent},t.prototype.setSearchStringCreator=function(e){this.searchStringCreator=e},t.prototype.setValueList=function(e){var i=e.valueList,n=e.refresh;this.listComponent&&this.currentList!==i&&(this.currentList=i,this.listComponent.setModel({getRowCount:function(){return i.length},getRow:function(o){return i[o]}}),n&&(this.values?this.listComponent.refresh():(this.values=i,this.isPickerDisplayed&&this.showCurrentValueInPicker())))},t.prototype.showPicker=function(){r.prototype.showPicker.call(this),this.showCurrentValueInPicker()},t.prototype.showCurrentValueInPicker=function(){var e,i;if(this.listComponent){if(!this.currentList)return void(this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading));null!==(e=this.eLoading)&&void 0!==e&&e.offsetParent&&(null===(i=this.eLoading.parentElement)||void 0===i||i.removeChild(this.eLoading));var n=this.getCurrentValueIndex();-1!==n?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(n),this.listComponent.refresh(!0),this.highlightSelectedValue(n)):this.listComponent.refresh()}},t.prototype.beforeHidePicker=function(){this.highlightedItem=-1,r.prototype.beforeHidePicker.call(this)},t.prototype.onWrapperFocus=function(e){this.eInput&&this.eInput.getFocusableElement().focus()},t.prototype.onWrapperFocusOut=function(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()},t.prototype.buildSearchStringFromKeyboardEvent=function(e){var i=e.key;if(i===M.BACKSPACE)this.searchString=this.searchString.slice(0,-1),i="";else if(!Qa(e))return;e.preventDefault(),this.searchTextFromCharacter(i)},t.prototype.searchTextFromCharacter=function(e){this.searchString+=e,this.runSearch(),this.clearSearchString()},t.prototype.searchTextFromString=function(e){null==e&&(e=""),this.searchString=e,this.runSearch()},t.prototype.buildSearchStrings=function(e){var o,i=this.config.valueFormatter,n=void 0===i?function(s){return s}:i;return"number"==typeof e[0]||"string"==typeof e[0]?o=e.map(function(s){return n(s)}):"object"==typeof e[0]&&this.searchStringCreator&&(o=this.searchStringCreator(e)),o},t.prototype.getSuggestionsAndFilteredValues=function(e,i){var n=this,o=[],s=[];if(!e.length)return{suggestions:o,filteredValues:s};var a=this.config,u=a.searchType,c=void 0===u?"fuzzy":u,h=a.filterList&&a.allowTyping;if("fuzzy"===c){var p=hs(this.searchString,i,!0);o=p.values;var f=p.indices;if(h&&f.length)for(var v=0;v<f.length;v++)s.push(this.values[f[v]])}else o=i.filter(function(g,y){var m=g.toLocaleLowerCase(),C=n.searchString.toLocaleLowerCase(),w="match"===c?m.startsWith(C):-1!==m.indexOf(C);return h&&w&&s.push(n.values[y]),w});return{suggestions:o,filteredValues:s}},t.prototype.filterListModel=function(e){var i=this.config;!i.allowTyping||!i.filterList||this.setValueList({valueList:e,refresh:!0})},t.prototype.runSearch=function(){var e,i,n,o=this.values,s=this.buildSearchStrings(o);if(s){var a=this.getSuggestionsAndFilteredValues(this.searchString,s),l=a.suggestions,u=a.filteredValues,c=this.config,p=c.highlightMatch,f=c.searchType,v=void 0===f?"fuzzy":f,g=u.length,y=!(!c.allowTyping||!c.filterList||""===this.searchString);if(y&&this.filterListModel(y?u:o),l.length){var m=y?0:s.indexOf(l[0]);this.selectListItem(m),p&&"fuzzy"!==v&&this.highlightFilterMatch()}else if(this.highlightSelectedValue(-1),!y||g)null===(e=this.listComponent)||void 0===e||e.ensureIndexVisible(0);else if(y){this.getAriaElement().removeAttribute("data-active-option");var C=null===(i=this.listComponent)||void 0===i?void 0:i.getAriaElement();C&&ic(C,null)}var w=null===(n=this.listComponent)||void 0===n?void 0:n.getGui();w?.classList.toggle("ag-hidden",y&&!g)}else this.highlightSelectedValue(-1)},t.prototype.clearSearchString=function(){this.searchString=""},t.prototype.selectListItem=function(e,i,n){!this.isPickerDisplayed||!this.listComponent||e<0||e>=this.currentList.length||(this.listComponent.ensureIndexVisible(e,!i)&&!n&&this.listComponent.refresh(!0),this.highlightSelectedValue(e))},t.prototype.setValue=function(e,i,n){var o=this.currentList.indexOf(e);return-1===o?this:(this.value=e,n||this.selectListItem(o),this.renderSelectedValue(),r.prototype.setValue.call(this,e,i))},t.prototype.createRowComponent=function(e){var i=new Vb(this.config,this.eWrapper);i.setParentComponent(this.listComponent),this.getContext().createBean(i),i.setState(e);var n=this.config,s=n.searchType;return n.highlightMatch&&"fuzzy"!==(void 0===s?"fuzzy":s)&&i.highlightString(this.searchString),i},t.prototype.getRowForMouseEvent=function(e){var i=this.listComponent;if(!i)return-1;var n=i?.getGui(),o=n.getBoundingClientRect(),s=i.getScrollTop();return Math.floor((e.clientY-o.top+s)/i.getRowHeight())},t.prototype.onPickerMouseMove=function(e){if(this.listComponent){var i=this.getRowForMouseEvent(e);-1!==i&&i!=this.lastRowHovered&&(this.lastRowHovered=i,this.selectListItem(i,!0,!0))}},t.prototype.onNavigationKeyDown=function(e,i){e.preventDefault();var n=i===M.DOWN;if(this.isPickerDisplayed||!n){var o=this.highlightedItem;this.selectListItem(-1===o?0:o+(n?1:-1),!1,!0)}else this.showPicker()},t.prototype.onEnterKeyDown=function(e){this.isPickerDisplayed&&(e.preventDefault(),this.onListValueSelected(this.currentList[this.highlightedItem],!0))},t.prototype.onListValueSelected=function(e,i){this.setValue(e,!1,!0),this.dispatchPickerEvent(e,i),this.hidePicker()},t.prototype.dispatchPickerEvent=function(e,i){this.dispatchEvent({type:E.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:i,value:e})},t.prototype.getFocusableElement=function(){return this.config.allowTyping?this.eInput.getFocusableElement():r.prototype.getFocusableElement.call(this)},t.prototype.onKeyDown=function(e){var i=e.key,n=this.config.allowTyping;switch(i){case M.LEFT:case M.RIGHT:case M.PAGE_HOME:case M.PAGE_END:n||e.preventDefault();break;case M.PAGE_UP:case M.PAGE_DOWN:e.preventDefault();break;case M.DOWN:case M.UP:this.onNavigationKeyDown(e,i);break;case M.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),on(e),this.hidePicker());break;case M.ENTER:this.onEnterKeyDown(e);break;default:n||this.buildSearchStringFromKeyboardEvent(e)}},t.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,r.prototype.destroy.call(this)},lv([S("userComponentFactory")],t.prototype,"userComponentFactory",void 0),lv([U("eInput")],t.prototype,"eInput",void 0),t}(pf),Yb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Tl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Xb=function(r){function t(e){var i=r.call(this,e,t.TEMPLATE)||this;return i.labelAlignment="top",i}return Yb(t,r),t.prototype.init=function(){this.eSlider.addCssClass("ag-slider-field")},t.prototype.onValueChange=function(e){var i=this,n=E.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,n,function(){var o=parseFloat(i.eText.getValue());i.eSlider.setValue(o.toString(),!0),e(o||0)}),this.addManagedListener(this.eSlider,n,function(){var o=i.eSlider.getValue();i.eText.setValue(o,!0),e(parseFloat(o))}),this},t.prototype.setSliderWidth=function(e){return this.eSlider.setWidth(e),this},t.prototype.setTextFieldWidth=function(e){return this.eText.setWidth(e),this},t.prototype.setMinValue=function(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this},t.prototype.setMaxValue=function(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this},t.prototype.getValue=function(){return this.eText.getValue()},t.prototype.setValue=function(e){return this.getValue()===e||(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),this.dispatchEvent({type:E.EVENT_FIELD_VALUE_CHANGED})),this},t.prototype.setStep=function(e){return this.eSlider.setStep(e),this.eText.setStep(e),this},t.TEMPLATE='<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>',Tl([U("eLabel")],t.prototype,"eLabel",void 0),Tl([U("eSlider")],t.prototype,"eSlider",void 0),Tl([U("eText")],t.prototype,"eText",void 0),Tl([V],t.prototype,"init",null),t}(df),qb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),co=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Zb=function(r){function t(e){void 0===e&&(e={});var i=r.call(this,t.getTemplate(e))||this;i.suppressEnabledCheckbox=!0,i.suppressOpenCloseIcons=!1;var o=e.enabled,s=e.items,a=e.suppressEnabledCheckbox,l=e.suppressOpenCloseIcons;return i.title=e.title,i.cssIdentifier=e.cssIdentifier||"default",i.enabled=o??!0,i.items=s||[],i.alignItems=e.alignItems||"center",null!=a&&(i.suppressEnabledCheckbox=a),null!=l&&(i.suppressOpenCloseIcons=l),i}return qb(t,r),t.getTemplate=function(e){var i=e.cssIdentifier||"default";return'<div class="ag-group ag-'+i+'-group" role="presentation">\n            <div class="ag-group-title-bar ag-'+i+'-group-title-bar ag-unselectable" ref="eTitleBar" role="button">\n                <span class="ag-group-title-bar-icon ag-'+i+'-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-'+i+'-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-'+i+'-group-title"></span>\n            </div>\n            <div ref="eToolbar" class="ag-group-toolbar ag-'+i+'-group-toolbar">\n                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div ref="eContainer" class="ag-group-container ag-group-container-'+(e.direction||"vertical")+" ag-"+i+'-group-container"></div>\n        </div>'},t.prototype.postConstruct=function(){if(this.items.length){var e=this.items;this.items=[],this.addItems(e)}var i=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(i("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},t.prototype.setupExpandContract=function(){var e=this;this.eGroupClosedIcon.appendChild(Oi("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(Oi("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eTitleBar,"click",function(){return e.toggleGroupExpand()}),this.addManagedListener(this.eTitleBar,"keydown",function(i){switch(i.key){case M.ENTER:case M.SPACE:i.preventDefault(),e.toggleGroupExpand();break;case M.RIGHT:case M.LEFT:i.preventDefault(),e.toggleGroupExpand(i.key===M.RIGHT)}})},t.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||Hi(this.eTitleBar,this.expanded)},t.prototype.refreshChildDisplay=function(){var e=!this.suppressOpenCloseIcons;Ce(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),Ce(this.eGroupOpenedIcon,e&&this.expanded),Ce(this.eGroupClosedIcon,e&&!this.expanded)},t.prototype.isExpanded=function(){return this.expanded},t.prototype.setAlignItems=function(e){return this.alignItems!==e&&this.removeCssClass("ag-group-item-alignment-"+this.alignItems),this.alignItems=e,this.addCssClass("ag-group-item-alignment-"+this.alignItems),this},t.prototype.toggleGroupExpand=function(e){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),Ce(this.eContainer,!0),this):(this.expanded===(e=e??!this.expanded)||(this.expanded=e,this.refreshAriaStatus(),this.refreshChildDisplay(),Ce(this.eContainer,e),this.dispatchEvent({type:this.expanded?t.EVENT_EXPANDED:t.EVENT_COLLAPSED})),this)},t.prototype.addItems=function(e){var i=this;e.forEach(function(n){return i.addItem(n)})},t.prototype.addItem=function(e){var i=this.eContainer,n=e instanceof he?e.getGui():e;n.classList.add("ag-group-item","ag-"+this.cssIdentifier+"-group-item"),i.appendChild(n),this.items.push(n)},t.prototype.hideItem=function(e,i){Ce(this.items[i],!e)},t.prototype.setTitle=function(e){return this.eTitle.innerText=e,this},t.prototype.addCssClassToTitleBar=function(e){this.eTitleBar.classList.add(e)},t.prototype.setEnabled=function(e,i){return this.enabled=e,this.refreshDisabledStyles(),this.toggleGroupExpand(e),i||this.cbGroupEnabled.setValue(e),this},t.prototype.isEnabled=function(){return this.enabled},t.prototype.onEnableChange=function(e){var i=this;return this.cbGroupEnabled.onValueChange(function(n){i.setEnabled(n,!0),e(n)}),this},t.prototype.hideEnabledCheckbox=function(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},t.prototype.hideOpenCloseIcons=function(e){return this.suppressOpenCloseIcons=e,e&&this.toggleGroupExpand(!0),this},t.prototype.refreshDisabledStyles=function(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)},t.EVENT_EXPANDED="expanded",t.EVENT_COLLAPSED="collapsed",co([U("eTitleBar")],t.prototype,"eTitleBar",void 0),co([U("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0),co([U("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0),co([U("eToolbar")],t.prototype,"eToolbar",void 0),co([U("cbGroupEnabled")],t.prototype,"cbGroupEnabled",void 0),co([U("eTitle")],t.prototype,"eTitle",void 0),co([U("eContainer")],t.prototype,"eContainer",void 0),co([V],t.prototype,"postConstruct",null),t}(he),Qb=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Pl=function(){return Pl=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Pl.apply(this,arguments)},uv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Jb=function(r){function t(e){void 0===e&&(e=1);var i=r.call(this,'<div class="ag-menu-list" role="tree"></div>')||this;return i.level=e,i.menuItems=[],i}return Qb(t,r),t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onTabKeyDown:function(i){return e.onTabKeyDown(i)},handleKeyDown:function(i){return e.handleKeyDown(i)}})},t.prototype.onTabKeyDown=function(e){var i=this.getParentComponent(),n=i&&i.getGui();n&&n.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)},t.prototype.handleKeyDown=function(e){switch(e.key){case M.UP:case M.RIGHT:case M.DOWN:case M.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case M.ESCAPE:var i=this.findTopMenu();i&&this.focusService.focusInto(i.getGui())}},t.prototype.clearActiveItem=function(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)},t.prototype.addMenuItems=function(e){var i=this;e?.forEach(function(n){"separator"===n?i.addSeparator():"string"==typeof n?console.warn("AG Grid: unrecognised menu item "+n):i.addItem(n)})},t.prototype.addItem=function(e){var i=this,n=this.createManagedBean(new Bs(Pl(Pl({},e),{isAnotherSubMenuOpen:function(){return i.menuItems.some(function(o){return o.isSubMenuOpen()})}})));n.setParentComponent(this),Tp(n.getGui(),this.level),this.menuItems.push(n),this.appendChild(n.getGui()),this.addManagedListener(n,Bs.EVENT_MENU_ITEM_SELECTED,function(o){i.dispatchEvent(o)}),this.addManagedListener(n,Bs.EVENT_MENU_ITEM_ACTIVATED,function(o){i.activeMenuItem&&i.activeMenuItem!==o.menuItem&&i.activeMenuItem.deactivate(),i.activeMenuItem=o.menuItem})},t.prototype.activateFirstItem=function(){var e=this.menuItems.filter(function(i){return!i.isDisabled()})[0];e&&e.activate()},t.prototype.addSeparator=function(){this.appendChild(Ct('\n            <div class="ag-menu-separator" aria-hidden="true">\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n            </div>'))},t.prototype.findTopMenu=function(){var e=this.getParentComponent();if(!e&&this instanceof t)return this;for(;;){var i=e&&e.getParentComponent&&e.getParentComponent();if(!i||!(i instanceof t||i instanceof Bs))break;e=i}return e instanceof t?e:void 0},t.prototype.handleNavKey=function(e){switch(e){case M.UP:case M.DOWN:var i=this.findNextItem(e===M.UP);return void(i&&i!==this.activeMenuItem&&i.activate())}e===(this.gridOptionsService.is("enableRtl")?M.RIGHT:M.LEFT)?this.closeIfIsChild():this.openChild()},t.prototype.closeIfIsChild=function(e){var i=this.getParentComponent();i&&i instanceof Bs&&(e&&e.preventDefault(),i.closeSubMenu(),i.getGui().focus())},t.prototype.openChild=function(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)},t.prototype.findNextItem=function(e){var i=this.menuItems.filter(function(l){return!l.isDisabled()});if(i.length){if(!this.activeMenuItem)return e?Pe(i):i[0];e&&i.reverse();for(var n,o=!1,s=0;s<i.length;s++){var a=i[s];if(o){n=a;break}a===this.activeMenuItem&&(o=!0)}return n||this.activeMenuItem}},t.prototype.destroy=function(){this.clearActiveItem(),r.prototype.destroy.call(this)},uv([S("focusService")],t.prototype,"focusService",void 0),uv([V],t.prototype,"postConstruct",null),t}(Ol),eR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),iR=function(r){function t(e){var i=r.call(this)||this;return i.wrappedComponent=e,i.setTemplateFromElement(e.getGui()),i}return eR(t,r),t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onTabKeyDown:function(i){return e.onTabKeyDown(i)},handleKeyDown:function(i){return e.handleKeyDown(i)}})},t.prototype.handleKeyDown=function(e){e.key===M.ESCAPE&&this.closePanel()},t.prototype.onTabKeyDown=function(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())},t.prototype.closePanel=function(){var e=this.parentComponent;e.closeSubMenu(),setTimeout(function(){return e.getGui().focus()},0)},function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([V],t.prototype,"postConstruct",null),t}(Ol),nR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),cv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Bs=function(r){function t(e){var i=r.call(this)||this;return i.params=e,i.isActive=!1,i.subMenuIsOpen=!1,i.setTemplate('<div class="'+i.getClassName()+'" tabindex="-1" role="treeitem"></div>'),i}return nR(t,r),t.prototype.init=function(){var e=this;this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu(),this.addTooltip();var i=this.getGui();this.params.disabled?(this.addCssClass(this.getClassName("disabled")),tc(i,!0)):(this.addGuiEventListener("click",function(n){return e.onItemSelected(n)}),this.addGuiEventListener("keydown",function(n){(n.key===M.ENTER||n.key===M.SPACE)&&(n.preventDefault(),e.onItemSelected(n))}),this.addGuiEventListener("mousedown",function(n){n.stopPropagation(),n.preventDefault()}),this.addGuiEventListener("mouseenter",function(){return e.onMouseEnter()}),this.addGuiEventListener("mouseleave",function(){return e.onMouseLeave()})),this.params.cssClasses&&this.params.cssClasses.forEach(function(n){return e.addCssClass(n)})},t.prototype.isDisabled=function(){return!!this.params.disabled},t.prototype.openSubMenu=function(e){var i=this;if(void 0===e&&(e=!1),this.closeSubMenu(),this.params.subMenu){var o,n=Ct('<div class="ag-menu" role="presentation"></div>');if(this.params.subMenu instanceof Array){var s=bp(this.getGui()),a=isNaN(s)?1:s+1,l=this.createBean(new Jb(a));l.setParentComponent(this),l.addMenuItems(this.params.subMenu),n.appendChild(l.getGui()),this.addManagedListener(l,t.EVENT_MENU_ITEM_SELECTED,function(m){return i.dispatchEvent(m)}),l.addGuiEventListener("mouseenter",function(){return i.cancelDeactivate()}),o=function(){return i.destroyBean(l)},e&&setTimeout(function(){return l.activateFirstItem()},0)}else{var u=this.params.subMenu,c=this.createBean(new iR(u));c.setParentComponent(this);var d=c.getGui(),h="mouseenter",p=function(){return i.cancelDeactivate()};d.addEventListener(h,p),o=function(){return d.removeEventListener(h,p)},n.appendChild(d),u.afterGuiAttached&&setTimeout(function(){return u.afterGuiAttached()},0)}var f=this.getGui(),v=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:f,ePopup:n}),g=this.localeService.getLocaleTextFunc(),y=this.popupService.addPopup({modal:!0,eChild:n,positionCallback:v,anchorToElement:f,ariaLabel:g("ariaLabelSubMenu","SubMenu")});this.subMenuIsOpen=!0,Hi(f,!0),this.hideSubMenu=function(){y&&y.hideFunc(),i.subMenuIsOpen=!1,Hi(f,!1),o()}}},t.prototype.closeSubMenu=function(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,Hi(this.getGui(),!1))},t.prototype.isSubMenuOpen=function(){return this.subMenuIsOpen},t.prototype.activate=function(e){var i=this;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.addCssClass(this.getClassName("active")),this.getGui().focus(),e&&this.params.subMenu&&window.setTimeout(function(){i.isAlive()&&i.isActive&&i.openSubMenu()},300),this.onItemActivated())},t.prototype.deactivate=function(){this.cancelDeactivate(),this.removeCssClass(this.getClassName("active")),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()},t.prototype.addIcon=function(){if(this.params.checked||this.params.icon||!this.params.isCompact){var e=Ct('<span ref="eIcon" class="'+this.getClassName("part")+" "+this.getClassName("icon")+'" role="presentation"></span>');this.params.checked?e.appendChild(Ke("check",this.gridOptionsService)):this.params.icon&&(ws(this.params.icon)?e.appendChild(this.params.icon):"string"==typeof this.params.icon?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}},t.prototype.addName=function(){if(this.params.name||!this.params.isCompact){var e=Ct('<span ref="eName" class="'+this.getClassName("part")+" "+this.getClassName("text")+'">'+(this.params.name||"")+"</span>");this.getGui().appendChild(e)}},t.prototype.addTooltip=function(){this.params.tooltip&&(this.tooltip=this.params.tooltip,this.gridOptionsService.is("enableBrowserTooltips")?this.getGui().setAttribute("title",this.tooltip):this.createManagedBean(new Ic(this)))},t.prototype.getTooltipParams=function(){return{location:"menu",value:this.tooltip}},t.prototype.addShortcut=function(){if(this.params.shortcut||!this.params.isCompact){var e=Ct('<span ref="eShortcut" class="'+this.getClassName("part")+" "+this.getClassName("shortcut")+'">'+(this.params.shortcut||"")+"</span>");this.getGui().appendChild(e)}},t.prototype.addSubMenu=function(){if(this.params.subMenu||!this.params.isCompact){var e=Ct('<span ref="ePopupPointer" class="'+this.getClassName("part")+" "+this.getClassName("popup-pointer")+'"></span>'),i=this.getGui();if(this.params.subMenu){var n=this.gridOptionsService.is("enableRtl")?"smallLeft":"smallRight";Hi(i,!1),e.appendChild(Ke(n,this.gridOptionsService))}i.appendChild(e)}},t.prototype.onItemSelected=function(e){this.params.action?this.params.action():this.openSubMenu(e&&"keydown"===e.type),(!this.params.subMenu||this.params.action)&&this.dispatchEvent({type:t.EVENT_MENU_ITEM_SELECTED,action:this.params.action,checked:this.params.checked,cssClasses:this.params.cssClasses,disabled:this.params.disabled,icon:this.params.icon,name:this.params.name,shortcut:this.params.shortcut,subMenu:this.params.subMenu,tooltip:this.params.tooltip,event:e})},t.prototype.onItemActivated=function(){this.dispatchEvent({type:t.EVENT_MENU_ITEM_ACTIVATED,menuItem:this})},t.prototype.cancelActivate=function(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)},t.prototype.cancelDeactivate=function(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)},t.prototype.onMouseEnter=function(){var e=this;this.cancelDeactivate(),this.params.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(function(){return e.activate(!0)},t.ACTIVATION_DELAY):this.activate(!0)},t.prototype.onMouseLeave=function(){var e=this;this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(function(){return e.deactivate()},t.ACTIVATION_DELAY):this.deactivate()},t.prototype.getClassName=function(e){var i=this.params.isCompact?"ag-compact-menu-option":"ag-menu-option";return e?i+"-"+e:i},t.EVENT_MENU_ITEM_SELECTED="menuItemSelected",t.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",t.ACTIVATION_DELAY=80,cv([S("popupService")],t.prototype,"popupService",void 0),cv([V],t.prototype,"init",null),t}(he),oR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ws=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},dv=function(r){function t(e){var i=r.call(this,t.getTemplate(e))||this;return i.closable=!0,i.config=e,i}return oR(t,r),t.getTemplate=function(e){var i=e&&e.cssIdentifier||"default";return'<div class="ag-panel ag-'+i+'-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-'+i+'-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-'+i+'-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-'+i+'-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-'+i+'-panel-content-wrapper"></div>\n        </div>'},t.prototype.postConstruct=function(){var e=this,i=this.config,n=i.component,o=i.closable,s=i.hideTitleBar,a=i.title,l=i.minWidth,u=void 0===l?250:l,c=i.width,d=i.minHeight,h=void 0===d?250:d,p=i.height,f=i.centered,v=i.popup,g=i.x,y=i.y;this.positionableFeature=new cf(this.getGui(),{minWidth:u,width:c,minHeight:h,height:p,centered:f,x:g,y,popup:v,calculateTopBuffer:function(){return e.positionableFeature.getHeight()-e.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var m=this.getGui();n&&this.setBodyComponent(n),s?Ce(this.eTitleBar,!1):(a&&this.setTitle(a),this.setClosable(o??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",function(C){var w=e.gridOptionsService.getDocument();if(m.contains(C.relatedTarget)||m.contains(w.activeElement)||e.eTitleBarButtons.contains(C.target))C.preventDefault();else{var _=e.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");_&&_.focus()}}),(!v||!this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},t.prototype.renderComponent=function(){var e=this,i=this.getGui();i.focus(),this.close=function(){i.parentElement.removeChild(i),e.destroy()}},t.prototype.getHeight=function(){return this.positionableFeature.getHeight()},t.prototype.setHeight=function(e){this.positionableFeature.setHeight(e)},t.prototype.getWidth=function(){return this.positionableFeature.getWidth()},t.prototype.setWidth=function(e){this.positionableFeature.setWidth(e)},t.prototype.setClosable=function(e){if(e!==this.closable&&(this.closable=e),e){var i=this.closeButtonComp=new he(t.CLOSE_BTN_TEMPLATE);this.getContext().createBean(i);var n=i.getGui(),o=Ke("close",this.gridOptionsService);o.classList.add("ag-panel-title-bar-button-icon"),n.appendChild(o),this.addTitleBarButton(i),i.addManagedListener(n,"click",this.onBtClose.bind(this))}else this.closeButtonComp&&((n=this.closeButtonComp.getGui()).parentElement.removeChild(n),this.closeButtonComp=this.destroyBean(this.closeButtonComp))},t.prototype.setBodyComponent=function(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())},t.prototype.addTitleBarButton=function(e,i){var n=this.eTitleBarButtons,o=n.children,s=o.length;null==i&&(i=s),i=Math.max(0,Math.min(i,s)),e.addCssClass("ag-panel-title-bar-button");var a=e.getGui();0===i?n.insertAdjacentElement("afterbegin",a):i===s?n.insertAdjacentElement("beforeend",a):o[i-1].insertAdjacentElement("afterend",a),e.setParentComponent(this)},t.prototype.getBodyHeight=function(){return fs(this.eContentWrapper)},t.prototype.getBodyWidth=function(){return qa(this.eContentWrapper)},t.prototype.setTitle=function(e){this.eTitle.innerText=e},t.prototype.onBtClose=function(){this.close()},t.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var e=this.getGui();e&&e.offsetParent&&this.close(),r.prototype.destroy.call(this)},t.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',Ws([U("eContentWrapper")],t.prototype,"eContentWrapper",void 0),Ws([U("eTitleBar")],t.prototype,"eTitleBar",void 0),Ws([U("eTitleBarButtons")],t.prototype,"eTitleBarButtons",void 0),Ws([U("eTitle")],t.prototype,"eTitle",void 0),Ws([V],t.prototype,"postConstruct",null),t}(he),rR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Al=function(){return Al=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Al.apply(this,arguments)},aR=function(r){function t(e){var i=r.call(this,Al(Al({},e),{popup:!0}))||this;return i.isMaximizable=!1,i.isMaximized=!1,i.maximizeListeners=[],i.resizeListenerDestroy=null,i.lastPosition={x:0,y:0,width:0,height:0},i}return rR(t,r),t.prototype.postConstruct=function(){var e=this,i=this.getGui(),n=this.config,o=n.movable,s=n.resizable,a=n.maximizable;this.addCssClass("ag-dialog"),r.prototype.postConstruct.call(this),this.addManagedListener(i,"focusin",function(l){i.contains(l.relatedTarget)||e.popupService.bringPopupToFront(i)}),o&&this.setMovable(o),a&&this.setMaximizable(a),s&&this.setResizable(s)},t.prototype.renderComponent=function(){var e=this.getGui(),i=this.config,n=i.alwaysOnTop,o=i.modal,s=i.title,a=i.afterGuiAttached,l=this.localeService.getLocaleTextFunc(),u=this.popupService.addPopup({modal:o,eChild:e,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop:n,ariaLabel:s||l("ariaLabelDialog","Dialog"),afterGuiAttached:a});u&&(this.close=u.hideFunc)},t.prototype.toggleMaximize=function(){var e=this.positionableFeature.getPosition();if(this.isMaximized){var i=this.lastPosition,n=i.x,o=i.y,a=i.height;this.setWidth(i.width),this.setHeight(a),this.positionableFeature.offsetElement(n,o)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},t.prototype.refreshMaximizeIcon=function(){Ce(this.maximizeIcon,!this.isMaximized),Ce(this.minimizeIcon,this.isMaximized)},t.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(function(e){return e()}),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},t.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),r.prototype.destroy.call(this)},t.prototype.setResizable=function(e){this.positionableFeature.setResizable(e)},t.prototype.setMovable=function(e){this.positionableFeature.setMovable(e,this.eTitleBar)},t.prototype.setMaximizable=function(e){var i=this;if(!e)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));var n=this.eTitleBar;if(n&&e!==this.isMaximizable){var o=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),o.addManagedListener(o.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(o,0),this.maximizeListeners.push(this.addManagedListener(n,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",function(){i.isMaximized=!1,i.refreshMaximizeIcon()})}},t.prototype.buildMaximizeAndMinimizeElements=function(){var e=this.maximizeButtonComp=this.createBean(new he('<div class="ag-dialog-button"></span>')),i=e.getGui();return this.maximizeIcon=Ke("maximize",this.gridOptionsService),i.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=Ke("minimize",this.gridOptionsService),i.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e},function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([S("popupService")],t.prototype,"popupService",void 0),t}(dv),lR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ll=function(){return Ll=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Ll.apply(this,arguments)},js=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Yo=function(r){return r[r.vertical=0]="vertical",r[r.horizontal=1]="horizontal",r}(Yo||{}),dR=0,hR=function(r){function t(){var i=null!==r&&r.apply(this,arguments)||this;return i.popupList=[],i}var e;return lR(t,r),e=t,t.prototype.postConstruct=function(){var i=this;this.ctrlsService.whenReady(function(n){i.gridCtrl=n.gridCtrl,i.addManagedListener(i.gridCtrl,E.EVENT_KEYBOARD_FOCUS,function(){i.popupList.forEach(function(o){return o.element.classList.add(Er.AG_KEYBOARD_FOCUS)})}),i.addManagedListener(i.gridCtrl,E.EVENT_MOUSE_FOCUS,function(){i.popupList.forEach(function(o){return o.element.classList.remove(Er.AG_KEYBOARD_FOCUS)})})})},t.prototype.getPopupParent=function(){return this.gridOptionsService.get("popupParent")||this.gridCtrl.getGui()},t.prototype.positionPopupForMenu=function(i){var n=i.eventSource,o=i.ePopup,s=this.getPopupIndex(o);-1!==s&&(this.popupList[s].alignedToElement=n);var l=n.getBoundingClientRect(),u=this.getParentRect(),c=this.keepXYWithinBounds(o,l.top-u.top,Yo.vertical),d=o.clientWidth>0?o.clientWidth:200;o.style.minWidth=d+"px";var f,p=u.right-u.left-d;function v(){return l.right-u.left-2}function g(){return l.left-u.left-d}this.gridOptionsService.is("enableRtl")?((f=g())<0&&(f=v(),this.setAlignedStyles(o,"left")),f>p&&(f=0,this.setAlignedStyles(o,"right"))):((f=v())>p&&(f=g(),this.setAlignedStyles(o,"right")),f<0&&(f=0,this.setAlignedStyles(o,"left"))),o.style.left=f+"px",o.style.top=c+"px"},t.prototype.positionPopupUnderMouseEvent=function(i){var n=this;this.positionPopup({ePopup:i.ePopup,nudgeX:i.nudgeX,nudgeY:i.nudgeY,keepWithinBounds:!0,skipObserver:i.skipObserver,updatePosition:function(){return n.calculatePointerAlign(i.mouseEvent)},postProcessCallback:function(){return n.callPostProcessPopup(i.type,i.ePopup,null,i.mouseEvent,i.column,i.rowNode)}})},t.prototype.calculatePointerAlign=function(i){var n=this.getParentRect();return{x:i.clientX-n.left,y:i.clientY-n.top}},t.prototype.positionPopupByComponent=function(i){var n=this,o=i.ePopup,s=i.nudgeX,a=i.nudgeY,l=i.keepWithinBounds,u=i.eventSource,c=i.alignSide,d=void 0===c?"left":c,h=i.position,p=void 0===h?"over":h,f=i.column,v=i.rowNode,g=i.type,y=u.getBoundingClientRect(),m=this.getParentRect(),C=this.getPopupIndex(o);-1!==C&&(this.popupList[C].alignedToElement=u),this.positionPopup({ePopup:o,nudgeX:s,nudgeY:a,keepWithinBounds:l,updatePosition:function(){var O,b=y.left-m.left;return"right"===d&&(b-=o.offsetWidth-y.width),"over"===p?(O=y.top-m.top,n.setAlignedStyles(o,"over")):(n.setAlignedStyles(o,"under"),O="under"===n.shouldRenderUnderOrAbove(o,y,m,i.nudgeY||0)?y.top-m.top+y.height:y.top-o.offsetHeight-2*(a||0)-m.top),{x:b,y:O}},postProcessCallback:function(){return n.callPostProcessPopup(g,o,u,null,f,v)}})},t.prototype.shouldRenderUnderOrAbove=function(i,n,o,s){var a=o.bottom-n.bottom,l=n.top-o.top,u=i.offsetHeight+s;return a>u?"under":l>u||l>a?"above":"under"},t.prototype.setAlignedStyles=function(i,n){var o=this.getPopupIndex(i);if(-1!==o){var a=this.popupList[o].alignedToElement;a&&(["right","left","over","above","under"].forEach(function(u){a.classList.remove("ag-has-popup-positioned-"+u),i.classList.remove("ag-popup-positioned-"+u)}),n&&(a.classList.add("ag-has-popup-positioned-"+n),i.classList.add("ag-popup-positioned-"+n)))}},t.prototype.callPostProcessPopup=function(i,n,o,s,a,l){var u=this.gridOptionsService.getCallback("postProcessPopup");u&&u({column:a,rowNode:l,ePopup:n,type:i,eventSource:o,mouseEvent:s})},t.prototype.positionPopup=function(i){var n=this,o=i.ePopup,s=i.keepWithinBounds,a=i.nudgeX,l=i.nudgeY,u=i.skipObserver,c=i.updatePosition,d={width:0,height:0},h=function(f){void 0===f&&(f=!1);var v=c(),g=v.x,y=v.y;f&&o.clientWidth===d.width&&o.clientHeight===d.height||(d.width=o.clientWidth,d.height=o.clientHeight,a&&(g+=a),l&&(y+=l),s&&(g=n.keepXYWithinBounds(o,g,Yo.horizontal),y=n.keepXYWithinBounds(o,y,Yo.vertical)),o.style.left=g+"px",o.style.top=y+"px",i.postProcessCallback&&i.postProcessCallback())};if(h(),!u){var p=this.resizeObserverService.observeResize(o,function(){return h(!0)});setTimeout(function(){return p()},e.WAIT_FOR_POPUP_CONTENT_RESIZE)}},t.prototype.getActivePopups=function(){return this.popupList.map(function(i){return i.element})},t.prototype.getPopupList=function(){return this.popupList},t.prototype.getParentRect=function(){var i=this.gridOptionsService.getDocument(),n=this.getPopupParent();return n===i.body?n=i.documentElement:"static"===getComputedStyle(n).position&&(n=n.offsetParent),bc(n)},t.prototype.keepXYWithinBounds=function(i,n,o){var s=o===Yo.vertical,a=s?"clientHeight":"clientWidth",l=s?"top":"left",u=s?"offsetHeight":"offsetWidth",c=s?"scrollTop":"scrollLeft",d=this.gridOptionsService.getDocument(),h=d.documentElement,p=this.getPopupParent(),f=p.getBoundingClientRect(),v=d.documentElement.getBoundingClientRect(),g=p===d.body,y=i[u],C=g?(s?Ec:vs)(h)+h[c]:p[a];g&&(C-=Math.abs(v[l]-f[l]));var w=C-y;return Math.min(Math.max(n,0),Math.abs(w))},t.prototype.addPopup=function(i){var n=this.gridOptionsService.getDocument(),o=i.eChild,s=i.ariaLabel,a=i.alwaysOnTop,l=i.positionCallback,u=i.anchorToElement;if(!n)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:function(){}};var c=this.getPopupIndex(o);if(-1!==c)return{hideFunc:this.popupList[c].hideFunc};this.initialisePopupPosition(o);var h=this.createPopupWrapper(o,s,!!a),p=this.addEventListenersToPopup(Ll(Ll({},i),{wrapperEl:h}));return l&&l(),this.addPopupToPopupList(o,h,p,u),{hideFunc:p}},t.prototype.initialisePopupPosition=function(i){var o=this.getPopupParent().getBoundingClientRect();I(i.style.top)||(i.style.top=-1*o.top+"px"),I(i.style.left)||(i.style.left=-1*o.left+"px")},t.prototype.createPopupWrapper=function(i,n,o){var s,a=this.getPopupParent(),l=document.createElement("div"),u=this.environment.getTheme().allThemes;return u.length&&(s=l.classList).add.apply(s,function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r}([],function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(u))),l.classList.add("ag-popup"),i.classList.add(this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),i.hasAttribute("role")||ot(i,"dialog"),xn(i,n),this.focusService.isKeyboardMode()&&i.classList.add(Er.AG_KEYBOARD_FOCUS),l.appendChild(i),a.appendChild(l),o?this.setAlwaysOnTop(i,!0):this.bringPopupToFront(i),l},t.prototype.addEventListenersToPopup=function(i){var n=this,o=this.gridOptionsService.getDocument(),s=this.getPopupParent(),a=i.wrapperEl,l=i.eChild,u=i.closedCallback,c=i.afterGuiAttached,d=i.closeOnEsc,h=i.modal,p=!1,f=function(m){a.contains(o.activeElement)&&m.key===M.ESCAPE&&!Ii(m)&&y({keyboardEvent:m})},v=function(m){return y({mouseEvent:m})},g=function(m){return y({touchEvent:m})},y=function(m){void 0===m&&(m={});var C=m.mouseEvent,w=m.touchEvent,_=m.keyboardEvent;n.isEventFromCurrentPopup({mouseEvent:C,touchEvent:w},l)||p||(p=!0,s.removeChild(a),o.removeEventListener("keydown",f),o.removeEventListener("mousedown",v),o.removeEventListener("touchstart",g),o.removeEventListener("contextmenu",v),n.eventService.removeEventListener(E.EVENT_DRAG_STARTED,v),u&&u(C||w||_),n.removePopupFromPopupList(l))};return c&&c({hidePopup:y}),window.setTimeout(function(){d&&o.addEventListener("keydown",f),h&&(o.addEventListener("mousedown",v),n.eventService.addEventListener(E.EVENT_DRAG_STARTED,v),o.addEventListener("touchstart",g),o.addEventListener("contextmenu",v))},0),y},t.prototype.addPopupToPopupList=function(i,n,o,s){this.popupList.push({element:i,wrapper:n,hideFunc:o,instanceId:dR++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(i,s)},t.prototype.getPopupIndex=function(i){return this.popupList.findIndex(function(n){return n.element===i})},t.prototype.setPopupPositionRelatedToElement=function(i,n){var o=this.getPopupIndex(i);if(-1!==o){var s=this.popupList[o];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then(function(l){return l&&l()}),s.stopAnchoringPromise=void 0,s.isAnchored=!1,n){var a=this.keepPopupPositionedRelativeTo({element:n,ePopup:i,hidePopup:s.hideFunc});return s.stopAnchoringPromise=a,s.isAnchored=!0,a}}},t.prototype.removePopupFromPopupList=function(i){this.setAlignedStyles(i,null),this.setPopupPositionRelatedToElement(i,null),this.popupList=this.popupList.filter(function(n){return n.element!==i})},t.prototype.keepPopupPositionedRelativeTo=function(i){var n=this,o=this.getPopupParent(),s=o.getBoundingClientRect(),a=i.element,l=i.ePopup,u=a.getBoundingClientRect(),c=s.top-u.top,d=s.left-u.left,h=c,p=d,f=l.style.top,v=parseInt(f.substring(0,f.length-1),10),g=l.style.left,y=parseInt(g.substring(0,g.length-1),10);return new jt(function(m){n.getFrameworkOverrides().setInterval(function(){var C=o.getBoundingClientRect(),w=a.getBoundingClientRect();if(0==w.top&&0==w.left&&0==w.height&&0==w.width)i.hidePopup();else{var b=C.top-w.top;if(b!=h){var O=n.keepXYWithinBounds(l,v+c-b,Yo.vertical);l.style.top=O+"px"}h=b;var x=C.left-w.left;if(x!=p){var D=n.keepXYWithinBounds(l,y+d-x,Yo.horizontal);l.style.left=D+"px"}p=x}},200).then(function(C){m(function(){null!=C&&window.clearInterval(C)})})})},t.prototype.hasAnchoredPopup=function(){return this.popupList.some(function(i){return i.isAnchored})},t.prototype.isEventFromCurrentPopup=function(i,n){var a=i.mouseEvent||i.touchEvent;if(!a)return!1;var l=this.getPopupIndex(n);if(-1===l)return!1;for(var u=l;u<this.popupList.length;u++)if(Ha(this.popupList[u].element,a))return!0;return this.isElementWithinCustomPopup(a.target)},t.prototype.isElementWithinCustomPopup=function(i){for(var n=this.gridOptionsService.getDocument();i&&i!==n.body;){if(i.classList.contains("ag-custom-component-popup")||null===i.parentElement)return!0;i=i.parentElement}return!1},t.prototype.getWrapper=function(i){for(;!i.classList.contains("ag-popup")&&i.parentElement;)i=i.parentElement;return i.classList.contains("ag-popup")?i:null},t.prototype.setAlwaysOnTop=function(i,n){var o=this.getWrapper(i);o&&(o.classList.toggle("ag-always-on-top",!!n),n&&this.bringPopupToFront(o))},t.prototype.bringPopupToFront=function(i){var n=this.getPopupParent(),o=Array.prototype.slice.call(n.querySelectorAll(".ag-popup")),s=o.length,a=Array.prototype.slice.call(n.querySelectorAll(".ag-popup.ag-always-on-top")),l=a.length,u=this.getWrapper(i);if(u&&!(s<=1)&&n.contains(i)){var c=o.indexOf(u),d=u.querySelectorAll("div"),h=[];for(d.forEach(function(g){0!==g.scrollTop&&h.push([g,g.scrollTop])}),l?u.classList.contains("ag-always-on-top")?c!==s-1&&Pe(a).insertAdjacentElement("afterend",u):c!==s-l-1&&a[0].insertAdjacentElement("beforebegin",u):c!==s-1&&Pe(o).insertAdjacentElement("afterend",u);h.length;){var f=h.pop();f[0].scrollTop=f[1]}this.eventService.dispatchEvent({type:"popupToFront",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,eWrapper:u})}},t.WAIT_FOR_POPUP_CONTENT_RESIZE=200,js([S("focusService")],t.prototype,"focusService",void 0),js([S("ctrlsService")],t.prototype,"ctrlsService",void 0),js([S("resizeObserverService")],t.prototype,"resizeObserverService",void 0),js([V],t.prototype,"postConstruct",null),e=js([X("popupService")],t)}(k),pR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),fR=function(r){function t(){var e=r.call(this,'\n        <div class="ag-autocomplete-row" role="presentation">\n            <div class="ag-autocomplete-row-label"></div>\n        </div>')||this;return e.hasHighlighting=!1,e}return pR(t,r),t.prototype.setState=function(e,i){this.value=e,this.render(),this.updateSelected(i)},t.prototype.updateSelected=function(e){this.addOrRemoveCssClass("ag-autocomplete-row-selected",e)},t.prototype.setSearchString=function(e){var i,n=!1;if(I(e)){var o=null===(i=this.value)||void 0===i?void 0:i.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(o>=0){n=!0,this.hasHighlighting=!0;var s=o+e.length,a=Ye(this.value.slice(0,o)),l=Ye(this.value.slice(o,s)),u=Ye(this.value.slice(s));this.getGui().lastElementChild.innerHTML=a+"<b>"+l+"</b>"+u}}!n&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())},t.prototype.render=function(){var e;this.getGui().lastElementChild.innerHTML=null!==(e=Ye(this.value))&&void 0!==e?e:"&nbsp;"},t}(he),vR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),hv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},gR=function(r){function t(e){var i=r.call(this,t.TEMPLATE)||this;return i.params=e,i.searchString="",i}return vR(t,r),t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.init=function(){var e=this;this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new av({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:function(){return e.autocompleteEntries.length},getRow:function(n){return e.autocompleteEntries[n]}});var i=this.virtualList.getGui();this.addManagedListener(i,"click",function(){return e.params.onConfirmed()}),this.addManagedListener(i,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(i,"mousedown",function(n){return n.preventDefault()}),this.setSelectedValue(0)},t.prototype.onNavigationKeyDown=function(e,i){e.preventDefault();var n=this.autocompleteEntries.indexOf(this.selectedValue);this.checkSetSelectedValue(i===M.UP?n-1:n+1)},t.prototype.setSearch=function(e){this.searchString=e,I(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()},t.prototype.runContainsSearch=function(e,i){var n,o=!1,s=e.toLocaleLowerCase(),a=i.filter(function(l){var c=l.toLocaleLowerCase().indexOf(s),d=0===c,h=c>=0;return h&&(!n||!o&&d||o===d&&l.length<n.length)&&(n=l,o=d),h});return!n&&a.length&&(n=a[0]),{topMatch:n,allMatches:a}},t.prototype.runSearch=function(){var e,i,s,a,n=this.params.autocompleteEntries,o=n.map(function(d){var h;return null!==(h=d.displayValue)&&void 0!==h?h:d.key});if(this.params.useFuzzySearch)a=(s=hs(this.searchString,o,!0).values).length?s[0]:void 0;else{var l=this.runContainsSearch(this.searchString,o);s=l.allMatches,a=l.topMatch}var u=n.filter(function(d){return s.includes(d.displayValue??d.key)});if(!u.length&&this.selectedValue&&!(null===(i=null===(e=this.params)||void 0===e?void 0:e.forceLastSelection)||void 0===i)&&i.call(e,this.selectedValue,this.searchString)&&(u=[this.selectedValue]),this.autocompleteEntries=u,this.virtualList.refresh(),a){var c=s.indexOf(a);this.checkSetSelectedValue(c)}},t.prototype.updateSearchInList=function(){var e=this;this.virtualList.forEachRenderedRow(function(i){return i.setSearchString(e.searchString)})},t.prototype.checkSetSelectedValue=function(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)},t.prototype.setSelectedValue=function(e){var i=this.autocompleteEntries[e];this.selectedValue!==i&&(this.selectedValue=i,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow(function(n,o){n.updateSelected(e===o)}))},t.prototype.createRowComponent=function(e){var i,n=new fR;return this.getContext().createBean(n),n.setState(null!==(i=e.displayValue)&&void 0!==i?i:e.key,e===this.selectedValue),n},t.prototype.onMouseMove=function(e){var i=this.virtualList.getGui().getBoundingClientRect(),n=this.virtualList.getScrollTop(),s=Math.floor((e.clientY-i.top+n)/this.virtualList.getRowHeight());this.checkSetSelectedValue(s)},t.prototype.afterGuiAttached=function(){this.virtualList.refresh()},t.prototype.getSelectedValue=function(){var e;return this.autocompleteEntries.length&&null!==(e=this.selectedValue)&&void 0!==e?e:null},t.TEMPLATE='<div class="ag-autocomplete-list-popup">\n            <div ref="eList" class="ag-autocomplete-list"></div>\n        <div>',hv([U("eList")],t.prototype,"eList",void 0),hv([V],t.prototype,"init",null),t}(jo),yR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Td=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},mR=function(r){function t(){var e=r.call(this,'\n            <div class="ag-autocomplete" role="presentation">\n                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>\n            </div>')||this;return e.isListOpen=!1,e.lastPosition=0,e.valid=!0,e}return yR(t,r),t.prototype.postConstruct=function(){var e=this;this.eAutocompleteInput.onValueChange(function(i){return e.onValueChanged(i)}),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(function(){e.destroyBean(e.autocompleteList)}),this.addGuiEventListener("focusout",function(){return e.onFocusOut()})},t.prototype.onValueChanged=function(e){var i=en(e);this.updateValue(i),this.updateAutocompleteList(i)},t.prototype.updateValue=function(e){this.updateLastPosition(),this.dispatchEvent({type:t.EVENT_VALUE_CHANGED,value:e}),this.validate(e)},t.prototype.updateAutocompleteList=function(e){var i,n,o,s,a=null!==(n=null===(i=this.listGenerator)||void 0===i?void 0:i.call(this,e,this.lastPosition))&&void 0!==n?n:{enabled:!1};(!a.type||a.type!==(null===(o=this.autocompleteListParams)||void 0===o?void 0:o.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=a,null!==(s=this.autocompleteListParams)&&void 0!==s&&s.enabled?(this.isListOpen||this.openList(),this.autocompleteList.setSearch(this.autocompleteListParams.searchString??"")):this.isListOpen&&this.closeList()},t.prototype.onKeyDown=function(e){var i=this,n=e.key;switch(this.updateLastPosition(),n){case M.ENTER:this.onEnterKeyDown(e);break;case M.TAB:this.onTabKeyDown(e);break;case M.DOWN:case M.UP:this.onUpDownKeyDown(e,n);break;case M.LEFT:case M.RIGHT:case M.PAGE_HOME:case M.PAGE_END:setTimeout(function(){i.updatePositionAndList()});break;case M.ESCAPE:this.onEscapeKeyDown(e);break;case M.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList())}},t.prototype.confirmSelection=function(){var e,i=null===(e=this.autocompleteList)||void 0===e?void 0:e.getSelectedValue();i&&(this.closeList(),this.dispatchEvent({type:t.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:i,autocompleteType:this.autocompleteListParams.type}))},t.prototype.onTabKeyDown=function(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())},t.prototype.onEnterKeyDown=function(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()},t.prototype.onUpDownKeyDown=function(e,i){var n;e.preventDefault(),this.isListOpen?null===(n=this.autocompleteList)||void 0===n||n.onNavigationKeyDown(e,i):this.forceOpenList()},t.prototype.onEscapeKeyDown=function(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))},t.prototype.onFocusOut=function(){this.isListOpen&&this.closeList()},t.prototype.updatePositionAndList=function(){var e;this.updateLastPosition(),this.updateAutocompleteList(null!==(e=this.eAutocompleteInput.getValue())&&void 0!==e?e:null)},t.prototype.setCaret=function(e,i){var n=this.gridOptionsService.getDocument();i&&n.activeElement===n.body&&this.eAutocompleteInput.getFocusableElement().focus(),this.eAutocompleteInput.getInputElement().setSelectionRange(e,e)},t.prototype.forceOpenList=function(){this.onValueChanged(this.eAutocompleteInput.getValue())},t.prototype.updateLastPosition=function(){var e;this.lastPosition=null!==(e=this.eAutocompleteInput.getInputElement().selectionStart)&&void 0!==e?e:0},t.prototype.validate=function(e){var i;this.validator&&(this.validationMessage=this.validator(e),this.eAutocompleteInput.getInputElement().setCustomValidity(null!==(i=this.validationMessage)&&void 0!==i?i:""),this.valid=!this.validationMessage,this.dispatchEvent({type:t.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))},t.prototype.openList=function(){var e=this;this.isListOpen=!0,this.autocompleteList=this.createBean(new gR({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:function(){return e.confirmSelection()},forceLastSelection:this.forceLastSelection}));var i=this.autocompleteList.getGui(),n={ePopup:i,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gridOptionsService.is("enableRtl")?"right":"left",keepWithinBounds:!0},o=this.popupService.addPopup({eChild:i,anchorToElement:this.getGui(),positionCallback:function(){return e.popupService.positionPopupByComponent(n)},ariaLabel:this.listAriaLabel});this.hidePopup=o.hideFunc,this.autocompleteList.afterGuiAttached()},t.prototype.closeList=function(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null},t.prototype.onCompleted=function(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:t.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})},t.prototype.getValue=function(){return en(this.eAutocompleteInput.getValue())},t.prototype.setInputPlaceholder=function(e){return this.eAutocompleteInput.setInputPlaceholder(e),this},t.prototype.setInputAriaLabel=function(e){return this.eAutocompleteInput.setInputAriaLabel(e),this},t.prototype.setListAriaLabel=function(e){return this.listAriaLabel=e,this},t.prototype.setListGenerator=function(e){return this.listGenerator=e,this},t.prototype.setValidator=function(e){return this.validator=e,this},t.prototype.isValid=function(){return this.valid},t.prototype.setValue=function(e){var i=e.value,n=e.position,o=e.silent,s=e.updateListOnlyIfOpen,a=e.restoreFocus;this.eAutocompleteInput.setValue(i,!0),this.setCaret(n??this.lastPosition,a),o||this.updateValue(i),(!s||this.isListOpen)&&this.updateAutocompleteList(i)},t.prototype.setForceLastSelection=function(e){return this.forceLastSelection=e,this},t.prototype.setInputDisabled=function(e){return this.eAutocompleteInput.setDisabled(e),this},t.EVENT_VALUE_CHANGED="eventValueChanged",t.EVENT_VALUE_CONFIRMED="eventValueConfirmed",t.EVENT_OPTION_SELECTED="eventOptionSelected",t.EVENT_VALID_CHANGED="eventValidChanged",Td([S("popupService")],t.prototype,"popupService",void 0),Td([U("eAutocompleteInput")],t.prototype,"eAutocompleteInput",void 0),Td([V],t.prototype,"postConstruct",null),t}(he),CR=["mouseover","mouseout","mouseenter","mouseleave","mousemove"],wR=["touchstart","touchend","touchmove","touchcancel"],pv=function(){function r(){this.renderingEngine="vanilla",this.isOutsideAngular=function(t){return wi(CR,t)}}return r.prototype.setTimeout=function(t,e){window.setTimeout(t,e)},r.prototype.setInterval=function(t,e){return new jt(function(i){i(window.setInterval(t,e))})},r.prototype.addEventListener=function(t,e,i,n){var o=wi(wR,e);t.addEventListener(e,i,{capture:!!n,passive:o})},r.prototype.dispatchEvent=function(t,e,i){e()},r.prototype.frameworkComponent=function(t){return null},r.prototype.isFrameworkComponent=function(t){return!1},r}(),SR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Rr=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},bR=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return SR(t,r),t.prototype.getNextCellToFocus=function(e,i,n){return void 0===n&&(n=!1),n?this.getNextCellToFocusWithCtrlPressed(e,i):this.getNextCellToFocusWithoutCtrlPressed(e,i)},t.prototype.getNextCellToFocusWithCtrlPressed=function(e,i){var a,l,n=e===M.UP,s=e===M.LEFT;if(n||e===M.DOWN)l=n?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),a=i.column;else{var u=this.columnModel.getAllDisplayedColumns(),c=this.gridOptionsService.is("enableRtl");l=i.rowIndex,a=s!==c?u[0]:Pe(u)}return{rowIndex:l,rowPinned:null,column:a}},t.prototype.getNextCellToFocusWithoutCtrlPressed=function(e,i){for(var n=i,o=!1;!o;){switch(e){case M.UP:n=this.getCellAbove(n);break;case M.DOWN:n=this.getCellBelow(n);break;case M.RIGHT:n=this.gridOptionsService.is("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case M.LEFT:n=this.gridOptionsService.is("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,console.warn("AG Grid: unknown key for navigation "+e)}o=!n||this.isCellGoodToFocusOn(n)}return n},t.prototype.isCellGoodToFocusOn=function(e){var n,i=e.column;switch(e.rowPinned){case"top":n=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":n=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:n=this.rowModel.getRow(e.rowIndex)}return!!n&&!i.isSuppressNavigable(n)},t.prototype.getCellToLeft=function(e){if(!e)return null;var i=this.columnModel.getDisplayedColBefore(e.column);return i?{rowIndex:e.rowIndex,column:i,rowPinned:e.rowPinned}:null},t.prototype.getCellToRight=function(e){if(!e)return null;var i=this.columnModel.getDisplayedColAfter(e.column);return i?{rowIndex:e.rowIndex,column:i,rowPinned:e.rowPinned}:null},t.prototype.getRowBelow=function(e){var i=e.rowIndex,n=e.rowPinned;if(this.isLastRowInContainer(e))switch(n){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}var o=this.rowModel.getRow(e.rowIndex);return this.getNextStickyPosition(o)||{rowIndex:i+1,rowPinned:n}},t.prototype.getNextStickyPosition=function(e,i){if(this.gridOptionsService.isGroupRowsSticky()&&e&&e.sticky){var n=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r}([],function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(this.rowRenderer.getStickyTopRowCtrls())).sort(function(l,u){return l.getRowNode().rowIndex-u.getRowNode().rowIndex}),o=i?-1:1,s=n.findIndex(function(l){return l.getRowNode().rowIndex===e.rowIndex}),a=n[s+o];if(a)return{rowIndex:a.getRowNode().rowIndex,rowPinned:null}}},t.prototype.getCellBelow=function(e){if(!e)return null;var i=this.getRowBelow(e);return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null},t.prototype.isLastRowInContainer=function(e){var i=e.rowPinned,n=e.rowIndex;return"top"===i?this.pinnedRowModel.getPinnedTopRowData().length-1<=n:"bottom"===i?this.pinnedRowModel.getPinnedBottomRowData().length-1<=n:this.paginationProxy.getPageLastRow()<=n},t.prototype.getRowAbove=function(e){var i=e.rowIndex,n=e.rowPinned;if(n?0===i:i===this.paginationProxy.getPageFirstRow())return"top"===n?null:n&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;var s=this.rowModel.getRow(e.rowIndex);return this.getNextStickyPosition(s,!0)||{rowIndex:i-1,rowPinned:n}},t.prototype.getCellAbove=function(e){if(!e)return null;var i=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null},t.prototype.getLastBodyCell=function(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}},t.prototype.getLastFloatingTopRow=function(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}},t.prototype.getNextTabbedCell=function(e,i){return i?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)},t.prototype.getNextTabbedCellForwards=function(e){var i=this.columnModel.getAllDisplayedColumns(),n=e.rowIndex,o=e.rowPinned,s=this.columnModel.getDisplayedColAfter(e.column);if(!s){s=i[0];var a=this.getRowBelow(e);if(ie(a)||!a.rowPinned&&!this.paginationProxy.isRowInPage(a))return null;n=a?a.rowIndex:null,o=a?a.rowPinned:null}return{rowIndex:n,column:s,rowPinned:o}},t.prototype.getNextTabbedCellBackwards=function(e){var i=this.columnModel.getAllDisplayedColumns(),n=e.rowIndex,o=e.rowPinned,s=this.columnModel.getDisplayedColBefore(e.column);if(!s){s=Pe(i);var a=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(ie(a)||!a.rowPinned&&!this.paginationProxy.isRowInPage(a))return null;n=a?a.rowIndex:null,o=a?a.rowPinned:null}return{rowIndex:n,column:s,rowPinned:o}},Rr([S("columnModel")],t.prototype,"columnModel",void 0),Rr([S("rowModel")],t.prototype,"rowModel",void 0),Rr([S("rowRenderer")],t.prototype,"rowRenderer",void 0),Rr([S("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Rr([S("paginationProxy")],t.prototype,"paginationProxy",void 0),Rr([X("cellNavigationService")],t)}(k),RR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Us=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},OR=function(r,t){return function(e,i){t(e,i,r)}},xR=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.consuming=!1,e}return RR(t,r),t.prototype.setBeans=function(e){this.logger=e.create("AlignedGridsService")},t.prototype.init=function(){this.addManagedListener(this.eventService,E.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,E.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},t.prototype.fireEvent=function(e){if(!this.consuming){var i=this.gridOptionsService.get("alignedGrids");i&&i.forEach(function(n){if(n.api){var o=n.api.__getAlignedGridService();e(o)}})}},t.prototype.onEvent=function(e){this.consuming=!0,e(),this.consuming=!1},t.prototype.fireColumnEvent=function(e){this.fireEvent(function(i){i.onColumnEvent(e)})},t.prototype.fireScrollEvent=function(e){"horizontal"===e.direction&&this.fireEvent(function(i){i.onScrollEvent(e)})},t.prototype.onScrollEvent=function(e){var i=this;this.onEvent(function(){i.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})},t.prototype.getMasterColumns=function(e){var i=[];return e.columns?e.columns.forEach(function(n){i.push(n)}):e.column&&i.push(e.column),i},t.prototype.getColumnIds=function(e){var i=[];return e.columns?e.columns.forEach(function(n){i.push(n.getColId())}):e.column&&i.push(e.column.getColId()),i},t.prototype.onColumnEvent=function(e){var i=this;this.onEvent(function(){switch(e.type){case E.EVENT_COLUMN_MOVED:case E.EVENT_COLUMN_VISIBLE:case E.EVENT_COLUMN_PINNED:case E.EVENT_COLUMN_RESIZED:i.processColumnEvent(e);break;case E.EVENT_COLUMN_GROUP_OPENED:i.processGroupOpenedEvent(e);break;case E.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}})},t.prototype.processGroupOpenedEvent=function(e){var i=e.columnGroup,n=null;if(i){var o=i.getGroupId();n=this.columnModel.getProvidedColumnGroup(o)}i&&!n||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+i.isExpanded()),this.columnModel.setColumnGroupOpened(n,i.isExpanded(),"alignedGridChanged"))},t.prototype.processColumnEvent=function(e){var n,i=this,o=e.column,s=null;if(o&&(s=this.columnModel.getPrimaryColumn(o.getColId())),!o||s){var a=this.getMasterColumns(e);switch(e.type){case E.EVENT_COLUMN_MOVED:var l=e,c=e.columnApi.getColumnState().map(function(m){return{colId:m.colId}});this.columnModel.applyColumnState({state:c,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" toIndex = "+l.toIndex);break;case E.EVENT_COLUMN_VISIBLE:var d=e;c=e.columnApi.getColumnState().map(function(w){return{colId:w.colId,hide:w.hide}}),this.columnModel.applyColumnState({state:c},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" visible = "+d.visible);break;case E.EVENT_COLUMN_PINNED:var h=e;c=e.columnApi.getColumnState().map(function(w){return{colId:w.colId,pinned:w.pinned}}),this.columnModel.applyColumnState({state:c},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" pinned = "+h.pinned);break;case E.EVENT_COLUMN_RESIZED:var p=e,f={};a.forEach(function(m){i.logger.log("onColumnEvent-> processing "+e.type+" actualWidth = "+m.getActualWidth()),f[m.getId()]={key:m.getColId(),newWidth:m.getActualWidth()}}),null===(n=p.flexColumns)||void 0===n||n.forEach(function(m){f[m.getId()]&&delete f[m.getId()]}),this.columnModel.setColumnWidths(Object.values(f),!1,p.finished,"alignedGridChanged")}var g=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing(),y=this.gridOptionsService.get("alignedGrids");y&&y.forEach(function(m){m.api&&m.api.setAlwaysShowVerticalScroll(g)})}},Us([S("columnModel")],t.prototype,"columnModel",void 0),Us([S("ctrlsService")],t.prototype,"ctrlsService",void 0),Us([OR(0,Tt("loggerFactory"))],t.prototype,"setBeans",null),Us([V],t.prototype,"init",null),Us([X("alignedGridsService")],t)}(k),DR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),zs=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},TR=function(r,t){return function(e,i){t(e,i,r)}},AR=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return DR(t,r),t.prototype.setBeans=function(e){this.logger=e.create("selectionService"),this.reset()},t.prototype.init=function(){var e=this;this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.addManagedPropertyListener("groupSelectsChildren",function(i){return e.groupSelectsChildren=i.currentValue}),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",function(i){return e.rowSelection=i.currentValue}),this.addManagedListener(this.eventService,E.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},t.prototype.isMultiselect=function(){return"multiple"===this.rowSelection},t.prototype.setNodesSelected=function(e){var i;if(0===e.nodes.length)return 0;var n=e.newValue,o=e.clearSelection,s=e.suppressFinishActions,a=e.rangeSelect,l=e.source,u=void 0===l?"api":l;if(e.nodes.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;var c=this.groupSelectsChildren&&!0===e.groupSelectsFiltered,d=e.nodes.map(function(b){return b.footer?b.sibling:b});if(a){if(e.nodes.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;var h=this.getLastSelectedNode();if(h&&h!==(p=d[0])&&this.isMultiselect()){var v=this.selectRange(p,h,e.newValue,u);return this.setLastSelectedNode(p),v}}for(var g=0,y=0;y<d.length;y++){var p=d[y];c&&p.group||p.selectThisNode(n,e.event,u)&&g++,this.groupSelectsChildren&&null!==(i=p.childrenAfterGroup)&&void 0!==i&&i.length&&(g+=this.selectChildren(p,n,c,u))}return s||(n&&(o||!this.isMultiselect())&&(g+=this.clearOtherNodes(d[0],u)),g>0&&(this.updateGroupsFromChildrenSelections(u),this.eventService.dispatchEvent({type:E.EVENT_SELECTION_CHANGED,source:u})),n&&this.setLastSelectedNode(d[d.length-1])),g},t.prototype.selectRange=function(e,i,n,o){var s=this;void 0===n&&(n=!0);var a=this.rowModel.getNodesInRangeForSelection(e,i),l=0;return a.forEach(function(c){c.group&&s.groupSelectsChildren||!1===n&&e===c||c.selectThisNode(n,void 0,o)&&l++}),this.updateGroupsFromChildrenSelections(o),this.eventService.dispatchEvent({type:E.EVENT_SELECTION_CHANGED,source:o}),l},t.prototype.selectChildren=function(e,i,n,o){var s=n?e.childrenAfterAggFilter:e.childrenAfterGroup;return ne.missing(s)?0:this.setNodesSelected({newValue:i,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:n,source:o,nodes:s})},t.prototype.setLastSelectedNode=function(e){this.lastSelectedNode=e},t.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},t.prototype.getSelectedNodes=function(){var e=[];return He(this.selectedNodes,function(i,n){n&&e.push(n)}),e},t.prototype.getSelectedRows=function(){var e=[];return He(this.selectedNodes,function(i,n){n&&n.data&&e.push(n.data)}),e},t.prototype.getSelectionCount=function(){return Object.values(this.selectedNodes).length},t.prototype.filterFromSelection=function(e){var i={};Object.entries(this.selectedNodes).forEach(function(n){var o=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(n,2),s=o[0],a=o[1];a&&e(a)&&(i[s]=a)}),this.selectedNodes=i},t.prototype.updateGroupsFromChildrenSelections=function(e,i){if(!this.groupSelectsChildren||"clientSide"!==this.rowModel.getType())return!1;var o=this.rowModel.getRootNode();i||(i=new Od(!0,o)).setInactive();var s=!1;return i.forEachChangedNodeDepthFirst(function(a){if(a!==o){var l=a.calculateSelectedFromChildren();s=a.selectThisNode(null!==l&&l,void 0,e)||s}}),s},t.prototype.clearOtherNodes=function(e,i){var n=this,o={},s=0;return He(this.selectedNodes,function(a,l){l&&l.id!==e.id&&(s+=n.selectedNodes[l.id].setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:i}),n.groupSelectsChildren&&l.parent&&(o[l.parent.id]=l.parent))}),He(o,function(a,l){var u=l.calculateSelectedFromChildren();l.selectThisNode(null!==u&&u,void 0,i)}),s},t.prototype.onRowSelected=function(e){var i=e.node;this.groupSelectsChildren&&i.group||(i.isSelected()?this.selectedNodes[i.id]=i:delete this.selectedNodes[i.id])},t.prototype.syncInRowNode=function(e,i){this.syncInOldRowNode(e,i),this.syncInNewRowNode(e)},t.prototype.syncInOldRowNode=function(e,i){I(i)&&e.id!==i.id&&i&&this.selectedNodes[i.id]==e&&(this.selectedNodes[i.id]=i)},t.prototype.syncInNewRowNode=function(e){I(this.selectedNodes[e.id])?(e.setSelectedInitialValue(!0),this.selectedNodes[e.id]=e):e.setSelectedInitialValue(!1)},t.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},t.prototype.getBestCostNodeSelection=function(){if("clientSide"===this.rowModel.getType()){var i=this.rowModel.getTopLevelNodes();if(null!==i){var n=[];return function o(s){for(var a=0,l=s.length;a<l;a++){var u=s[a];u.isSelected()?n.push(u):u.group&&u.children&&o(u.children)}}(i),n}}},t.prototype.isEmpty=function(){var e=0;return He(this.selectedNodes,function(i,n){n&&e++}),0===e},t.prototype.deselectAllRowNodes=function(e){var i=function(u){return u.selectThisNode(!1,void 0,o)},n="clientSide"===this.rowModel.getType(),o=e.source,s=e.justFiltered,a=e.justCurrentPage;if(a||s){if(!n)return void console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");this.getNodesToSelect(s,a).forEach(i)}else He(this.selectedNodes,function(u,c){c&&i(c)}),this.reset();n&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(o),this.eventService.dispatchEvent({type:E.EVENT_SELECTION_CHANGED,source:o})},t.prototype.getSelectAllState=function(e,i){var n=this,o=0,s=0;return this.getNodesToSelect(e,i).forEach(function(l){n.groupSelectsChildren&&l.group||(l.isSelected()?o++:l.selectable&&s++)}),(0!==o||0!==s)&&(o>0&&s>0?null:o>0)},t.prototype.getNodesToSelect=function(e,i){var n=this;if(void 0===e&&(e=!1),void 0===i&&(i=!1),"clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not "+this.rowModel.getType());var o=[];if(i)return this.paginationProxy.forEachNodeOnPage(function(a){if(a.group)if(a.expanded)n.groupSelectsChildren||o.push(a);else{var l=function(u){var c;o.push(u),null!==(c=u.childrenAfterFilter)&&void 0!==c&&c.length&&u.childrenAfterFilter.forEach(l)};l(a)}else o.push(a)}),o;var s=this.rowModel;return e?(s.forEachNodeAfterFilter(function(a){o.push(a)}),o):(s.forEachNode(function(a){o.push(a)}),o)},t.prototype.selectAllRowNodes=function(e){if("clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not "+this.rowModel.getType());var i=e.source;this.getNodesToSelect(e.justFiltered,e.justCurrentPage).forEach(function(l){return l.selectThisNode(!0,void 0,i)}),"clientSide"===this.rowModel.getType()&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(i),this.eventService.dispatchEvent({type:E.EVENT_SELECTION_CHANGED,source:i})},t.prototype.getServerSideSelectionState=function(){return null},t.prototype.setServerSideSelectionState=function(e){},zs([S("rowModel")],t.prototype,"rowModel",void 0),zs([S("paginationProxy")],t.prototype,"paginationProxy",void 0),zs([TR(0,Tt("loggerFactory"))],t.prototype,"setBeans",null),zs([V],t.prototype,"init",null),zs([X("selectionService")],t)}(k),Pd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},LR=function(){function r(){}return r.prototype.sizeColumnsToFit=function(t){typeof t>"u"&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(t,"api")},r.prototype.setColumnGroupOpened=function(t,e){this.columnModel.setColumnGroupOpened(t,e,"api")},r.prototype.getColumnGroup=function(t,e){return this.columnModel.getColumnGroup(t,e)},r.prototype.getProvidedColumnGroup=function(t){return this.columnModel.getProvidedColumnGroup(t)},r.prototype.getDisplayNameForColumn=function(t,e){return this.columnModel.getDisplayNameForColumn(t,e)||""},r.prototype.getDisplayNameForColumnGroup=function(t,e){return this.columnModel.getDisplayNameForColumnGroup(t,e)||""},r.prototype.getColumn=function(t){return this.columnModel.getPrimaryColumn(t)},r.prototype.getColumns=function(){return this.columnModel.getAllPrimaryColumns()},r.prototype.applyColumnState=function(t){return this.columnModel.applyColumnState(t,"api")},r.prototype.getColumnState=function(){return this.columnModel.getColumnState()},r.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},r.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},r.prototype.setColumnGroupState=function(t){this.columnModel.setColumnGroupState(t,"api")},r.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},r.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},r.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},r.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},r.prototype.getDisplayedColAfter=function(t){return this.columnModel.getDisplayedColAfter(t)},r.prototype.getDisplayedColBefore=function(t){return this.columnModel.getDisplayedColBefore(t)},r.prototype.setColumnVisible=function(t,e){this.columnModel.setColumnVisible(t,e,"api")},r.prototype.setColumnsVisible=function(t,e){this.columnModel.setColumnsVisible(t,e,"api")},r.prototype.setColumnPinned=function(t,e){this.columnModel.setColumnPinned(t,e,"api")},r.prototype.setColumnsPinned=function(t,e){this.columnModel.setColumnsPinned(t,e,"api")},r.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},r.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},r.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},r.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},r.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},r.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},r.prototype.moveColumn=function(t,e){this.columnModel.moveColumn(t,e,"api")},r.prototype.moveColumnByIndex=function(t,e){this.columnModel.moveColumnByIndex(t,e,"api")},r.prototype.moveColumns=function(t,e){this.columnModel.moveColumns(t,e,"api")},r.prototype.moveRowGroupColumn=function(t,e){this.columnModel.moveRowGroupColumn(t,e)},r.prototype.setColumnAggFunc=function(t,e){this.columnModel.setColumnAggFunc(t,e)},r.prototype.setColumnWidth=function(t,e,i,n){void 0===i&&(i=!0),this.columnModel.setColumnWidths([{key:t,newWidth:e}],!1,i,n)},r.prototype.setColumnWidths=function(t,e,i){void 0===e&&(e=!0),this.columnModel.setColumnWidths(t,!1,e,i)},r.prototype.setPivotMode=function(t){this.columnModel.setPivotMode(t)},r.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},r.prototype.getPivotResultColumn=function(t,e){return this.columnModel.getSecondaryPivotColumn(t,e)},r.prototype.setValueColumns=function(t){this.columnModel.setValueColumns(t,"api")},r.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},r.prototype.removeValueColumn=function(t){this.columnModel.removeValueColumn(t,"api")},r.prototype.removeValueColumns=function(t){this.columnModel.removeValueColumns(t,"api")},r.prototype.addValueColumn=function(t){this.columnModel.addValueColumn(t,"api")},r.prototype.addValueColumns=function(t){this.columnModel.addValueColumns(t,"api")},r.prototype.setRowGroupColumns=function(t){this.columnModel.setRowGroupColumns(t,"api")},r.prototype.removeRowGroupColumn=function(t){this.columnModel.removeRowGroupColumn(t,"api")},r.prototype.removeRowGroupColumns=function(t){this.columnModel.removeRowGroupColumns(t,"api")},r.prototype.addRowGroupColumn=function(t){this.columnModel.addRowGroupColumn(t,"api")},r.prototype.addRowGroupColumns=function(t){this.columnModel.addRowGroupColumns(t,"api")},r.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},r.prototype.setPivotColumns=function(t){this.columnModel.setPivotColumns(t,"api")},r.prototype.removePivotColumn=function(t){this.columnModel.removePivotColumn(t,"api")},r.prototype.removePivotColumns=function(t){this.columnModel.removePivotColumns(t,"api")},r.prototype.addPivotColumn=function(t){this.columnModel.addPivotColumn(t,"api")},r.prototype.addPivotColumns=function(t){this.columnModel.addPivotColumns(t,"api")},r.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},r.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},r.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},r.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},r.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},r.prototype.autoSizeColumn=function(t,e){return this.columnModel.autoSizeColumn(t,e,"api")},r.prototype.autoSizeColumns=function(t,e){this.columnModel.autoSizeColumns({columns:t,skipHeader:e})},r.prototype.autoSizeAllColumns=function(t){this.columnModel.autoSizeAllColumns(t,"api")},r.prototype.setPivotResultColumns=function(t){this.columnModel.setSecondaryColumns(t,"api")},r.prototype.getPivotResultColumns=function(){return this.columnModel.getSecondaryColumns()},r.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(ne.removeAllReferences.bind(window,this,"Column API"),100)},r.prototype.getAllColumns=function(){return Si("28.0","getAllColumns","getColumns"),this.getColumns()},r.prototype.getPrimaryColumns=function(){return Si("28.0","getPrimaryColumns","getColumns"),this.getColumns()},r.prototype.getSecondaryColumns=function(){return Si("28.0","getSecondaryColumns","getPivotResultColumns"),this.getPivotResultColumns()},r.prototype.setSecondaryColumns=function(t){Si("28.0","setSecondaryColumns","setPivotResultColumns"),this.setPivotResultColumns(t)},r.prototype.getSecondaryPivotColumn=function(t,e){return Si("28.0","getSecondaryPivotColumn","getPivotResultColumn"),this.getPivotResultColumn(t,e)},Pd([S("columnModel")],r.prototype,"columnModel",void 0),Pd([lt],r.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),Pd([X("columnApi")],r)}(),MR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Or=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},FR=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.initialised=!1,e.isSsrm=!1,e}return MR(t,r),t.prototype.init=function(){var e=this;this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.is("enableCellExpressions"),this.isTreeData=this.gridOptionsService.is("treeData"),this.initialised=!0,this.eventService.addEventListener(E.EVENT_CELL_VALUE_CHANGED,function(i){return e.callColumnCellValueChangedHandler(i)},this.gridOptionsService.useAsyncEvents()),this.addManagedPropertyListener("treeData",function(i){return e.isTreeData=i.currentValue})},t.prototype.getValue=function(e,i,n,o){if(void 0===n&&(n=!1),void 0===o&&(o=!1),this.initialised||this.init(),i){var c,s=e.getColDef(),a=s.field,l=e.getColId(),u=i.data,d=i.groupData&&void 0!==i.groupData[l],h=!o&&i.aggData&&void 0!==i.aggData[l],p=this.isSsrm&&o&&!!e.getColDef().aggFunc,f=this.isSsrm&&i.footer&&i.field&&(!0===e.getColDef().showRowGroup||e.getColDef().showRowGroup===i.field);if(n&&s.filterValueGetter?c=this.executeFilterValueGetter(s.filterValueGetter,u,e,i):this.isTreeData&&h?c=i.aggData[l]:this.isTreeData&&s.valueGetter?c=this.executeValueGetter(s.valueGetter,u,e,i):this.isTreeData&&a&&u?c=fr(u,a,e.isFieldContainsDots()):d?c=i.groupData[l]:h?c=i.aggData[l]:s.valueGetter?c=this.executeValueGetter(s.valueGetter,u,e,i):f?c=fr(u,i.field,e.isFieldContainsDots()):a&&u&&!p&&(c=fr(u,a,e.isFieldContainsDots())),this.cellExpressions&&"string"==typeof c&&0===c.indexOf("=")){var v=c.substring(1);c=this.executeValueGetter(v,u,e,i)}if(null==c){var g=this.getOpenedGroup(i,e);if(null!=g)return g}return c}},t.prototype.getOpenedGroup=function(e,i){if(this.gridOptionsService.is("showOpenedGroup")&&i.getColDef().showRowGroup)for(var o=i.getColDef().showRowGroup,s=e.parent;null!=s;){if(s.rowGroupColumn&&(!0===o||o===s.rowGroupColumn.getColId()))return s.key;s=s.parent}},t.prototype.setValue=function(e,i,n,o){var s=this.columnModel.getPrimaryColumn(i);if(!e||!s)return!1;ie(e.data)&&(e.data={});var a=s.getColDef(),l=a.field,u=a.valueSetter;if(ie(l)&&ie(u))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(s,n))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;var d,c={node:e,data:e.data,oldValue:this.getValue(s,e),newValue:n,colDef:s.getColDef(),column:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return c.newValue=n,void 0===(d=I(u)?"function"==typeof u?u(c):this.expressionService.evaluate(u,c):this.setValueUsingField(e.data,l,n,s.isFieldContainsDots()))&&(d=!0),!!d&&(e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),c.newValue=this.getValue(s,e),this.eventService.dispatchEvent({type:E.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:c.column,api:c.api,columnApi:c.columnApi,colDef:c.colDef,context:c.context,data:e.data,node:e,oldValue:c.oldValue,newValue:c.newValue,value:c.newValue,source:o}),!0)},t.prototype.callColumnCellValueChangedHandler=function(e){var i=e.colDef.onCellValueChanged;"function"==typeof i&&i({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,columnApi:e.columnApi,context:e.context})},t.prototype.setValueUsingField=function(e,i,n,o){if(!i)return!1;var s=!1;if(o)for(var a=i.split("."),l=e;a.length>0&&l;){var u=a.shift();0===a.length?(s=l[u]===n)||(l[u]=n):l=l[u]}else(s=e[i]===n)||(e[i]=n);return!s},t.prototype.executeFilterValueGetter=function(e,i,n,o){var s={data:i,node:o,column:n,colDef:n.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,o)};return"function"==typeof e?e(s):this.expressionService.evaluate(e,s)},t.prototype.executeValueGetter=function(e,i,n,o){var s=n.getColId(),a=this.valueCache.getValue(o,s);if(void 0!==a)return a;var u,l={data:i,node:o,column:n,colDef:n.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,o)};return u="function"==typeof e?e(l):this.expressionService.evaluate(e,l),this.valueCache.setValue(o,s,u),u},t.prototype.getValueCallback=function(e,i){var n=this.columnModel.getPrimaryColumn(i);return n?this.getValue(n,e):null},t.prototype.getKeyForNode=function(e,i){var n=this.getValue(e,i),o=e.getColDef().keyCreator,s=n;return o&&(s=o({value:n,colDef:e.getColDef(),column:e,node:i,data:i.data,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context})),"string"==typeof s||null==s||"[object Object]"===(s=String(s))&&ge(function(){console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")},"getKeyForNode - warn about [object,object]"),s},Or([S("expressionService")],t.prototype,"expressionService",void 0),Or([S("columnModel")],t.prototype,"columnModel",void 0),Or([S("valueCache")],t.prototype,"valueCache",void 0),Or([S("dataTypeService")],t.prototype,"dataTypeService",void 0),Or([V],t.prototype,"init",null),Or([X("valueService")],t)}(k),IR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),fv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},NR=function(r,t){return function(e,i){t(e,i,r)}},GR=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.expressionToFunctionCache={},e}return IR(t,r),t.prototype.setBeans=function(e){this.logger=e.create("ExpressionService")},t.prototype.evaluate=function(e,i){if("string"==typeof e)return this.evaluateExpression(e,i);console.error("AG Grid: value should be either a string or a function",e)},t.prototype.evaluateExpression=function(e,i){try{return this.createExpressionFunction(e)(i.value,i.context,i.oldValue,i.newValue,i.value,i.node,i.data,i.colDef,i.rowIndex,i.api,i.columnApi,i.getValue,i.column,i.columnGroup)}catch(s){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",i),console.log("Exception = "+s),null}},t.prototype.createExpressionFunction=function(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];var i=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",i);return this.expressionToFunctionCache[e]=n,n},t.prototype.createFunctionBody=function(e){return e.indexOf("return")>=0?e:"return "+e+";"},fv([NR(0,Tt("loggerFactory"))],t.prototype,"setBeans",null),fv([X("expressionService")],t)}(k),kR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),VR=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.templateCache={},e.waitingCallbacks={},e}return kR(t,r),t.prototype.getTemplate=function(e,i){var n=this.templateCache[e];if(n)return n;var o=this.waitingCallbacks[e],s=this;if(!o){this.waitingCallbacks[e]=o=[];var a=new XMLHttpRequest;a.onload=function(){s.handleHttpResult(this,e)},a.open("GET",e),a.send()}return i&&o.push(i),null},t.prototype.handleHttpResult=function(e,i){if(200===e.status&&null!==e.response){this.templateCache[i]=e.response||e.responseText;for(var n=this.waitingCallbacks[i],o=0;o<n.length;o++)(0,n[o])()}else console.warn("AG Grid: Unable to get template error "+e.status+" - "+i)},t=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}([X("templateService")],t),t}(k),BR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),vv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},WR=function(r,t){return function(e,i){t(e,i,r)}},jR=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return BR(t,r),t.prototype.setBeans=function(e){this.logging=e.is("debug")},t.prototype.create=function(e){return new Ad(e,this.isLogging.bind(this))},t.prototype.isLogging=function(){return this.logging},vv([WR(0,Tt("gridOptionsService"))],t.prototype,"setBeans",null),vv([X("loggerFactory")],t)}(k),Ad=function(){function r(t,e){this.name=t,this.isLoggingFunc=e}return r.prototype.isLogging=function(){return this.isLoggingFunc()},r.prototype.log=function(t){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+t)},r}(),UR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),xr=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},zR=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return UR(t,r),t.prototype.setComp=function(e,i,n){var o=this;this.view=e,this.eGridHostDiv=i,this.eGui=n,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:function(){return o.eGui},isInterestedIn:function(a){return a===Ut.HeaderCell||a===Ut.ToolPanel},getIconName:function(){return ct.ICON_NOT_ALLOWED}}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(i),this.createManagedBean(new od(this.view)),this.addRtlSupport(),this.addManagedListener(this,E.EVENT_KEYBOARD_FOCUS,function(){o.view.addOrRemoveKeyboardFocusClass(!0)}),this.addManagedListener(this,E.EVENT_MOUSE_FOCUS,function(){o.view.addOrRemoveKeyboardFocusClass(!1)});var s=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(function(){return s()}),this.ctrlsService.registerGridCtrl(this)},t.prototype.isDetailGrid=function(){var e,i=this.focusService.findTabbableParent(this.getGui());return(null===(e=i?.getAttribute("row-id"))||void 0===e?void 0:e.startsWith("detail"))||!1},t.prototype.showDropZones=function(){return oe.__isRegistered(q.RowGroupingModule,this.context.getGridId())},t.prototype.showSideBar=function(){return oe.__isRegistered(q.SideBarModule,this.context.getGridId())},t.prototype.showStatusBar=function(){return oe.__isRegistered(q.StatusBarModule,this.context.getGridId())},t.prototype.showWatermark=function(){return oe.__isRegistered(q.EnterpriseCoreModule,this.context.getGridId())},t.prototype.onGridSizeChanged=function(){this.eventService.dispatchEvent({type:E.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})},t.prototype.addRtlSupport=function(){var e=this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)},t.prototype.destroyGridUi=function(){this.view.destroyGridUi()},t.prototype.getGui=function(){return this.eGui},t.prototype.setResizeCursor=function(e){this.view.setCursor(e?"ew-resize":null)},t.prototype.disableUserSelect=function(e){this.view.setUserSelect(e?"none":null)},t.prototype.focusNextInnerContainer=function(e){var i=this.gridOptionsService.getDocument(),n=this.view.getFocusableContainers(),s=n.findIndex(function(a){return a.contains(i.activeElement)})+(e?-1:1);return!(s<=0||s>=n.length)&&this.focusService.focusInto(n[s])},t.prototype.focusInnerElement=function(e){var i=this.view.getFocusableContainers(),n=this.columnModel.getAllDisplayedColumns();if(e){if(i.length>1)return this.focusService.focusInto(Pe(i),!0);var o=Pe(n);if(this.focusService.focusGridView(o,!0))return!0}return 0===this.gridOptionsService.getNum("headerHeight")?this.focusService.focusGridView(n[0]):this.focusService.focusFirstHeader()},t.prototype.forceFocusOutOfContainer=function(e){void 0===e&&(e=!1),this.view.forceFocusOutOfContainer(e)},xr([S("focusService")],t.prototype,"focusService",void 0),xr([S("resizeObserverService")],t.prototype,"resizeObserverService",void 0),xr([S("columnModel")],t.prototype,"columnModel",void 0),xr([S("ctrlsService")],t.prototype,"ctrlsService",void 0),xr([S("mouseEventService")],t.prototype,"mouseEventService",void 0),xr([S("dragAndDropService")],t.prototype,"dragAndDropService",void 0),t}(k),KR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ks=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},$R=function(r){function t(e){var i=r.call(this)||this;return i.eGridDiv=e,i}return KR(t,r),t.prototype.postConstruct=function(){var e=this;this.logger=this.loggerFactory.create("GridComp");var i={destroyGridUi:function(){return e.destroyBean(e)},setRtlClass:function(o){return e.addCssClass(o)},addOrRemoveKeyboardFocusClass:function(o){return e.addOrRemoveCssClass(Er.AG_KEYBOARD_FOCUS,o)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(o){e.getGui().style.userSelect=o??"",e.getGui().style.webkitUserSelect=o??""},setCursor:function(o){e.getGui().style.cursor=o??""}};this.ctrl=this.createManagedBean(new zR);var n=this.createTemplate();this.setTemplate(n),this.ctrl.setComp(i,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(o){return e.ctrl.focusInnerElement(o)}})},t.prototype.insertGridIntoDom=function(){var e=this,i=this.getGui();this.eGridDiv.appendChild(i),this.addDestroyFunc(function(){e.eGridDiv.removeChild(i),e.logger.log("Grid removed from DOM")})},t.prototype.updateLayoutClasses=function(e,i){var n=this.eRootWrapperBody.classList;n.toggle(rt.AUTO_HEIGHT,i.autoHeight),n.toggle(rt.NORMAL,i.normal),n.toggle(rt.PRINT,i.print),this.addOrRemoveCssClass(rt.AUTO_HEIGHT,i.autoHeight),this.addOrRemoveCssClass(rt.NORMAL,i.normal),this.addOrRemoveCssClass(rt.PRINT,i.print)},t.prototype.createTemplate=function(){return'<div class="ag-root-wrapper" role="presentation">\n                '+(this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"")+'\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    '+(this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"")+"\n                </div>\n                "+(this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"")+"\n                <ag-pagination></ag-pagination>\n                "+(this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"")+"\n            </div>"},t.prototype.getFocusableElement=function(){return this.eRootWrapperBody},t.prototype.getFocusableContainers=function(){var e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(function(i){return io(i)})},Ks([S("loggerFactory")],t.prototype,"loggerFactory",void 0),Ks([U("gridBody")],t.prototype,"gridBodyComp",void 0),Ks([U("sideBar")],t.prototype,"sideBarComp",void 0),Ks([U("rootWrapperBody")],t.prototype,"eRootWrapperBody",void 0),Ks([V],t.prototype,"postConstruct",null),t}(Ol),YR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),gv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ho=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},Dr=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},XR=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}var e;return YR(t,r),e=t,t.prototype.progressSort=function(i,n,o){var s=this.getNextSortDirection(i);this.setSortForColumn(i,s,n,o)},t.prototype.setSortForColumn=function(i,n,o,s){"asc"!==n&&"desc"!==n&&(n=null);var l=[i];if(this.gridOptionsService.isColumnsSortingCoupledToGroup()&&i.getColDef().showRowGroup){var u=this.columnModel.getSourceColumnsForGroupColumn(i),c=u?.filter(function(h){return h.getColDef().sortable});c&&(l=Dr([i],ho(c)))}l.forEach(function(h){return h.setSort(n,s)}),(o||this.gridOptionsService.is("alwaysMultiSort"))&&!this.gridOptionsService.is("suppressMultiSort")||this.clearSortBarTheseColumns(l,s),this.updateSortIndex(i),this.dispatchSortChangedEvents(s)},t.prototype.updateSortIndex=function(i){var n=this.gridOptionsService.isColumnsSortingCoupledToGroup(),o=this.columnModel.getGroupDisplayColumnForGroup(i.getId()),s=n&&o||i,a=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(c){return c.setSortIndex(null)});var l=a.filter(function(c){return c!==s});(s.getSort()?Dr(Dr([],ho(l)),[s]):l).forEach(function(c,d){return c.setSortIndex(d)})},t.prototype.onSortChanged=function(i){this.dispatchSortChangedEvents(i)},t.prototype.isSortActive=function(){var n=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(o){return!!o.getSort()});return n&&n.length>0},t.prototype.dispatchSortChangedEvents=function(i){this.eventService.dispatchEvent({type:E.EVENT_SORT_CHANGED,source:i})},t.prototype.clearSortBarTheseColumns=function(i,n){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(o){i.includes(o)||o.setSort(void 0,n)})},t.prototype.getNextSortDirection=function(i){var n;if(n=i.getColDef().sortingOrder?i.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?this.gridOptionsService.get("sortingOrder"):e.DEFAULT_SORTING_ORDER,!Array.isArray(n)||n.length<=0)return console.warn("AG Grid: sortingOrder must be an array with at least one element, currently it's "+n),null;var l,o=n.indexOf(i.getSort());return e.DEFAULT_SORTING_ORDER.indexOf(l=o<0||o==n.length-1?n[0]:n[o+1])<0?(console.warn("AG Grid: invalid sort type "+l),null):l},t.prototype.getIndexedSortMap=function(){var i=this,n=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(c){return!!c.getSort()});if(this.columnModel.isPivotMode()){var o=this.gridOptionsService.isColumnsSortingCoupledToGroup();n=n.filter(function(c){var d=!!c.getAggFunc(),h=!c.isPrimary(),p=o?i.columnModel.getGroupDisplayColumnForGroup(c.getId()):c.getColDef().showRowGroup;return d||h||p})}var s=this.columnModel.getRowGroupColumns().filter(function(c){return!!c.getSort()}),a=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!s.length;a&&(n=Dr([],ho(new Set(n.map(function(c){var d;return null!==(d=i.columnModel.getGroupDisplayColumnForGroup(c.getId()))&&void 0!==d?d:c})))));var l={};n.forEach(function(c,d){return l[c.getId()]=d}),n.sort(function(c,d){var h=c.getSortIndex(),p=d.getSortIndex();return null!=h&&null!=p?h-p:null==h&&null==p?l[c.getId()]>l[d.getId()]?1:-1:null==p?-1:1});var u=new Map;return n.forEach(function(c,d){return u.set(c,d)}),a&&s.forEach(function(c){var d=i.columnModel.getGroupDisplayColumnForGroup(c.getId());u.set(c,u.get(d))}),u},t.prototype.getColumnsWithSortingOrdered=function(){return Dr([],ho(this.getIndexedSortMap().entries())).sort(function(i,n){return ho(i,2)[1]-ho(n,2)[1]}).map(function(i){return ho(i,1)[0]})},t.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered().filter(function(i){return i.getSort()}).map(function(i){return{sort:i.getSort(),colId:i.getId()}})},t.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().filter(function(i){return i.getSort()}).map(function(i){return{sort:i.getSort(),column:i}})},t.prototype.canColumnDisplayMixedSort=function(i){var n=this.gridOptionsService.isColumnsSortingCoupledToGroup(),o=!!i.getColDef().showRowGroup;return n&&o},t.prototype.getDisplaySortForColumn=function(i){var n=this.columnModel.getSourceColumnsForGroupColumn(i);if(!this.canColumnDisplayMixedSort(i)||!n?.length)return i.getSort();var s=null!=i.getColDef().field||i.getColDef().valueGetter?Dr([i],ho(n)):n,a=s[0].getSort();return s.every(function(u){return u.getSort()==a})?a:"mixed"},t.prototype.getDisplaySortIndexForColumn=function(i){return this.getIndexedSortMap().get(i)},t.DEFAULT_SORTING_ORDER=["asc","desc",null],gv([S("columnModel")],t.prototype,"columnModel",void 0),e=gv([X("sortController")],t)}(k),qR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),QR=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return qR(t,r),t.prototype.setMouseOver=function(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:E.EVENT_COLUMN_HOVER_CHANGED})},t.prototype.clearMouseOver=function(){this.selectedColumns=null,this.eventService.dispatchEvent({type:E.EVENT_COLUMN_HOVER_CHANGED})},t.prototype.isHovered=function(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0},t=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}([X("columnHoverService")],t),t}(k),JR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ld=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},eO=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.executeNextFuncs=[],e.executeLaterFuncs=[],e.active=!1,e.animationThreadCount=0,e}return JR(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(i){return e.gridBodyCtrl=i.gridBodyCtrl})},t.prototype.isActive=function(){return this.active},t.prototype.start=function(){this.active||this.gridOptionsService.is("suppressColumnMoveAnimation")||this.gridOptionsService.is("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)},t.prototype.finish=function(){this.active&&(this.flush(),this.active=!1)},t.prototype.executeNextVMTurn=function(e){this.active?this.executeNextFuncs.push(e):e()},t.prototype.executeLaterVMTurn=function(e){this.active?this.executeLaterFuncs.push(e):e()},t.prototype.ensureAnimationCssClassPresent=function(){var e=this;this.animationThreadCount++;var i=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(function(){e.animationThreadCount===i&&e.gridBodyCtrl.setColumnMovingCss(!1)})},t.prototype.flush=function(){var e=this.executeNextFuncs;this.executeNextFuncs=[];var i=this.executeLaterFuncs;this.executeLaterFuncs=[],(0!==e.length||0!==i.length)&&(window.setTimeout(function(){return e.forEach(function(n){return n()})},0),window.setTimeout(function(){return i.forEach(function(n){return n()})},300))},Ld([S("ctrlsService")],t.prototype,"ctrlsService",void 0),Ld([V],t.prototype,"postConstruct",null),Ld([X("columnAnimationService")],t)}(k),tO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Md=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},iO=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return tO(t,r),t.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(i){e.centerRowContainerCon=i.centerRowContainerCtrl,e.addManagedListener(e.eventService,E.EVENT_BODY_HEIGHT_CHANGED,e.checkPageSize.bind(e)),e.addManagedListener(e.eventService,E.EVENT_SCROLL_VISIBILITY_CHANGED,e.checkPageSize.bind(e)),e.checkPageSize()})},t.prototype.notActive=function(){return!this.gridOptionsService.is("paginationAutoPageSize")||null==this.centerRowContainerCon},t.prototype.checkPageSize=function(){var e=this;if(!this.notActive()){var i=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(i>0){var n=function(){var o=e.gridOptionsService.getRowHeightAsNumber(),s=Math.floor(i/o);e.gridOptionsService.set("paginationPageSize",s)};this.isBodyRendered?Fi(function(){return n()},50)():(n(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},Md([S("ctrlsService")],t.prototype,"ctrlsService",void 0),Md([V],t.prototype,"postConstruct",null),Md([X("paginationAutoPageSizeService")],t)}(k),nO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),yv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},oO=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.cacheVersion=0,e}return nO(t,r),t.prototype.init=function(){this.active=this.gridOptionsService.is("valueCache"),this.neverExpires=this.gridOptionsService.is("valueCacheNeverExpires")},t.prototype.onDataChanged=function(){this.neverExpires||this.expire()},t.prototype.expire=function(){this.cacheVersion++},t.prototype.setValue=function(e,i,n){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[i]=n)},t.prototype.getValue=function(e,i){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[i]},yv([V],t.prototype,"init",null),yv([X("valueCache")],t)}(k),rO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ml=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},aO=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return rO(t,r),t.prototype.init=function(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,E.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},t.prototype.onCellValueChanged=function(e){"paste"!==e.source&&this.doChangeDetection(e.node,e.column)},t.prototype.doChangeDetection=function(e,i){if(!this.gridOptionsService.is("suppressChangeDetection")){var n=[e];if(this.clientSideRowModel&&!e.isRowPinned()){var o=this.gridOptionsService.is("aggregateOnlyChangedColumns"),s=new Od(o,this.clientSideRowModel.getRootNode());s.addParentNode(e.parent,[i]),this.clientSideRowModel.doAggregate(s),s.forEachChangedNodeDepthFirst(function(a){n.push(a)})}this.rowRenderer.refreshCells({rowNodes:n})}},Ml([S("rowModel")],t.prototype,"rowModel",void 0),Ml([S("rowRenderer")],t.prototype,"rowRenderer",void 0),Ml([V],t.prototype,"init",null),Ml([X("changeDetectionService")],t)}(k),lO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),mv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},uO=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return lO(t,r),t.prototype.adaptFunction=function(e,i){var n=this.componentMetadataProvider.retrieve(e);return n&&n.functionAdapter?n.functionAdapter(i):null},t.prototype.adaptCellRendererFunction=function(e){return function(){function n(){}return n.prototype.refresh=function(o){return!1},n.prototype.getGui=function(){return this.eGui},n.prototype.init=function(o){var s=e(o),a=typeof s;this.eGui="string"!==a&&"number"!==a&&"boolean"!==a?null!=s?s:Ct("<span></span>"):Ct("<span>"+s+"</span>")},n}()},t.prototype.doesImplementIComponent=function(e){return!!e&&e.prototype&&"getGui"in e.prototype},mv([S("componentMetadataProvider")],t.prototype,"componentMetadataProvider",void 0),mv([X("agComponentUtils")],t)}(k),cO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Fd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},dO=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return cO(t,r),t.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}},t.prototype.retrieve=function(e){return this.componentMetaData[e]},Fd([S("agComponentUtils")],t.prototype,"agComponentUtils",void 0),Fd([V],t.prototype,"postConstruct",null),Fd([X("componentMetadataProvider")],t)}(k),hO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Id=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},yO={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:20,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:56,headerCellMinWidth:48,listItemHeight:32,rowHeight:48,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:32,headerCellMinWidth:24,listItemHeight:24,rowHeight:28,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:240}},wv={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},mO=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.calculatedSizes={},e}return hO(t,r),t.prototype.postConstruct=function(){var i,e=this,n=null!==(i=this.getTheme().el)&&void 0!==i?i:this.eGridDiv;this.mutationObserver=new MutationObserver(function(){e.calculatedSizes={},e.fireGridStylesChangedEvent()}),this.mutationObserver.observe(n||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})},t.prototype.fireGridStylesChangedEvent=function(){this.eventService.dispatchEvent({type:E.EVENT_GRID_STYLES_CHANGED})},t.prototype.getSassVariable=function(e){var i=this.getTheme(),n=i.themeFamily,o=i.el;if(n&&0===n.indexOf("ag-theme"))return this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[n]||(this.calculatedSizes[n]={}),this.calculatedSizes[n][e]??(this.calculatedSizes[n][e]=this.calculateValueForSassProperty(e,n,o),this.calculatedSizes[n][e])},t.prototype.calculateValueForSassProperty=function(e,i,n){var o,s="ag-theme-"+(i.match("material")?"material":i.match("balham")?"balham":i.match("alpine")?"alpine":"custom"),a=yO[s][e],l=this.gridOptionsService.getDocument();if(n||(n=this.eGridDiv),!wv[e])return a;var u=wv[e],c=l.createElement("div"),d=Array.from(n.classList);(o=c.classList).add.apply(o,function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r}([i],function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(d))),c.style.position="absolute";var h=u.reduce(function(v,g){var y=l.createElement("div");return y.style.position="static",y.classList.add(g),v.appendChild(y),y},c),p=0;if(l.body){l.body.appendChild(c);var f=-1!==e.toLowerCase().indexOf("height")?"height":"width";p=parseInt(window.getComputedStyle(h)[f],10),l.body.removeChild(c)}return p||a},t.prototype.isThemeDark=function(){var e=this.getTheme().theme;return!!e&&e.indexOf("dark")>=0},t.prototype.chartMenuPanelWidth=function(){return this.getSassVariable("chartMenuPanelWidth")},t.prototype.getTheme=function(){for(var e=/\bag-(material|(?:theme-([\w\-]*)))\b/g,i=this.eGridDiv,n=null,o=[];i;){if(n=e.exec(i.className)){var s=i.className.match(e);s&&(o=s);break}i=i.parentElement||void 0}if(!n)return{allThemes:o};var a=n[0];return{theme:a,el:i,themeFamily:a.replace(/-dark$/,""),allThemes:o}},t.prototype.getFromTheme=function(e,i){var n;return null!==(n=this.getSassVariable(i))&&void 0!==n?n:e},t.prototype.getDefaultRowHeight=function(){return this.getFromTheme(25,"rowHeight")},t.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},t.prototype.refreshRowHeightVariable=function(){var e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),i=this.gridOptionsService.getNum("rowHeight");if(null==i||isNaN(i)||!isFinite(i))return-1;var n=i+"px";return e!=n?(this.eGridDiv.style.setProperty("--ag-line-height",n),i):""!=e?parseFloat(e):-1},t.prototype.getMinColWidth=function(){var e=this.getFromTheme(null,"headerCellMinWidth");return I(e)?Math.max(e,10):10},t.prototype.destroy=function(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),r.prototype.destroy.call(this)},Id([S("eGridDiv")],t.prototype,"eGridDiv",void 0),Id([V],t.prototype,"postConstruct",null),Id([X("environment")],t)}(k),CO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Fl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},wO=function(r,t){return function(e,i){t(e,i,r)}},SO=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.scrollY=0,e.uiBodyHeight=0,e}return CO(t,r),t.prototype.agWire=function(e){this.logger=e.create("RowContainerHeightService")},t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,E.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=Hp(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},t.prototype.isStretching=function(){return this.stretching},t.prototype.getDivStretchOffset=function(){return this.divStretchOffset},t.prototype.updateOffset=function(){if(this.stretching){var i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,n=this.getUiBodyHeight();(i!==this.scrollY||n!==this.uiBodyHeight)&&(this.scrollY=i,this.uiBodyHeight=n,this.calculateOffset())}},t.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var e=this.scrollY/this.maxScrollY,i=e*this.pixelsToShave;this.logger.log("Div Stretch Offset = "+i+" ("+this.pixelsToShave+" * "+e+")"),this.setDivStretchOffset(i)},t.prototype.setUiContainerHeight=function(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:E.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},t.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},t.prototype.setDivStretchOffset=function(e){var i="number"==typeof e?Math.floor(e):null;this.divStretchOffset!==i&&(this.divStretchOffset=i,this.eventService.dispatchEvent({type:E.EVENT_HEIGHT_SCALE_CHANGED}))},t.prototype.setModelHeight=function(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},t.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},t.prototype.getRealPixelPosition=function(e){return e-this.divStretchOffset},t.prototype.getUiBodyHeight=function(){var i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return i.bottom-i.top},t.prototype.getScrollPositionForPixel=function(e){if(this.pixelsToShave<=0)return e;var i=this.modelHeight-this.getUiBodyHeight();return this.maxScrollY*(e/i)},Fl([S("ctrlsService")],t.prototype,"ctrlsService",void 0),Fl([wO(0,Tt("loggerFactory"))],t.prototype,"agWire",null),Fl([V],t.prototype,"postConstruct",null),Fl([X("rowContainerHeightService")],t)}(k),_O=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Sv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},EO=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return _O(t,r),t.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.isRowSelectableFunc=this.gridOptionsService.get("isRowSelectable")},t.prototype.updateSelectableAfterGrouping=function(e){this.isRowSelectableFunc&&this.recurseDown(e.childrenAfterGroup,function(n){return n.childrenAfterGroup})},t.prototype.recurseDown=function(e,i){var n=this;e&&e.forEach(function(o){var s;o.group&&(o.hasChildren()&&n.recurseDown(i(o),i),s=n.groupSelectsChildren?I((i(o)||[]).find(function(l){return!0===l.selectable})):!!n.isRowSelectableFunc&&n.isRowSelectableFunc(o),o.setRowSelectable(s))})},Sv([V],t.prototype,"init",null),Sv([X("selectableService")],t)}(k),bO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Di=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},RO=function(r){function t(){var e=r.call(this)||this;return e.previousAndFirstButtonsDisabled=!1,e.nextButtonDisabled=!1,e.lastButtonDisabled=!1,e.areListenersSetup=!1,e}return bO(t,r),t.prototype.postConstruct=function(){var e=this.gridOptionsService.is("enableRtl");this.setTemplate(this.getTemplate());var i=this,n=i.btFirst,o=i.btPrevious,s=i.btNext,a=i.btLast;this.activateTabIndex([n,o,s,a]),n.insertAdjacentElement("afterbegin",Ke(e?"last":"first",this.gridOptionsService)),o.insertAdjacentElement("afterbegin",Ke(e?"next":"previous",this.gridOptionsService)),s.insertAdjacentElement("afterbegin",Ke(e?"previous":"next",this.gridOptionsService)),a.insertAdjacentElement("afterbegin",Ke(e?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.onPaginationChanged()},t.prototype.onPaginationChanged=function(){var i=this.gridOptionsService.is("pagination")&&!this.gridOptionsService.is("suppressPaginationPanel");this.setDisplayed(i),i&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels())},t.prototype.setupListeners=function(){var e=this;this.areListenersSetup||(this.addManagedListener(this.eventService,E.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(function(i){var n=i.el,o=i.fn;e.addManagedListener(n,"click",o),e.addManagedListener(n,"keydown",function(s){(s.key===M.ENTER||s.key===M.SPACE)&&(s.preventDefault(),o())})}),this.areListenersSetup=!0)},t.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},t.prototype.setCurrentPageLabel=function(){var e=this.paginationProxy.getTotalPages()>0,i=this.paginationProxy.getCurrentPage();this.lbCurrent.innerHTML=this.formatNumber(e?i+1:0)},t.prototype.formatNumber=function(e){var i=this.gridOptionsService.getCallback("paginationNumberFormatter");if(i)return i({value:e});var o=this.localeService.getLocaleTextFunc();return yc(e,o("thousandSeparator",","),o("decimalSeparator","."))},t.prototype.getTemplate=function(){var e=this.localeService.getLocaleTextFunc(),i=e("page","Page"),n=e("to","to"),o=e("of","of"),s=e("firstPage","First Page"),a=e("previousPage","Previous Page"),l=e("nextPage","Next Page"),u=e("lastPage","Last Page"),c=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'+c+'">\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-'+c+'-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+c+'-to">'+n+'</span>\n                    <span id="ag-'+c+'-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+c+'-of">'+o+'</span>\n                    <span id="ag-'+c+'-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="'+s+'"></div>\n                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="'+a+'"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-'+c+'-start-page">'+i+'</span>\n                        <span id="ag-'+c+'-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-'+c+'-of-page">'+o+'</span>\n                        <span id="ag-'+c+'-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="'+l+'"></div>\n                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="'+u+'"></div>\n                </span>\n            </div>'},t.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},t.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},t.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},t.prototype.enableOrDisableButtons=function(){var e=this.paginationProxy.getCurrentPage(),i=this.paginationProxy.isLastPageFound(),n=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);var o=this.isZeroPagesToDisplay();this.nextButtonDisabled=i&&e===n-1||o,this.lastButtonDisabled=!i||o||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)},t.prototype.toggleButtonDisabled=function(e,i){tc(e,i),e.classList.toggle("ag-disabled",i)},t.prototype.updateRowLabels=function(){var s,a,e=this.paginationProxy.getCurrentPage(),i=this.paginationProxy.getPageSize(),n=this.paginationProxy.isLastPageFound(),o=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;if(this.isZeroPagesToDisplay()?s=a=0:(a=(s=i*e+1)+i-1,n&&a>o&&(a=o)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(s),this.rowNodeBlockLoader.isLoading()){var l=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=l("pageLastRowUnknown","?")}else this.lbLastRowOnPage.innerHTML=this.formatNumber(a)},t.prototype.isZeroPagesToDisplay=function(){var e=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages();return e&&0===i},t.prototype.setTotalLabels=function(){var e=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages(),n=e?this.paginationProxy.getMasterRowCount():null;if(1===n){var o=this.paginationProxy.getRow(0);if(o&&o.group&&!o.groupData&&!o.aggData)return void this.setTotalLabelsToZero()}if(e)this.lbTotal.innerHTML=this.formatNumber(i),this.lbRecordCount.innerHTML=this.formatNumber(n);else{var a=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=a,this.lbRecordCount.innerHTML=a}},t.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)},Di([S("paginationProxy")],t.prototype,"paginationProxy",void 0),Di([S("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),Di([U("btFirst")],t.prototype,"btFirst",void 0),Di([U("btPrevious")],t.prototype,"btPrevious",void 0),Di([U("btNext")],t.prototype,"btNext",void 0),Di([U("btLast")],t.prototype,"btLast",void 0),Di([U("lbRecordCount")],t.prototype,"lbRecordCount",void 0),Di([U("lbFirstRowOnPage")],t.prototype,"lbFirstRowOnPage",void 0),Di([U("lbLastRowOnPage")],t.prototype,"lbLastRowOnPage",void 0),Di([U("lbCurrent")],t.prototype,"lbCurrent",void 0),Di([U("lbTotal")],t.prototype,"lbTotal",void 0),Di([V],t.prototype,"postConstruct",null),t}(he),OO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Tr=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},$s=function(r){return r[r.Loading=0]="Loading",r[r.NoRows=1]="NoRows",r}($s||{}),xO=function(r){function t(){var e=r.call(this,t.TEMPLATE)||this;return e.inProgress=!1,e.destroyRequested=!1,e.manuallyDisplayed=!1,e}return OO(t,r),t.prototype.updateLayoutClasses=function(e,i){var n=this.eOverlayWrapper.classList;n.toggle(rt.AUTO_HEIGHT,i.autoHeight),n.toggle(rt.NORMAL,i.normal),n.toggle(rt.PRINT,i.print)},t.prototype.postConstruct=function(){this.createManagedBean(new od(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.addManagedListener(this.eventService,E.EVENT_ROW_DATA_UPDATED,this.onRowDataUpdated.bind(this)),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData")&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)},t.prototype.setWrapperTypeClass=function(e){var i=this.eOverlayWrapper.classList;i.toggle("ag-overlay-loading-wrapper",e===$s.Loading),i.toggle("ag-overlay-no-rows-wrapper",e===$s.NoRows)},t.prototype.showLoadingOverlay=function(){if(!this.gridOptionsService.is("suppressLoadingOverlay")){var n=this.userComponentFactory.getLoadingOverlayCompDetails({}).newAgStackInstance();this.showOverlay(n,$s.Loading)}},t.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsService.is("suppressNoRowsOverlay")){var n=this.userComponentFactory.getNoRowsOverlayCompDetails({}).newAgStackInstance();this.showOverlay(n,$s.NoRows)}},t.prototype.showOverlay=function(e,i){var n=this;this.inProgress||(this.setWrapperTypeClass(i),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(function(o){n.inProgress=!1,n.eOverlayWrapper.appendChild(o.getGui()),n.activeOverlay=o,n.destroyRequested&&(n.destroyRequested=!1,n.destroyActiveOverlay())}),this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.setDisplayed(!0,{skipAriaHidden:!0}))},t.prototype.destroyActiveOverlay=function(){this.inProgress?this.destroyRequested=!0:this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),Pt(this.eOverlayWrapper))},t.prototype.hideOverlay=function(){this.manuallyDisplayed=!1,this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})},t.prototype.destroy=function(){this.destroyActiveOverlay(),r.prototype.destroy.call(this)},t.prototype.showOrHideOverlay=function(){var e=this.paginationProxy.isEmpty(),i=this.gridOptionsService.is("suppressNoRowsOverlay");e&&!i?this.showNoRowsOverlay():this.hideOverlay()},t.prototype.onRowDataUpdated=function(){this.showOrHideOverlay()},t.prototype.onNewColumnsLoaded=function(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()},t.TEMPLATE='\n        <div class="ag-overlay" aria-hidden="true">\n            <div class="ag-overlay-panel">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>\n            </div>\n        </div>',Tr([S("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Tr([S("paginationProxy")],t.prototype,"paginationProxy",void 0),Tr([S("gridApi")],t.prototype,"gridApi",void 0),Tr([S("columnModel")],t.prototype,"columnModel",void 0),Tr([U("eOverlayWrapper")],t.prototype,"eOverlayWrapper",void 0),Tr([V],t.prototype,"postConstruct",null),t}(he),DO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Il=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},TO=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return DO(t,r),t.prototype.getFirstRow=function(){var i,e=0;return this.pinnedRowModel.getPinnedTopRowCount()?i="top":this.rowModel.getRowCount()?(i=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(i="bottom"),void 0===i?null:{rowIndex:e,rowPinned:i}},t.prototype.getLastRow=function(){var e,i=null,n=this.pinnedRowModel.getPinnedBottomRowCount(),o=this.pinnedRowModel.getPinnedTopRowCount();return n?(i="bottom",e=n-1):this.rowModel.getRowCount()?(i=null,e=this.paginationProxy.getPageLastRow()):o&&(i="top",e=o-1),void 0===e?null:{rowIndex:e,rowPinned:i}},t.prototype.getRowNode=function(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},t.prototype.sameRow=function(e,i){return!e&&!i||!(e&&!i||!e&&i)&&e.rowIndex===i.rowIndex&&e.rowPinned==i.rowPinned},t.prototype.before=function(e,i){switch(e.rowPinned){case"top":if("top"!==i.rowPinned)return!0;break;case"bottom":if("bottom"!==i.rowPinned)return!1;break;default:if(I(i.rowPinned))return"top"!==i.rowPinned}return e.rowIndex<i.rowIndex},t.prototype.rowMax=function(e){var n,i=this;return e.forEach(function(o){(void 0===n||i.before(n,o))&&(n=o)}),n},t.prototype.rowMin=function(e){var n,i=this;return e.forEach(function(o){(void 0===n||i.before(o,n))&&(n=o)}),n},Il([S("rowModel")],t.prototype,"rowModel",void 0),Il([S("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Il([S("paginationProxy")],t.prototype,"paginationProxy",void 0),Il([X("rowPositionUtils")],t)}(k),PO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),LO=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return PO(t,r),t.prototype.createId=function(e){return this.createIdFromValues({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned})},t.prototype.createIdFromValues=function(e){return e.rowIndex+"."+(e.rowPinned??"null")+"."+e.column.getId()},t.prototype.equals=function(e,i){return e.column===i.column&&e.rowPinned===i.rowPinned&&e.rowIndex===i.rowIndex},t=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}([X("cellPositionUtils")],t),t}(k),MO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ys=function r(t){this.cellValueChanges=t},Hd=function(r){function t(e,i,n,o){var s=r.call(this,e)||this;return s.initialRange=i,s.finalRange=n,s.ranges=o,s}return MO(t,r),t}(Ys),_v=function(){function r(t){this.actionStack=[],this.maxStackSize=t||r.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return r.prototype.pop=function(){return this.actionStack.pop()},r.prototype.push=function(t){t.cellValueChanges&&t.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(t))},r.prototype.clear=function(){this.actionStack=[]},r.prototype.getCurrentStackSize=function(){return this.actionStack.length},r.DEFAULT_STACK_SIZE=10,r}(),FO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Nl=function(){return Nl=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Nl.apply(this,arguments)},ln=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},GO=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.cellValueChanges=[],e.activeCellEdit=null,e.activeRowEdit=null,e.isPasting=!1,e.isRangeInAction=!1,e.onCellValueChanged=function(i){var n={column:i.column,rowIndex:i.rowIndex,rowPinned:i.rowPinned},o=null!==e.activeCellEdit&&e.cellPositionUtils.equals(e.activeCellEdit,n),s=null!==e.activeRowEdit&&e.rowPositionUtils.sameRow(e.activeRowEdit,n);if(o||s||e.isPasting||e.isRangeInAction){var d=i.oldValue,h=i.value,p={rowPinned:i.rowPinned,rowIndex:i.rowIndex,columnId:i.column.getColId(),newValue:h,oldValue:d};e.cellValueChanges.push(p)}},e.clearStacks=function(){e.undoStack.clear(),e.redoStack.clear()},e}return FO(t,r),t.prototype.init=function(){var e=this;if(this.gridOptionsService.is("undoRedoCellEditing")){var i=this.gridOptionsService.getNum("undoRedoCellEditingLimit");i<=0||(this.undoStack=new _v(i),this.redoStack=new _v(i),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,E.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,E.EVENT_MODEL_UPDATED,function(n){n.keepUndoRedoStack||e.clearStacks()}),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,E.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl()}))}},t.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},t.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},t.prototype.undo=function(e){this.eventService.dispatchEvent({type:E.EVENT_UNDO_STARTED,source:e});var n=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:E.EVENT_UNDO_ENDED,source:e,operationPerformed:n})},t.prototype.redo=function(e){this.eventService.dispatchEvent({type:E.EVENT_REDO_STARTED,source:e});var n=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:E.EVENT_REDO_ENDED,source:e,operationPerformed:n})},t.prototype.undoRedo=function(e,i,n,o,s){if(!e)return!1;var a=e.pop();return!(!a||!a.cellValueChanges||(this.processAction(a,function(l){return l[o]},s),a instanceof Hd?this.processRange(a.ranges||[a[n]]):this.processCell(a.cellValueChanges),i.push(a),0))},t.prototype.processAction=function(e,i,n){var o=this;e.cellValueChanges.forEach(function(s){var u=s.columnId,d=o.getRowNode({rowIndex:s.rowIndex,rowPinned:s.rowPinned});d.displayed&&d.setDataValue(u,i(s),n)})},t.prototype.processRange=function(e){var n,i=this;this.rangeService.removeAllCellRanges(!0),e.forEach(function(o,s){if(o){var a=o.startRow,l=o.endRow;s===e.length-1&&(n={rowPinned:a.rowPinned,rowIndex:a.rowIndex,columnId:o.startColumn.getColId()},i.setLastFocusedCell(n)),i.rangeService.addCellRange({rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,rowEndIndex:l.rowIndex,rowEndPinned:l.rowPinned,columnStart:o.startColumn,columns:o.columns})}})},t.prototype.processCell=function(e){var i=e[0],a=this.getRowNode({rowIndex:i.rowIndex,rowPinned:i.rowPinned});this.setLastFocusedCell({rowPinned:i.rowPinned,rowIndex:a.rowIndex,columnId:i.columnId},!!this.rangeService)},t.prototype.setLastFocusedCell=function(e,i){var n=e.rowIndex,o=e.columnId,s=e.rowPinned,a=this.gridBodyCtrl.getScrollFeature(),l=this.columnModel.getGridColumn(o);if(l){a.ensureIndexVisible(n),a.ensureColumnVisible(l);var u={rowIndex:n,column:l,rowPinned:s};this.focusService.setFocusedCell(Nl(Nl({},u),{forceBrowserFocus:!0})),i&&this.rangeService.setRangeToCell(u)}},t.prototype.addRowEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,E.EVENT_ROW_EDITING_STARTED,function(i){e.activeRowEdit={rowIndex:i.rowIndex,rowPinned:i.rowPinned}}),this.addManagedListener(this.eventService,E.EVENT_ROW_EDITING_STOPPED,function(){var i=new Ys(e.cellValueChanges);e.pushActionsToUndoStack(i),e.activeRowEdit=null})},t.prototype.addCellEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,E.EVENT_CELL_EDITING_STARTED,function(i){e.activeCellEdit={column:i.column,rowIndex:i.rowIndex,rowPinned:i.rowPinned}}),this.addManagedListener(this.eventService,E.EVENT_CELL_EDITING_STOPPED,function(i){if(e.activeCellEdit=null,i.valueChanged&&!e.activeRowEdit&&!e.isPasting&&!e.isRangeInAction){var o=new Ys(e.cellValueChanges);e.pushActionsToUndoStack(o)}})},t.prototype.addPasteListeners=function(){var e=this;this.addManagedListener(this.eventService,E.EVENT_PASTE_START,function(){e.isPasting=!0}),this.addManagedListener(this.eventService,E.EVENT_PASTE_END,function(){var i=new Ys(e.cellValueChanges);e.pushActionsToUndoStack(i),e.isPasting=!1})},t.prototype.addFillListeners=function(){var e=this;this.addManagedListener(this.eventService,E.EVENT_FILL_START,function(){e.isRangeInAction=!0}),this.addManagedListener(this.eventService,E.EVENT_FILL_END,function(i){var n=new Hd(e.cellValueChanges,i.initialRange,i.finalRange);e.pushActionsToUndoStack(n),e.isRangeInAction=!1})},t.prototype.addCellKeyListeners=function(){var e=this;this.addManagedListener(this.eventService,E.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,function(){e.isRangeInAction=!0}),this.addManagedListener(this.eventService,E.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,function(){var i;i=e.rangeService&&e.gridOptionsService.is("enableRangeSelection")?new Hd(e.cellValueChanges,void 0,void 0,function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r}([],function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(e.rangeService.getCellRanges()))):new Ys(e.cellValueChanges),e.pushActionsToUndoStack(i),e.isRangeInAction=!1})},t.prototype.pushActionsToUndoStack=function(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()},t.prototype.getRowNode=function(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},ln([S("focusService")],t.prototype,"focusService",void 0),ln([S("ctrlsService")],t.prototype,"ctrlsService",void 0),ln([S("rowModel")],t.prototype,"rowModel",void 0),ln([S("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),ln([S("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),ln([S("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),ln([S("columnModel")],t.prototype,"columnModel",void 0),ln([we("rangeService")],t.prototype,"rangeService",void 0),ln([V],t.prototype,"init",null),ln([X("undoRedoService")],t)}(k),kO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Vd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},HO=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return kO(t,r),t.prototype.findHeader=function(e,i){var n;if(n=e.column instanceof yt?this.columnModel["getDisplayedGroup"+i](e.column):this.columnModel["getDisplayedCol"+i](e.column)){var a=e.headerRowIndex;if(this.getHeaderRowType(a)===At.COLUMN_GROUP){var u=n;if(u.isPadding()&&this.isAnyChildSpanningHeaderHeight(u)){var c=this.getColumnVisibleChild(u,a,i),d=c.nextFocusColumn;d&&(n=d,a=c.nextRow)}}return{column:n,headerRowIndex:a}}},t.prototype.isAnyChildSpanningHeaderHeight=function(e){return!!e&&e.getLeafColumns().some(function(i){return i.isSpanHeaderHeight()})},t.prototype.getColumnVisibleParent=function(e,i){var n=this.getHeaderRowType(i),s=n===At.COLUMN,a=n===At.FLOATING_FILTER?e:e.getParent(),l=i-1;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;a&&a.isPadding();)a=a.getParent(),l--;l<0&&(a=e,l=i)}return{nextFocusColumn:a,nextRow:l}},t.prototype.getColumnVisibleChild=function(e,i,n){void 0===n&&(n="After");var s=e,a=i+1;if(this.getHeaderRowType(i)===At.COLUMN_GROUP){var l=e.getLeafColumns(),u="After"===n?l[0]:Pe(l);if(this.isAnyChildSpanningHeaderHeight(u.getParent())){s=u;for(var c=u.getParent();c&&c!==e;)c=c.getParent(),a++}else s=e.getDisplayedChildren()[0]}return{nextFocusColumn:s,nextRow:a}},t.prototype.getHeaderRowType=function(e){var i=this.ctrlsService.getHeaderRowContainerCtrl();if(i)return i.getRowType(e)},t.prototype.findColAtEdgeForHeaderRow=function(e,i){var n=this.columnModel.getAllDisplayedColumns(),o=n["start"===i?0:n.length-1];if(o){var a=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned()).getRowType(e);return a==At.COLUMN_GROUP?{headerRowIndex:e,column:this.columnModel.getColumnGroupAtLevel(o,e)}:{headerRowIndex:null==a?-1:e,column:o}}},Vd([S("columnModel")],t.prototype,"columnModel",void 0),Vd([S("ctrlsService")],t.prototype,"ctrlsService",void 0),Vd([X("headerPositionUtils")],t)}(k),BO=function(){function r(){}return r.prototype.buildColumnDefs=function(t,e,i){var n=this,o=[],s={};return t.forEach(function(a){for(var u=!0,c=n.createDefFromColumn(a,e,i),d=a.getOriginalParent(),h=null;d;){var p=null;if(d.isPadding())d=d.getOriginalParent();else{var f=s[d.getGroupId()];if(f){f.children.push(c),u=!1;break}if((p=n.createDefFromGroup(d))&&(p.children=[c],s[p.groupId]=p,c=p,d=d.getOriginalParent()),null!=d&&h===d){u=!1;break}h=d}}u&&o.push(c)}),o},r.prototype.createDefFromGroup=function(t){var e=Ma(t.getColGroupDef(),["children"]);return e&&(e.groupId=t.getGroupId()),e},r.prototype.createDefFromColumn=function(t,e,i){var n=Ma(t.getColDef());return n.colId=t.getColId(),n.width=t.getActualWidth(),n.rowGroup=t.isRowGroupActive(),n.rowGroupIndex=t.isRowGroupActive()?e.indexOf(t):null,n.pivot=t.isPivotActive(),n.pivotIndex=t.isPivotActive()?i.indexOf(t):null,n.aggFunc=t.isValueActive()?t.getAggFunc():null,n.hide=!t.isVisible()||void 0,n.pinned=t.isPinned()?t.getPinned():null,n.sort=t.getSort()?t.getSort():null,n.sortIndex=null!=t.getSortIndex()?t.getSortIndex():null,n},r=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}([X("columnDefFactory")],r),r}(),Bd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},WO=function(){function r(){}return r.prototype.getInitialRowClasses=function(t){var e=[];return I(t.extraCssClass)&&e.push(t.extraCssClass),e.push("ag-row"),e.push(t.rowFocused?"ag-row-focus":"ag-row-no-focus"),t.fadeRowIn&&e.push("ag-opacity-zero"),e.push(t.rowIsEven?"ag-row-even":"ag-row-odd"),t.rowNode.isRowPinned()&&e.push("ag-row-pinned"),t.rowNode.isSelected()&&e.push("ag-row-selected"),t.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+t.rowLevel),t.rowNode.stub&&e.push("ag-row-loading"),t.fullWidthRow&&e.push("ag-full-width-row"),t.expandable&&(e.push("ag-row-group"),e.push(t.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),t.rowNode.dragging&&e.push("ag-row-dragging"),Yu(e,this.processClassesFromGridOptions(t.rowNode)),Yu(e,this.preProcessRowClassRules(t.rowNode)),e.push(t.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),t.firstRowOnPage&&e.push("ag-row-first"),t.lastRowOnPage&&e.push("ag-row-last"),t.fullWidthRow&&("left"===t.pinned&&e.push("ag-cell-last-left-pinned"),"right"===t.pinned&&e.push("ag-cell-first-right-pinned")),e},r.prototype.processClassesFromGridOptions=function(t){var e=[],i=function(l){"string"==typeof l?e.push(l):Array.isArray(l)&&l.forEach(function(u){return e.push(u)})},n=this.gridOptionsService.get("rowClass");if(n){if("function"==typeof n)return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];i(n)}var o=this.gridOptionsService.getCallback("getRowClass");return o&&i(o({data:t.data,node:t,rowIndex:t.rowIndex})),e},r.prototype.preProcessRowClassRules=function(t){var e=[];return this.processRowClassRules(t,function(i){e.push(i)},function(i){}),e},r.prototype.processRowClassRules=function(t,e,i){var n={data:t.data,node:t,rowIndex:t.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};this.stylingService.processClassRules(this.gridOptionsService.get("rowClassRules"),n,e,i)},r.prototype.calculateRowLevel=function(t){return t.group?t.level:t.parent?t.parent.level+1:0},Bd([S("stylingService")],r.prototype,"stylingService",void 0),Bd([S("gridOptionsService")],r.prototype,"gridOptionsService",void 0),Bd([X("rowCssClassCalculator")],r)}(),jO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Gl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},UO=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return jO(t,r),t.prototype.init=function(){var e=this;this.isAccentedSort=this.gridOptionsService.is("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",function(i){return e.isAccentedSort=i.currentValue}),this.addManagedPropertyListener("autoGroupColumnDef",function(){return e.primaryColumnsSortGroups=e.gridOptionsService.isColumnsSortingCoupledToGroup()})},t.prototype.doFullSort=function(e,i){var o=e.map(function(s,a){return{currentPos:a,rowNode:s}});return o.sort(this.compareRowNodes.bind(this,i)),o.map(function(s){return s.rowNode})},t.prototype.compareRowNodes=function(e,i,n){for(var o=i.rowNode,s=n.rowNode,a=0,l=e.length;a<l;a++){var p,u=e[a],c="desc"===u.sort,d=this.getValue(o,u.column),h=this.getValue(s,u.column),f=this.getComparator(u,o);if(p=f?f(d,h,o,s,c):ne.defaultComparator(d,h,this.isAccentedSort),!isNaN(p)&&0!==p)return"asc"===u.sort?p:-1*p}return i.currentPos-n.currentPos},t.prototype.getComparator=function(e,i){var n=e.column,o=n.getColDef().comparator;if(null!=o)return o;if(n.getColDef().showRowGroup){var s=!i.group&&n.getColDef().field;if(s){var a=this.columnModel.getPrimaryColumn(s);if(a)return a.getColDef().comparator}}},t.prototype.getValue=function(e,i){var n,o;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(i,e,!1,!1);if(e.rowGroupColumn===i){if(this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive())){if(i.getColDef().keyCreator)return e.key;var u=null===(n=e.allLeafChildren)||void 0===n?void 0:n[0];return u?this.valueService.getValue(i,u,!1,!1):void 0}var c=this.columnModel.getGroupDisplayColumnForGroup(i.getId());return c?null===(o=e.groupData)||void 0===o?void 0:o[c.getId()]:void 0}return e.group&&i.getColDef().showRowGroup?void 0:this.valueService.getValue(i,e,!1,!1)},Gl([S("valueService")],t.prototype,"valueService",void 0),Gl([S("columnModel")],t.prototype,"columnModel",void 0),Gl([V],t.prototype,"init",null),Gl([X("rowNodeSorter")],t)}(k),zO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),$O=function(r){function t(){var i=null!==r&&r.apply(this,arguments)||this;return i.ready=!1,i.readyCallbacks=[],i}var e;return zO(t,r),e=t,t.prototype.checkReady=function(){if(this.ready=null!=this.gridCtrl&&null!=this.gridBodyCtrl&&null!=this.centerRowContainerCtrl&&null!=this.leftRowContainerCtrl&&null!=this.rightRowContainerCtrl&&null!=this.bottomCenterRowContainerCtrl&&null!=this.bottomLeftRowContainerCtrl&&null!=this.bottomRightRowContainerCtrl&&null!=this.topCenterRowContainerCtrl&&null!=this.topLeftRowContainerCtrl&&null!=this.topRightRowContainerCtrl&&null!=this.stickyTopCenterRowContainerCtrl&&null!=this.stickyTopLeftRowContainerCtrl&&null!=this.stickyTopRightRowContainerCtrl&&null!=this.centerHeaderRowContainerCtrl&&null!=this.leftHeaderRowContainerCtrl&&null!=this.rightHeaderRowContainerCtrl&&null!=this.fakeHScrollComp&&null!=this.fakeVScrollComp&&null!=this.gridHeaderCtrl,this.ready){var i=this.createReadyParams();this.readyCallbacks.forEach(function(n){return n(i)}),this.readyCallbacks.length=0}},t.prototype.whenReady=function(i){this.ready?i(this.createReadyParams()):this.readyCallbacks.push(i)},t.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},t.prototype.registerFakeHScrollComp=function(i){this.fakeHScrollComp=i,this.checkReady()},t.prototype.registerFakeVScrollComp=function(i){this.fakeVScrollComp=i,this.checkReady()},t.prototype.registerGridHeaderCtrl=function(i){this.gridHeaderCtrl=i,this.checkReady()},t.prototype.registerCenterRowContainerCtrl=function(i){this.centerRowContainerCtrl=i,this.checkReady()},t.prototype.registerLeftRowContainerCtrl=function(i){this.leftRowContainerCtrl=i,this.checkReady()},t.prototype.registerRightRowContainerCtrl=function(i){this.rightRowContainerCtrl=i,this.checkReady()},t.prototype.registerTopCenterRowContainerCtrl=function(i){this.topCenterRowContainerCtrl=i,this.checkReady()},t.prototype.registerTopLeftRowContainerCon=function(i){this.topLeftRowContainerCtrl=i,this.checkReady()},t.prototype.registerTopRightRowContainerCtrl=function(i){this.topRightRowContainerCtrl=i,this.checkReady()},t.prototype.registerStickyTopCenterRowContainerCtrl=function(i){this.stickyTopCenterRowContainerCtrl=i,this.checkReady()},t.prototype.registerStickyTopLeftRowContainerCon=function(i){this.stickyTopLeftRowContainerCtrl=i,this.checkReady()},t.prototype.registerStickyTopRightRowContainerCtrl=function(i){this.stickyTopRightRowContainerCtrl=i,this.checkReady()},t.prototype.registerBottomCenterRowContainerCtrl=function(i){this.bottomCenterRowContainerCtrl=i,this.checkReady()},t.prototype.registerBottomLeftRowContainerCtrl=function(i){this.bottomLeftRowContainerCtrl=i,this.checkReady()},t.prototype.registerBottomRightRowContainerCtrl=function(i){this.bottomRightRowContainerCtrl=i,this.checkReady()},t.prototype.registerHeaderContainer=function(i,n){switch(n){case"left":this.leftHeaderRowContainerCtrl=i;break;case"right":this.rightHeaderRowContainerCtrl=i;break;default:this.centerHeaderRowContainerCtrl=i}this.checkReady()},t.prototype.registerGridBodyCtrl=function(i){this.gridBodyCtrl=i,this.checkReady()},t.prototype.registerGridCtrl=function(i){this.gridCtrl=i,this.checkReady()},t.prototype.getFakeHScrollComp=function(){return this.fakeHScrollComp},t.prototype.getFakeVScrollComp=function(){return this.fakeVScrollComp},t.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},t.prototype.getGridCtrl=function(){return this.gridCtrl},t.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},t.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},t.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},t.prototype.getStickyTopCenterRowContainerCtrl=function(){return this.stickyTopCenterRowContainerCtrl},t.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},t.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},t.prototype.getHeaderRowContainerCtrl=function(i){switch(i){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}},t.NAME="ctrlsService",t=e=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}([X(e.NAME)],t),t}(k),YO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),qO=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.registry={},e}return YO(t,r),t.prototype.register=function(e){this.registry[e.controllerName]=e.controllerClass},t.prototype.getInstance=function(e){var i=this.registry[e];if(null!=i)return new i},t=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}([X("ctrlsFactory")],t),t}(k),ZO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xs=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ev=function(r){function t(e,i){var n=r.call(this,e)||this;return n.direction=i,n.hideTimeout=null,n}return ZO(t,r),t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,E.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",gc()||eo())},t.prototype.initialiseInvisibleScrollbar=function(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=ps(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))},t.prototype.addActiveListenerToggles=function(){var e=this,o=this.getGui();["mouseenter","mousedown","touchstart"].forEach(function(s){return e.addManagedListener(o,s,function(){return e.addOrRemoveCssClass("ag-scrollbar-active",!0)})}),["mouseleave","touchend"].forEach(function(s){return e.addManagedListener(o,s,function(){return e.addOrRemoveCssClass("ag-scrollbar-active",!1)})})},t.prototype.onScrollVisibilityChanged=function(){var e=this;void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(function(){return e.setScrollVisible()})},t.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var e=this;this.addManagedListener(this.eventService,E.EVENT_BODY_SCROLL,function(i){i.direction===e.direction&&(null!==e.hideTimeout&&(window.clearTimeout(e.hideTimeout),e.hideTimeout=null),e.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,E.EVENT_BODY_SCROLL_END,function(){e.hideTimeout=window.setTimeout(function(){e.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),e.hideTimeout=null},400)})},t.prototype.attemptSettingScrollPosition=function(e){var i=this,n=this.getViewport();zu(function(){return io(n)},function(){return i.setScrollPosition(e)},100)},t.prototype.getViewport=function(){return this.eViewport},t.prototype.getContainer=function(){return this.eContainer},t.prototype.onScrollCallback=function(e){this.addManagedListener(this.getViewport(),"scroll",e)},Xs([U("eViewport")],t.prototype,"eViewport",void 0),Xs([U("eContainer")],t.prototype,"eContainer",void 0),Xs([S("scrollVisibleService")],t.prototype,"scrollVisibleService",void 0),Xs([S("ctrlsService")],t.prototype,"ctrlsService",void 0),Xs([S("animationFrameService")],t.prototype,"animationFrameService",void 0),t}(he),QO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),qs=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},JO=function(r){function t(){return r.call(this,t.TEMPLATE,"horizontal")||this}return QO(t,r),t.prototype.postConstruct=function(){var e=this;r.prototype.postConstruct.call(this);var i=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,i),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,E.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",i),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new hd(function(n){return e.eContainer.style.width=n+"px"}))},t.prototype.initialiseInvisibleScrollbar=function(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gridOptionsService.is("enableRtl"),r.prototype.initialiseInvisibleScrollbar.call(this),this.invisibleScrollbar&&this.refreshCompBottom())},t.prototype.onPinnedRowDataChanged=function(){this.refreshCompBottom()},t.prototype.refreshCompBottom=function(){if(this.invisibleScrollbar){var e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=e+"px"}},t.prototype.onScrollVisibilityChanged=function(){r.prototype.onScrollVisibilityChanged.call(this),this.setFakeHScrollSpacerWidths()},t.prototype.setFakeHScrollSpacerWidths=function(){var e=this.scrollVisibleService.isVerticalScrollShowing(),i=this.columnModel.getDisplayedColumnsRightWidth(),n=!this.enableRtl&&e,o=this.gridOptionsService.getScrollbarWidth();n&&(i+=o),Ri(this.eRightSpacer,i),this.eRightSpacer.classList.toggle("ag-scroller-corner",i<=o);var s=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(s+=o),Ri(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=o)},t.prototype.setScrollVisible=function(){var e=this.scrollVisibleService.isHorizontalScrollShowing(),i=this.invisibleScrollbar,n=this.gridOptionsService.is("suppressHorizontalScroll"),o=e&&this.gridOptionsService.getScrollbarWidth()||0,a=n?0:0===o&&i?16:o;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),Ho(this.getGui(),a),Ho(this.eViewport,a),Ho(this.eContainer,a),this.setDisplayed(e,{skipAriaHidden:!0})},t.prototype.getScrollPosition=function(){return ys(this.getViewport(),this.enableRtl)},t.prototype.setScrollPosition=function(e){io(this.getViewport())||this.attemptSettingScrollPosition(e),ms(this.getViewport(),e,this.enableRtl)},t.TEMPLATE='<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>',qs([U("eLeftSpacer")],t.prototype,"eLeftSpacer",void 0),qs([U("eRightSpacer")],t.prototype,"eRightSpacer",void 0),qs([S("columnModel")],t.prototype,"columnModel",void 0),qs([S("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),qs([V],t.prototype,"postConstruct",null),t}(Ev),ex=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Wd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},tx=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return ex(t,r),t.prototype.postConstruct=function(){var e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,E.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedPropertyListener("domLayout",e)},t.prototype.checkContainerWidths=function(){var e=this.gridOptionsService.isDomLayout("print"),i=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),n=e?0:this.columnModel.getDisplayedColumnsRightWidth();i!=this.leftWidth&&(this.leftWidth=i,this.eventService.dispatchEvent({type:E.EVENT_LEFT_PINNED_WIDTH_CHANGED})),n!=this.rightWidth&&(this.rightWidth=n,this.eventService.dispatchEvent({type:E.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},t.prototype.getPinnedRightWidth=function(){return this.rightWidth},t.prototype.getPinnedLeftWidth=function(){return this.leftWidth},Wd([S("columnModel")],t.prototype,"columnModel",void 0),Wd([V],t.prototype,"postConstruct",null),Wd([X("pinnedWidthService")],t)}(k),ix=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),kl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},nx=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.events=[],e}return ix(t,r),t.prototype.postConstruct=function(){"clientSide"==this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)},t.prototype.dispatchExpanded=function(e){var i=this;null!=this.clientSideRowModel?(this.events.push(e),null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(function(){i.clientSideRowModel&&i.clientSideRowModel.onRowGroupOpened(),i.events.forEach(function(o){return i.eventService.dispatchEvent(o)}),i.events=[]})),this.dispatchExpandedDebounced()):this.eventService.dispatchEvent(e)},kl([S("animationFrameService")],t.prototype,"animationFrameService",void 0),kl([S("rowModel")],t.prototype,"rowModel",void 0),kl([V],t.prototype,"postConstruct",null),kl([X("rowNodeEventThrottle")],t)}(k),jd=function(){return jd=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},jd.apply(this,arguments)},po=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},bv=function(r,t){return function(e,i){t(e,i,r)}},Rv=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},Ov=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r};function Hl(r){return!0===r||"true"===r}var rx=function(){function r(){var e=this;this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new $n,this.globalEventHandlerFactory=function(i){return function(n,o){if(!e.destroyed){var s=t.alwaysSyncGlobalEvents.has(n);if(!(s&&!i||!s&&i)){var a=gr.getCallbackForEvent(n);"function"==typeof e.gridOptions[a]&&e.gridOptions[a](o)}}}}}var t;return t=r,Object.defineProperty(r.prototype,"context",{get:function(){return this.gridOptions.context},enumerable:!1,configurable:!0}),r.prototype.agWire=function(e,i){this.gridOptions.api=e,this.gridOptions.columnApi=i,this.api=e,this.columnApi=i},r.prototype.init=function(){this.gridOptionLookup=new Set(Ov(Ov([],Rv(gr.ALL_PROPERTIES)),Rv(gr.EVENT_CALLBACKS)));var e=!this.is("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.getScrollbarWidth()},r.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0},r.prototype.is=function(e){return Hl(this.gridOptions[e])},r.prototype.get=function(e){return this.gridOptions[e]},r.prototype.getNum=function(e){return function ox(r){return"number"==typeof r?r:"string"==typeof r?parseInt(r,10):void 0}(this.gridOptions[e])},r.prototype.getCallback=function(e){return this.mergeGridCommonParams(this.gridOptions[e])},r.prototype.exists=function(e){return I(this.gridOptions[e])},r.prototype.mergeGridCommonParams=function(e){var i=this;return e?function(o){var s=o;return s.api=i.api,s.columnApi=i.columnApi,s.context=i.context,e(s)}:e},r.prototype.__setPropertyOnly=function(e,i){var n=this.gridOptions[e];return this.gridOptionLookup.has(e)&&(this.gridOptions[e]=i),n!==i},r.prototype.set=function(e,i,n,o,s){if(void 0===n&&(n=!1),void 0===o&&(o={}),void 0===s&&(s=void 0),this.gridOptionLookup.has(e)){var a=this.gridOptions[e];if(n||a!==i){this.gridOptions[e]=i;var l=jd({type:e,currentValue:i,previousValue:a,changeSet:s},o);this.propertyEventService.dispatchEvent(l)}}},r.prototype.addEventListener=function(e,i){this.propertyEventService.addEventListener(e,i)},r.prototype.removeEventListener=function(e,i){this.propertyEventService.removeEventListener(e,i)},r.prototype.getGridId=function(){return this.api.getGridId()},r.prototype.getScrollbarWidth=function(){if(null==this.scrollbarWidth){var i="number"==typeof this.gridOptions.scrollbarWidth&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:Wp();null!=i&&(this.scrollbarWidth=i,this.eventService.dispatchEvent({type:E.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},r.prototype.isRowModelType=function(e){return this.gridOptions.rowModelType===e||"clientSide"===e&&ie(this.gridOptions.rowModelType)},r.prototype.isDomLayout=function(e){var i;return(null!==(i=this.gridOptions.domLayout)&&void 0!==i?i:"normal")===e},r.prototype.isRowSelection=function(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection},r.prototype.useAsyncEvents=function(){return!this.is("suppressAsyncEvents")},r.prototype.isGetRowHeightFunction=function(){return"function"==typeof this.gridOptions.getRowHeight},r.prototype.getRowHeightForNode=function(e,i,n){if(void 0===i&&(i=!1),null==n&&(n=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(i)return{height:n,estimated:!0};var o={node:e,data:e.data},s=this.getCallback("getRowHeight")(o);if(this.isNumeric(s))return 0===s&&ge(function(){return console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.")},"invalidRowHeight"),{height:Math.max(1,s),estimated:!1}}return e.detail&&this.is("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:n,estimated:!1}},r.prototype.getMasterDetailRowHeight=function(){return this.is("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}},r.prototype.getRowHeightAsNumber=function(){if(!this.gridOptions.rowHeight||ie(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();var e=this.environment.refreshRowHeightVariable();return-1!==e?e:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())},r.prototype.isNumeric=function(e){return!isNaN(e)&&"number"==typeof e&&isFinite(e)},r.prototype.getDomDataKey=function(){return this.domDataKey},r.prototype.getDomData=function(e,i){var n=e[this.getDomDataKey()];return n?n[i]:void 0},r.prototype.setDomData=function(e,i,n){var o=this.getDomDataKey(),s=e[o];ie(s)&&(e[o]=s={}),s[i]=n},r.prototype.getDocument=function(){var e=null;return this.gridOptions.getDocument&&I(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&I(e)?e:document},r.prototype.getWindow=function(){return this.getDocument().defaultView||window},r.prototype.getRootNode=function(){return this.eGridDiv.getRootNode()},r.prototype.getAsyncTransactionWaitMillis=function(){return I(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50},r.prototype.isAnimateRows=function(){return!this.is("ensureDomOrder")&&this.is("animateRows")},r.prototype.isGroupRowsSticky=function(){return!(this.is("suppressGroupRowsSticky")||this.is("paginateChildRows")||this.is("groupHideOpenParents"))},r.prototype.isColumnsSortingCoupledToGroup=function(){var e=this.gridOptions.autoGroupColumnDef;return this.isRowModelType("clientSide")&&!e?.comparator&&!this.is("treeData")},r.prototype.getGroupAggFiltering=function(){var e=this.gridOptions.groupAggFiltering;return"function"==typeof e?this.getCallback("groupAggFiltering"):Hl(e)?function(){return!0}:void 0},r.prototype.isGroupIncludeFooterTrueOrCallback=function(){var e=this.gridOptions.groupIncludeFooter;return Hl(e)||"function"==typeof e},r.prototype.getGroupIncludeFooter=function(){var e=this.gridOptions.groupIncludeFooter;return"function"==typeof e?this.getCallback("groupIncludeFooter"):Hl(e)?function(){return!0}:function(){return!1}},r.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?Ju("multipleColumns",this.gridOptions.groupDisplayType):this.is("groupHideOpenParents")},r.prototype.isGroupUseEntireRow=function(e){return!e&&!!this.gridOptions.groupDisplayType&&Ju("groupRows",this.gridOptions.groupDisplayType)},r.alwaysSyncGlobalEvents=new Set([E.EVENT_GRID_PRE_DESTROYED]),po([S("gridOptions")],r.prototype,"gridOptions",void 0),po([S("eventService")],r.prototype,"eventService",void 0),po([S("environment")],r.prototype,"environment",void 0),po([S("eGridDiv")],r.prototype,"eGridDiv",void 0),po([bv(0,Tt("gridApi")),bv(1,Tt("columnApi"))],r.prototype,"agWire",null),po([V],r.prototype,"init",null),po([lt],r.prototype,"destroy",null),t=po([X("gridOptionsService")],r)}(),sx=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),lx=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sx(t,r),t.prototype.getLocaleTextFunc=function(){var e=this.gridOptionsService.getCallback("getLocaleText");if(e)return function(n,o,s){return e({key:n,defaultValue:o,variableValues:s})};var i=this.gridOptionsService.get("localeText");return function(n,o,s){var a=i&&i[n];if(a&&s&&s.length)for(var l=0;!(l>=s.length)&&-1!==a.indexOf("${variable}");)a=a.replace("${variable}",s[l++]);return a??o}},t=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}([X("localeService")],t),t}(k),ux=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),dx=function(r){function t(){return r.call(this,t.TEMPLATE,"vertical")||this}return ux(t,r),t.prototype.postConstruct=function(){r.prototype.postConstruct.call(this),this.createManagedBean(new qf(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,E.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))},t.prototype.setScrollVisible=function(){var e=this.scrollVisibleService.isVerticalScrollShowing(),i=this.invisibleScrollbar,n=e&&this.gridOptionsService.getScrollbarWidth()||0,o=0===n&&i?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),Ri(this.getGui(),o),Ri(this.eViewport,o),Ri(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})},t.prototype.onRowContainerHeightChanged=function(){var i=this.ctrlsService.getGridBodyCtrl().getBodyViewportElement();this.eViewport.scrollTop!=i.scrollTop&&(this.eViewport.scrollTop=i.scrollTop)},t.prototype.getScrollPosition=function(){return this.getViewport().scrollTop},t.prototype.setScrollPosition=function(e){io(this.getViewport())||this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e},t.TEMPLATE='<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>\n            </div>\n        </div>',function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([V],t.prototype,"postConstruct",null),t}(Ev),hx=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Yt=function(){return Yt=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},Yt.apply(this,arguments)},Xo=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},un=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},Zs=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},xv={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Dv=["january","february","march","april","may","june","july","august","september","october","november","december"],px=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.dataTypeDefinitions={},e.isWaitingForRowData=!1,e.isColumnTypeOverrideInDataTypeDefinitions=!1,e.columnStateUpdatesPendingInference={},e.columnStateUpdateListenerDestroyFuncs=[],e}return hx(t,r),t.prototype.init=function(){var e=this;this.groupHideOpenParents=this.gridOptionsService.is("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",function(){e.groupHideOpenParents=e.gridOptionsService.is("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",function(){e.processDataTypeDefinitions(),e.columnModel.recreateColumnDefs("gridOptionsChanged")})},t.prototype.processDataTypeDefinitions=function(){var i,e=this,n=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(n).forEach(function(s){var a=un(s,2),u=a[1];e.dataTypeDefinitions[a[0]]=Yt(Yt({},u),{groupSafeValueFormatter:e.createGroupSafeValueFormatter(u)})});var o=null!==(i=this.gridOptionsService.get("dataTypeDefinitions"))&&void 0!==i?i:{};this.dataTypeMatchers={},Object.entries(o).forEach(function(s){var a=un(s,2),l=a[0],u=a[1],c=e.processDataTypeDefinition(u,o,[l],n);c&&(e.dataTypeDefinitions[l]=c,u.dataTypeMatcher&&(e.dataTypeMatchers[l]=u.dataTypeMatcher))}),this.checkObjectValueHandlers(n),["dateString","text","number","boolean","date"].forEach(function(s){var a=e.dataTypeMatchers[s];a&&delete e.dataTypeMatchers[s],e.dataTypeMatchers[s]=a??n[s].dataTypeMatcher})},t.prototype.mergeDataTypeDefinitions=function(e,i){var n=Yt(Yt({},e),i);return e.columnTypes&&i.columnTypes&&i.appendColumnTypes&&(n.columnTypes=Zs(Zs([],un(this.convertColumnTypes(e.columnTypes))),un(this.convertColumnTypes(i.columnTypes)))),n},t.prototype.processDataTypeDefinition=function(e,i,n,o){var s,a=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){var l=o[a];if(!this.validateDataTypeDefinition(e,l,a))return;s=this.mergeDataTypeDefinitions(l,e)}else{if(n.includes(a))return void ge(function(){return console.warn('AG Grid: Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.')},"dataTypeExtendsCircularRef");var u=i[a];if(!this.validateDataTypeDefinition(e,u,a))return;var c=this.processDataTypeDefinition(u,i,Zs(Zs([],un(n)),[a]),o);if(!c)return;s=this.mergeDataTypeDefinitions(c,e)}return Yt(Yt({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)})},t.prototype.validateDataTypeDefinition=function(e,i,n){return i?i.baseDataType===e.baseDataType||(ge(function(){return console.warn('AG Grid: The "baseDataType" property of a data type definition must match that of its parent.')},"dataTypeBaseTypesMatch"),!1):(ge(function(){return console.warn("AG Grid: The data type definition "+n+" does not exist.")},"dataTypeDefMissing"+n),!1)},t.prototype.createGroupSafeValueFormatter=function(e){var i=this;if(e.valueFormatter)return function(n){var o,s;if(null===(o=n.node)||void 0===o||!o.group)return i.groupHideOpenParents&&n.column.isRowGroupActive()?"string"!=typeof n.value||null!==(s=e.dataTypeMatcher)&&void 0!==s&&s.call(e,n.value)?e.valueFormatter(n):void 0:e.valueFormatter(n);var a=n.column.getAggFunc();if(a){if("first"===a||"last"===a)return e.valueFormatter(n);if("number"===e.baseDataType&&"count"!==a){if("number"==typeof n.value)return e.valueFormatter(n);if("object"==typeof n.value){if(!n.value)return;if("toNumber"in n.value)return e.valueFormatter(Yt(Yt({},n),{value:n.value.toNumber()}));if("value"in n.value)return e.valueFormatter(Yt(Yt({},n),{value:n.value.value}))}}}}},t.prototype.updateColDefAndGetDataTypeDefinitionColumnType=function(e,i,n){var o=i.cellDataType,s=i.field;if(void 0===o&&(o=e.cellDataType),(null==o||!0===o)&&(o=!!this.canInferCellDataType(e,i)&&this.inferCellDataType(s,n)),o){var a=this.dataTypeDefinitions[o];if(a)return e.cellDataType=o,a.groupSafeValueFormatter&&(e.valueFormatter=a.groupSafeValueFormatter),a.valueParser&&(e.valueParser=a.valueParser),a.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,a,n),a.columnTypes;ge(function(){return console.warn('AG Grid: Missing data type definition - "'+o+'"')},"dataTypeMissing"+o)}else e.cellDataType=!1},t.prototype.updateColDefAndGetColumnType=function(e,i,n){var o,s,a=this.updateColDefAndGetDataTypeDefinitionColumnType(e,i,n),l=null!==(s=null!==(o=i.type)&&void 0!==o?o:a)&&void 0!==s?s:e.type;return e.type=l,l?this.convertColumnTypes(l):void 0},t.prototype.addColumnListeners=function(e){if(this.isWaitingForRowData){var i=this.columnStateUpdatesPendingInference[e.getColId()];if(i){var n=function(o){i.add(o.key)};e.addEventListener(Ae.EVENT_STATE_UPDATED,n),this.columnStateUpdateListenerDestroyFuncs.push(function(){return e.removeEventListener(Ae.EVENT_STATE_UPDATED,n)})}}},t.prototype.canInferCellDataType=function(e,i){var o,n=this;if("clientSide"!==this.rowModel.getType())return!1;var s={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(i,s))return!1;var a=null===i.type?e.type:i.type;if(a){var l=null!==(o=this.gridOptionsService.get("columnTypes"))&&void 0!==o?o:{};if(this.convertColumnTypes(a).some(function(c){var d=l[c.trim()];return d&&n.doColDefPropsPreventInference(d,s)}))return!1}return!this.doColDefPropsPreventInference(e,s)},t.prototype.doColDefPropsPreventInference=function(e,i){var n=this;return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(function(o){var s=un(o,2);return n.doesColDefPropPreventInference(e,i,s[0],s[1])})},t.prototype.doesColDefPropPreventInference=function(e,i,n,o){if(!i[n])return!1;var s=e[n];return null===s?(i[n]=!1,!1):void 0===o?!!s:s===o},t.prototype.inferCellDataType=function(e,i){var n;if(e){var o,s=this.getInitialData();if(s){var a=e.indexOf(".")>=0&&!this.gridOptionsService.is("suppressFieldDotNotation");o=fr(s,e,a)}else this.initWaitForRowData(i);if(null!=o)return un(null!==(n=Object.entries(this.dataTypeMatchers).find(function(c){return(0,un(c,2)[1])(o)}))&&void 0!==n?n:["object"],1)[0]}},t.prototype.getInitialData=function(){var e=this.gridOptionsService.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;var i=this.rowModel.getRootNode().allLeafChildren;return i?.length?i[0].data:null},t.prototype.initWaitForRowData=function(e){var i=this;if(this.columnStateUpdatesPendingInference[e]=new Set,!this.isWaitingForRowData){this.isWaitingForRowData=!0;var n=this.isColumnTypeOverrideInDataTypeDefinitions;n&&this.columnModel.queueResizeOperations();var o=this.addManagedListener(this.eventService,E.EVENT_ROW_DATA_UPDATE_STARTED,function(s){var a=s.firstRowData;a&&(o?.(),i.isWaitingForRowData=!1,i.processColumnsPendingInference(a,n),i.columnStateUpdatesPendingInference={},n&&i.columnModel.processResizeOperations(),i.eventService.dispatchEvent({type:E.EVENT_DATA_TYPES_INFERRED}))})}},t.prototype.isPendingInference=function(){return this.isWaitingForRowData},t.prototype.processColumnsPendingInference=function(e,i){var n=this;this.initialData=e;var o=[];this.columnStateUpdateListenerDestroyFuncs.forEach(function(l){return l()}),this.columnStateUpdateListenerDestroyFuncs=[];var s={},a={};Object.entries(this.columnStateUpdatesPendingInference).forEach(function(l){var u=un(l,2),c=u[0],d=u[1],h=n.columnModel.getGridColumn(c);if(h){var p=h.getColDef();if(n.columnModel.resetColumnDefIntoColumn(h)){var f=h.getColDef();if(i&&f.type&&f.type!==p.type){var v=n.getUpdatedColumnState(h,d);v.rowGroup&&null==v.rowGroupIndex&&(s[c]=v),v.pivot&&null==v.pivotIndex&&(a[c]=v),o.push(v)}}}}),i&&o.push.apply(o,Zs([],un(this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(s,a)))),o.length&&this.columnModel.applyColumnState({state:o},"cellDataTypeInferred"),this.initialData=null},t.prototype.getUpdatedColumnState=function(e,i){var n=this.columnModel.getColumnStateFromColDef(e);return i.forEach(function(o){delete n[o],"rowGroup"===o?delete n.rowGroupIndex:"pivot"===o&&delete n.pivotIndex}),n},t.prototype.checkObjectValueHandlers=function(e){var i=this.dataTypeDefinitions.object,n=e.object;this.hasObjectValueParser=i.valueParser!==n.valueParser,this.hasObjectValueFormatter=i.valueFormatter!==n.valueFormatter},t.prototype.convertColumnTypes=function(e){var i=[];return e instanceof Array?e.some(function(o){return"string"!=typeof o})?console.warn("AG Grid: if colDef.type is supplied an array it should be of type 'string[]'"):i=e:"string"==typeof e?i=e.split(","):console.warn("AG Grid: colDef.type should be of type 'string' | 'string[]'"),i},t.prototype.getDateStringTypeDefinition=function(){return this.dataTypeDefinitions.dateString},t.prototype.getDateParserFunction=function(){return this.getDateStringTypeDefinition().dateParser},t.prototype.getDateFormatterFunction=function(){return this.getDateStringTypeDefinition().dateFormatter},t.prototype.getDataTypeDefinition=function(e){var i=e.getColDef();if(i.cellDataType)return this.dataTypeDefinitions[i.cellDataType]},t.prototype.getBaseDataType=function(e){var i;return null===(i=this.getDataTypeDefinition(e))||void 0===i?void 0:i.baseDataType},t.prototype.checkType=function(e,i){var n;if(null==i)return!0;var o=null===(n=this.getDataTypeDefinition(e))||void 0===n?void 0:n.dataTypeMatcher;return!o||o(i)},t.prototype.validateColDef=function(e){"object"===e.cellDataType&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&ge(function(){return console.warn('AG Grid: Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"')},"dataTypeObjectValueFormatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&ge(function(){return console.warn('AG Grid: Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"')},"dataTypeObjectValueParser"))},t.prototype.setColDefPropertiesForBaseDataType=function(e,i,n){var o=this,s=function(d,h,p){var f=d.getColDef().valueFormatter;return f===i.groupSafeValueFormatter&&(f=i.valueFormatter),o.valueFormatterService.formatValue(d,h,p,f)},a=oe.__isRegistered(q.SetFilterModule,this.context.getGridId()),l=this.localeService.getLocaleTextFunc(),u=function(d){var h=e.filterParams;e.filterParams="object"==typeof h?Yt(Yt({},h),d):d};switch(e.useValueFormatterForExport=!0,e.useValueParserForImport=!0,i.baseDataType){case"number":e.cellEditor="agNumberCellEditor",a&&u({comparator:function(d,h){var p=null==d?0:parseInt(d),f=null==h?0:parseInt(h);return p===f?0:p>f?1:-1}});break;case"boolean":e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=function(d){return!!d.colDef.editable&&d.event.key===M.SPACE},u(a?{valueFormatter:function(d){return I(d.value)?l(String(d.value),d.value?"True":"False"):l("blanks","(Blanks)")}}:{maxNumConditions:1,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:function(d,h){return h},numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:function(d,h){return!1===h},numberOfInputs:0}]});break;case"date":e.cellEditor="agDateCellEditor",e.keyCreator=function(d){return s(d.column,d.node,d.value)},a&&u({valueFormatter:function(d){var h=s(d.column,d.node,d.value);return I(h)?h:l("blanks","(Blanks)")},treeList:!0,treeListFormatter:function(d,h){if(1===h&&null!=d){var p=Dv[Number(d)-1];return l(p,xv[p])}return d??l("blanks","(Blanks)")}});break;case"dateString":e.cellEditor="agDateStringCellEditor",e.keyCreator=function(d){return s(d.column,d.node,d.value)};var c=this.getDateParserFunction();u(a?{valueFormatter:function(d){var h=s(d.column,d.node,d.value);return I(h)?h:l("blanks","(Blanks)")},treeList:!0,treeListPathGetter:function(d){var h=c(d??void 0);return h?[String(h.getFullYear()),String(h.getMonth()+1),String(h.getDate())]:null},treeListFormatter:function(d,h){if(1===h&&null!=d){var p=Dv[Number(d)-1];return l(p,xv[p])}return d??l("blanks","(Blanks)")}}:{comparator:function(d,h){var p=c(h);return null==h||p<d?-1:p>d?1:0}});break;case"object":e.cellEditorParams={useFormatter:!0},e.comparator=function(d,h){var p=o.columnModel.getPrimaryColumn(n),f=p?.getColDef();if(!p||!f)return 0;var v=null==d?"":s(p,null,d),g=null==h?"":s(p,null,h);return v===g?0:v>g?1:-1},e.keyCreator=function(d){return s(d.column,d.node,d.value)},a?u({valueFormatter:function(d){var h=s(d.column,d.node,d.value);return I(h)?h:l("blanks","(Blanks)")}}):e.filterValueGetter=function(d){return s(d.column,d.node,o.valueService.getValue(d.column,d.node))}}},t.prototype.getDefaultDataTypes=function(){var e=function(n){return!!n.match("^\\d{4}-\\d{2}-\\d{2}$")},i=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:function(n){return""===n.newValue?null:Number(n.newValue)},valueFormatter:function(n){return null==n.value?"":"number"!=typeof n.value||isNaN(n.value)?i("invalidNumber","Invalid Number"):String(n.value)},dataTypeMatcher:function(n){return"number"==typeof n}},text:{baseDataType:"text",valueParser:function(n){return""===n.newValue?null:ss(n.newValue)},dataTypeMatcher:function(n){return"string"==typeof n}},boolean:{baseDataType:"boolean",valueParser:function(n){return""===n.newValue?null:"true"===String(n.newValue).toLowerCase()},valueFormatter:function(n){return null==n.value?"":String(n.value)},dataTypeMatcher:function(n){return"boolean"==typeof n}},date:{baseDataType:"date",valueParser:function(n){return Wt(null==n.newValue?null:String(n.newValue))},valueFormatter:function(n){var o;return null==n.value?"":n.value instanceof Date&&!isNaN(n.value.getTime())?null!==(o=bi(n.value,!1))&&void 0!==o?o:"":i("invalidDate","Invalid Date")},dataTypeMatcher:function(n){return n instanceof Date}},dateString:{baseDataType:"dateString",dateParser:function(n){var o;return null!==(o=Wt(n))&&void 0!==o?o:void 0},dateFormatter:function(n){var o;return null!==(o=bi(n??null,!1))&&void 0!==o?o:void 0},valueParser:function(n){return e(String(n.newValue))?n.newValue:null},valueFormatter:function(n){return e(String(n.value))?n.value:""},dataTypeMatcher:function(n){return"string"==typeof n&&e(n)}},object:{baseDataType:"object",valueParser:function(){return null},valueFormatter:function(n){var o;return null!==(o=ss(n.value))&&void 0!==o?o:""}}}},Xo([S("rowModel")],t.prototype,"rowModel",void 0),Xo([S("columnModel")],t.prototype,"columnModel",void 0),Xo([S("columnUtils")],t.prototype,"columnUtils",void 0),Xo([S("valueService")],t.prototype,"valueService",void 0),Xo([S("valueFormatterService")],t.prototype,"valueFormatterService",void 0),Xo([V],t.prototype,"init",null),Xo([X("dataTypeService")],t)}(k),fx=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Tv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},vx=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return fx(t,r),t.prototype.parseValue=function(e,i,n,o){var s=e.getColDef(),a={node:i,data:i?.data,oldValue:o,newValue:n,colDef:s,column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},l=s.valueParser;return I(l)?"function"==typeof l?l(a):this.expressionService.evaluate(l,a):n},Tv([S("expressionService")],t.prototype,"expressionService",void 0),Tv([X("valueParserService")],t)}(k),Pv=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},Av=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},gx=function(){function r(t,e,i){e?(this.gridOptions=e,(new mx).create(t,e,function(n){var o=new $R(t);n.createBean(o)},void 0,i)):console.error("AG Grid: no gridOptions provided to the grid")}return r.prototype.destroy=function(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()},r}(),yx=1,mx=function(){function r(){}return r.prototype.create=function(t,e,i,n,o){var a,s=this,l=!!e.debug,u=null!==(a=e.gridId)&&void 0!==a?a:String(yx++),c=this.getRegisteredModules(o,u),d=this.createBeansList(e.rowModelType,c,u),h=this.createProvidedBeans(t,e,o);if(d){var p={providedBeanInstances:h,beanClasses:d,debug:l,gridId:u},f=new Ad("AG Grid",function(){return e.debug}),v=new Ad("Context",function(){return p.debug}),g=new Im(p,v),y=g.getBean("beans");this.registerModuleUserComponents(y,c),this.registerStackComponents(y,c),this.registerControllers(y,c),i(g),y.ctrlsService.whenReady(function(){s.setColumnsAndData(y),s.dispatchGridReadyEvent(y);var m=oe.__isRegistered(q.EnterpriseCoreModule,u);f.log("initialised successfully, enterprise = "+m)}),n&&n(g)}},r.prototype.registerControllers=function(t,e){e.forEach(function(i){i.controllers&&i.controllers.forEach(function(n){return t.ctrlsFactory.register(n)})})},r.prototype.registerStackComponents=function(t,e){var i=this.createAgStackComponentsList(e);t.agStackComponentsRegistry.setupComponents(i)},r.prototype.getRegisteredModules=function(t,e){var i=t?t.modules:null,n=oe.__getRegisteredModules(e),o=[],s={},a=function(l,u,c){var h;s[(h=u).moduleName]||(s[h.moduleName]=!0,o.push(h),oe.__register(h,l,c)),u.dependantModules&&u.dependantModules.forEach(function(h){return a(l,h,c)})};return i&&i.forEach(function(l){return a(!0,l,e)}),n&&n.forEach(function(l){return a(!oe.__isPackageBased(),l,void 0)}),o},r.prototype.registerModuleUserComponents=function(t,e){this.extractModuleEntity(e,function(n){return n.userComponents?n.userComponents:[]}).forEach(function(n){t.userComponentRegistry.registerDefaultComponent(n.componentName,n.componentClass)})},r.prototype.createProvidedBeans=function(t,e,i){var n=i?i.frameworkOverrides:null;ie(n)&&(n=new pv);var o={gridOptions:e,eGridDiv:t,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:n};return i&&i.providedBeanInstances&&Object.assign(o,i.providedBeanInstances),o},r.prototype.createAgStackComponentsList=function(t){var e=[{componentName:"AgCheckbox",componentClass:tl},{componentName:"AgRadioButton",componentClass:vf},{componentName:"AgToggleButton",componentClass:Lb},{componentName:"AgInputTextField",componentClass:Bo},{componentName:"AgInputTextArea",componentClass:Fb},{componentName:"AgInputNumberField",componentClass:Kc},{componentName:"AgInputDateField",componentClass:Nb},{componentName:"AgInputRange",componentClass:kb},{componentName:"AgRichSelect",componentClass:$b},{componentName:"AgSelect",componentClass:Bc},{componentName:"AgSlider",componentClass:Xb},{componentName:"AgGridBody",componentClass:F0},{componentName:"AgHeaderRoot",componentClass:YE},{componentName:"AgSortIndicator",componentClass:qc},{componentName:"AgPagination",componentClass:RO},{componentName:"AgOverlayWrapper",componentClass:xO},{componentName:"AgGroupComponent",componentClass:Zb},{componentName:"AgPanel",componentClass:dv},{componentName:"AgDialog",componentClass:aR},{componentName:"AgRowContainer",componentClass:q0},{componentName:"AgFakeHorizontalScroll",componentClass:JO},{componentName:"AgFakeVerticalScroll",componentClass:dx},{componentName:"AgAutocomplete",componentClass:mR}],i=this.extractModuleEntity(t,function(n){return n.agStackComponents?n.agStackComponents:[]});return e.concat(i)},r.prototype.createBeansList=function(t,e,i){void 0===t&&(t="clientSide");var n=e.filter(function(u){return!u.rowModel||u.rowModel===t}),o={clientSide:q.ClientSideRowModelModule,infinite:q.InfiniteRowModelModule,serverSide:q.ServerSideRowModelModule,viewport:q.ViewportRowModelModule};if(o[t]){if(oe.__assertRegistered(o[t],"rowModelType = '"+t+"'",i)){var s=[Kf,TO,LO,HO,iO,v_,YS,uO,dO,nb,d_,SO,qE,lx,hC,Sb,p_,EC,$n,rx,hR,AR,m_,yC,jE,Db,gb,GR,qm,VR,xR,V0,oO,FR,jR,wC,ab,QE,ct,LR,Er,k0,mO,bR,Cb,Pb,N0,XR,QR,eO,EO,Jm,aO,rb,GO,OC,BO,WO,Ob,UO,$O,tx,nx,qO,px,vx,Uf],a=this.extractModuleEntity(n,function(u){return u.beans?u.beans:[]});s.push.apply(s,Av([],Pv(a)));var l=[];return s.forEach(function(u){l.indexOf(u)<0&&l.push(u)}),l}}else console.error("AG Grid: could not find row model for rowModelType = "+t)},r.prototype.extractModuleEntity=function(t,e){return[].concat.apply([],Av([],Pv(t.map(e))))},r.prototype.setColumnsAndData=function(t){var e=t.gridOptionsService.get("columnDefs");t.columnModel.setColumnDefs(e||[],"gridInitializing"),t.rowModel.start()},r.prototype.dispatchGridReadyEvent=function(t){t.eventService.dispatchEvent({type:E.EVENT_GRID_READY})},r}(),Cx=function(){function r(){}return r.prototype.wrap=function(t,e,i,n){var o=this;void 0===i&&(i=[]);var s=this.createWrapper(t,n);return e.forEach(function(a){o.createMethod(s,a,!0)}),i.forEach(function(a){o.createMethod(s,a,!1)}),s},r.prototype.unwrap=function(t){return t},r.prototype.createMethod=function(t,e,i){t.addMethod(e,this.createMethodProxy(t,e,i))},r.prototype.createMethodProxy=function(t,e,i){return function(){return t.hasMethod(e)?t.callMethod(e,arguments):(i&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}},r}(),Pr=typeof global>"u"?{}:global;Pr.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement,Pr.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement,Pr.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement,Pr.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement,Pr.Node=typeof Node>"u"?{}:Node,Pr.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var Qs=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},Js=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},Sx=function(){function r(t,e,i,n,o,s){this.nextId=0,this.allNodesMap={},this.rootNode=t,this.gridOptionsService=e,this.eventService=i,this.columnModel=n,this.beans=s,this.selectionService=o,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=r.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}return r.prototype.postConstruct=function(){this.suppressParentsInRowNodes=this.gridOptionsService.is("suppressParentsInRowNodes"),this.isRowMasterFunc=this.gridOptionsService.get("isRowMaster"),this.doingMasterDetail=this.gridOptionsService.is("masterDetail")},r.prototype.getCopyOfNodesMap=function(){return ne.cloneObject(this.allNodesMap)},r.prototype.getRowNode=function(t){return this.allNodesMap[t]},r.prototype.setRowData=function(t){var e=this;if("string"!=typeof t){this.dispatchRowDataUpdateStartedEvent(t);var i=this.rootNode,n=this.rootNode.sibling;i.childrenAfterFilter=null,i.childrenAfterGroup=null,i.childrenAfterAggFilter=null,i.childrenAfterSort=null,i.childrenMapped=null,i.updateHasChildren(),this.nextId=0,this.allNodesMap={},t?i.allLeafChildren=t.map(function(o){return e.createNode(o,e.rootNode,r.TOP_LEVEL)}):(i.allLeafChildren=[],i.childrenAfterGroup=[]),n&&(n.childrenAfterFilter=i.childrenAfterFilter,n.childrenAfterGroup=i.childrenAfterGroup,n.childrenAfterAggFilter=i.childrenAfterAggFilter,n.childrenAfterSort=i.childrenAfterSort,n.childrenMapped=i.childrenMapped,n.allLeafChildren=i.allLeafChildren)}else console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first")},r.prototype.updateRowData=function(t,e){this.dispatchRowDataUpdateStartedEvent(t.add);var i={remove:[],update:[],add:[]},n=[];return this.executeRemove(t,i,n),this.executeUpdate(t,i,n),this.executeAdd(t,i),this.updateSelection(n,"rowDataChanged"),e&&ne.sortRowNodesByOrder(this.rootNode.allLeafChildren,e),i},r.prototype.dispatchRowDataUpdateStartedEvent=function(t){this.eventService.dispatchEvent({type:E.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:t?.length?t[0]:null})},r.prototype.updateSelection=function(t,e){var i=t.length>0;i&&this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,source:e}),this.selectionService.updateGroupsFromChildrenSelections(e),i&&this.eventService.dispatchEvent({type:E.EVENT_SELECTION_CHANGED,source:e})},r.prototype.executeAdd=function(t,e){var n,i=this,o=t.add,s=t.addIndex;if(!ne.missingOrEmpty(o)){var a=o.map(function(v){return i.createNode(v,i.rootNode,r.TOP_LEVEL)});if("number"==typeof s&&s>=0){var l=this.rootNode.allLeafChildren,u=l.length,c=s;if(this.gridOptionsService.is("treeData")&&s>0&&u>0)for(var h=0;h<u;h++)if((null===(n=l[h])||void 0===n?void 0:n.rowIndex)==s-1){c=h+1;break}var p=l.slice(0,c),f=l.slice(c,l.length);this.rootNode.allLeafChildren=Js(Js(Js([],Qs(p)),Qs(a)),Qs(f))}else this.rootNode.allLeafChildren=Js(Js([],Qs(this.rootNode.allLeafChildren)),Qs(a));this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),e.add=a}},r.prototype.executeRemove=function(t,e,i){var n=this,o=t.remove;if(!ne.missingOrEmpty(o)){var s={};o.forEach(function(a){var l=n.lookupRowNode(a);l&&(l.isSelected()&&i.push(l),l.clearRowTopAndRowIndex(),s[l.id]=!0,delete n.allNodesMap[l.id],e.remove.push(l))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(function(a){return!s[a.id]}),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},r.prototype.executeUpdate=function(t,e,i){var n=this,o=t.update;ne.missingOrEmpty(o)||o.forEach(function(s){var a=n.lookupRowNode(s);a&&(a.updateData(s),!a.selectable&&a.isSelected()&&i.push(a),n.setMasterForRow(a,s,r.TOP_LEVEL,!1),e.update.push(a))})},r.prototype.lookupRowNode=function(t){var i,e=this.gridOptionsService.getCallback("getRowId");if(e){var n=e({data:t,level:0});if(!(i=this.allNodesMap[n]))return console.error("AG Grid: could not find row id="+n+", data item was not found for this id"),null}else if(!(i=this.rootNode.allLeafChildren.find(function(o){return o.data===t})))return console.error("AG Grid: could not find data item as object was not found",t),console.error("Consider using getRowId to help the Grid find matching row data"),null;return i||null},r.prototype.createNode=function(t,e,i){var n=new pe(this.beans);return n.group=!1,this.setMasterForRow(n,t,i,!0),e&&!this.suppressParentsInRowNodes&&(n.parent=e),n.level=i,n.setDataAndId(t,this.nextId.toString()),this.allNodesMap[n.id]&&console.warn("AG Grid: duplicate node id '"+n.id+"' detected from getRowId callback, this could cause issues in your grid."),this.allNodesMap[n.id]=n,this.nextId++,n},r.prototype.setMasterForRow=function(t,e,i,n){if(this.gridOptionsService.is("treeData"))t.setMaster(!1),n&&(t.expanded=!1);else if(t.setMaster(!!this.doingMasterDetail&&(!this.isRowMasterFunc||this.isRowMasterFunc(e))),n){var s=this.columnModel.getRowGroupColumns();t.expanded=!!t.master&&this.isExpanded(i+(s?s.length:0))}},r.prototype.isExpanded=function(t){var e=this.gridOptionsService.getNum("groupDefaultExpanded");return-1===e||t<e},r.TOP_LEVEL=0,r.ROOT_NODE_ID="ROOT_NODE_ID",r}(),_x=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xt=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ea=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o},ta=function(r,t){for(var e=0,i=t.length,n=r.length;e<i;e++,n++)r[n]=t[e];return r},Fn=function(r){return r[r.Normal=0]="Normal",r[r.AfterFilter=1]="AfterFilter",r[r.AfterFilterAndSort=2]="AfterFilterAndSort",r[r.PivotNodes=3]="PivotNodes",r}(Fn||{}),Ex=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=ne.debounce(e.onRowHeightChanged.bind(e),100),e.rowsToDisplay=[],e}return _x(t,r),t.prototype.init=function(){var e=this,i=this.refreshModel.bind(this,{step:Re.EVERYTHING}),n=!this.gridOptionsService.is("suppressAnimationFrame"),o=this.refreshModel.bind(this,{step:Re.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:n});this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,o),this.addManagedListener(this.eventService,E.EVENT_COLUMN_ROW_GROUP_CHANGED,i),this.addManagedListener(this.eventService,E.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:Re.PIVOT})),this.addManagedListener(this.eventService,E.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_COLUMN_PIVOT_MODE_CHANGED,i),this.addManagedListener(this.eventService,E.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this));var s=this.refreshModel.bind(this,{step:Re.MAP,keepRenderedRows:!0,animate:n});this.addManagedPropertyListeners(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter"],s);var a=this.refreshModel.bind(this,{step:Re.AGGREGATE,keepRenderedRows:!0,animate:n});this.addManagedPropertyListeners(["groupIncludeTotalFooter"],a),this.rootNode=new pe(this.beans),this.nodeManager=new Sx(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans),this.addManagedPropertyListener("treeData",function(){e.setRowData(e.rootNode.allLeafChildren.map(function(l){return l.data}))})},t.prototype.start=function(){var e=this.gridOptionsService.get("rowData");e&&this.setRowData(e)},t.prototype.ensureRowHeightsValid=function(e,i,n,o){var s,a=!1;do{s=!1;for(var l=this.getRowIndexAtPixel(e),u=this.getRowIndexAtPixel(i),c=Math.max(l,n),d=Math.min(u,o),h=c;h<=d;h++){var p=this.getRow(h);if(p.rowHeightEstimated){var f=this.gridOptionsService.getRowHeightForNode(p);p.setRowHeight(f.height),s=!0,a=!0}}s&&this.setRowTopAndRowIndex()}while(s);return a},t.prototype.setRowTopAndRowIndex=function(){for(var e=this.environment.getDefaultRowHeight(),i=0,n=new Set,o=this.gridOptionsService.isDomLayout("normal"),s=0;s<this.rowsToDisplay.length;s++){var a=this.rowsToDisplay[s];if(null!=a.id&&n.add(a.id),null==a.rowHeight){var l=this.gridOptionsService.getRowHeightForNode(a,o,e);a.setRowHeight(l.height,l.estimated)}a.setRowTop(i),a.setRowIndex(s),i+=a.rowHeight}return n},t.prototype.clearRowTopAndRowIndex=function(e,i){var n=e.isActive(),o=function(a){a&&null!=a.id&&!i.has(a.id)&&a.clearRowTopAndRowIndex()},s=function(a){o(a),o(a.detailNode),o(a.sibling),a.hasChildren()&&a.childrenAfterGroup&&(n&&-1!=a.level&&!a.expanded||a.childrenAfterGroup.forEach(s))};s(this.rootNode)},t.prototype.ensureRowsAtPixel=function(e,i,n){var o=this;void 0===n&&(n=0);var s=this.getRowIndexAtPixel(i),a=this.getRow(s),l=!this.gridOptionsService.is("suppressAnimationFrame");return a!==e[0]&&(e.forEach(function(u){ne.removeFromArray(o.rootNode.allLeafChildren,u)}),e.forEach(function(u,c){ne.insertIntoArray(o.rootNode.allLeafChildren,u,Math.max(s+n,0)+c)}),this.refreshModel({step:Re.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:l}),!0)},t.prototype.highlightRowAtPixel=function(e,i){var n=null!=i?this.getRowIndexAtPixel(i):null,o=null!=n?this.getRow(n):null;if(o&&e&&o!==e&&null!=i){var s=this.getHighlightPosition(i,o);this.lastHighlightedRow&&this.lastHighlightedRow!==o&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),o.setHighlighted(s),this.lastHighlightedRow=o}else this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)},t.prototype.getHighlightPosition=function(e,i){if(!i){var n=this.getRowIndexAtPixel(e);if(!(i=this.getRow(n||0)))return ro.Below}return e-i.rowTop<i.rowHeight/2?ro.Above:ro.Below},t.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},t.prototype.isLastRowIndexKnown=function(){return!0},t.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},t.prototype.getTopLevelRowCount=function(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;var i=this.rootNode.childrenAfterAggFilter;return i?i.length:0},t.prototype.getTopLevelRowDisplayedIndex=function(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;var n=this.rootNode.childrenAfterSort[e];if(this.gridOptionsService.is("groupHideOpenParents"))for(;n.expanded&&n.childrenAfterSort&&n.childrenAfterSort.length>0;)n=n.childrenAfterSort[0];return n.rowIndex},t.prototype.getRowBounds=function(e){if(ne.missing(this.rowsToDisplay))return null;var i=this.rowsToDisplay[e];return i?{rowTop:i.rowTop,rowHeight:i.rowHeight}:null},t.prototype.onRowGroupOpened=function(){var e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:Re.MAP,keepRenderedRows:!0,animate:e})},t.prototype.onFilterChanged=function(e){if(!e.afterDataChange){var i=this.gridOptionsService.isAnimateRows(),n=0===e.columns.length||e.columns.some(function(s){return s.isPrimary()});this.refreshModel({step:n?Re.FILTER:Re.FILTER_AGGREGATES,keepRenderedRows:!0,animate:i})}},t.prototype.onSortChanged=function(){var e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:Re.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})},t.prototype.getType=function(){return"clientSide"},t.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:Re.PIVOT}):this.refreshModel({step:Re.AGGREGATE})},t.prototype.createChangePath=function(e){var i=ne.missingOrEmpty(e),n=new Od(!1,this.rootNode);return(i||this.gridOptionsService.is("treeData"))&&n.setInactive(),n},t.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(e){if(!this.gridOptionsService.is("suppressModelUpdateAfterUpdateTransaction")||null==e.rowNodeTransactions)return!1;var i=e.rowNodeTransactions.filter(function(o){return null!=o.add&&o.add.length>0||null!=o.remove&&o.remove.length>0});return null==i||0==i.length},t.prototype.buildRefreshModelParams=function(e){var i=Re.EVERYTHING,n={everything:Re.EVERYTHING,group:Re.EVERYTHING,filter:Re.FILTER,map:Re.MAP,aggregate:Re.AGGREGATE,sort:Re.SORT,pivot:Re.PIVOT};if(ne.exists(e)&&(i=n[e]),!ne.missing(i))return{step:i,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gridOptionsService.is("suppressAnimationFrame")};console.error("AG Grid: invalid step "+e+", available steps are "+Object.keys(n).join(", "))},t.prototype.refreshModel=function(e){var i="object"==typeof e&&"step"in e?e:this.buildRefreshModelParams(e);if(i&&!this.isSuppressModelUpdateAfterUpdateTransaction(i)){var n=this.createChangePath(i.rowNodeTransactions);switch(i.step){case Re.EVERYTHING:this.doRowGrouping(i.groupState,i.rowNodeTransactions,i.rowNodeOrder,n,!!i.afterColumnsChanged);case Re.FILTER:this.doFilter(n);case Re.PIVOT:this.doPivot(n);case Re.AGGREGATE:this.doAggregate(n);case Re.FILTER_AGGREGATES:this.doFilterAggregates(n);case Re.SORT:this.doSort(i.rowNodeTransactions,n);case Re.MAP:this.doRowsToDisplay()}var o=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(n,o),this.eventService.dispatchEvent({type:E.EVENT_MODEL_UPDATED,animate:i.animate,keepRenderedRows:i.keepRenderedRows,newData:i.newData,newPage:!1,keepUndoRedoStack:i.keepUndoRedoStack})}},t.prototype.isEmpty=function(){var e=ne.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return ne.missing(this.rootNode)||e||!this.columnModel.isReady()},t.prototype.isRowsToRender=function(){return ne.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},t.prototype.getNodesInRangeForSelection=function(e,i){var n=!i,o=!1,s=[],a=this.gridOptionsService.is("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(function(l){if(!o){if(n&&(l===i||l===e)&&(o=!0,l.group&&a))return void s.push.apply(s,ta([],ea(l.allLeafChildren)));if(!n){if(l!==i&&l!==e)return;n=!0}if(!l.group||!a)return void s.push(l)}}),s},t.prototype.setDatasource=function(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")},t.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},t.prototype.getRootNode=function(){return this.rootNode},t.prototype.getRow=function(e){return this.rowsToDisplay[e]},t.prototype.isRowPresent=function(e){return this.rowsToDisplay.indexOf(e)>=0},t.prototype.getRowIndexAtPixel=function(e){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;var i=0,n=this.rowsToDisplay.length-1;if(e<=0)return 0;if(ne.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;for(var s=-1,a=-1;;){var l=Math.floor((i+n)/2),u=this.rowsToDisplay[l];if(this.isRowInPixel(u,e))return l;if(u.rowTop<e?i=l+1:u.rowTop>e&&(n=l-1),s===i&&a===n)return l;s=i,a=n}},t.prototype.isRowInPixel=function(e,i){return e.rowTop<=i&&e.rowTop+e.rowHeight>i},t.prototype.forEachLeafNode=function(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(i,n){return e(i,n)})},t.prototype.forEachNode=function(e,i){void 0===i&&(i=!1),this.recursivelyWalkNodesAndCallback({nodes:ta([],ea(this.rootNode.childrenAfterGroup||[])),callback:e,recursionType:Fn.Normal,index:0,includeFooterNodes:i})},t.prototype.forEachNodeAfterFilter=function(e,i){void 0===i&&(i=!1),this.recursivelyWalkNodesAndCallback({nodes:ta([],ea(this.rootNode.childrenAfterAggFilter||[])),callback:e,recursionType:Fn.AfterFilter,index:0,includeFooterNodes:i})},t.prototype.forEachNodeAfterFilterAndSort=function(e,i){void 0===i&&(i=!1),this.recursivelyWalkNodesAndCallback({nodes:ta([],ea(this.rootNode.childrenAfterSort||[])),callback:e,recursionType:Fn.AfterFilterAndSort,index:0,includeFooterNodes:i})},t.prototype.forEachPivotNode=function(e,i){void 0===i&&(i=!1),this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:Fn.PivotNodes,index:0,includeFooterNodes:i})},t.prototype.recursivelyWalkNodesAndCallback=function(e){for(var i,n=e.nodes,o=e.callback,s=e.recursionType,a=e.includeFooterNodes,l=e.index,u=0;u<n.length;u++){var c=n[u];if(o(c,l++),c.hasChildren()&&!c.footer){var d=null;switch(s){case Fn.Normal:d=c.childrenAfterGroup;break;case Fn.AfterFilter:d=c.childrenAfterAggFilter;break;case Fn.AfterFilterAndSort:d=c.childrenAfterSort;break;case Fn.PivotNodes:d=c.leafGroup?null:c.childrenAfterSort}d&&(l=this.recursivelyWalkNodesAndCallback({nodes:ta([],ea(d)),callback:o,recursionType:s,index:l,includeFooterNodes:a}))}}var h=null===(i=n[0])||void 0===i?void 0:i.parent;if(!a||!h)return l;if(h===this.rootNode){if(!this.gridOptionsService.is("groupIncludeTotalFooter"))return l}else if(!this.gridOptionsService.getGroupIncludeFooter()({node:h}))return l;return h.createFooter(),o(h.sibling,l++),l},t.prototype.doAggregate=function(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.doFilterAggregates=function(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter},t.prototype.expandOrCollapseAll=function(e){var i=this.gridOptionsService.is("treeData"),n=this.columnModel.isPivotActive(),o=function(l){l&&l.forEach(function(u){var c=function(){u.expanded=e,o(u.childrenAfterGroup)};i?ne.exists(u.childrenAfterGroup)&&c():n?!u.leafGroup&&c():u.group&&c()})};this.rootNode&&o(this.rootNode.childrenAfterGroup),this.refreshModel({step:Re.MAP}),this.eventService.dispatchEvent({type:E.EVENT_EXPAND_COLLAPSE_ALL,source:e?"expandAll":"collapseAll"})},t.prototype.doSort=function(e,i){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:i})},t.prototype.doRowGrouping=function(e,i,n,o,s){this.groupStage?(i?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:i,rowNodeOrder:n,changedPath:o}):(this.groupStage.execute({rowNode:this.rootNode,changedPath:o,afterColumnsChanged:s}),this.restoreGroupState(e)),this.gridOptionsService.is("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",o)&&this.eventService.dispatchEvent({type:E.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"})):(this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren())},t.prototype.restoreGroupState=function(e){e&&ne.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(i,n){"boolean"==typeof e[n]&&(i.expanded=e[n])})},t.prototype.doFilter=function(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.doPivot=function(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsService.is("rememberGroupStateWhenNewData"))return null;var e={};return ne.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(i,n){return e[n]=i.expanded}),e},t.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},t.prototype.getRowNode=function(e){if("string"==typeof e&&0==e.indexOf(pe.ID_PREFIX_ROW_GROUP)){var n=void 0;return this.forEachNode(function(o){o.id===e&&(n=o)}),n}return this.nodeManager.getRowNode(e)},t.prototype.setRowData=function(e){var i=this.getGroupState();this.nodeManager.setRowData(e),this.selectionService.reset(),this.filterManager.onNewRowsLoaded("rowDataUpdated"),this.eventService.dispatchEvent({type:E.EVENT_ROW_DATA_UPDATED}),this.refreshModel({step:Re.EVERYTHING,groupState:i,newData:!0})},t.prototype.batchUpdateRowData=function(e,i){var n=this;if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];var o=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(function(){n.executeBatchUpdateRowData()},o)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:i})},t.prototype.flushAsyncTransactions=function(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},t.prototype.executeBatchUpdateRowData=function(){var e=this;this.valueCache.onDataChanged();var i=[],n=[],o=!1;this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(function(a){var l=e.nodeManager.updateRowData(a.rowDataTransaction,void 0);n.push(l),a.callback&&i.push(a.callback.bind(null,l)),"number"==typeof a.rowDataTransaction.addIndex&&(o=!0)}),this.commonUpdateRowData(n,void 0,o),i.length>0&&window.setTimeout(function(){i.forEach(function(a){return a()})},0),n.length>0&&this.eventService.dispatchEvent({type:E.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:n}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},t.prototype.updateRowData=function(e,i){this.valueCache.onDataChanged();var n=this.nodeManager.updateRowData(e,i);return this.commonUpdateRowData([n],i,"number"==typeof e.addIndex),n},t.prototype.createRowNodeOrder=function(){if(!this.gridOptionsService.is("suppressMaintainUnsortedOrder")){var i={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var n=0;n<this.rootNode.allLeafChildren.length;n++)i[this.rootNode.allLeafChildren[n].id]=n;return i}},t.prototype.commonUpdateRowData=function(e,i,n){var o=!this.gridOptionsService.is("suppressAnimationFrame");n&&(i=this.createRowNodeOrder()),this.refreshModel({step:Re.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:i,keepRenderedRows:!0,keepEditingRows:!0,animate:o}),this.filterManager.onNewRowsLoaded("rowDataUpdated"),this.eventService.dispatchEvent({type:E.EVENT_ROW_DATA_UPDATED})},t.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},t.prototype.onRowHeightChanged=function(){this.refreshModel({step:Re.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})},t.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},t.prototype.resetRowHeights=function(){var e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()},t.prototype.resetRowHeightsForAllRowNodes=function(){var e=!1;return this.forEachNode(function(i){i.setRowHeight(i.rowHeight,!0);var n=i.detailNode;n&&n.setRowHeight(n.rowHeight,!0),i.sibling&&i.sibling.setRowHeight(i.sibling.rowHeight,!0),e=!0}),e},t.prototype.onGridStylesChanges=function(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()},Xt([S("columnModel")],t.prototype,"columnModel",void 0),Xt([S("selectionService")],t.prototype,"selectionService",void 0),Xt([S("filterManager")],t.prototype,"filterManager",void 0),Xt([S("valueCache")],t.prototype,"valueCache",void 0),Xt([S("beans")],t.prototype,"beans",void 0),Xt([S("filterStage")],t.prototype,"filterStage",void 0),Xt([S("sortStage")],t.prototype,"sortStage",void 0),Xt([S("flattenStage")],t.prototype,"flattenStage",void 0),Xt([we("groupStage")],t.prototype,"groupStage",void 0),Xt([we("aggregationStage")],t.prototype,"aggregationStage",void 0),Xt([we("pivotStage")],t.prototype,"pivotStage",void 0),Xt([we("filterAggregatesStage")],t.prototype,"filterAggregatesStage",void 0),Xt([V],t.prototype,"init",null),Xt([X("rowModel")],t)}(k),bx=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Lv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Rx=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return bx(t,r),t.prototype.execute=function(e){this.filterService.filter(e.changedPath)},Lv([S("filterService")],t.prototype,"filterService",void 0),Lv([X("filterStage")],t)}(k),Ox=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Vl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},xx=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Ox(t,r),t.prototype.execute=function(e){var i=this,n=this.sortController.getSortOptions(),o=ne.exists(n)&&n.length>0,s=o&&ne.exists(e.rowNodeTransactions)&&this.gridOptionsService.is("deltaSort"),a=n.some(function(l){return i.gridOptionsService.isColumnsSortingCoupledToGroup()?l.column.isPrimary()&&l.column.isRowGroupActive():!!l.column.getColDef().showRowGroup});this.sortService.sort(n,o,s,e.rowNodeTransactions,e.changedPath,a)},Vl([S("sortService")],t.prototype,"sortService",void 0),Vl([S("sortController")],t.prototype,"sortController",void 0),Vl([S("columnModel")],t.prototype,"columnModel",void 0),Vl([X("sortStage")],t)}(k),Dx=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ud=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Tx=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Dx(t,r),t.prototype.execute=function(e){var i=e.rowNode,n=[],o=this.columnModel.isPivotMode(),s=o&&i.leafGroup,a=s?[i]:i.childrenAfterSort,l=this.getFlattenDetails();return this.recursivelyAddToRowsToDisplay(l,a,n,o,0),!s&&n.length>0&&l.groupIncludeTotalFooter&&(i.createFooter(),this.addRowNodeToRowsToDisplay(l,i.sibling,n,0)),n},t.prototype.getFlattenDetails=function(){var e=this.gridOptionsService.is("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gridOptionsService.is("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gridOptionsService.isGroupMultiAutoColumn(),hideOpenParents:this.gridOptionsService.is("groupHideOpenParents"),groupIncludeTotalFooter:this.gridOptionsService.is("groupIncludeTotalFooter"),getGroupIncludeFooter:this.gridOptionsService.getGroupIncludeFooter()}},t.prototype.recursivelyAddToRowsToDisplay=function(e,i,n,o,s){if(!ne.missingOrEmpty(i))for(var a=0;a<i.length;a++){var l=i[a],u=l.hasChildren(),d=e.groupRemoveSingleChildren&&u&&1===l.childrenAfterGroup.length,h=e.groupRemoveLowestSingleChildren&&u&&l.leafGroup&&1===l.childrenAfterGroup.length;if(!(o&&!u||e.hideOpenParents&&l.expanded&&!l.master&&(!o||!l.leafGroup)||d||h)&&this.addRowNodeToRowsToDisplay(e,l,n,s),!o||!l.leafGroup)if(u){var g=d||h;if(l.expanded||g){var y=g?s:s+1;this.recursivelyAddToRowsToDisplay(e,l.childrenAfterSort,n,o,y),e.getGroupIncludeFooter({node:l})?(l.createFooter(),this.addRowNodeToRowsToDisplay(e,l.sibling,n,y)):l.destroyFooter()}}else if(l.master&&l.expanded){var C=this.createDetailNode(l);this.addRowNodeToRowsToDisplay(e,C,n,s)}}},t.prototype.addRowNodeToRowsToDisplay=function(e,i,n,o){n.push(i),i.setUiLevel(e.isGroupMultiAutoColumn?0:o)},t.prototype.createDetailNode=function(e){if(ne.exists(e.detailNode))return e.detailNode;var i=new pe(this.beans);return i.detail=!0,i.selectable=!1,i.parent=e,ne.exists(e.id)&&(i.id="detail_"+e.id),i.data=e.data,i.level=e.level+1,e.detailNode=i,i},Ud([S("columnModel")],t.prototype,"columnModel",void 0),Ud([S("beans")],t.prototype,"beans",void 0),Ud([X("flattenStage")],t)}(k),Px=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Bl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ax=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Px(t,r),t.prototype.init=function(){this.postSortFunc=this.gridOptionsService.getCallback("postSortRows")},t.prototype.sort=function(e,i,n,o,s,a){var l=this,u=this.gridOptionsService.is("groupMaintainOrder"),c=this.columnModel.getAllGridColumns().some(function(f){return f.isRowGroupActive()}),d={};n&&o&&(d=this.calculateDirtyNodes(o));var h=this.columnModel.isPivotMode();s&&s.forEachChangedNodeDepthFirst(function(f){l.pullDownGroupDataForHideOpenParents(f.childrenAfterAggFilter,!0);var v=h&&f.leafGroup;if(u&&c&&!f.leafGroup&&!a){var y=f.childrenAfterAggFilter.slice(0);if(f.childrenAfterSort){var m={};f.childrenAfterSort.forEach(function(w,_){m[w.id]=_}),y.sort(function(w,_){var b,O;return(null!==(b=m[w.id])&&void 0!==b?b:0)-(null!==(O=m[_.id])&&void 0!==O?O:0)})}f.childrenAfterSort=y}else f.childrenAfterSort=!i||v?f.childrenAfterAggFilter.slice(0):n?l.doDeltaSort(f,d,s,e):l.rowNodeSorter.doFullSort(f.childrenAfterAggFilter,e);f.sibling&&(f.sibling.childrenAfterSort=f.childrenAfterSort),l.updateChildIndexes(f),l.postSortFunc&&l.postSortFunc({nodes:f.childrenAfterSort})}),this.updateGroupDataForHideOpenParents(s)},t.prototype.calculateDirtyNodes=function(e){var i={},n=function(o){o&&o.forEach(function(s){return i[s.id]=!0})};return e&&e.forEach(function(o){n(o.add),n(o.update),n(o.remove)}),i},t.prototype.doDeltaSort=function(e,i,n,o){var s=this,a=e.childrenAfterAggFilter,l=e.childrenAfterSort;if(!l)return this.rowNodeSorter.doFullSort(a,o);var u={},c=[];a.forEach(function(f){i[f.id]||!n.canSkip(f)?c.push(f):u[f.id]=!0});var d=l.filter(function(f){return u[f.id]}),h=function(f,v){return{currentPos:v,rowNode:f}},p=c.map(h).sort(function(f,v){return s.rowNodeSorter.compareRowNodes(o,f,v)});return this.mergeSortedArrays(o,p,d.map(h)).map(function(f){return f.rowNode})},t.prototype.mergeSortedArrays=function(e,i,n){for(var o=[],s=0,a=0;s<i.length&&a<n.length;){var l=this.rowNodeSorter.compareRowNodes(e,i[s],n[a]);o.push(l<0?i[s++]:n[a++])}for(;s<i.length;)o.push(i[s++]);for(;a<n.length;)o.push(n[a++]);return o},t.prototype.updateChildIndexes=function(e){if(!ne.missing(e.childrenAfterSort))for(var i=e.childrenAfterSort,n=0;n<i.length;n++){var o=i[n],a=n===e.childrenAfterSort.length-1;o.setFirstChild(0===n),o.setLastChild(a),o.setChildIndex(n)}},t.prototype.updateGroupDataForHideOpenParents=function(e){var i=this;if(this.gridOptionsService.is("groupHideOpenParents")){if(this.gridOptionsService.is("treeData"))return ne.doOnce(function(){return console.warn("AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).")},"sortService.hideOpenParentsWithTreeData"),!1;var o=function(s){i.pullDownGroupDataForHideOpenParents(s.childrenAfterSort,!1),s.childrenAfterSort.forEach(function(a){a.hasChildren()&&o(a)})};e&&e.executeFromRootNode(function(s){return o(s)})}},t.prototype.pullDownGroupDataForHideOpenParents=function(e,i){var n=this;!this.gridOptionsService.is("groupHideOpenParents")||ne.missing(e)||e.forEach(function(o){n.columnModel.getGroupDisplayColumns().forEach(function(a){var l=a.getColDef().showRowGroup;if("string"==typeof l){var c=n.columnModel.getPrimaryColumn(l);if(c!==o.rowGroupColumn)if(i)o.setGroupValue(a.getId(),void 0);else{var h=o.getFirstChildOfFirstChild(c);h&&o.setGroupValue(a.getId(),h.key)}}else console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup")})})},Bl([S("columnModel")],t.prototype,"columnModel",void 0),Bl([S("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),Bl([V],t.prototype,"init",null),Bl([X("sortService")],t)}(k),Lx=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Mv=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Mx=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Lx(t,r),t.prototype.filter=function(e){var i=this.filterManager.isChildFilterPresent();this.filterNodes(i,e)},t.prototype.filterNodes=function(e,i){var n=this,o=function(u,c){u.childrenAfterFilter=u.hasChildren()&&e&&!c?u.childrenAfterGroup.filter(function(d){var h=d.childrenAfterFilter&&d.childrenAfterFilter.length>0,p=d.data&&n.filterManager.doesRowPassFilter({rowNode:d});return h||p}):u.childrenAfterGroup,u.sibling&&(u.sibling.childrenAfterFilter=u.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var s=function(u,c){if(u.childrenAfterGroup)for(var d=0;d<u.childrenAfterGroup.length;d++){var h=u.childrenAfterGroup[d],p=c||n.filterManager.doesRowPassFilter({rowNode:h});h.childrenAfterGroup?s(u.childrenAfterGroup[d],p):o(h,p)}o(u,c)};i.executeFromRootNode(function(u){return s(u,!1)})}else i.forEachChangedNodeDepthFirst(function(u){return o(u,!1)},!0)},t.prototype.doingTreeDataFiltering=function(){return this.gridOptionsService.is("treeData")&&!this.gridOptionsService.is("excludeChildrenWhenTreeDataFiltering")},Mv([S("filterManager")],t.prototype,"filterManager",void 0),Mv([X("filterService")],t)}(k),Fx=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Wl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Nx=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Fx(t,r),t.prototype.postConstruct=function(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)},t.prototype.isActive=function(){var e=this.gridOptionsService.exists("getRowId");return!this.gridOptionsService.is("resetRowDataOnUpdate")&&e},t.prototype.setRowData=function(e){var i=this.createTransactionForRowData(e);if(i){var n=function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,s,i=e.call(r),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(s)throw s.error}}return o}(i,2);this.clientSideRowModel.updateRowData(n[0],n[1])}},t.prototype.createTransactionForRowData=function(e){if(ne.missing(this.clientSideRowModel))console.error("AG Grid: ImmutableService only works with ClientSideRowModel");else{var i=this.gridOptionsService.getCallback("getRowId");if(null!=i){var n={remove:[],update:[],add:[]},o=this.clientSideRowModel.getCopyOfNodesMap(),a=this.gridOptionsService.is("suppressMaintainUnsortedOrder")?void 0:{};return ne.exists(e)&&e.forEach(function(l,u){var c=i({data:l,level:0}),d=o[c];a&&(a[c]=u),d?(d.data!==l&&n.update.push(l),o[c]=void 0):n.add.push(l)}),ne.iterateObject(o,function(l,u){u&&n.remove.push(u.data)}),[n,a]}console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!")}},Wl([S("rowModel")],t.prototype,"rowModel",void 0),Wl([S("rowRenderer")],t.prototype,"rowRenderer",void 0),Wl([V],t.prototype,"postConstruct",null),Wl([X("immutableService")],t)}(k),kx={version:"30.2.0",moduleName:q.ClientSideRowModelModule,rowModel:"clientSide",beans:[Ex,Rx,xx,Tx,Ax,Mx,Nx]},Hx=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),zd=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Fv=function(r){function t(e,i,n){var o=r.call(this,e)||this;return o.parentCache=i,o.params=n,o.startRow=e*n.blockSize,o.endRow=o.startRow+n.blockSize,o}return Hx(t,r),t.prototype.postConstruct=function(){this.createRowNodes()},t.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},t.prototype.setDataAndId=function(e,i,n){ne.exists(i)?e.setDataAndId(i,n.toString()):e.setDataAndId(void 0,void 0)},t.prototype.loadFromDatasource=function(){var e=this,i=this.createLoadParams();ne.missing(this.params.datasource.getRows)?console.warn("AG Grid: datasource is missing getRows method"):window.setTimeout(function(){e.params.datasource.getRows(i)},0)},t.prototype.processServerFail=function(){},t.prototype.createLoadParams=function(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsService.context}},t.prototype.forEachNode=function(e,i,n){var o=this;this.rowNodes.forEach(function(s,a){o.startRow+a<n&&e(s,i.next())})},t.prototype.getLastAccessed=function(){return this.lastAccessed},t.prototype.getRow=function(e,i){return void 0===i&&(i=!1),i||(this.lastAccessed=this.params.lastAccessedSequence.next()),this.rowNodes[e-this.startRow]},t.prototype.getStartRow=function(){return this.startRow},t.prototype.getEndRow=function(){return this.endRow},t.prototype.createRowNodes=function(){this.rowNodes=[];for(var e=0;e<this.params.blockSize;e++){var i=this.startRow+e,n=new pe(this.beans);n.setRowHeight(this.params.rowHeight),n.uiLevel=0,n.setRowIndex(i),n.setRowTop(this.params.rowHeight*i),this.rowNodes.push(n)}},t.prototype.processServerResult=function(e){var i=this;this.rowNodes.forEach(function(o,s){var a=e.rowData?e.rowData[s]:void 0;!o.id&&o.alreadyRendered&&a&&(i.rowNodes[s]=new pe(i.beans),i.rowNodes[s].setRowIndex(o.rowIndex),i.rowNodes[s].setRowTop(o.rowTop),i.rowNodes[s].setRowHeight(o.rowHeight),o.clearRowTopAndRowIndex()),i.setDataAndId(i.rowNodes[s],a,i.startRow+s)}),this.parentCache.pageLoaded(this,null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0)},t.prototype.destroyRowNodes=function(){this.rowNodes.forEach(function(e){e.clearRowTopAndRowIndex()})},zd([S("beans")],t.prototype,"beans",void 0),zd([V],t.prototype,"postConstruct",null),zd([lt],t.prototype,"destroyRowNodes",null),t}(xd),Vx=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),jl=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Bx=function(r,t){return function(e,i){t(e,i,r)}},Wx=function(r){function t(e){var i=r.call(this)||this;return i.lastRowIndexKnown=!1,i.blocks={},i.blockCount=0,i.rowCount=e.initialRowCount,i.params=e,i}return Vx(t,r),t.prototype.setBeans=function(e){this.logger=e.create("InfiniteCache")},t.prototype.getRow=function(e,i){void 0===i&&(i=!1);var n=Math.floor(e/this.params.blockSize),o=this.blocks[n];if(!o){if(i)return;o=this.createBlock(n)}return o.getRow(e)},t.prototype.createBlock=function(e){var i=this.createBean(new Fv(e,this,this.params));return this.blocks[i.getId()]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),this.params.rowNodeBlockLoader.addBlock(i),i},t.prototype.refreshCache=function(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach(function(i){return i.setStateWaitingToLoad()}),this.params.rowNodeBlockLoader.checkBlockToLoad())},t.prototype.destroyAllBlocks=function(){var e=this;this.getBlocksInOrder().forEach(function(i){return e.destroyBlock(i)})},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},t.prototype.pageLoaded=function(e,i){this.isAlive()&&(this.logger.log("onPageLoaded: page = "+e.getId()+", lastRow = "+i),this.checkRowCount(e,i),this.onCacheUpdated())},t.prototype.purgeBlocksIfNeeded=function(e){var i=this,n=this.getBlocksInOrder().filter(function(u){return u!=e});n.sort(function(u,c){return c.getLastAccessed()-u.getLastAccessed()});var s=this.params.maxBlocksInCache>0,a=s?this.params.maxBlocksInCache-1:null,l=t.MAX_EMPTY_BLOCKS_TO_KEEP-1;n.forEach(function(u,c){if(u.getState()===Fv.STATE_WAITING_TO_LOAD&&c>=l||s&&c>=a){if(i.isBlockCurrentlyDisplayed(u)||i.isBlockFocused(u))return;i.removeBlockFromCache(u)}})},t.prototype.isBlockFocused=function(e){var i=this.focusService.getFocusCellToUseAfterRefresh();if(!i||null!=i.rowPinned)return!1;var n=e.getStartRow(),o=e.getEndRow();return i.rowIndex>=n&&i.rowIndex<o},t.prototype.isBlockCurrentlyDisplayed=function(e){var i=e.getStartRow(),n=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(i,n)},t.prototype.removeBlockFromCache=function(e){e&&this.destroyBlock(e)},t.prototype.checkRowCount=function(e,i){if("number"==typeof i&&i>=0)this.rowCount=i,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var o=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<o&&(this.rowCount=o)}},t.prototype.setRowCount=function(e,i){this.rowCount=e,ne.exists(i)&&(this.lastRowIndexKnown=i),this.lastRowIndexKnown||this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()},t.prototype.forEachNodeDeep=function(e){var i=this,n=new wr;this.getBlocksInOrder().forEach(function(o){return o.forEachNode(e,n,i.rowCount)})},t.prototype.getBlocksInOrder=function(){return ne.getAllValuesInObject(this.blocks).sort(function(n,o){return n.getId()-o.getId()})},t.prototype.destroyBlock=function(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)},t.prototype.onCacheUpdated=function(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:E.EVENT_STORE_UPDATED}))},t.prototype.destroyAllBlocksPastVirtualRowCount=function(){var e=this,i=[];this.getBlocksInOrder().forEach(function(n){n.getId()*e.params.blockSize>=e.rowCount&&i.push(n)}),i.length>0&&i.forEach(function(n){return e.destroyBlock(n)})},t.prototype.purgeCache=function(){var e=this;this.getBlocksInOrder().forEach(function(i){return e.removeBlockFromCache(i)}),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},t.prototype.getRowNodesInRange=function(e,i){var n=this,o=[],s=-1,a=!1,l=new wr;ne.missing(e)&&(a=!0);var u=!1;return this.getBlocksInOrder().forEach(function(d){if(!u){if(a&&s+1!==d.getId())return void(u=!0);s=d.getId(),d.forEachNode(function(h){var p=h===e||h===i;(a||p)&&o.push(h),p&&(a=!a)},l,n.rowCount)}}),u||a?[]:o},t.MAX_EMPTY_BLOCKS_TO_KEEP=2,jl([S("rowRenderer")],t.prototype,"rowRenderer",void 0),jl([S("focusService")],t.prototype,"focusService",void 0),jl([Bx(0,Tt("loggerFactory"))],t.prototype,"setBeans",null),jl([lt],t.prototype,"destroyAllBlocks",null),t}(k),jx=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),fo=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Ux=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return jx(t,r),t.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}},t.prototype.ensureRowHeightsValid=function(e,i,n,o){return!1},t.prototype.init=function(){var e=this;this.gridOptionsService.isRowModelType("infinite")&&(this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(function(){return e.destroyCache()}),this.verifyProps())},t.prototype.verifyProps=function(){this.gridOptionsService.exists("initialGroupOrderComparator")&&ne.doOnce(function(){return console.warn("AG Grid: initialGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.")},"IRM.InitialGroupOrderComparator")},t.prototype.start=function(){this.setDatasource(this.gridOptionsService.get("datasource"))},t.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,E.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,E.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,E.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))},t.prototype.onFilterChanged=function(){this.reset()},t.prototype.onSortChanged=function(){this.reset()},t.prototype.onColumnEverything=function(){(!this.cacheParams||this.isSortModelDifferent())&&this.reset()},t.prototype.isSortModelDifferent=function(){return!ne.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},t.prototype.getType=function(){return"infinite"},t.prototype.setDatasource=function(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()},t.prototype.isEmpty=function(){return!this.infiniteCache},t.prototype.isRowsToRender=function(){return!!this.infiniteCache},t.prototype.getNodesInRangeForSelection=function(e,i){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,i):[]},t.prototype.reset=function(){if(this.datasource){null!=this.gridOptionsService.getCallback("getRowId")||this.selectionService.reset(),this.resetCache();var n=this.createModelUpdatedEvent();this.eventService.dispatchEvent(n)}},t.prototype.createModelUpdatedEvent=function(){return{type:E.EVENT_MODEL_UPDATED,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}},t.prototype.resetCache=function(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.defaultIfInvalid(this.gridOptionsService.getNum("infiniteInitialRowCount"),1),maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache"),rowHeight:this.gridOptionsService.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheOverflowSize"),1),blockSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheBlockSize"),100),lastAccessedSequence:new wr},this.infiniteCache=this.createBean(new Wx(this.cacheParams))},t.prototype.defaultIfInvalid=function(e,i){return e>0?e:i},t.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},t.prototype.onCacheUpdated=function(){var e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)},t.prototype.getRow=function(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)},t.prototype.getRowNode=function(e){var i;return this.forEachNode(function(n){n.id===e&&(i=n)}),i},t.prototype.forEachNode=function(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)},t.prototype.getTopLevelRowCount=function(){return this.getRowCount()},t.prototype.getTopLevelRowDisplayedIndex=function(e){return e},t.prototype.getRowIndexAtPixel=function(e){if(0!==this.rowHeight){var i=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return i>n?n:i}return 0},t.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},t.prototype.isRowPresent=function(e){return!!this.getRowNode(e.id)},t.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},t.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},t.prototype.isLastRowIndexKnown=function(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()},t.prototype.setRowCount=function(e,i){this.infiniteCache&&this.infiniteCache.setRowCount(e,i)},fo([S("filterManager")],t.prototype,"filterManager",void 0),fo([S("sortController")],t.prototype,"sortController",void 0),fo([S("selectionService")],t.prototype,"selectionService",void 0),fo([S("rowRenderer")],t.prototype,"rowRenderer",void 0),fo([S("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),fo([V],t.prototype,"init",null),fo([lt],t.prototype,"destroyDatasource",null),fo([X("rowModel")],t)}(k),Kx={version:"30.2.0",moduleName:q.InfiniteRowModelModule,rowModel:"infinite",beans:[Ux]},$x=function(){function r(){}return r.prototype.setBeans=function(t){this.beans=t},r.prototype.getFileName=function(t){var e=this.getDefaultFileExtension();return(null==t||!t.length)&&(t=this.getDefaultFileName()),-1===t.indexOf(".")?t+"."+e:t},r.prototype.getData=function(t){var e=this.createSerializingSession(t);return this.beans.gridSerializer.serialize(e,t)},r}(),Yx=function(){function r(t){this.groupColumns=[];var i=t.valueService,n=t.gridOptionsService,o=t.valueFormatterService,s=t.valueParserService,a=t.processCellCallback,l=t.processHeaderCallback,u=t.processGroupHeaderCallback,c=t.processRowGroupCallback;this.columnModel=t.columnModel,this.valueService=i,this.gridOptionsService=n,this.valueFormatterService=o,this.valueParserService=s,this.processCellCallback=a,this.processHeaderCallback=l,this.processGroupHeaderCallback=u,this.processRowGroupCallback=c}return r.prototype.prepare=function(t){this.groupColumns=t.filter(function(e){return!!e.getColDef().showRowGroup})},r.prototype.extractHeaderValue=function(t){return this.getHeaderName(this.processHeaderCallback,t)??""},r.prototype.extractRowCellValue=function(t,e,i,n,o){var a=this.gridOptionsService.is("groupHideOpenParents")&&!o.footer||!this.shouldRenderGroupSummaryCell(o,t,e)?this.valueService.getValue(t,o):this.createValueForGroupNode(o);return this.processCell({accumulatedRowIndex:i,rowNode:o,column:t,value:a,processCellCallback:this.processCellCallback,type:n})},r.prototype.shouldRenderGroupSummaryCell=function(t,e,i){var n;if(!t||!t.group)return!1;if(-1!==this.groupColumns.indexOf(e)){if(null!=(null===(n=t.groupData)||void 0===n?void 0:n[e.getId()])||this.gridOptionsService.isRowModelType("serverSide")&&t.group)return!0;if(t.footer&&-1===t.level){var a=e.getColDef();return null==a||!0===a.showRowGroup||a.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}var u=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotMode());return 0===i&&u},r.prototype.getHeaderName=function(t,e){return t?t({column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}):this.columnModel.getDisplayNameForColumn(e,"csv",!0)},r.prototype.createValueForGroupNode=function(t){if(this.processRowGroupCallback)return this.processRowGroupCallback({node:t,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context});var e=t.footer,i=[t.key];if(!this.gridOptionsService.isGroupMultiAutoColumn())for(;t.parent;)i.push((t=t.parent).key);var n=i.reverse().join(" -> ");return e?"Total "+n:n},r.prototype.processCell=function(t){var i,e=this,o=t.rowNode,s=t.column,a=t.value,l=t.processCellCallback;return l?{value:null!==(i=l({accumulatedRowIndex:t.accumulatedRowIndex,column:s,node:o,value:a,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,type:t.type,parseValue:function(c){return e.valueParserService.parseValue(s,o,c,e.valueService.getValue(s,o))},formatValue:function(c){var d;return null!==(d=e.valueFormatterService.formatValue(s,o,c))&&void 0!==d?d:c}}))&&void 0!==i?i:""}:s.getColDef().useValueFormatterForExport?{value:a??"",valueFormatted:this.valueFormatterService.formatValue(s,o,a)}:{value:a??""}},r}(),Xx=function(){function r(){}return r.download=function(t,e){var i=document.defaultView||window;if(i){var n=document.createElement("a"),o=i.URL.createObjectURL(e);n.setAttribute("href",o),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(n),i.setTimeout(function(){i.URL.revokeObjectURL(o)},0)}else console.warn("AG Grid: There is no `window` associated with the current `document`")},r}(),qx=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Zx=function(r){function t(e){var i=r.call(this,e)||this;i.isFirstLine=!0,i.result="";var o=e.columnSeparator;return i.suppressQuotes=e.suppressQuotes,i.columnSeparator=o,i}return qx(t,r),t.prototype.addCustomContent=function(e){var i=this;e&&("string"==typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach(function(n){i.beginNewLine(),n.forEach(function(o,s){0!==s&&(i.result+=i.columnSeparator),i.result+=i.putInQuotes(o.data.value||""),o.mergeAcross&&i.appendEmptyCells(o.mergeAcross)})}))},t.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},t.prototype.onNewHeaderGroupingRowColumn=function(e,i,n,o){0!=n&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i),this.appendEmptyCells(o)},t.prototype.appendEmptyCells=function(e){for(var i=1;i<=e;i++)this.result+=this.columnSeparator+this.putInQuotes("")},t.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},t.prototype.onNewHeaderRowColumn=function(e,i){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))},t.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},t.prototype.onNewBodyRowColumn=function(e,i,n){var o;0!=i&&(this.result+=this.columnSeparator);var s=this.extractRowCellValue(e,i,i,"csv",n);this.result+=this.putInQuotes(null!==(o=s.valueFormatted)&&void 0!==o?o:s.value)},t.prototype.putInQuotes=function(e){return this.suppressQuotes?e:null==e?'""':("string"==typeof e?i=e:"function"==typeof e.toString?i=e.toString():(console.warn("AG Grid: unknown value type during csv conversion"),i=""),'"'+i.replace(/"/g,'""')+'"');var i},t.prototype.parse=function(){return this.result},t.prototype.beginNewLine=function(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1},t}(Yx),Qx=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),vo=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Jx=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Qx(t,r),t.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},t.prototype.getMergedParams=function(e){var i=this.gridOptionsService.get("defaultCsvExportParams");return Object.assign({},i,e)},t.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var i=this.getMergedParams(e),n=this.getData(i),o=new Blob(["\ufeff",n],{type:"text/plain"});return Xx.download(this.getFileName(i.fileName),o),n},t.prototype.exportDataAsCsv=function(e){return this.export(e)},t.prototype.getDataAsCsv=function(e,i){void 0===i&&(i=!1);var n=i?Object.assign({},e):this.getMergedParams(e);return this.getData(n)},t.prototype.getDefaultFileName=function(){return"export.csv"},t.prototype.getDefaultFileExtension=function(){return"csv"},t.prototype.createSerializingSession=function(e){var i=this;return new Zx({columnModel:i.columnModel,valueService:i.valueService,gridOptionsService:i.gridOptionsService,valueFormatterService:i.valueFormatterService,valueParserService:i.valueParserService,processCellCallback:e.processCellCallback||void 0,processHeaderCallback:e.processHeaderCallback||void 0,processGroupHeaderCallback:e.processGroupHeaderCallback||void 0,processRowGroupCallback:e.processRowGroupCallback||void 0,suppressQuotes:e.suppressQuotes||!1,columnSeparator:e.columnSeparator||","})},t.prototype.isExportSuppressed=function(){return this.gridOptionsService.is("suppressCsvExport")},vo([S("columnModel")],t.prototype,"columnModel",void 0),vo([S("valueService")],t.prototype,"valueService",void 0),vo([S("gridSerializer")],t.prototype,"gridSerializer",void 0),vo([S("gridOptionsService")],t.prototype,"gridOptionsService",void 0),vo([S("valueFormatterService")],t.prototype,"valueFormatterService",void 0),vo([S("valueParserService")],t.prototype,"valueParserService",void 0),vo([V],t.prototype,"postConstruct",null),vo([X("csvCreator")],t)}($x),eD=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),go=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},iD=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return eD(t,r),t.prototype.serialize=function(e,i){void 0===i&&(i={});var n=this.getColumnsToExport(i.allColumns,i.columnKeys);return ne.compose(this.prepareSession(n),this.prependContent(i),this.exportColumnGroups(i,n),this.exportHeaders(i,n),this.processPinnedTopRows(i,n),this.processRows(i,n),this.processPinnedBottomRows(i,n),this.appendContent(i))(e).parse()},t.prototype.processRow=function(e,i,n,o){var s=i.shouldRowBeSkipped||function(){return!1},a=this.gridOptionsService.context,l=this.gridOptionsService.api,u=this.gridOptionsService.columnApi,c=this.gridOptionsService.is("groupRemoveSingleChildren"),d=this.gridOptionsService.is("groupRemoveLowestSingleChildren"),p=null!=i.rowPositions||!!i.onlySelected,f=this.gridOptionsService.is("groupHideOpenParents")&&!p,v=this.columnModel.isPivotMode()?o.leafGroup:!o.group,g=!!o.footer,C=1===o.allChildrenCount&&(c||d&&o.leafGroup);if((i.skipGroups||i.skipRowGroups)&&i.skipGroups&&ne.doOnce(function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")},"gridSerializer-skipGroups"),!(!v&&!g&&(i.skipRowGroups||C||f)||i.onlySelected&&!o.isSelected()||i.skipPinnedTop&&"top"===o.rowPinned||i.skipPinnedBottom&&"bottom"===o.rowPinned)&&(-1!==o.level||v||g)&&!s({node:o,api:l,columnApi:u,context:a})){var b=e.onNewBodyRow(o);if(n.forEach(function(x,D){b.onColumn(x,D,o)}),i.getCustomContentBelowRow){var O=i.getCustomContentBelowRow({node:o,api:l,columnApi:u,context:a});O&&e.addCustomContent(O)}}},t.prototype.appendContent=function(e){return function(i){var n=e.customFooter||e.appendContent;return n&&(e.customFooter&&ne.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")},"gridSerializer-customFooter"),i.addCustomContent(n)),i}},t.prototype.prependContent=function(e){return function(i){var n=e.customHeader||e.prependContent;return n&&(e.customHeader&&ne.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")},"gridSerializer-customHeader"),i.addCustomContent(n)),i}},t.prototype.prepareSession=function(e){return function(i){return i.prepare(e),i}},t.prototype.exportColumnGroups=function(e,i){var n=this;return function(o){if(e.skipColumnGroupHeaders)e.columnGroups&&ne.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")},"gridSerializer-columnGroups");else{var s=new gp,a=n.displayedGroupCreator.createDisplayedGroups(i,s,null);n.recursivelyAddHeaderGroups(a,o,e.processGroupHeaderCallback)}return o}},t.prototype.exportHeaders=function(e,i){return function(n){if(e.skipHeader||e.skipColumnHeaders)e.skipHeader&&ne.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")},"gridSerializer-skipHeader");else{var o=n.onNewHeaderRow();i.forEach(function(s,a){o.onColumn(s,a,void 0)})}return n}},t.prototype.processPinnedTopRows=function(e,i){var n=this;return function(o){var s=n.processRow.bind(n,o,e,i);return e.rowPositions?e.rowPositions.filter(function(a){return"top"===a.rowPinned}).sort(function(a,l){return a.rowIndex-l.rowIndex}).map(function(a){return n.pinnedRowModel.getPinnedTopRow(a.rowIndex)}).forEach(s):n.pinnedRowModel.forEachPinnedTopRow(s),o}},t.prototype.processRows=function(e,i){var n=this;return function(o){var s=n.rowModel,a=s.getType(),l="clientSide"===a,u="serverSide"===a,c=!l&&e.onlySelected,d=n.processRow.bind(n,o,e,i),h=e.exportedRows,p=void 0===h?"filteredAndSorted":h;if(e.rowPositions)e.rowPositions.filter(function(v){return null==v.rowPinned}).sort(function(v,g){return v.rowIndex-g.rowIndex}).map(function(v){return s.getRow(v.rowIndex)}).forEach(d);else if(n.columnModel.isPivotMode())l?s.forEachPivotNode(d,!0):u?s.forEachNodeAfterFilterAndSort(d,!0):s.forEachNode(d);else if(e.onlySelectedAllPages||c){var f=n.selectionService.getSelectedNodes();n.replicateSortedOrder(f),f.forEach(d)}else"all"===p?s.forEachNode(d):l||u?s.forEachNodeAfterFilterAndSort(d,!0):s.forEachNode(d);return o}},t.prototype.replicateSortedOrder=function(e){var i=this,n=this.sortController.getSortOptions(),o=function(s,a){var l,u,c,d;return null!=s.rowIndex&&null!=a.rowIndex?s.rowIndex-a.rowIndex:s.level===a.level?(null===(l=s.parent)||void 0===l?void 0:l.id)===(null===(u=a.parent)||void 0===u?void 0:u.id)?i.rowNodeSorter.compareRowNodes(n,{rowNode:s,currentPos:null!==(c=s.rowIndex)&&void 0!==c?c:-1},{rowNode:a,currentPos:null!==(d=a.rowIndex)&&void 0!==d?d:-1}):o(s.parent,a.parent):s.level>a.level?o(s.parent,a):o(s,a.parent)};e.sort(o)},t.prototype.processPinnedBottomRows=function(e,i){var n=this;return function(o){var s=n.processRow.bind(n,o,e,i);return e.rowPositions?e.rowPositions.filter(function(a){return"bottom"===a.rowPinned}).sort(function(a,l){return a.rowIndex-l.rowIndex}).map(function(a){return n.pinnedRowModel.getPinnedBottomRow(a.rowIndex)}).forEach(s):n.pinnedRowModel.forEachPinnedBottomRow(s),o}},t.prototype.getColumnsToExport=function(e,i){void 0===e&&(e=!1);var n=this.columnModel.isPivotMode();return i&&i.length?this.columnModel.getGridColumns(i):e&&!n?(this.gridOptionsService.is("treeData")?this.columnModel.getGridColumns([vr]):[]).concat(this.columnModel.getAllGridColumns()||[]):this.columnModel.getAllDisplayedColumns()},t.prototype.recursivelyAddHeaderGroups=function(e,i,n){var o=[];e.forEach(function(s){s.getChildren&&s.getChildren().forEach(function(l){return o.push(l)})}),e.length>0&&e[0]instanceof yt&&this.doAddHeaderHeader(i,e,n),o&&o.length>0&&this.recursivelyAddHeaderGroups(o,i,n)},t.prototype.doAddHeaderHeader=function(e,i,n){var o=this,s=e.onNewHeaderGroupingRow(),a=0;i.forEach(function(l){var c,u=l;c=n?n({columnGroup:u,api:o.gridOptionsService.api,columnApi:o.gridOptionsService.columnApi,context:o.gridOptionsService.context}):o.columnModel.getDisplayNameForColumnGroup(u,"header");var d=u.getLeafColumns().reduce(function(h,p,f,v){var g=ne.last(h);return"open"===p.getColumnGroupShow()?(!g||null!=g[1])&&h.push(g=[f]):g&&null==g[1]&&(g[1]=f-1),f===v.length-1&&g&&null==g[1]&&(g[1]=f),h},[]);s.onColumn(u,c||"",a++,u.getLeafColumns().length-1,d)})},go([S("displayedGroupCreator")],t.prototype,"displayedGroupCreator",void 0),go([S("columnModel")],t.prototype,"columnModel",void 0),go([S("rowModel")],t.prototype,"rowModel",void 0),go([S("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),go([S("selectionService")],t.prototype,"selectionService",void 0),go([S("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),go([S("sortController")],t.prototype,"sortController",void 0),go([X("gridSerializer")],t)}(k),oD={version:"30.2.0",moduleName:q.CsvExportModule,beans:[Jx,iD]},sD=(function(){function r(){}r.createHeader=function(t){void 0===t&&(t={});var n=["version"];return t.version||(t.version="1.0"),t.encoding&&n.push("encoding"),t.standalone&&n.push("standalone"),"<?xml "+n.map(function(s){return s+'="'+t[s]+'"'}).join(" ")+" ?>"},r.createXml=function(t,e){var i=this,n="";t.properties&&(t.properties.prefixedAttributes&&t.properties.prefixedAttributes.forEach(function(s){Object.keys(s.map).forEach(function(a){n+=i.returnAttributeIfPopulated(s.prefix+a,s.map[a],e)})}),t.properties.rawMap&&Object.keys(t.properties.rawMap).forEach(function(s){n+=i.returnAttributeIfPopulated(s,t.properties.rawMap[s],e)}));var o="<"+t.name+n;return t.children||null!=t.textNode?null!=t.textNode?o+">"+t.textNode+"</"+t.name+">\r\n":(o+=">\r\n",t.children&&t.children.forEach(function(s){o+=i.createXml(s,e)}),o+"</"+t.name+">\r\n"):o+"/>\r\n"},r.returnAttributeIfPopulated=function(t,e,i){if(!e&&""!==e&&0!==e)return"";var n=e;return"boolean"==typeof e&&i&&(n=i(e))," "+t+'="'+n+'"'}}(),new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]));!function(){function r(){}r.addFolders=function(t){t.forEach(this.addFolder.bind(this))},r.addFolder=function(t){this.folders.push({path:t,created:new Date,isBase64:!1})},r.addFile=function(t,e,i){void 0===i&&(i=!1),this.files.push({path:t,created:new Date,content:e,isBase64:i})},r.getContent=function(t){void 0===t&&(t="application/zip");var e=this.buildFileStream(),i=this.buildUint8Array(e);return this.clearStream(),new Blob([i],{type:t})},r.clearStream=function(){this.folders=[],this.files=[]},r.buildFileStream=function(t){var e,i;void 0===t&&(t="");var n=this.folders.concat(this.files),o=n.length,s="",a=0,l=0;try{for(var u=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),c=u.next();!c.done;c=u.next()){var h=this.getHeader(c.value,a),p=h.fileHeader,f=h.folderHeader,v=h.content;a+=p.length+v.length,l+=f.length,t+=p+v,s+=f}}catch(y){e={error:y}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return t+s+this.buildFolderEnd(o,l,a)},r.getHeader=function(t,e){var i=t.content,n=t.path,o=t.created,s=t.isBase64,l=ne.decToHex,u=(0,ne.utf8_encode)(n),c=u!==n,d=this.convertTime(o),h=this.convertDate(o),p="";if(c){var f=l(1,1)+l(this.getFromCrc32Table(u),4)+u;p="up"+l(f.length,2)+f}var v=i?this.getConvertedContent(i,s):{size:0,content:""},g=v.size,y=v.content,m="\n\0"+(c?"\0\b":"\0\0")+"\0\0"+l(d,2)+l(h,2)+l(g?this.getFromCrc32Table(y):0,4)+l(g,4)+l(g,4)+l(u.length,2)+l(p.length,2);return{fileHeader:"PK\x03\x04"+m+u+p,folderHeader:"PK\x01\x02\x14\0"+m+"\0\0\0\0\0\0"+(i?"\0\0\0\0":"\x10\0\0\0")+l(e,4)+u+p,content:y||""}},r.getConvertedContent=function(t,e){return void 0===e&&(e=!1),e&&(t=t.split(";base64,")[1]),{size:(t=e?atob(t):t).length,content:t}},r.buildFolderEnd=function(t,e,i){var n=ne.decToHex;return"PK\x05\x06\0\0\0\0"+n(t,2)+n(t,2)+n(e,4)+n(i,4)+"\0\0"},r.buildUint8Array=function(t){for(var e=new Uint8Array(t.length),i=0;i<e.length;i++)e[i]=t.charCodeAt(i);return e},r.getFromCrc32Table=function(t){if(!t.length)return 0;for(var e=t.length,i=new Uint8Array(e),n=0;n<e;n++)i[n]=t.charCodeAt(n);var o=-1;for(n=0;n<e;n++)o=o>>>8^sD[255&(o^i[n])];return-1^o},r.convertTime=function(t){var e=t.getHours();return e<<=6,e|=t.getMinutes(),(e<<=5)|t.getSeconds()/2},r.convertDate=function(t){var e=t.getFullYear()-1980;return e<<=4,e|=t.getMonth()+1,(e<<=5)|t.getDate()},r.folders=[],r.files=[]}(),oe.registerModules([kx,Kx,oD]);let Nv=(()=>{class r extends pv{constructor(e){super(),this._ngZone=e}setEmitterUsedCallback(e){this.isEmitterUsed=e}setTimeout(e,i){this._ngZone?this._ngZone.runOutsideAngular(()=>{window.setTimeout(()=>{e()},i)}):window.setTimeout(()=>{e()},i)}setInterval(e,i){return new jt(n=>{this._ngZone?this._ngZone.runOutsideAngular(()=>{n(window.setInterval(()=>{e()},i))}):n(window.setInterval(()=>{e()},i))})}addEventListener(e,i,n,o){this.isOutsideAngular(i)&&this._ngZone?this._ngZone.runOutsideAngular(()=>{e.addEventListener(i,n,o)}):e.addEventListener(i,n,o)}dispatchEvent(e,i,n=!1){this.isOutsideAngular(e)?this._ngZone?this._ngZone.runOutsideAngular(i):i():(this.isEmitterUsed(e)||n)&&(!P.R0b.isInAngularZone()&&this._ngZone?this._ngZone.run(i):i())}isFrameworkComponent(e){if(!e)return!1;const i=e.prototype;return i&&"agInit"in i}}return r.\u0275fac=function(e){return new(e||r)(P.LFG(P.R0b))},r.\u0275prov=P.Yz7({token:r,factory:r.\u0275fac}),r})(),Gv=(()=>{class r extends Cx{setViewContainerRef(e){this.viewContainerRef=e}setComponentFactoryResolver(e){this.componentFactoryResolver=e}createWrapper(e){let i=this,o=new class n extends lD{init(a){super.init(a),this._componentRef.changeDetectorRef.detectChanges()}createComponent(){return i.createComponent(e)}hasMethod(a){return null!=o.getFrameworkComponentInstance()[a]}callMethod(a,l){const u=this.getFrameworkComponentInstance();return o.getFrameworkComponentInstance()[a].apply(u,l)}addMethod(a,l){o[a]=l}};return o}createComponent(e){let i=this.componentFactoryResolver.resolveComponentFactory(e);return this.viewContainerRef.createComponent(i)}}return r.\u0275fac=function(){let t;return function(i){return(t||(t=P.n5z(r)))(i||r)}}(),r.\u0275prov=P.Yz7({token:r,factory:r.\u0275fac}),r})();class lD{init(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}destroy(){this._frameworkComponentInstance&&"function"==typeof this._frameworkComponentInstance.destroy&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}}let uD=(()=>{class r{constructor(e,i,n,o,s){this.viewContainerRef=i,this.angularFrameworkOverrides=n,this.frameworkComponentWrapper=o,this.componentFactoryResolver=s,this._initialised=!1,this._destroyed=!1,this._fullyReady=jt.resolve(!0),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterMovesDown=void 0,this.enterMovesDownAfterEdit=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.excludeHiddenColumnsFromQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.enableChartToolPanelsButton=void 0,this.suppressChartToolPanelsButton=void 0,this.chartToolPanelsDef=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressParentsInRowNodes=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.suppressAggAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDelay=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.rememberGroupStateWhenNewData=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.serverSideStoreType=void 0,this.suppressServerSideInfiniteScroll=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideFilterAllLevels=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSideSortingAlwaysResets=void 0,this.serverSideFilteringAlwaysResets=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.functionsPassive=void 0,this.enableGroupEdit=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processSecondaryColDef=void 0,this.processSecondaryColGroupDef=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.getServerSideStoreParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new P.vpe,this.toolPanelSizeChanged=new P.vpe,this.cutStart=new P.vpe,this.cutEnd=new P.vpe,this.pasteStart=new P.vpe,this.pasteEnd=new P.vpe,this.columnVisible=new P.vpe,this.columnPinned=new P.vpe,this.columnResized=new P.vpe,this.columnMoved=new P.vpe,this.columnValueChanged=new P.vpe,this.columnPivotModeChanged=new P.vpe,this.columnPivotChanged=new P.vpe,this.columnGroupOpened=new P.vpe,this.newColumnsLoaded=new P.vpe,this.gridColumnsChanged=new P.vpe,this.displayedColumnsChanged=new P.vpe,this.virtualColumnsChanged=new P.vpe,this.columnEverythingChanged=new P.vpe,this.componentStateChanged=new P.vpe,this.cellValueChanged=new P.vpe,this.cellEditRequest=new P.vpe,this.rowValueChanged=new P.vpe,this.cellEditingStarted=new P.vpe,this.cellEditingStopped=new P.vpe,this.rowEditingStarted=new P.vpe,this.rowEditingStopped=new P.vpe,this.undoStarted=new P.vpe,this.undoEnded=new P.vpe,this.redoStarted=new P.vpe,this.redoEnded=new P.vpe,this.rangeDeleteStart=new P.vpe,this.rangeDeleteEnd=new P.vpe,this.filterOpened=new P.vpe,this.filterChanged=new P.vpe,this.filterModified=new P.vpe,this.advancedFilterBuilderVisibleChanged=new P.vpe,this.chartCreated=new P.vpe,this.chartRangeSelectionChanged=new P.vpe,this.chartOptionsChanged=new P.vpe,this.chartDestroyed=new P.vpe,this.cellKeyDown=new P.vpe,this.gridReady=new P.vpe,this.gridPreDestroyed=new P.vpe,this.firstDataRendered=new P.vpe,this.gridSizeChanged=new P.vpe,this.modelUpdated=new P.vpe,this.virtualRowRemoved=new P.vpe,this.viewportChanged=new P.vpe,this.bodyScroll=new P.vpe,this.bodyScrollEnd=new P.vpe,this.dragStarted=new P.vpe,this.dragStopped=new P.vpe,this.paginationChanged=new P.vpe,this.rowDragEnter=new P.vpe,this.rowDragMove=new P.vpe,this.rowDragLeave=new P.vpe,this.rowDragEnd=new P.vpe,this.columnRowGroupChanged=new P.vpe,this.rowGroupOpened=new P.vpe,this.expandOrCollapseAll=new P.vpe,this.pinnedRowDataChanged=new P.vpe,this.rowDataChanged=new P.vpe,this.rowDataUpdated=new P.vpe,this.asyncTransactionsFlushed=new P.vpe,this.storeRefreshed=new P.vpe,this.cellClicked=new P.vpe,this.cellDoubleClicked=new P.vpe,this.cellFocused=new P.vpe,this.cellMouseOver=new P.vpe,this.cellMouseOut=new P.vpe,this.cellMouseDown=new P.vpe,this.rowClicked=new P.vpe,this.rowDoubleClicked=new P.vpe,this.rowSelected=new P.vpe,this.selectionChanged=new P.vpe,this.cellContextMenu=new P.vpe,this.rangeSelectionChanged=new P.vpe,this.tooltipShow=new P.vpe,this.tooltipHide=new P.vpe,this.sortChanged=new P.vpe,this.columnRowGroupChangeRequest=new P.vpe,this.columnPivotChangeRequest=new P.vpe,this.columnValueChangeRequest=new P.vpe,this.columnAggFuncChangeRequest=new P.vpe,this._nativeElement=e.nativeElement}ngAfterViewInit(){this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef),this.frameworkComponentWrapper.setComponentFactoryResolver(this.componentFactoryResolver),this.angularFrameworkOverrides.setEmitterUsedCallback(this.isEmitterUsed.bind(this)),this.gridOptions=gr.copyAttributesToGridOptions(this.gridOptions,this),this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]},new gx(this._nativeElement,this.gridOptions,this.gridParams),this.gridOptions.api&&(this.api=this.gridOptions.api),this.gridOptions.columnApi&&(this.columnApi=this.gridOptions.columnApi),this.gridPreDestroyed.observers.length>0&&console.warn('AG Grid: gridPreDestroyed event listener registered via (gridPreDestroyed)="method($event)" will be ignored! Please assign via gridOptions.gridPreDestroyed and pass to the grid as [gridOptions]="gridOptions"'),this._initialised=!0,this._fullyReady.resolveNow(null,e=>e)}ngOnChanges(e){this._initialised&&gr.processOnChange(e,this.api)}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api&&this.api.destroy())}isEmitterUsed(e){const i=this[e],n=!!i&&i.observers&&i.observers.length>0,o=`on${e.charAt(0).toUpperCase()}${e.substring(1)}`;return n||!!this.gridOptions&&!!this.gridOptions[o]}globalEventListener(e,i){if(this._destroyed)return;const n=this[e];n&&this.isEmitterUsed(e)&&("gridReady"===e?this._fullyReady.then(o=>{n.emit(i)}):n.emit(i))}}return r.\u0275fac=function(e){return new(e||r)(P.Y36(P.SBq),P.Y36(P.s_b),P.Y36(Nv),P.Y36(Gv),P.Y36(P._Vd))},r.\u0275cmp=P.Xpm({type:r,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterMovesDown:"enterMovesDown",enterMovesDownAfterEdit:"enterMovesDownAfterEdit",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",excludeHiddenColumnsFromQuickFilter:"excludeHiddenColumnsFromQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",enableChartToolPanelsButton:"enableChartToolPanelsButton",suppressChartToolPanelsButton:"suppressChartToolPanelsButton",chartToolPanelsDef:"chartToolPanelsDef",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressParentsInRowNodes:"suppressParentsInRowNodes",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",suppressAggAtRootLevel:"suppressAggAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDelay:"cellFlashDelay",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",rememberGroupStateWhenNewData:"rememberGroupStateWhenNewData",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",serverSideStoreType:"serverSideStoreType",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideFilterAllLevels:"serverSideFilterAllLevels",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSideSortingAlwaysResets:"serverSideSortingAlwaysResets",serverSideFilteringAlwaysResets:"serverSideFilteringAlwaysResets",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",functionsPassive:"functionsPassive",enableGroupEdit:"enableGroupEdit",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processSecondaryColDef:"processSecondaryColDef",processSecondaryColGroupDef:"processSecondaryColGroupDef",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",getServerSideStoreParams:"getServerSideStoreParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",gridPreDestroyed:"gridPreDestroyed",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataChanged:"rowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged",columnRowGroupChangeRequest:"columnRowGroupChangeRequest",columnPivotChangeRequest:"columnPivotChangeRequest",columnValueChangeRequest:"columnValueChangeRequest",columnAggFuncChangeRequest:"columnAggFuncChangeRequest"},features:[P._Bn([Nv,Gv]),P.TTD],decls:0,vars:0,template:function(e,i){},encapsulation:2}),r})(),cD=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=P.oAB({type:r}),r.\u0275inj=P.cJS({}),r})();class Ar{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var n;const o=null===(n=this._rangeCallback)||void 0===n?void 0:n.call(this,t,e),s=this._encode(i?this.floor(t):this.ceil(t)),a=this._encode(i?this.ceil(e):this.floor(e));if(a<s)return[];const l=[];for(let u=s;u<=a;u++){const c=this._decode(u);l.push(c)}return o?.(),l}}class li extends Ar{getOffset(t,e){const i="number"==typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let n,i=0;const{snapTo:o="start"}=e??{};if("string"==typeof o){const u=i;n=(c,d)=>(i=this.getOffset("start"===o?c:d,t),()=>i=u)}else"number"==typeof o?i=this.getOffset(new Date(o),t):o instanceof Date&&(i=this.getOffset(o,t));return new Ar(u=>{const c=this._encode(u);return Math.floor((c-i)/t)},u=>this._decode(u*t+i),n)}}const pD=new li(function dD(r){return r.getTime()},function hD(r){return new Date(r)}),qo=(new Date(0).getFullYear(),1e3),ui=6e4,cn=60*ui,yo=24*cn,ia=7*yo,na=30*yo,zl=365*yo,kv=(new Date).getTimezoneOffset()*ui,gD=new li(function fD(r){return Math.floor((r.getTime()-kv)/qo)},function vD(r){return new Date(kv+r*qo)}),Hv=(new Date).getTimezoneOffset()*ui,CD=new li(function yD(r){return Math.floor((r.getTime()-Hv)/ui)},function mD(r){return new Date(Hv+r*ui)}),Vv=(new Date).getTimezoneOffset()*ui,_D=new li(function wD(r){return Math.floor((r.getTime()-Vv)/cn)},function SD(r){return new Date(Vv+r*cn)}),RD=new li(function ED(r){const t=6e4*r.getTimezoneOffset();return Math.floor((r.getTime()-t)/yo)},function bD(r){const t=new Date(1970,0,1);return t.setDate(t.getDate()+r),t});function Zo(r){const t=new Date(2023,0,1+r).getTime();return new li(function e(n){const o=n.getTime();return Math.floor((o-t)/ia)},function i(n){const o=new Date(t);return o.setDate(o.getDate()+7*n),o})}const OD=Zo(0),xD=(Zo(1),Zo(2),Zo(3),Zo(4),Zo(5),Zo(6),OD),PD=new li(function DD(r){return 12*r.getFullYear()+r.getMonth()},function TD(r){const t=Math.floor(r/12);return new Date(t,r-12*t,1)}),MD=new li(function AD(r){return r.getFullYear()},function LD(r){const t=new Date;return t.setFullYear(r),t.setMonth(0,1),t.setHours(0,0,0,0),t});new li(function FD(r){return Math.floor(r.getTime()/ui)},function ID(r){return new Date(r*ui)}),new li(function ND(r){return Math.floor(r.getTime()/cn)},function GD(r){return new Date(r*cn)}),new li(function kD(r){return Math.floor(r.getTime()/yo)},function HD(r){const t=new Date(0);return t.setUTCDate(t.getUTCDate()+r),t.setUTCHours(0,0,0,0),t}),new li(function VD(r){return 12*r.getUTCFullYear()+r.getUTCMonth()},function BD(r){const t=Math.floor(r/12);return new Date(Date.UTC(t,r-12*t,1))}),new li(function WD(r){return r.getUTCFullYear()},function jD(r){const t=new Date;return t.setUTCFullYear(r),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t});const UD=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function Bv(){const r=navigator.userAgent;return!UD.some(t=>t.test(r))}let qe=(()=>{class r{constructor({document:e=window.document,width:i=600,height:n=300,domLayer:o=!1,zIndex:s=0,name:a,overrideDevicePixelRatio:l}){this._container=void 0,this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.document=e,this.element=e.createElement("canvas"),this.element.width=i,this.element.height=n,this.context=this.element.getContext("2d"),this.imageSource=this.context.canvas;const{style:u}=this.element;u.userSelect="none",u.display="block",o&&(u.position="absolute",u.zIndex=String(s),u.top="0",u.left="0",u.pointerEvents="none",u.opacity="1",a&&(this.element.id=a)),this.setPixelRatio(l),this.resize(i,n)}set container(e){this._container!==e&&(this.remove(),e&&e.appendChild(this.element),this._container=e)}get container(){return this._container}set enabled(e){this.element.style.display=e?"block":"none",this._enabled=!!e}get enabled(){return this._enabled}remove(){const{parentNode:e}=this.element;e?.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const e=this.document.createElement("img");return e.src=this.getDataURL(),e}getDataURL(e){return this.element.toDataURL(e)}download(e,i="image/png"){e=(e??"").trim()||"image";const n=this.getDataURL(i),o=this.document,s=o.createElement("a");s.href=n,s.download=e,s.style.display="none",o.body.appendChild(s),s.click(),o.body.removeChild(s)}get pixelRatio(){return this._pixelRatio}setPixelRatio(e){let i=e??window.devicePixelRatio;Bv()||(i=1),r.overrideScale(this.context,i),this._pixelRatio=i}set pixelated(e){this.element.style.imageRendering=e?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(e,i){if(!(e>0&&i>0))return;const{element:n,context:o,pixelRatio:s}=this;n.width=Math.round(e*s),n.height=Math.round(i*s),n.style.width=e+"px",n.style.height=i+"px",o.resetTransform(),this._width=e,this._height=i}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const e=document.createElement("canvas");return this._textMeasuringContext=e.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const e="http://www.w3.org/2000/svg",i=document.createElementNS(e,"svg");i.setAttribute("width","100"),i.setAttribute("height","100"),i.classList?i.classList.add("text-measuring-svg"):i.setAttribute("class","text-measuring-svg"),i.style.position="absolute",i.style.top="-1000px",i.style.visibility="hidden";const n=document.createElementNS(e,"text");return n.setAttribute("x","0"),n.setAttribute("y","30"),n.setAttribute("text","black"),i.appendChild(n),document.body.appendChild(i),this._svgText=n,n}static get has(){if(this._has)return this._has;const e=navigator.userAgent.indexOf("Chrome")>-1,i=navigator.userAgent.indexOf("Firefox")>-1,n=!e&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!i&&!n,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(e,i,n,o){const s=this.textMeasuringContext;return s.font=i,s.textBaseline=n,s.textAlign=o,s.measureText(e)}static getTextSize(e,i){if(this.has.textMetrics){const n=this.textMeasuringContext;n.font=i;const o=n.measureText(e);return{width:o.width,height:o.actualBoundingBoxAscent+o.actualBoundingBoxDescent}}return this.measureSvgText(e,i)}static measureSvgText(e,i){const n=this.textSizeCache,o=n[i];if(o){const u=o[e];if(u)return u}else n[i]={};const s=this.svgText;s.style.font=i,s.textContent=e;const a=s.getBBox(),l={width:a.width,height:a.height};return n[i][e]=l,l}static overrideScale(e,i){let n=0;const o={save(){this.$save(),n++},restore(){if(!(n>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),n--},setTransform(s,a,l,u,c,d){"object"==typeof s?this.$setTransform(s):this.$setTransform(s*i,a*i,l*i,u*i,c*i,d*i)},resetTransform(){this.$setTransform(i,0,0,i,0,0)},verifyDepthZero(){if(0!==n)throw new Error("AG Charts - Save/restore depth is non-zero: "+n)}};for(const s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e["$"+s]||(e["$"+s]=e[s]),e[s]=o[s])}}return r.textSizeCache={},r})();class be{constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}clone(){const{x:t,y:e,width:i,height:n}=this;return new be(t,e,i,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}shrink(t,e){const i=(n,o)=>{switch(n){case"top":this.y+=o;case"bottom":this.height-=o;break;case"left":this.x+=o;case"right":this.width-=o;break;case"vertical":this.y+=o,this.height-=2*o;break;case"horizontal":this.x+=o,this.width-=2*o;break;default:this.x+=o,this.width-=2*o,this.y+=o,this.height-=2*o}};return"number"==typeof t?i(e,t):Object.entries(t).forEach(([n,o])=>i(n,o)),this}grow(t,e){if("number"==typeof t)this.shrink(-t,e);else{const i=Object.assign({},t);for(const n in i)i[n]*=-1;this.shrink(i)}return this}static merge(t){let e=1/0,i=1/0,n=-1/0,o=-1/0;return t.forEach(s=>{s.x<e&&(e=s.x),s.y<i&&(i=s.y),s.x+s.width>n&&(n=s.x+s.width),s.y+s.height>o&&(o=s.y+s.height)}),new be(e,i,n-e,o-i)}}class qt{constructor(t=[1,0,0,1,0,0]){this.elements=t}get e(){return[...this.elements]}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const o=t[1]*e[0]+t[3]*e[1],s=t[0]*e[2]+t[2]*e[3],a=t[1]*e[2]+t[3]*e[3],l=t[0]*e[4]+t[2]*e[5]+t[4],u=t[1]*e[4]+t[3]*e[5]+t[5];(i=i??t)[0]=t[0]*e[0]+t[2]*e[1],i[1]=o,i[2]=s,i[3]=a,i[4]=l,i[5]=u}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const e=new Array(6);return this.AxB(this.elements,t.elements,e),new qt(e)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let e=t[0],i=t[1],n=t[2],o=t[3];const s=t[4],a=t[5],l=1/(e*o-i*n);return e*=l,i*=l,n*=l,o*=l,new qt([o,-i,-n,e,n*a-o*s,i*s-e*a])}inverseTo(t){const e=this.elements;let i=e[0],n=e[1],o=e[2],s=e[3];const a=e[4],l=e[5],u=1/(i*s-n*o);return i*=u,n*=u,o*=u,s*=u,t.setElements([s,-n,-o,i,o*l-s*a,n*a-i*l]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],n=t[2],o=t[3];const s=t[4],a=t[5],l=1/(e*o-i*n);return e*=l,i*=l,n*=l,o*=l,t[0]=o,t[1]=-i,t[2]=-n,t[3]=e,t[4]=n*a-o*s,t[5]=i*s-e*a,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,n=i[0],o=i[1],s=i[2],a=i[3],l=.5*t.width,u=.5*t.height,c=t.x+l,d=t.y+u,h=Math.abs(l*n)+Math.abs(u*s),p=Math.abs(l*o)+Math.abs(u*a);return e||(e=new be(0,0,0,0)),e.x=c*n+d*s+i[4]-h,e.y=c*o+d*a+i[5]-p,e.width=h+h,e.height=p+p,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(t){return qt.instance.setElements(t.elements)}static updateTransformMatrix(t,e,i,n,o,s,a){const[l,u]=[0,0],c=e,d=i;let h,p;1===c&&1===d?(h=0,p=0):(h=null==a?.scalingCenterX?l:a?.scalingCenterX,p=null==a?.scalingCenterY?u:a?.scalingCenterY);const f=n,v=Math.cos(f),g=Math.sin(f);let y,m;0===f?(y=0,m=0):(y=null==a?.rotationCenterX?l:a?.rotationCenterX,m=null==a?.rotationCenterY?u:a?.rotationCenterY);const _=h*(1-c)-y,b=p*(1-d)-m;return t.setElements([v*c,g*c,-g*d,v*d,v*_-g*b+y+o,g*_+v*b+m+s]),t}static fromContext(t){const e=t.getTransform();return new qt([e.a,e.b,e.c,e.d,e.e,e.f])}}qt.instance=new qt;const Kl={};function mo(r){var t;const e=r.constructor,i=Object.prototype.hasOwnProperty.call(e,"className")?e.className:e.name;if(!i)throw new Error(`The ${e} is missing the 'className' property.`);const n=(null!==(t=Kl[i])&&void 0!==t?t:0)+1;return Kl[i]=n,i+"-"+n}var W=function(r){return r[r.NONE=0]="NONE",r[r.TRIVIAL=1]="TRIVIAL",r[r.MINOR=2]="MINOR",r[r.MAJOR=3]="MAJOR",r}(W||{});const KD=function zD(){try{return new Function("return true"),!0}catch{return!1}}();function te(r){const{changeCb:t,convertor:e}=r??{};return function(i,n){const o=`__${n}`;i[n]||(KD&&null==t&&null==e?function $D(r,t,e,i){const{redraw:n=W.TRIVIAL,type:o="normal",checkDirtyOnAssignment:s=!1}=i??{},a=new Function("value",`\n        const oldValue = this.${e};\n        if (value !== oldValue) {\n            this.${e} = value;\n            ${"normal"===o?`this.markDirty(this, ${n});`:""}\n            ${"transform"===o?`this.markDirtyTransform(${n});`:""}\n            ${"path"===o?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${n}); }`:""}\n            ${"font"===o?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${n}); }`:""}\n        }\n        ${s?`if (value != null && value._dirty > ${W.NONE}) { this.markDirty(value, value._dirty); }`:""}\n`),l=new Function(`return this.${e};`);Object.defineProperty(r,t,{set:a,get:l,enumerable:!0,configurable:!0})}(i,n,o,r):function YD(r,t,e,i){const{redraw:n=W.TRIVIAL,type:o="normal",changeCb:s,convertor:a,checkDirtyOnAssignment:l=!1}=i??{};Object.defineProperty(r,t,{set:function(d){const h=this[e];(d=a?a(d):d)!==h&&(this[e]=d,"normal"===o&&this.markDirty(this,n),"transform"===o&&this.markDirtyTransform(n),"path"===o&&!this._dirtyPath&&(this._dirtyPath=!0,this.markDirty(this,n)),"font"===o&&!this._dirtyFont&&(this._dirtyFont=!0,this.markDirty(this,n)),s&&s(this)),l&&null!=d&&d._dirty>W.NONE&&this.markDirty(d,d._dirty)},get:function(){return this[e]},enumerable:!0,configurable:!0})}(i,n,o,r))}}class Kd{constructor(){this._dirty=W.MAJOR}markDirty(t,e=W.TRIVIAL){this._dirty>e||(this._dirty=e)}markClean(t){this._dirty=W.NONE}isDirty(){return this._dirty>W.NONE}}var Ti=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Zt=function(r){return r[r.All=0]="All",r[r.None=1]="None",r}(Zt||{});const Wv=r=>{r.parent&&(r.parent.dirtyZIndex=!0),r.zIndexChanged()};class st extends Kd{constructor({isVirtual:t}={}){super(),this.serialNumber=st._nextSerialNumber++,this.id=mo(this),this.tag=NaN,this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new qt,this.inverseMatrix=new qt,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=Zt.All,this.isVirtual=t??!1}get datum(){var t;return void 0!==this._datum?this._datum:null===(t=this._parent)||void 0===t?void 0:t.datum}set datum(t){this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=t?.debug;for(const e of this._children)e._setLayerManager(t);for(const e of this._virtualChildren)e._setLayerManager(t)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){if(0===this._virtualChildren.length)return this._children;const t=[...this._children];for(const e of this._virtualChildren)t.push(...e.children);return t}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error(`${e} already belongs to another parent: ${e.parent}.`);if(e.layerManager)throw new Error(`${e} already belongs to a scene: ${e.layerManager}.`);if(this.childSet[e.id])throw new Error(`Duplicate ${e.constructor.name} node: ${e}`);e.isVirtual?this._virtualChildren.push(e):this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,W.MAJOR)}appendChild(t){return this.append(t),t}removeChild(t){const e=()=>{throw new Error("The node to be removed is not a child of this node.")};if(t.parent!==this&&e(),t.isVirtual){const i=this._virtualChildren.indexOf(t);i<0&&e(),this._virtualChildren.splice(i,1)}else{const i=this._children.indexOf(t);i<0&&e(),this._children.splice(i,1)}return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,W.MAJOR),t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=qt.flyweight(this.matrix);let e=this.parent;for(;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,W.MAJOR)}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||this.pointerEvents===Zt.None||!this.containsPoint(t,e))return;const n=this.children;if(n.length>1e3)for(let o=n.length-1;o>=0;o--){const s=n[o],l=(null===(i=s.computeTransformedBBox())||void 0===i?void 0:i.containsPoint(t,e))?s.pickNode(t,e):void 0;if(l)return l}else if(n.length)for(let o=n.length-1;o>=0;o--){const s=n[o].pickNode(t,e);if(s)return s}else if(!this.isContainerNode)return this}findNodes(t){const e=t(this)?[this]:[];for(const i of this.children){const n=i.findNodes(t);n&&e.push(...n)}return e}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=qt.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),e.preMultiplySelf(i.matrix),i=i.parent;return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:n,translationX:o,translationY:s,scalingCenterX:a,scalingCenterY:l,rotationCenterX:u,rotationCenterY:c}=this;qt.updateTransformMatrix(t,e,i,n,o,s,{scalingCenterX:a,scalingCenterY:l,rotationCenterX:u,rotationCenterY:c}),t.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}render(t){const{stats:e}=t;this._dirty=W.NONE,e&&e.nodesRendered++}clearBBox(t){const e=this.computeBBox();if(null==e)return;const{x:i,y:n,width:o,height:s}=e,a=this.transformPoint(i,n),l=this.transformPoint(i+o,n+s);t.clearRect(a.x,a.y,l.x-a.x,l.y-a.y)}markDirty(t,e=W.TRIVIAL,i=e){this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=t??{};if(this._dirty!==W.NONE||e){if(this._dirty=W.NONE,!1!==i)for(const n of this._virtualChildren)n.markClean({force:e});if(!0===i)for(const n of this._children)n.markClean({force:e})}}visibilityChanged(){}get nodeCount(){let t=1,e=this._dirty>=W.NONE||this.dirtyTransform?1:0,i=this.visible?1:0;const n=o=>{const{count:s,visibleCount:a,dirtyCount:l}=o.nodeCount;t+=s,i+=a,e+=l};for(const o of this._children)n(o);for(const o of this._virtualChildren)n(o);return{count:t,visibleCount:i,dirtyCount:e}}zIndexChanged(){}}function jv(r,t){let e=0;return"number"==typeof r&&"number"==typeof t?e=r-t:"string"==typeof r&&"string"==typeof t?e=r.localeCompare(t):null==r&&null==t||(e=null==r?-1:null==t?1:String(r).localeCompare(String(t))),e}function Uv(r,t,e){const i=n=>"function"==typeof n?n():n;for(const n in r){const o=e(i(r[n]),i(t[n]));if(0!==o)return o}return 0}st._nextSerialNumber=0,Ti([te({type:"transform"})],st.prototype,"scalingX",void 0),Ti([te({type:"transform"})],st.prototype,"scalingY",void 0),Ti([te({type:"transform"})],st.prototype,"scalingCenterX",void 0),Ti([te({type:"transform"})],st.prototype,"scalingCenterY",void 0),Ti([te({type:"transform"})],st.prototype,"rotationCenterX",void 0),Ti([te({type:"transform"})],st.prototype,"rotationCenterY",void 0),Ti([te({type:"transform"})],st.prototype,"rotation",void 0),Ti([te({type:"transform"})],st.prototype,"translationX",void 0),Ti([te({type:"transform"})],st.prototype,"translationY",void 0),Ti([te({redraw:W.MAJOR,changeCb:r=>r.visibilityChanged()})],st.prototype,"visible",void 0),Ti([te({redraw:W.TRIVIAL,changeCb:Wv})],st.prototype,"zIndex",void 0),Ti([te({redraw:W.TRIVIAL,changeCb:Wv})],st.prototype,"zIndexSubOrder",void 0);const $l={};function zv(r,t){$l[t]||(r(),$l[t]=!0)}const ee={debug(...r){console.log(...r)},warn(r,...t){console.warn(`AG Charts - ${r}`,...t)},error(r,...t){"object"==typeof r?console.error("AG Charts error",r,...t):console.error(`AG Charts - ${r}`,...t)},warnOnce(r,...t){zv(()=>ee.warn(r,...t),`Logger.warn: ${r}`)},errorOnce(r,...t){zv(()=>ee.error(r,...t),`Logger.warn: ${r}`)}};class de extends st{constructor(t){var e;super({isVirtual:t?.isVirtual}),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:n}=t??{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==n&&(this.zIndexSubOrder=n),this.name=null===(e=this.opts)||void 0===e?void 0:e.name}zIndexChanged(){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}_setLayerManager(t){var e,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&null!==(e=this.opts)&&void 0!==e&&e.layer){const{zIndex:n,zIndexSubOrder:o,name:s}=null!==(i=this.opts)&&void 0!==i?i:{};this.layer=t.addLayer({zIndex:n,zIndexSubOrder:o,name:s,getComputedOpacity:()=>this.getComputedOpacity(),getVisibility:()=>this.getVisibility()})}}getComputedOpacity(){let t=1,e=this;do{e instanceof de&&(t*=e.opacity)}while(e=e.parent);return t}getVisibility(){let t=this,e=this.visible;for(;t=t.parent;)t.visible||(e=t.visible);return e}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t,e=W.TRIVIAL){if(this.isVirtual)return void super.markDirty(t,e);let i=e;(e<W.MINOR||null!=this.layer)&&(i=W.TRIVIAL),super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),de.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var e,i;const{opts:{name:n}={}}=this,{_debug:{consoleLog:o=!1}={}}=this,{dirty:s,dirtyZIndex:a,layer:l,children:u,clipRect:c,dirtyTransform:d}=this;let{ctx:h,forceRender:p,clipBBox:f}=t;const{resized:v,stats:g}=t,y=h.getTransform(),m=s>=W.MINOR||a||v;let C=m,w=!1;for(const T of u)if(C||(C=null==T.layerManager&&T.dirty>=W.TRIVIAL),w||(w=null!=T.layerManager&&T.dirty>=W.TRIVIAL),C)break;if(n&&o&&ee.debug({name:n,group:this,isDirty:m,isChildDirty:C,dirtyTransform:d,renderCtx:t,forceRender:p}),d)p="dirtyTransform";else if(l){const T=this.computeBBox();(void 0===this.lastBBox||!this.lastBBox.equals(T))&&(p="dirtyTransform",this.lastBBox=T)}if(!(m||C||w||p))return n&&o&&g&&ee.debug({name:n,result:"skipping",renderCtx:t,counts:this.nodeCount,group:this}),l&&g&&(g.layersSkipped++,g.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1});const _=this.visible;if(l){if(h=l.context,h.save(),h.resetTransform(),"dirtyTransform"!==p&&(p=C||a),p&&l.clear(),f){const{width:T,height:L,x:A,y:N}=f;o&&ee.debug({name:n,clipBBox:f,ctxTransform:h.getTransform(),renderCtx:t,group:this}),this.clipCtx(h,A,N,T,L)}h.setTransform(y)}else h.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(h),c){const{x:T,y:L,width:A,height:N}=c;h.save(),o&&ee.debug({name:n,clipRect:c,ctxTransform:h.getTransform(),renderCtx:t,group:this}),this.clipCtx(h,T,L,A,N),f=this.matrix.transformBBox(c)}const b=this.hasVirtualChildren();a?(this.sortChildren(u),"dirtyTransform"!==p&&(p=!0)):b&&this.sortChildren(u);const x=p!==t.forceRender||f!==t.clipBBox||h!==t.ctx?Object.assign(Object.assign({},t),{ctx:h,forceRender:p,clipBBox:f}):t;let D=0;for(const T of u)T.visible&&_?p||T.dirty!==W.NONE?(h.save(),T.render(x),h.restore()):g&&(D+=T.nodeCount.count):(T.markClean(),g&&(D+=T.nodeCount.count));if(g&&(g.nodesSkipped+=D),super.render(t),c&&h.restore(),b)for(const T of this.virtualChildren)T.markClean({recursive:"virtual"});l&&(g&&g.layersRendered++,h.restore(),p&&l.snapshot(),null===(i=(e=l.context).verifyDepthZero)||void 0===i||i.call(e)),n&&o&&g&&ee.debug({name:n,result:"rendered",skipped:D,renderCtx:t,counts:this.nodeCount,group:this})}sortChildren(t){this.dirtyZIndex=!1,t.sort((e,i)=>{var n,o;return Uv([e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.serialNumber],[i.zIndex,...null!==(o=i.zIndexSubOrder)&&void 0!==o?o:[void 0,void 0],i.serialNumber],jv)})}clipCtx(t,e,i,n,o){t.beginPath(),t.moveTo(e,i),t.lineTo(e+n,i),t.lineTo(e+n,i+o),t.lineTo(e,i+o),t.closePath(),t.clip()}static computeBBox(t){let e=1/0,i=-1/0,n=1/0,o=-1/0;return t.forEach(s=>{if(!s.visible)return;const a=s.computeTransformedBBox();if(!a)return;const l=a.x,u=a.y;l<e&&(e=l),u<n&&(n=u),l+a.width>i&&(i=l+a.width),u+a.height>o&&(o=u+a.height)}),new be(e,n,i-e,o-n)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}}de.className="Group",function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([te({redraw:W.MAJOR,convertor:r=>Math.min(1,Math.max(0,r))})],de.prototype,"opacity",void 0);class Kv{constructor({width:t=600,height:e=300,overrideDevicePixelRatio:i}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(t,e),this.context=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.setPixelRatio(i),this.resize(t,e)}static isSupported(){return null!=window.OffscreenCanvas}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=t??window.devicePixelRatio;Bv()||(e=1),qe.overrideScale(this.context,e),this._pixelRatio=e}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:n,pixelRatio:o}=this;i.width=Math.round(t*o),i.height=Math.round(e*o),n.resetTransform(),this._width=t,this._height=e}}function Bi(r){const t=typeof window<"u"?window:void 0;return t?.[r]}var oa=function(r){return r[r.SUMMARY=0]="SUMMARY",r[r.DETAILED=1]="DETAILED",r}(oa||{});let QD=(()=>{class r{constructor(e){var i,n,o;this.id=mo(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug={dirtyTree:!1,stats:!1,renderBoundingBoxes:!1,consoleLog:!1,level:oa.SUMMARY,sceneNodeHighlight:[]};const{document:s=window.document,mode:a=(null!==(i=Bi("agChartsSceneRenderModel"))&&void 0!==i?i:"adv-composite"),width:l,height:u,overrideDevicePixelRatio:c}=e;this.overrideDevicePixelRatio=c,this.opts={document:s,mode:a},this.debug.consoleLog=[!0,"scene"].includes(Bi("agChartsDebug")),this.debug.level=["scene"].includes(Bi("agChartsDebug"))?oa.DETAILED:oa.SUMMARY,this.debug.stats=null!==(n=Bi("agChartsSceneStats"))&&void 0!==n&&n,this.debug.dirtyTree=null!==(o=Bi("agChartsSceneDirtyTree"))&&void 0!==o&&o,this.debug.sceneNodeHighlight=function ZD(){var r;let t=null!==(r=Bi("agChartsSceneDebug"))&&void 0!==r?r:[];"string"==typeof t&&(t=[t]);const e=[];return t.forEach(i=>{"layout"===i?e.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):e.push(i)}),e}(),this.canvas=new qe({document:s,width:l,height:u,overrideDevicePixelRatio:c})}set container(e){this.canvas.container=e}get container(){return this.canvas.container}download(e,i){this.canvas.download(e,i)}getDataURL(e){return this.canvas.getDataURL(e)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(e,i){e=Math.round(e),i=Math.round(i);const n=e<=0||i<=0,o=isNaN(e)||isNaN(i);return!(e===this.width&&i===this.height||o||n||(this.pendingSize=[e,i],this.markDirty(),0))}addLayer(e){var i;const{mode:n}=this.opts;if(!["composite","dom-composite","adv-composite"].includes(n))return;const{zIndex:s=this._nextZIndex++,name:a,zIndexSubOrder:l,getComputedOpacity:u,getVisibility:c}=e,{width:d,height:h,overrideDevicePixelRatio:p}=this,f="dom-composite"===n,g="adv-composite"===n&&Kv.isSupported()?new Kv({width:d,height:h,overrideDevicePixelRatio:p}):new qe({document:this.opts.document,width:d,height:h,domLayer:f,zIndex:s,name:a,overrideDevicePixelRatio:p}),y={id:this._nextLayerId++,name:a,zIndex:s,zIndexSubOrder:l,canvas:g,getComputedOpacity:u,getVisibility:c};if(s>=this._nextZIndex&&(this._nextZIndex=s+1),this.layers.push(y),this.sortLayers(),f){const m=this.layers.map(_=>_.canvas).filter(_=>_ instanceof qe),C=m.findIndex(_=>_===g);(null!==(i=m[C-1])&&void 0!==i?i:this.canvas).element.insertAdjacentElement("afterend",g.element)}return this.debug.consoleLog&&ee.debug("Scene.addLayer() - layers",this.layers),y.canvas}removeLayer(e){const i=this.layers.findIndex(n=>n.canvas===e);i>=0&&(this.layers.splice(i,1),e.destroy(),this.markDirty(),this.debug.consoleLog&&ee.debug("Scene.removeLayer() -  layers",this.layers))}moveLayer(e,i,n){const o=this.layers.find(s=>s.canvas===e);o&&(o.zIndex=i,o.zIndexSubOrder=n,this.sortLayers(),this.markDirty(),this.debug.consoleLog&&ee.debug("Scene.moveLayer() -  layers",this.layers))}sortLayers(){this.layers.sort((e,i)=>{var n,o;return Uv([e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.id],[i.zIndex,...null!==(o=i.zIndexSubOrder)&&void 0!==o?o:[void 0,void 0],i.id],jv)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(e){e!==this._root&&(this._root&&this._root._setLayerManager(),this._root=e,e&&(null===e.parent&&e.layerManager&&e.layerManager!==this&&(e.layerManager.root=null),e._setLayerManager({addLayer:i=>this.addLayer(i),moveLayer:(...i)=>this.moveLayer(...i),removeLayer:(...i)=>this.removeLayer(...i),markDirty:()=>this.markDirty(),canvas:this.canvas,debug:Object.assign(Object.assign({},this.debug),{consoleLog:this.debug.level>=oa.DETAILED})})),this.markDirty())}get root(){return this._root}strip(){const{layers:e}=this;for(const i of e)i.canvas.destroy(),delete i.canvas;e.splice(0,e.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(e){var i;return function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})}(this,void 0,void 0,function*(){const{debugSplitTimes:n=[performance.now()],extraDebugStats:o={}}=e??{},{canvas:s,canvas:{context:a},root:l,layers:u,pendingSize:c,opts:{mode:d}}=this;if(c&&(this.canvas.resize(...c),this.layers.forEach(f=>f.canvas.resize(...c)),this.pendingSize=void 0),l&&!l.visible)return void(this._dirty=!1);if(l&&!this.dirty)return this.debug.consoleLog&&ee.debug("Scene.render() - no-op",{redrawType:W[l.dirty],tree:this.buildTree(l)}),void this.debugStats(n,a,void 0,o);const h={ctx:a,forceRender:!0,resized:!!c,debugNodes:{}};"detailed"===this.debug.stats&&(h.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let p=!1;if((!l||l.dirty>=W.TRIVIAL)&&(p=!0,s.clear()),l&&this.debug.dirtyTree){const{dirtyTree:f,paths:v}=this.buildDirtyTree(l);ee.debug("Scene.render() - dirtyTree",{dirtyTree:f,paths:v})}l&&p&&(this.debug.consoleLog&&ee.debug("Scene.render() - before",{redrawType:W[l.dirty],canvasCleared:p,tree:this.buildTree(l)}),l.visible&&(a.save(),l.render(h),a.restore())),"dom-composite"!==d&&u.length>0&&p&&(this.sortLayers(),a.save(),a.setTransform(1/s.pixelRatio,0,0,1/s.pixelRatio,0,0),u.forEach(({canvas:{imageSource:f,enabled:v},getComputedOpacity:g,getVisibility:y})=>{!v||!y()||(a.globalAlpha=g(),a.drawImage(f,0,0))}),a.restore()),null===(i=a.verifyDepthZero)||void 0===i||i.call(a),this._dirty=!1,this.debugStats(n,a,h.stats,o),this.debugSceneNodeHighlight(a,this.debug.sceneNodeHighlight,h.debugNodes),l&&this.debug.consoleLog&&ee.debug("Scene.render() - after",{redrawType:W[l.dirty],canvasCleared:p,tree:this.buildTree(l)})})}debugStats(e,i,n,o={}){const s=performance.now();if(this.debug.stats){const a=e[0];e.push(s);const l=(_,b)=>{const O=_+b;return`${_} / ${O} (${Math.round(100*_/O)}%)`},u=(_,b)=>Math.round(100*(b-_))/100+"ms",{layersRendered:c=0,layersSkipped:d=0,nodesRendered:h=0,nodesSkipped:p=0}=n??{},f=e.map((_,b)=>b>0?u(e[b-1],_):null).filter(_=>null!=_).join(" + "),v=Object.entries(o).map(([_,b])=>`${_}: ${b}`).join(" ; "),y=[`${u(a,s)} (${f})`,`${v}`,"detailed"===this.debug.stats?`Layers: ${l(c,d)}`:null,"detailed"===this.debug.stats?`Nodes: ${l(h,p)}`:null].filter(_=>null!=_).map(_=>[_,qe.getTextSize(_,i.font)]),m=Math.max(...y.map(([,{width:_}])=>_)),C=y.reduce((_,[,{height:b}])=>_+b,0);i.save(),i.fillStyle="white",i.fillRect(0,0,m,C),i.fillStyle="black";let w=0;for(const[_,b]of y)w+=b.height,i.fillText(_,2,w);i.restore()}}debugSceneNodeHighlight(e,i,n){var o;const s=l=>u=>!!l.test(u.id)||u instanceof de&&null!=u.name&&l.test(u.name),a=l=>u=>l===u.id||u instanceof de&&null!=u.name&&l===u.name;for(const l of i){if("string"==typeof l&&null!=n[l])continue;const u="string"==typeof l?a(l):s(l),c=null===(o=this.root)||void 0===o?void 0:o.findNodes(u);if(c&&0!==c.length)for(const d of c)d instanceof de&&d.name?n[d.name]=d:n[d.id]=d;else ee.debug(`Scene.render() - no debugging node with id [${l}] in scene graph.`)}e.save();for(const[l,u]of Object.entries(n)){const c=u.computeTransformedBBox();c?(e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(c.x,c.y,c.width,c.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(l,c.x,c.y,c.width),e.fillText(l,c.x,c.y,c.width)):ee.debug(`Scene.render() - no bbox for debugged node [${l}].`)}e.restore()}buildTree(e){var i,n;const o=null!==(i=e instanceof de?e.name:null)&&void 0!==i?i:e.id;return Object.assign(Object.assign({name:o,node:e,dirty:W[e.dirty]},null!==(n=e.parent)&&void 0!==n&&n.isVirtual?{virtualParentDirty:W[e.parent.dirty],virtualParent:e.parent}:{}),e.children.map(s=>this.buildTree(s)).reduce((s,a)=>{let{name:l}=a;const{node:{visible:u,opacity:c,zIndex:d,zIndexSubOrder:h},node:p,virtualParent:f}=a;(!u||c<=0)&&(l=`(${l})`),p instanceof de&&p.isLayer()&&(l=`*${l}*`);const v=[`${l??"<unknown>"}`,`z: ${d}`,h&&`zo: ${h.map(m=>"function"==typeof m?`${m()} (fn)`:m).join(" / ")}`,f&&"(virtual parent)"].filter(m=>!!m).join(" ");let g=v,y=1;for(;null!=s[g]&&y<100;)g=`${v} (${y++})`;return s[g]=a,s},{}))}buildDirtyTree(e){var i;if(e.dirty===W.NONE)return{dirtyTree:{},paths:[]};const n=e.children.map(a=>this.buildDirtyTree(a)).filter(a=>a.paths.length>0),o=null!==(i=e instanceof de?e.name:null)&&void 0!==i?i:e.id,s=0===n.length?[o]:n.map(a=>a.paths).reduce((a,l)=>a.concat(l),[]).map(a=>`${o}.${a}`);return{dirtyTree:Object.assign({name:o,node:e,dirty:W[e.dirty]},n.map(a=>a.dirtyTree).filter(a=>void 0!==a.dirty).reduce((a,l)=>{var u;return a[null!==(u=l.name)&&void 0!==u?u:"<unknown>"]=l,a},{})),paths:s}}}return r.className="Scene",r})();class JD{constructor(){this.stops=[]}}const dn=2*Math.PI;function It(r){return r%=dn,(r+=dn)%dn}function Wi(r){return r/180*Math.PI}class tT extends JD{constructor(){super(...arguments),this.angle=0}createGradient(t,e){const{stops:n,angle:o}=this,s=It(Wi(o+90)),a=Math.cos(s),l=Math.sin(s),u=e.width,c=e.height,d=e.x+.5*u,h=e.y+.5*c;if(u>0&&c>0){const p=Math.sqrt(c*c+u*u)/2,f=Math.atan2(c,u);let v;v=s<Math.PI/2?s:s<Math.PI?Math.PI-s:s<3*Math.PI/2?s-Math.PI:2*Math.PI-s;const g=p*Math.abs(Math.cos(v-f)),y=t.createLinearGradient(d+a*g,h+l*g,d-a*g,h-l*g);return n.forEach(m=>{y.addColorStop(m.offset,m.color)}),y}return"black"}}var ji=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};const iT=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;class Oe extends st{constructor(){super(...arguments),this.lastInstanceId=0,this.fillOpacity=1,this.strokeOpacity=1,this.fill=Oe.defaultStyles.fill,this.stroke=Oe.defaultStyles.stroke,this.strokeWidth=Oe.defaultStyles.strokeWidth,this.lineDash=Oe.defaultStyles.lineDash,this.lineDashOffset=Oe.defaultStyles.lineDashOffset,this.lineCap=Oe.defaultStyles.lineCap,this.lineJoin=Oe.defaultStyles.lineJoin,this.opacity=Oe.defaultStyles.opacity,this.fillShadow=Oe.defaultStyles.fillShadow}static createInstance(t){const e=Object.create(t);return e._setParent(void 0),e.id=t.id+"-Instance-"+String(++t.lastInstanceId),e}restoreOwnStyles(){const t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t);for(let i=0,n=e.length;i<n;i++){const o=e[i];this[o]=t[o]}}restoreAllStyles(){const t=this.constructor.defaultStyles;for(const e in t)this[e]=t[e]}restoreOverriddenStyles(){const t=this.constructor.defaultStyles,e=Object.getPrototypeOf(t);for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&Object.prototype.hasOwnProperty.call(e,i)&&(this[i]=t[i])}updateGradient(){const{fill:t}=this;let e;if(t?.startsWith("linear-gradient")&&(e=iT.exec(t))){const i=parseFloat(e[1]),n=[],o=e[2],s=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let a;for(;a=s.exec(o);)n.push(a[0]);this.gradient=new tT,this.gradient.angle=i,this.gradient.stops=n.map((l,u)=>({offset:u/(n.length-1),color:l}))}else this.gradient=void 0}align(t,e){var i,n,o;const s=null!==(o=null===(n=null===(i=this.layerManager)||void 0===i?void 0:i.canvas)||void 0===n?void 0:n.pixelRatio)&&void 0!==o?o:1,a=Math.round(t*s)/s;return null==e?a:0===e?0:e<1?Math.ceil(e*s)/s:Math.round((e+t)*s)/s-a}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:e}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){t.fillStyle=this.gradient?this.gradient.createGradient(t,this.computeBBox()):this.fill}applyFillAlpha(t){const{globalAlpha:e}=t;t.globalAlpha=e*this.opacity*this.fillOpacity}applyShadow(t){var e,i;const n=null!==(i=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==i?i:1,o=this.fillShadow;o?.enabled&&(t.shadowColor=o.color,t.shadowOffsetX=o.xOffset*n,t.shadowOffsetY=o.yOffset*n,t.shadowBlur=o.blur*n)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:e}=t;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}}containsPoint(t,e){return this.isPointInPath(t,e)}}Oe.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),ji([te({redraw:W.MINOR})],Oe.prototype,"fillOpacity",void 0),ji([te({redraw:W.MINOR})],Oe.prototype,"strokeOpacity",void 0),ji([te({redraw:W.MINOR,changeCb:r=>r.updateGradient()})],Oe.prototype,"fill",void 0),ji([te({redraw:W.MINOR})],Oe.prototype,"stroke",void 0),ji([te({redraw:W.MINOR})],Oe.prototype,"strokeWidth",void 0),ji([te({redraw:W.MINOR})],Oe.prototype,"lineDash",void 0),ji([te({redraw:W.MINOR})],Oe.prototype,"lineDashOffset",void 0),ji([te({redraw:W.MINOR})],Oe.prototype,"lineCap",void 0),ji([te({redraw:W.MINOR})],Oe.prototype,"lineJoin",void 0),ji([te({redraw:W.MINOR,convertor:r=>Math.min(1,Math.max(0,r))})],Oe.prototype,"opacity",void 0),ji([te({redraw:W.MINOR,checkDirtyOnAssignment:!0})],Oe.prototype,"fillShadow",void 0);var hn=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function Yl(r){const{redraw:t=W.MAJOR,changeCb:e}=r??{};return te({redraw:t,type:"font",changeCb:e})}class le extends Oe{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=le.defaultStyles.textAlign,this.textBaseline=le.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=qv(this.text)}get font(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=Qo(this)),this._font}computeBBox(){return qe.has.textMetrics?$v(this.lines,this.x,this.y,this):Yv(this.lines,this.x,this.y,this)}getLineHeight(t){var e,i;if(this.lineHeight)return this.lineHeight;if(qe.has.textMetrics){const n=qe.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!==(e=n.fontBoundingBoxAscent)&&void 0!==e?e:n.emHeightAscent)+(null!==(i=n.fontBoundingBoxDescent)&&void 0!==i?i:n.emHeightDescent)}return qe.getTextSize(t,this.font).height}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return!!n&&n.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===W.NONE&&!i)return void(n&&(n.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:o,stroke:s,strokeWidth:a}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const l=this.layerManager.canvas.pixelRatio||1,{globalAlpha:u}=e;if(o){e.fillStyle=o,e.globalAlpha=u*this.opacity*this.fillOpacity;const{fillShadow:c}=this;c?.enabled&&(e.shadowColor=c.color,e.shadowOffsetX=c.xOffset*l,e.shadowOffsetY=c.yOffset*l,e.shadowBlur=c.blur*l),this.renderLines((d,h,p)=>e.fillText(d,h,p))}if(s&&a){e.strokeStyle=s,e.lineWidth=a,e.globalAlpha=u*this.opacity*this.strokeOpacity;const{lineDash:c,lineDashOffset:d,lineCap:h,lineJoin:p}=this;c&&e.setLineDash(c),d&&(e.lineDashOffset=d),h&&(e.lineCap=h),p&&(e.lineJoin=p),this.renderLines((f,v,g)=>e.strokeText(f,v,g))}super.render(t)}renderLines(t){const{lines:e,x:i,y:n}=this,o=this.lines.map(l=>this.getLineHeight(l));let a=-(o.reduce((l,u)=>l+u,0)-o[0])*Xv(this.textBaseline);for(let l=0;l<e.length;l++)t(e[l],i,n+a),a+=o[l]}static wrap(t,e,i,n,o){const a=function nT(r){const t=new Map,e=n=>qe.getTextSize(n,r);return{size:e,width:n=>{if(t.has(n))return t.get(n);const{width:o}=e(n);return t.set(n,o),o}}}(Qo(n)),l=t.split(/\r?\n/g);if(0===l.length)return"";if("never"===o)return le.truncateLine(l[0],e,a,!1);const u=[];let c=0;for(const d of l){const h=le.wrapLine(d,e,i,a,n,o,c);if(u.push(h.result),c=h.cumulativeHeight,h.truncated)break}return u.join("\n").trim()}static wrapLine(t,e,i,n,o,s,a){if(!(t=t.trim()))return{result:"",truncated:!1,cumulativeHeight:a};const l=n.size(t);if(l.width<=e)return{result:t,truncated:!1,cumulativeHeight:a+l.height};if(l.height>i||n.width("W")>e)return{result:"",truncated:!0,cumulativeHeight:a};const u=t.split(/\s+/g),c=le.wrapLineSequentially(u,e,i,n,o,s,a);a=c.cumulativeHeight;let{lines:d}=c;if(!c.wordsBrokenOrTruncated&&!c.linesTruncated){const f=le.wrapLineBalanced(u,e,n,c.lines.length);f.length===d.length&&(d=f)}return{result:d.map(p=>p.join(" ")).join("\n"),truncated:c.linesTruncated,cumulativeHeight:a}}static breakWord(t,e,i,n,o){const s=p=>le.punctuationMarks.includes(t[p]),a=n?o.width("-"):0,l=[];let u=0,c=0;for(let p=0;p<t.length;p++){const v=o.width(t[p]);u+v+a>(0===c?e:i)&&(l.push(p),u=0,c++),u+=v}const d=[];let h=0;for(const p of l){let f=t.substring(h,p);n&&f.length>0&&!s(p-1)&&!s(p)&&(f+="-"),d.push(f),h=p}return d.push(t.substring(h)),d}static truncateLine(t,e,i,n){const o=i.width(t);if(o<e&&!n)return t;const s=i.width("\u2026");if(o+s<=e)return`${t}\u2026`;let l,u,a=Math.floor(t.length*e/o)+1;do{l=t.substring(0,a),u=i.width(l)}while(--a>=0&&u+s>e);return`${l}\u2026`}static wrapLineSequentially(t,e,i,n,o,s,a){const{fontSize:l,lineHeight:u=l*le.defaultLineHeightRatio}=o,c="always"===s||"hyphenate"===s,d="hyphenate"===s,h=n.width(" ");let p=!1,f=!1;const v=[];let g=[],y=0;const m=()=>{const C=a+u;if(C>=i){const w=g.join(" "),_=le.truncateLine(w,e,n,!0);return g.splice(0,g.length,_),f=!0,!1}return g=[],y=0,a=C,v.push(g),!0};if(!m())return{lines:v,linesTruncated:!0,wordsBrokenOrTruncated:p,cumulativeHeight:a};for(let C=0;C<t.length;C++){const w=t[C],_=n.width(w),b=0===g.length?0:h,O=y+b+_;if(O<=e)g.push(w),y=O;else if(_<=e){if(!m())break;g.push(w),y=_}else{if(p=!0,!c){if(!m())break;const x=le.truncateLine(w,e,n,!0);g.push(x),C<t.length-1&&(f=!0);break}{const D=le.breakWord(w,e-y-b,e,d,n);let T=!1;for(let L=0;L<D.length;L++){const A=D[L];if(A&&g.push(A),L===D.length-1)y=n.width(A);else if(!m()){T=!0;break}}if(T)break}}}return{lines:v,linesTruncated:f,wordsBrokenOrTruncated:p,cumulativeHeight:a}}static wrapLineBalanced(t,e,i,n){const o=t.reduce((p,f)=>p+i.width(f),0),s=i.width(" "),l=(o+s*(t.length-n-2))/n,u=[];let c=[],d=i.width(t[0]),h=!0;for(const p of t){const f=i.width(p);if(h){c=[],c.push(p),d=f,h=!1,u.push(c);continue}const v=d+s+f;v<=l?(c.push(p),d=v):v<=e?(c.push(p),h=!0):(c=[p],d=f,u.push(c))}return u}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}}function Qo(r){const{fontFamily:t,fontSize:e,fontStyle:i,fontWeight:n}=r;return[i??"",n??"",e+"px",t].join(" ").trim()}function oT(r,t,e,i){return qe.has.textMetrics?$v(r,t,e,i):Yv(r,t,e,i)}function $v(r,t,e,i){var n,o;let s=0,a=0,l=0,u=0,c=0;const d=Qo(i),{lineHeight:h,textBaseline:p=le.defaultStyles.textBaseline,textAlign:f=le.defaultStyles.textAlign}=i;for(let v=0;v<r.length;v++){const g=qe.measureText(r[v],d,p,f);s=Math.max(s,g.actualBoundingBoxLeft),l=Math.max(l,g.width),0==v?(a+=g.actualBoundingBoxAscent,u+=g.actualBoundingBoxAscent):c+=null!==(n=g.fontBoundingBoxAscent)&&void 0!==n?n:g.emHeightAscent,v==r.length-1?u+=g.actualBoundingBoxDescent:c+=null!==(o=g.fontBoundingBoxDescent)&&void 0!==o?o:g.emHeightDescent}return void 0!==h&&(c=(r.length-1)*h),u+=c,a+=c*Xv(p),new be(t-s,e-a,l,u)}function Yv(r,t,e,i){let n=0,o=0,s=0;const a=Qo(i),{lineHeight:l,textBaseline:u=le.defaultStyles.textBaseline,textAlign:c=le.defaultStyles.textAlign}=i;if(r.length>0){const d=qe.getTextSize(r[0],a);n=d.width,o=d.height}for(let d=1;d<r.length;d++){const h=qe.getTextSize(r[d],a);n=Math.max(n,h.width),s+=l??h.height}switch(c){case"end":case"right":t-=n;break;case"center":t-=n/2}switch(u){case"alphabetic":e-=.7*o+.5*s;break;case"middle":e-=.45*o+.5*s;break;case"ideographic":case"bottom":e-=o+s;break;case"hanging":e-=.2*o+.5*s}return new be(t,e,n,o+s)}function Xv(r){switch(r){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function qv(r){return"string"==typeof r?r.split(/\r?\n/g):[]}le.className="Text",le.defaultLineHeightRatio=1.15,le.defaultStyles=Object.assign({},Oe.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),le.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],hn([te({redraw:W.MAJOR})],le.prototype,"x",void 0),hn([te({redraw:W.MAJOR})],le.prototype,"y",void 0),hn([te({redraw:W.MAJOR,changeCb:r=>r._setLines()})],le.prototype,"text",void 0),hn([Yl()],le.prototype,"fontStyle",void 0),hn([Yl()],le.prototype,"fontWeight",void 0),hn([Yl()],le.prototype,"fontSize",void 0),hn([Yl()],le.prototype,"fontFamily",void 0),hn([te({redraw:W.MAJOR})],le.prototype,"textAlign",void 0),hn([te({redraw:W.MAJOR})],le.prototype,"textBaseline",void 0),hn([te({redraw:W.MAJOR})],le.prototype,"lineHeight",void 0);class Zv{constructor(){this.allEventListeners=new Map}addEventListener(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");const{allEventListeners:i}=this;let n=i.get(t);n||(n=new Set,i.set(t,n)),n.has(e)||n.add(e)}removeEventListener(t,e){const{allEventListeners:i}=this,n=i.get(t);n&&(n.delete(e),0===n.size&&i.delete(t))}hasEventListener(t){return this.allEventListeners.has(t)}clearEventListeners(){this.allEventListeners.clear()}fireEvent(t){const e=this.allEventListeners.get(t.type);e?.forEach(i=>i(t))}}const Qv=r=>"string"==typeof r,rT=r=>!!r&&Object.prototype.hasOwnProperty.call(r,"toString")&&Qv(r.toString());function Yd(r){return Qv(r)||rT(r)}function Xl(r){return Pi(r)||!!(i=r)&&Object.prototype.hasOwnProperty.call(i,"valueOf")&&Pi(i.valueOf())||(i=>i instanceof Date&&!isNaN(+i))(r);var i}function ql(r,t){return t&&Xl(r)?r:t?void 0:Yd(r)?r:String(r)}const Pi=r=>"number"==typeof r&&Number.isFinite(r);class fe{constructor(t,e,i,n=1){this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,i||0)),this.a=Math.min(1,Math.max(0,n||0))}static validColorString(t){return t.indexOf("#")>=0?!!fe.parseHex(t):t.indexOf("rgb")>=0?!!fe.stringToRgba(t):!!fe.nameToHex[t.toLowerCase()]}static fromString(t){if(t.indexOf("#")>=0)return fe.fromHexString(t);const e=fe.nameToHex[t.toLowerCase()];if(e)return fe.fromHexString(e);if(t.indexOf("rgb")>=0)return fe.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static tryParseFromString(t){try{return fe.fromString(t)}catch{return ee.warnOnce(`invalid color string: '${t}'.`),fe.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map(i=>parseInt(i,16)).map(i=>i+16*i)}if(e?.length>=3&&e.every(i=>i>=0))return 3===e.length&&e.push(255),e}static fromHexString(t){const e=fe.parseHex(t);if(e){const[i,n,o,s]=e;return new fe(i/255,n/255,o/255,s/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let a=0;a<t.length;a++){const l=t[a];if(e||"("!==l){if(")"===l){i=a;break}}else e=a}const n=e&&i&&t.substring(e+1,i);if(!n)return;const o=n.split(","),s=[];for(let a=0;a<o.length;a++){const l=o[a];let u=parseFloat(l);if(isNaN(u))return;l.indexOf("%")>=0?(u=Math.max(0,Math.min(100,u)),u/=100):3===a?u=Math.max(0,Math.min(1,u)):(u=Math.max(0,Math.min(255,u)),u/=255),s.push(u)}return s}static fromRgbaString(t){const e=fe.stringToRgba(t);if(e){if(3===e.length)return new fe(e[0],e[1],e[2]);if(4===e.length)return new fe(e[0],e[1],e[2],e[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new fe(t[0],t[1],t[2],t[3]);if(3===t.length)return new fe(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,e,i,n=1){const o=fe.HSBtoRGB(t,e,i);return new fe(o[0],o[1],o[2],n)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let t="#"+fe.padHex(Math.round(255*this.r).toString(16))+fe.padHex(Math.round(255*this.g).toString(16))+fe.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=fe.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(t=3){const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return fe.RGBtoHSB(this.r,this.g,this.b)}static RGBtoHSB(t,e,i){const n=Math.min(t,e,i),o=Math.max(t,e,i);let a=NaN;if(n!==o){const l=o-n,u=(o-t)/l,c=(o-e)/l,d=(o-i)/l;a=t===o?d-c:e===o?2+u-d:4+c-u,a/=6,a<0&&(a+=1)}return[360*a,0!==o?(o-n)/o:0,o]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let n=0,o=0,s=0;if(0===e)n=o=s=i;else{const a=6*(t-Math.floor(t)),l=a-Math.floor(a),u=i*(1-e),c=i*(1-e*l),d=i*(1-e*(1-l));switch(a>>0){case 0:n=i,o=d,s=u;break;case 1:n=c,o=i,s=u;break;case 2:n=u,o=i,s=d;break;case 3:n=u,o=c,s=i;break;case 4:n=d,o=u,s=i;break;case 5:n=i,o=u,s=c}}return[n,o,s]}derive(t,e,i,n){const o=fe.RGBtoHSB(this.r,this.g,this.b);let s=o[2];0==s&&i>1&&(s=.05);const a=((o[0]+t)%360+360)%360,l=Math.max(Math.min(o[1]*e,1),0);s=Math.max(Math.min(s*i,1),0);const u=Math.max(Math.min(this.a*n,1),0),c=fe.HSBtoRGB(a,l,s);return c.push(u),fe.fromArray(c)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(t,e){const i=fe.tryParseFromString(t),n=fe.tryParseFromString(e);return o=>{const s=(l,u)=>l*(1-o)+u*o;return new fe(s(i.r,n.r),s(i.g,n.g),s(i.b,n.b),s(i.a,n.a)).toString()}}}fe.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});const Zl=Symbol("BREAK"),Xd="__decorator_config";function Lr(r,t){return(e,i)=>{const n=i.toString(),o=`__${n}`,{getters:s,setters:a}=function sT(r,t,e,i){null==Object.getOwnPropertyDescriptor(r,Xd)&&Object.defineProperty(r,Xd,{value:{}});const n=r[Xd];if(null!=n[e])return n[e];n[e]={setters:[],getters:[]};const o=Object.getOwnPropertyDescriptor(r,t),s=o?.set,a=o?.get;return Object.defineProperty(r,t,{set:function(c){var d,h;const p=null!==(h=null===(d=n[e])||void 0===d?void 0:d.setters)&&void 0!==h?h:[];let f;p.some(v=>v.length>2)&&(f=a?a.call(this):this[i]);for(const v of p)if((c=v(this,t,c,f))===Zl)return;s?s.call(this,c):this[i]=c},get:function(){var c,d;let h=a?a.call(this):this[i];for(const p of null!==(d=null===(c=n[e])||void 0===c?void 0:c.getters)&&void 0!==d?d:[])if(h=p(this,t,h),h===Zl)return;return h},enumerable:!0,configurable:!1}),n[e]}(e,i,n,o);a.push(r),t&&s.splice(0,0,t)}}function R(r){return Lr((t,e,i)=>{var n,o,s;if(r(i,{target:t}))return i;const a=e.toString().replace(/^_*/,"");let l=null!==(o=null===(n=t.constructor)||void 0===n?void 0:n.className)&&void 0!==o?o:null===(s=t.constructor)||void 0===s?void 0:s.name;l?.length<3&&(l=null);const u=l?`of [${l}] `:"";return ee.warn(r.message?`Property [${a}] ${u}cannot be set to [${JSON.stringify(i)}]; ${r.message}, ignoring.`:`Property [${a}] ${u}cannot be set to [${JSON.stringify(i)}], ignoring.`),Zl})}function re(r,t){return r.message=t,r}const We=(r,t,e)=>void 0===r||e(r,t),Co=(r,t)=>re((e,i)=>Array.isArray(e)&&(!r||e.length===r)&&(!t||e.every(n=>t(n,i))),"expecting an Array"),qd=r=>re((t,e)=>We(t,e,Co(r)),"expecting an optional Array"),In=(...r)=>re((t,e)=>r.every(i=>i(t,e)),r.map(t=>t.message).filter(t=>null!=t).join(" AND ")),Ql=r=>null!=r&&!isNaN(r),Jl=r=>re((t,e)=>!Ql(t)||!Ql(e.target[r])||t<e.target[r],`expected to be less than ${r}`),ra=r=>re((t,e)=>!Ql(t)||!Ql(e.target[r])||t>e.target[r],`expected to be greater than ${r}`),lT=re(r=>"function"==typeof r,"expecting a Function"),je=re((r,t)=>We(r,t,lT),"expecting an optional Function"),Le=re(r=>!0===r||!1===r,"expecting a Boolean"),pn=re((r,t)=>We(r,t,Le),"expecting an optional Boolean"),wt=re(r=>"string"==typeof r,"expecting a String"),ue=re((r,t)=>We(r,t,wt),"expecting an optional String"),Jv=re(r=>r instanceof Date&&!isNaN(+r),"expecting a Date object"),uT=re((r,t)=>We(r,t,Jv),"expecting an optional Date"),cT=(re(Co(void 0,Jv),"expecting an Array of Date objects"),K(0)),dT=re((r,t)=>We(r,t,cT),"expecting an optional number"),eg=((...r)=>re((t,e)=>r.some(i=>i(t,e)),r.map(t=>t.message).filter(t=>null!=t).join(" OR ")))(uT,dT),eu="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",ci=re(r=>"string"==typeof r&&fe.validColorString(r),`expecting a color String. ${eu}`),Ne=re((r,t)=>We(r,t,ci),`expecting an optional color String. ${eu}`),sa=re(Co(void 0,ci),`expecting an Array of color strings. ${eu}`),hT=re((r,t)=>We(r,t,sa),`expecting an optional Array of color strings. ${eu}`);function K(r,t){return re(i=>"number"==typeof i&&Number.isFinite(i)&&(void 0===r||i>=r)&&(void 0===t||i<=t),"expecting a finite Number"+(void 0!==r?", more than or equal to "+r:"")+(void 0!==t?", less than or equal to "+t:""))}function xe(r,t){return re((i,n)=>We(i,n,K(r,t)),"expecting an optional finite Number"+(void 0!==r?", more than or equal to "+r:"")+(void 0!==t?", less than or equal to "+t:""))}function wo(r,t){return re(i=>"number"==typeof i&&(isNaN(i)||Number.isFinite(i)&&(void 0===r||i>=r)&&(void 0===t||i<=t)),"expecting a finite Number"+(void 0!==r?", more than or equal to "+r:"")+(void 0!==t?", less than or equal to "+t:""))}const tg=re(Co(void 0,K()),"expecting an Array of numbers"),ig=re((r,t)=>We(r,t,tg),"expecting an optional Array of numbers"),ng=re(Co(void 0,wt),"expecting an Array of strings");function og(...r){return re(e=>"string"==typeof e&&r.indexOf(e)>=0,`expecting one of: ${r.join(", ")}`)}re((r,t)=>We(r,t,ng),"expecting an optional Array of strings");const pT=re(Co(void 0,Le),"expecting an Array of boolean values"),fT=(re((r,t)=>We(r,t,pT),"expecting an optional Array of boolean values"),["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]),vT=re(r=>"normal"===r||"italic"===r||"oblique"===r,"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),Jo=re((r,t)=>We(r,t,vT),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),gT=re(r=>fT.includes(r),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),er=re((r,t)=>We(r,t,gT),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),yT=re(Co(void 0,K(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Mr=re((r,t)=>We(r,t,yT),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),mT=["butt","round","square"],Zd=re(r=>mT.includes(r),"expecting a line cap keyword such as 'butt', 'round' or 'square'"),CT=(re((r,t)=>We(r,t,Zd),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'"),["round","bevel","miter"]),wT=re(r=>CT.includes(r),"expecting a line join keyword such as 'round', 'bevel' or 'miter'"),ST=(re((r,t)=>We(r,t,wT),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'"),["top","right","bottom","left"]),rg=re(r=>ST.includes(r),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),_T=["exact","nearest"],sg=re(r=>"number"==typeof r&&Number.isFinite(r)||_T.includes(r),"expecting an interaction range of 'exact', 'nearest' or a number"),ET=["never","always","hyphenate","on-space"],Qd=re(r=>ET.includes(r),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', 'on-space'");var Ze=function(r){return r[r.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",r[r.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",r[r.AXIS_ZINDEX=20]="AXIS_ZINDEX",r[r.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",r[r.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",r[r.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",r[r.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",r[r.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",r[r.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX",r}(Ze||{}),Y=function(r){return r.X="x",r.Y="y",r}(Y||{});class Jd{constructor(t){this.type=t,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}extend(t){"discrete"===this.type?this.discreteDomain.add(t):"continuous"===this.type&&(this.continuousDomain[0]>t&&(this.continuousDomain[0]=t),this.continuousDomain[1]<t&&(this.continuousDomain[1]=t))}getDomain(){if("discrete"===this.type)return this.discreteDomain;if("continuous"===this.type)return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)}}function tu(r,t=[1/0,-1/0]){for(const e of r)"number"==typeof e&&(e<t[0]&&(t[0]=e),e>t[1]&&(t[1]=e));return t}function bT(r){return r.map(t=>null==t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t?t:"object"==typeof t?JSON.stringify(t):t).join("-")}function RT(r){return Number.isInteger(r)?r:Math.abs(r)>1e4?Math.trunc(r):Math.round(1e4*r)/1e4}function iu(r){if(void 0===r)return[];let[t,e]=r;return t=+t,e=+e,0===t&&0===e?[0,1]:t===1/0&&e===-1/0?[]:(t===1/0&&(t=0),e===-1/0&&(e=0),Pi(t)&&Pi(e)?[t,e]:[])}const Fr=Symbol("invalid");let OT=(()=>{class r{constructor(e){const{props:i}=e;let n=!0;for(const l of i){if("key"===l.type&&!n)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===l.type&&n&&(n=!1)}this.opts=Object.assign({dataVisible:!0},e),this.keys=i.filter(l=>"key"===l.type).map((l,u)=>Object.assign(Object.assign({},l),{index:u,missing:0})),this.values=i.filter(l=>"value"===l.type).map((l,u)=>Object.assign(Object.assign({},l),{index:u,missing:0})),this.aggregates=i.filter(l=>"aggregate"===l.type).map((l,u)=>Object.assign(Object.assign({},l),{index:u})),this.groupProcessors=i.filter(l=>"group-value-processor"===l.type).map((l,u)=>Object.assign(Object.assign({},l),{index:u})),this.propertyProcessors=i.filter(l=>"property-value-processor"===l.type).map((l,u)=>Object.assign(Object.assign({},l),{index:u})),this.reducers=i.filter(l=>"reducer"===l.type).map((l,u)=>Object.assign(Object.assign({},l),{index:u})),this.processors=i.filter(l=>"processor"===l.type).map((l,u)=>Object.assign(Object.assign({},l),{index:u}));for(const l of this.values)if(null==l.property)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(l)}`);const o=({matchGroupIds:l})=>{for(const u of l??[])if(!this.values.some(c=>c.groupId===u))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${u}).`)},s=({matchScopes:l})=>{for(const u of l??[])if(!this.values.some(c=>{var d;return null===(d=c.scopes)||void 0===d?void 0:d.includes(u)}))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${u}).`)},a=({matchIds:l})=>{for(const u of l??[])if(!this.values.some(c=>c.id===u))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${u}).`)};for(const l of[...this.groupProcessors,...this.aggregates])a(l),o(l),s(l)}resolveProcessedDataIndexById(e,i,n="value"){var o;const{index:s,def:a}=null!==(o=this.resolveProcessedDataDefById(e,i,n))&&void 0!==o?o:{};return{type:n,index:s,def:a}}resolveProcessedDataIndicesById(e,i,n="value"){return this.resolveProcessedDataDefsById(e,i,n).map(({index:o,def:s})=>({type:n,index:o,def:s}))}resolveProcessedDataDefById(e,i,n="value"){return this.resolveProcessedDataDefsById(e,i,n)[0]}resolveProcessedDataDefsById(e,i,n="value"){const{keys:o,values:s,aggregates:a,groupProcessors:l,reducers:u}=this,c=({id:p,scopes:f})=>!(null==p||null!=e&&!f?.includes(e.id))&&("string"==typeof i?p===i:i.test(p)),d=[o,s,a,l,u],h=[];for(const p of d)h.push(...p.filter(c).map(f=>({index:f.index,def:f})));if(h.length>0)return h;throw new Error(`AG Charts - didn't find property definition for [${i}, ${e.id}, ${n}]`)}getDomain(e,i,n="value",o){var s,a,l,u;let c,d;try{c=this.resolveProcessedDataIndicesById(e,i,n)}catch(f){if("string"!=typeof i&&/didn't find property definition/.test(f.message))return[];throw f}switch(n){case"key":d="keys";break;case"value":d="values";break;case"aggregate":d="aggValues";break;case"group-value-processor":d="groups";break;default:return[]}const h=null!==(a=null===(s=o.domain[d])||void 0===s?void 0:s[c[0].index])&&void 0!==a?a:[];if(1===c.length)return h;const p=[...h];for(const f of c.slice(1))tu(null!==(u=null===(l=o.domain[d])||void 0===l?void 0:l[f.index])&&void 0!==u?u:[],p);return p}processData(e){const{opts:{groupByKeys:i,groupByFn:n},aggregates:o,groupProcessors:s,reducers:a,processors:l,propertyProcessors:u}=this,c=performance.now();for(const p of[...this.keys,...this.values])p.missing=0;if(i&&0===this.keys.length)return;let d=this.extractData(e);i?d=this.groupData(d):n&&(d=this.groupData(d,n(d))),s.length>0&&this.postProcessGroups(d),o.length>0&&this.aggregateData(d),u.length>0&&this.postProcessProperties(d),a.length>0&&this.reduceData(d),l.length>0&&this.postProcessData(d);for(const p of[...this.keys,...this.values])e.length>0&&p.missing>=e.length&&ee.warnOnce(`the key '${p.property}' was not found in any data element.`);const h=performance.now();return d.time=h-c,r.DEBUG()&&function xT(r){var t,e;const i=(n,o)=>{o.length>0&&(console.log(`DataModel.processData() - ${n}`),console.table(o))};if(console.log("DataModel.processData() - processedData",r),i("Key Domains",r.domain.keys),i("Group Domains",null!==(t=r.domain.groups)&&void 0!==t?t:[]),i("Value Domains",r.domain.values),i("Aggregate Domains",null!==(e=r.domain.aggValues)&&void 0!==e?e:[]),"grouped"===r.type){const n=r.data.reduce((o,s)=>{var a,l;const u=null!==(a=s.keys)&&void 0!==a?a:[],c=null!==(l=s.aggValues)&&void 0!==l?l:[],d=s.keys.map(()=>{}),h=c?.map(()=>{});return o.push(...s.values.map((p,f)=>[...0===f?u:d,...p??[],...0==f?c:h])),o},[]);i("Values",n)}else{const n=r.data.reduce((o,s)=>{var a;const l=null!==(a=s.aggValues)&&void 0!==a?a:[];return o.push([...s.keys,...s.values,...l]),o},[]);i("Values",n)}}(d),d}valueGroupIdxLookup({matchGroupIds:e,matchIds:i,matchScopes:n}){return this.values.map((o,s)=>({def:o,index:s})).filter(({def:o})=>!(e&&(null==o.groupId||!e.includes(o.groupId))||i&&(null==o.id||!i.includes(o.id))||n&&(null==o.scopes||!n.some(s=>{var a;return null===(a=o.scopes)||void 0===a?void 0:a.includes(s)})))).map(({index:o})=>o)}valueIdxLookup(e,i){let n;const o=null==e||0===e.length,s=a=>null==a||(o===(null==a||0===a.length)||a?.some(c=>e.includes(c)));if(n=this.values.findIndex("string"==typeof i?a=>s(a.scopes)&&a.property===i:a=>s(a.scopes)&&a.id===i.id),n>=0)return n;throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(i)} in scope(s) ${JSON.stringify(e)}`)}extractData(e){var i;const{keys:n,values:o,opts:{dataVisible:s}}=this,{dataDomain:a,processValue:l,scopes:u,allScopesHaveSameDefs:c}=this.initDataDomainProcessor(),d=new Array(s?e.length:0);let h=0,p=0;for(const v of e){const g=u.size>0?new Set(u):void 0,y=s?new Array(n.length):void 0;let C,m=0;for(const O of n){if(C=l(O,v,C),C===Fr)break;y&&(y[m++]=C)}if(C===Fr)continue;const w=s&&o.length>0?new Array(o.length):void 0;let b,_=0;for(const O of o)if(b=l(O,v,b),b===Fr){if(c)break;for(const x of null!==(i=O.scopes)&&void 0!==i?i:u)g?.delete(x);if(_++,0===g?.size)break}else w&&(w[_++]=b);if((b!==Fr||!c)&&0!==g?.size&&s){const O={datum:v,keys:y,values:w};!c&&g&&g.size<u.size&&(p++,O.validScopes=[...g]),d[h++]=O}}d.length=h;const f=v=>{const g=a.get(v).getDomain();return Array.isArray(g)&&g[0]>g[1]?[]:[...g]};return{type:"ungrouped",data:d,domain:{keys:n.map(v=>f(v)),values:o.map(v=>f(v))},defs:{allScopesHaveSameDefs:c,keys:n,values:o},partialValidDataCount:p,time:0}}groupData(e,i){var n,o,s,a;const l=new Map;for(const h of e.data){const{keys:p,values:f,datum:v,validScopes:g}=h,y=i?i(h):p,m=bT(y);if(l.has(m)){const C=l.get(m);if(C.values.push(f),C.datum.push(v),null!=g)for(let w=0;w<(null!==(o=null===(n=C.validScopes)||void 0===n?void 0:n.length)&&void 0!==o?o:0);w++){const _=null===(s=C.validScopes)||void 0===s?void 0:s[w];g.some(b=>b===_)||null===(a=C.validScopes)||void 0===a||a.splice(w,1)}}else l.set(m,{keys:y,values:[f],datum:[v],validScopes:g})}const u=new Array(l.size),c=new Array(l.size);let d=0;for(const[,{keys:h,values:p,datum:f,validScopes:v}]of l.entries())0!==v?.length&&(c[d]=h,u[d++]={keys:h,values:p,datum:f,validScopes:v});return Object.assign(Object.assign({},e),{type:"grouped",data:u,domain:Object.assign(Object.assign({},e.domain),{groups:c})})}aggregateData(e){var i,n,o,s,a,l,u,c;const{aggregates:d}=this;if(!d)return;const h=d.map(()=>[1/0,-1/0]),p=d.map(y=>this.valueGroupIdxLookup(y)),f=d.map(y=>y.aggregateFunction),v=d.map(y=>y.groupAggregateFunction),g=d.map(y=>y.finalFunction);for(const y of e.data){let{values:m}=y;const{validScopes:C}=y;null!==(i=y.aggValues)&&void 0!==i||(y.aggValues=new Array(p.length)),"ungrouped"===e.type&&(m=[m]);let w=0;for(const _ of p){if(null!==(n=C?.some(D=>{var T;return null===(T=d[w].matchScopes)||void 0===T?void 0:T.some(L=>D===L)}))&&void 0!==n&&!n){w++;continue}let O=null!==(s=null===(o=v[w])||void 0===o?void 0:o.call(v))&&void 0!==s?s:tu([]);for(const D of m){const T=_.map(A=>D[A]),L=f[w](T,y.keys);L&&(O=null!==(l=null===(a=v[w])||void 0===a?void 0:a.call(v,L,O))&&void 0!==l?l:tu(L,O))}const x=(null!==(c=null===(u=g[w])||void 0===u?void 0:u.call(g,O))&&void 0!==c?c:O).map(D=>RT(D));tu(x,h[w]),y.aggValues[w++]=x}}e.domain.aggValues=h}postProcessGroups(e){var i,n,o,s,a;const{groupProcessors:l}=this;if(!l)return;const u=new Set,c=new Map,d=new Map,h=new Map;for(const f of l){const v=this.valueGroupIdxLookup(f);d.set(f,v),h.set(f,f.adjust());for(const g of v){const y=this.values[g];u.add(g),c.set(g,new Jd("category"===y.valueType?"discrete":"continuous"))}}const p=f=>{var v;for(const g of u)null===(v=c.get(g))||void 0===v||v.extend(f[g])};for(const f of e.data){for(const v of l){if(null!==(n=null===(i=f.validScopes)||void 0===i?void 0:i.some(C=>{var w;return null===(w=v.matchScopes)||void 0===w?void 0:w.some(_=>C===_)}))&&void 0!==n&&!n)continue;const y=null!==(o=d.get(v))&&void 0!==o?o:[],m=null!==(a=null===(s=h.get(v))||void 0===s?void 0:s())&&void 0!==a?a:()=>{};if("grouped"!==e.type)f.values&&m(f.values,y);else for(const C of f.values)C&&m(C,y)}if("grouped"===e.type)for(const v of f.values)p(v);else p(f.values)}for(const[f,v]of c)e.domain.values[f]=[...v.getDomain()]}postProcessProperties(e){const{propertyProcessors:i}=this;if(i)for(const{adjust:n,property:o,scopes:s}of i)n()(e,this.valueIdxLookup(s??[],o))}reduceData(e){var i,n,o;const{reducers:s}=this,a=s.map(c=>c.scopes),l=s.map(c=>c.reducer()),u=s.map(c=>c.initialValue);for(const c of e.data){let d=0;for(const h of l)null===(n=null===(i=c.validScopes)||void 0===i?void 0:i.some(f=>{var v;return null===(v=a[d])||void 0===v?void 0:v.some(g=>f===g)}))||void 0===n||n?(u[d]=h(u[d],c),d++):d++}for(let c=0;c<u.length;c++)null!==(o=e.reduced)&&void 0!==o||(e.reduced={}),e.reduced[s[c].property]=u[c]}postProcessData(e){var i;const{processors:n}=this;for(const o of n)null!==(i=e.reduced)&&void 0!==i||(e.reduced={}),e.reduced[o.property]=o.calculate(e)}initDataDomainProcessor(){var e;const{keys:i,values:n}=this,o=new Set;for(const f of n)for(const v of null!==(e=f.scopes)&&void 0!==e?e:[])o.add(v);const s=o.size,a=new Map,l=new Map;let u=!0;const c=(f,v,g=a)=>{var y;"category"===v?g.set(f,new Jd("discrete")):(g.set(f,new Jd("continuous")),u&&(u=(null!==(y=f.scopes)&&void 0!==y?y:[]).length===s))},d=()=>{i.forEach(f=>c(f,f.valueType)),n.forEach(f=>c(f,f.valueType))};d();const h=this.buildAccessors(...i,...n);return{dataDomain:a,processValue:(f,v,g)=>{var y,m,C,w;let O,b=!1;if(f.property in h){try{O=h[f.property](v)}catch{}b=void 0!==O}else b=f.property in v,O=b?v[f.property]:f.missingValue;if(!b&&!("missingValue"in f)&&f.missing++,a.has(f)||d(),b&&null!==(m=null===(y=f.validation)||void 0===y?void 0:y.call(f,O,v))&&void 0!==m&&!m){if(!("invalidValue"in f))return Fr;O=f.invalidValue}return f.processor&&(l.has(f)||l.set(f,f.processor()),O=null===(C=l.get(f))||void 0===C?void 0:C(O,g!==Fr?g:void 0)),null===(w=a.get(f))||void 0===w||w.extend(O),O},initDataDomain:d,scopes:o,allScopesHaveSameDefs:u}}buildAccessors(...e){const i={};for(const n of e){if(!(n.property.indexOf(".")>=0||n.property.indexOf("[")>=0))continue;let s;s=n.property.startsWith("[")?`return datum${n.property};`:`return datum.${n.property};`,i[n.property]=new Function("datum",s)}return i}}return r.DEBUG=()=>{var t;return null!==(t=[!0,"data-model"].includes(Bi("agChartsDebug")))&&void 0!==t&&t},r})();function ag(){return(r,t)=>{const e=[`Property [${r}] is deprecated.`,t].filter(i=>null!=i).join(" ");ee.warnOnce(e)}}var Nn=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};const Nt="ag-chart-tooltip",PT=`\n.${Nt} {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: black;\n    background: rgb(244, 244, 244);\n    border-radius: 5px;\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\n}\n\n.${Nt}-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.${Nt}-no-animation {\n    transition: none !important;\n}\n\n.${Nt}-hidden {\n    visibility: hidden;\n}\n\n.${Nt}-title {\n    font-weight: bold;\n    padding: 7px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    color: white;\n    background-color: #888888;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n.${Nt}-content {\n    padding: 7px;\n    line-height: 1.7em;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    overflow: hidden;\n}\n\n.${Nt}-content:empty {\n    padding: 0;\n    height: 7px;\n}\n\n.${Nt}-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 6px solid #989898;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: #989898;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.${Nt}-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid black;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: rgb(244, 244, 244);\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n`;function St(r,t){var e,i,n,o;if("string"==typeof r)return r;t=t??{};const{content:s=(null!==(e=t.content)&&void 0!==e?e:""),title:a=(null!==(i=t.title)&&void 0!==i?i:void 0),color:l=(null!==(n=t.color)&&void 0!==n?n:"white"),backgroundColor:u=(null!==(o=t.backgroundColor)&&void 0!==o?o:"#888")}=r;return`${a?`<div class="${Nt}-title"\n        style="color: ${l}; background-color: ${u}">${a}</div>`:""}<div class="${Nt}-content">${s}</div>`}const AT=["pointer","node"],LT=re(r=>AT.includes(r),"expecting a position type keyword such as 'pointer' or 'node'");class aa{constructor(){this.type="pointer",this.xOffset=0,this.yOffset=0}}Nn([R(LT)],aa.prototype,"type",void 0),Nn([R(K())],aa.prototype,"xOffset",void 0),Nn([R(K())],aa.prototype,"yOffset",void 0);class Ui{constructor(t,e,i){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.position=new aa,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=i;const n=e.createElement("div");if(this.element=this.tooltipRoot.appendChild(n),this.element.classList.add(Nt),this.canvasElement=t,window.IntersectionObserver){const o=new IntersectionObserver(s=>{for(const a of s)a.target===this.canvasElement&&0===a.intersectionRatio&&this.toggle(!1)},{root:this.tooltipRoot});o.observe(this.canvasElement),this.observer=o}if(Ui.tooltipDocuments.indexOf(e)<0){const o=e.createElement("style");o.innerHTML=PT,e.head.insertBefore(o,e.head.querySelector("style")),Ui.tooltipDocuments.push(e)}}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:t}=this;return!t.classList.contains(Nt+"-hidden")}updateClass(t,e){const{element:i,class:n,lastClass:o,enableInteraction:s}=this,l=(u,c)=>{const d=`${Nt}-${u}`;c?i.classList.add(d):i.classList.remove(d)};l("no-animation",!this.isVisible()&&!!t),l("no-interaction",!s),l("hidden",!t),l("arrow",!!e),n!==o&&(o&&i.classList.remove(o),n&&i.classList.add(n),this.lastClass=n)}show(t,e,i=!1){var n,o,s,a,l,u,c;const{element:d,canvasElement:h}=this;if(void 0!==e)d.innerHTML=e;else if(!d.innerHTML)return void this.toggle(!1);const p=(L,A,N)=>Math.max(Math.min(A,N),L),f=null!==(o=null===(n=t.position)||void 0===n?void 0:n.xOffset)&&void 0!==o?o:0,v=null!==(a=null===(s=t.position)||void 0===s?void 0:s.yOffset)&&void 0!==a?a:0,g=h.getBoundingClientRect(),y=g.left+t.offsetX-d.clientWidth/2+f,m=g.top+t.offsetY-d.clientHeight-8+v,C=this.getWindowBoundingBox(),_=C.y+C.height-d.clientHeight,b=p(C.x,y,C.x+C.width-d.clientWidth-1),O=p(C.y,m,_),T=null!==(u=null!==(l=t.showArrow)&&void 0!==l?l:this.showArrow)&&void 0!==u?u:!(b!==y||O!==m||f||v);if(this.updateShowArrow(T),d.style.transform=`translate(${Math.round(b)}px, ${Math.round(O)}px)`,this.enableInteraction=null!==(c=t.enableInteraction)&&void 0!==c&&c,this.delay>0&&!i)return this.toggle(!1),void(this.showTimeout=window.setTimeout(()=>{this.toggle(!0)},this.delay));this.toggle(!0)}getWindowBoundingBox(){return new be(0,0,window.innerWidth,window.innerHeight)}toggle(t){t||window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,o=!!["","-title","-content"].filter(s=>i?.contains(`${Nt}${s}`));return void 0!==i&&o}updateShowArrow(t){this._showArrow=t}}function nu(r,t=[0,0]){for(const e of r)"number"==typeof e&&(e<0&&(t[0]+=e),e>0&&(t[1]+=e));return t}function lg(r,t){return{id:t,scopes:[r.id],type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(e,i=[0,0])=>{var n,o;return i[0]+=null!==(n=e?.[0])&&void 0!==n?n:0,i[1]+=null!==(o=e?.[1])&&void 0!==o?o:0,i}}}function ug(r,t,e,i){const n={id:t,scopes:[r.id],matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(o,s=[])=>{const a=s[1]-s[0];return e.aggregateFunction(o).map(l=>l/a)}};return e.groupAggregateFunction&&(n.groupAggregateFunction=e.groupAggregateFunction),n}Ui.tooltipDocuments=[],Nn([R(Le)],Ui.prototype,"enabled",void 0),Nn([R(pn)],Ui.prototype,"showArrow",void 0),Nn([R(ue)],Ui.prototype,"class",void 0),Nn([R(K(0))],Ui.prototype,"delay",void 0),Nn([function TT(r,t){const e=ag();return Lr((i,n,o)=>(o!==i[r]&&(e(n.toString(),`Use [${r}] instead.`),i[r]=t?t(o):o),Zl),(i,n)=>(e(n.toString(),`Use [${r}] instead.`),i[r]))}("range",r=>r?"nearest":"exact")],Ui.prototype,"tracking",void 0),Nn([R(sg)],Ui.prototype,"range",void 0);const la=new Map;function ou(r,t){var e,i,n;const o=JSON.stringify(r,null,0);return la.has(t)||la.set(t,new Map),!(null===(e=la.get(t))||void 0===e)&&e.has(o)||null===(i=la.get(t))||void 0===i||i.set(o,t(r)),null===(n=la.get(t))||void 0===n?void 0:n.get(o)}const eh={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let r=NaN;return(t,e)=>{const i=e.keys[0],n=Math.abs(i-r);return r=i,!isNaN(n)&&n>0&&n<t?n:t}}},NT={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:r}})=>{if(null!=r)return[...r].sort((t,e)=>{for(let i=0;i<t.length;i++){const n=t[i]-e[i];if(0!==n)return n}return 0})}};function GT({normaliseTo:r,mode:t}){const e=(i,n)=>{const o=i*r/n;return o>=0?Math.min(r,o):Math.max(-r,o)};return()=>()=>(i,n)=>{const o=[0,0];for(const a of n){const l=i[a],u=l<0?0:1;"sum"===t?o[u]+=l:o[u]=0===u?Math.min(o[u],l):Math.max(o[u],l)}const s=Math.max(Math.abs(o[0]),o[1]);for(const a of n)i[a]=e(i[a],s)}}function th(r,t,e,i="sum"){return{scopes:[r.id],type:"group-value-processor",matchGroupIds:t,adjust:ou({normaliseTo:e,mode:i},GT)}}function kT({normaliseTo:r,rangeMin:t,rangeMax:e}){const i=r[1]-r[0],n=(o,s,a)=>{const l=r[0]+(o-s)/a*i;return 0===a||l>=r[1]?r[1]:l<r[0]?r[0]:l};return()=>(o,s)=>{let[a,l]=o.domain.values[s];null!=t&&(a=t),null!=e&&(l=e);const u=l-a;o.domain.values[s]=[r[0],r[1]];for(const c of o.data){let d=c.values;"ungrouped"===o.type&&(d=[d]);for(const h of d)h[s]=n(h[s],a,u)}}}function cg(r,t,e,i,n){return{scopes:[r.id],type:"property-value-processor",property:t,adjust:ou({normaliseTo:e,rangeMin:i,rangeMax:n},kT)}}function HT(r){return()=>()=>(t,e)=>{let i=0;for(const n of e){const o=t[n];"number"!=typeof o||isNaN(o)||("normal"===r&&(i+=o),t[n]=i,"trailing"===r&&(i+=o))}}}function VT({mode:r,sum:t}){return()=>{const e=[];let i=!0;return()=>(n,o)=>{let s=0;for(const a of o){const l=n[a],u=i&&"current"===t?0:e[a];e[a]=l;const c="current"===t?l:u;"number"!=typeof l||isNaN(l)||"number"!=typeof u||isNaN(u)?n[a]=c:("normal"===r&&(s+=c),n[a]=s,"trailing"===r&&(s+=c))}i=!1}}}function BT(r,t,e,i){let n;return n=e.startsWith("window")?ou({mode:e.endsWith("-trailing")?"trailing":"normal",sum:i},VT):ou(e,HT),{scopes:[r.id],type:"group-value-processor",matchGroupIds:[t],adjust:n}}function dg(r,t=!0){return{type:"processor",property:"diff",calculate:e=>{const i={changed:!1,added:[],updated:[],removed:[]},n=new Map,o=new Map,s=new Map;for(let l=0;l<Math.max(r.data.length,e.data.length);l++){const u=r.data[l],c=e.data[l],d=u?.keys.join("___"),h=c?.keys.join("___");d!==h?(s.has(h)?((t||!ru(s.get(h).values,c.values))&&o.set(h,c),s.delete(h)):c&&n.set(h,c),n.has(d)?((t||!ru(n.get(d).values,u.values))&&o.set(d,u),n.delete(d)):u&&s.set(d,u)):ru(u.values,c.values)||o.set(h,c)}return i.added=Array.from(n.values()).map(l=>l.keys),i.updated=Array.from(o.values()).map(l=>l.keys),i.removed=Array.from(s.values()).map(l=>l.keys),i.changed=i.added.length>0||i.updated.length>0||i.removed.length>0,i}}}function ru(r,t){if(null==r||null==t||r.length!==t.length)return!1;for(let e=0;e<r.length;e++){if(Array.isArray(r[e])&&Array.isArray(t[e]))return ru(r[e],t[e]);if(r[e]!==t[e])return!1}return!0}function at(r,t){return Lr((e,i,n)=>(e[r][t??i]=n,n))}function fn(r){const{newValue:t,oldValue:e,changeValue:i}=r;return Lr((n,o,s,a)=>(s!==a&&(void 0!==a&&e?.call(n,a),void 0!==s&&t?.call(n,s),i?.call(n,s,a)),s))}var _t=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ht=function(r){return r[r.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",r[r.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",r[r.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",r[r.NEAREST_NODE=3]="NEAREST_NODE",r}(ht||{});function ih(r){return null!=ql(r,!0)}function hg(r){return null!=ql(r,!1)}function nh(r,t,e,i={}){return Object.assign({scopes:[r.id],property:t,type:"key",valueType:e?"range":"category",validation:e?ih:hg},i)}function pt(r,t,e,i={}){return Object.assign({scopes:[r.id],property:t,type:"value",valueType:e?"range":"category",validation:e?ih:hg},i)}function UT(r,t,e,i={}){return Object.assign(Object.assign({},pt(r,t,e,i)),{processor:()=>{let r=0;return t=>"number"!=typeof t||isNaN(t)?t:(r+=t,r)}})}function tr(r,t,e,i,n="current",o){return[pt(r,t,e,o),BT(r,o.groupId,i,n)]}class ua{constructor(t,e,i){this.type="nodeClick",this.event=t,this.datum=e.datum,this.seriesId=i.id}}class zT extends ua{}class KT extends ua{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class ca{constructor(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0}}_t([R(Ne)],ca.prototype,"fill",void 0),_t([R(xe(0,1))],ca.prototype,"fillOpacity",void 0),_t([R(Ne)],ca.prototype,"stroke",void 0),_t([R(xe(0))],ca.prototype,"strokeWidth",void 0);class su{constructor(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}}_t([R(xe(0))],su.prototype,"strokeWidth",void 0),_t([R(xe(0,1))],su.prototype,"dimOpacity",void 0),_t([R(pn)],su.prototype,"enabled",void 0);class pg{constructor(){this.color="black"}}_t([R(Ne)],pg.prototype,"color",void 0);class oh{constructor(){this.item=new ca,this.series=new su,this.text=new pg}}class Gn{constructor(){this.enabled=!0,this.showArrow=void 0,this.interaction=new fg,this.position=new aa}}_t([R(Le)],Gn.prototype,"enabled",void 0),_t([R(pn)],Gn.prototype,"showArrow",void 0);class fg{constructor(){this.enabled=!1}}_t([R(Le)],fg.prototype,"enabled",void 0);class zi extends Zv{constructor(t){super(),this.id=mo(this),this.rootGroup=new de({name:"seriesRoot",isVirtual:!0}),this.axes={[Y.X]:void 0,[Y.Y]:void 0},this.directions=[Y.X,Y.Y],this.nodeDataRefresh=!0,this._data=void 0,this._visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.seriesGrouping=void 0,this._declarationOrder=-1,this.highlightStyle=new oh,this.ctx=t.moduleCtx;const{useLabelLayer:e=!1,pickModes:i=[ht.NEAREST_BY_MAIN_AXIS_FIRST],directionKeys:n={},directionNames:o={},contentGroupVirtual:s=!0}=t,{rootGroup:a}=this;this.directionKeys=n,this.directionNames=o,this.contentGroup=a.appendChild(new de({name:`${this.id}-content`,layer:!s,isVirtual:s,zIndex:Ze.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=a.appendChild(new de({name:`${this.id}-highlight`,layer:!0,zIndex:Ze.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")})),this.highlightNode=this.highlightGroup.appendChild(new de({name:"highlightNode"})),this.highlightLabel=this.highlightGroup.appendChild(new de({name:"highlightLabel"})),this.highlightNode.zIndex=0,this.highlightLabel.zIndex=10,this.pickModes=i,e&&(this.labelGroup=a.appendChild(new de({name:`${this.id}-series-labels`,layer:!0,zIndex:Ze.SERIES_LABEL_ZINDEX})))}get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set data(t){this._data=t,this.nodeDataRefresh=!0}get data(){return this._data}hasData(){const{data:t}=this;return t&&(!Array.isArray(t)||t.length>0)}set visible(t){this._visible=t,this.visibleChanged()}get visible(){return this._visible}onSeriesGroupingChange(t,e){const{id:i,type:n,visible:o,rootGroup:s}=this;t&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:n}),e&&this.ctx.seriesStateManager.registerSeries({id:i,type:n,visible:o,seriesGrouping:e}),this.ctx.seriesLayerManager.changeGroup({id:i,type:n,rootGroup:s,getGroupZIndexSubOrder:a=>this.getGroupZIndexSubOrder(a),seriesGrouping:e,oldGrouping:t})}getBandScalePadding(){return{inner:1,outer:0}}getGroupZIndexSubOrder(t,e=0){let i=0;switch(t){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":e+=15e3}return[()=>this._declarationOrder+i,e]}addChartEventListeners(){}destroy(){this.ctx.seriesStateManager.deregisterSeries(this),this.ctx.seriesLayerManager.releaseGroup(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),n=e?.[i],o=[],s=(...l)=>{for(const u of l)a(u)},a=l=>{Array.isArray(l)?s(...l):"object"==typeof l?s(Object.values(l)):o.push(l)};return n&&n.forEach(l=>{a(this[l])}),o}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(t){const{highlightStyle:{series:{dimOpacity:e=1,enabled:i=!0}}}=this;if(!1===i||1===e)return 1;switch(this.isItemIdHighlighted(t)){case"no-highlight":case"highlighted":return 1;case"peer-highlighted":case"other-highlighted":return e}}getStrokeWidth(t,e){const{highlightStyle:{series:{strokeWidth:i,enabled:n=!0}}}=this;if(!1===n||void 0===i)return t;switch(this.isItemIdHighlighted(e)){case"highlighted":return i;case"no-highlight":case"other-highlighted":case"peer-highlighted":return t}}isItemIdHighlighted(t){var e;const i=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),{series:n,itemId:o}=i??{};return null!=n?n!==this?"other-highlighted":void 0===o?"highlighted":t&&i!==t&&o!==t.itemId?"peer-highlighted":"highlighted":"no-highlight"}pickNode(t,e){const{pickModes:i,visible:n,rootGroup:o}=this;if(n&&o.visible)for(const s of i){if(e&&!e.includes(s))continue;let a;switch(s){case ht.EXACT_SHAPE_MATCH:a=this.pickNodeExactShape(t);break;case ht.NEAREST_BY_MAIN_AXIS_FIRST:case ht.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:a=this.pickNodeMainAxisFirst(t,s===ht.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case ht.NEAREST_NODE:a=this.pickNodeClosestDatum(t)}if(a)return{pickMode:s,match:a.datum,distance:a.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);if(e)return{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){const i=this.getNodeClickEvent(t,e);this.fireEvent(i)}fireNodeDoubleClickEvent(t,e){const i=this.getNodeDoubleClickEvent(t,e);this.fireEvent(i)}getNodeClickEvent(t,e){return new zT(t,e,this)}getNodeDoubleClickEvent(t,e){return new KT(t,e,this)}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0}isEnabled(){return this.visible}fixNumericExtent(t,e){var i;const n=iu(t);if(0===n.length)return n;let[o,s]=n;if(o===s){const[a,l]=null!==(i=e?.calculatePadding(o,s))&&void 0!==i?i:[1,1];o-=a,s+=l}return[o,s]}}zi.highlightedZIndex=1e12,_t([R(wt)],zi.prototype,"id",void 0),_t([R(Le)],zi.prototype,"_visible",void 0),_t([R(Le)],zi.prototype,"showInLegend",void 0),_t([R(wt)],zi.prototype,"cursor",void 0),_t([R(sg)],zi.prototype,"nodeClickRange",void 0),_t([fn({changeValue:function(r,t){this.onSeriesGroupingChange(t,r)}})],zi.prototype,"seriesGrouping",void 0);var au=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class ir{constructor(t=0,e=t,i=t,n=e){this.top=t,this.right=e,this.bottom=i,this.left=n}clear(){this.top=this.right=this.bottom=this.left=0}}au([R(K(0))],ir.prototype,"top",void 0),au([R(K(0))],ir.prototype,"right",void 0),au([R(K(0))],ir.prototype,"bottom",void 0),au([R(K(0))],ir.prototype,"left",void 0);class lu{static init(){const t=window.ResizeObserver;t?this.resizeObserver=new t(e=>{for(const i of e){const{width:n,height:o}=i.contentRect;this.checkSize(this.elements.get(i.target),i.target,n,o)}}):this.pollerHandler=window.setInterval(()=>{this.elements.forEach((i,n)=>{this.checkClientSize(n,i)})},100),this.ready=!0}static destroy(){var t;null!=this.pollerHandler&&(clearInterval(this.pollerHandler),this.pollerHandler=void 0),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.resizeObserver=void 0,this.ready=!1}static checkSize(t,e,i,n){t&&(!t.size||i!==t.size.width||n!==t.size.height)&&(t.size={width:i,height:n},t.cb(t.size,e))}static observe(t,e){this.ready||this.init(),this.unobserve(t,!1),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e}),this.checkClientSize(t,{cb:e})}static unobserve(t,e=!0){this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t),e&&0===this.elements.size&&this.destroy()}static checkClientSize(t,e){this.checkSize(e,t,t.clientWidth?t.clientWidth:0,t.clientHeight?t.clientHeight:0)}}function $T(r,t,e,i,n){let o=r.x;r.x<t?o=t:r.x>t+i&&(o=t+i);let s=r.y;r.y<e?s=e:r.y>e+n&&(s=e+n);const a=r.x-o,l=r.y-s;return Math.sqrt(a*a+l*l)<=.5*r.size}function vg(r,t,e,i,n){return r.x+r.width>t&&r.x<t+i&&r.y+r.height>e&&r.y<e+n}function YT(r,t,e,i,n){return t+i<r.x+r.width&&t>r.x&&e>r.y&&e+n<r.y+r.height}function XT(r){return null!=r&&"object"==typeof r.point&&"object"==typeof r.label}lu.elements=new Map,lu.ready=!1;function gg(r,t){let n,o,e=0,i=!1;const s=()=>i,a=()=>{i=!1,o?.(),o=void 0,n=void 0,e>0&&r(l)},l=()=>{const u=e;e=0,i=!0;const c=t({count:u});c?c.then(a).catch(a):a()};return{schedule(u){0===e&&!s()&&r(l,u),e++},await(){return function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})}(this,void 0,void 0,function*(){if(s())for(null==n&&(n=new Promise(u=>{o=u}));s();)yield n})}}}function yg(r){return new Promise(t=>{setTimeout(()=>t(void 0),r)})}var mg=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class rh{constructor(t,e){this.renderer=void 0,this.text=void 0,this.className=t,this.parentElement=e}show(t){var e,i;let n=this.element;if(n||(n=document.createElement("div"),n.className=this.className,this.element=n),n.style.position="absolute",n.style.left=`${t.x}px`,n.style.top=`${t.y}px`,n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,this.renderer)n.innerHTML=this.renderer();else{const o=document.createElement("div");o.style.alignItems="center",o.style.boxSizing="border-box",o.style.display="flex",o.style.justifyContent="center",o.style.margin="8px",o.style.height="100%",o.style.font="12px Verdana, sans-serif",o.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",n.append(o)}null===(i=this.parentElement)||void 0===i||i.append(n)}hide(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0}}mg([R(je)],rh.prototype,"renderer",void 0),mg([R(ue)],rh.prototype,"text",void 0);class tP{constructor(t){this.noData=new rh("ag-chart-no-data-overlay",t)}}function nr(r,t){const e=Ai(r),i=Ai(t);if("array"===i){const u=t;return"array"!==e||r.length!==u.length||u.some((c,d)=>{var h;return null!=nr(null===(h=r)||void 0===h?void 0:h[d],c)})?[...u]:null}if("primitive"===i)return"primitive"!==e?Object.assign({},t):r!==t?t:null;const n=r||{},o=t||{},s=new Set([...Object.keys(n),...Object.keys(o)]);let a=0;const l={};for(const u of s){if(n[u]===o[u])continue;const c=f=>{l[u]=f,a++},d=Ai(n[u]),h=Ai(o[u]);if(d!==h){c(o[u]);continue}if("primitive"===h||null===h){c(o[u]);continue}if("array"===h&&n[u].length!==o[u].length){c(o[u]);continue}if("class-instance"===h){c(o[u]);continue}if("function"===h&&n[u]!==o[u]){c(o[u]);continue}const p=nr(n[u],o[u]);null!==p&&c(p)}return 0===a?null:l}const Ki=Symbol("<delete-property>"),Cg=Symbol("<unspecified-property>");function Qe(r,t){var e;const i=null!==(e=t?.avoidDeepClone)&&void 0!==e?e:[];if(r.map(a=>Ai(a)).some(a=>"array"===a)){const a=r[r.length-1];return a instanceof Array?a.map(l=>{const u=Ai(l);return"array"===u?Qe([[],l],t):"object"===u?Qe([{},l],t):l}):a}const o={},s=new Set(r.map(a=>null!=a?Object.keys(a):[]).reduce((a,l)=>a.concat(l),[]));for(const a of s){const l=r.map(h=>null!=h&&"object"==typeof h&&a in h?h[a]:Cg).filter(h=>h!==Cg);if(0===l.length)continue;const u=l[l.length-1];if(u===Ki)continue;const c=l.map(h=>Ai(h)),d=c[0];o[a]=c.some(h=>h!==d)?u:"array"!==d&&"object"!==d||i.includes(a)?"array"===d?[...u]:u:Qe(l,t)}return o}function da(r,t,e={}){var i,n,o;const{path:s,matcherPath:a=(s?s.replace(/(\[[0-9+]+\])/i,"[]"):void 0),skip:l=[],constructors:u={},constructedArrays:c=new WeakMap,allowedTypes:d={},idx:h}=e;if(null==r)throw new Error(`AG Charts - target is uninitialised: ${s??"<root>"}`);if(null==t)return r;const p=r;null!=h&&"_declarationOrder"in p&&(p._declarationOrder=h);const f=Ai(r);for(const v in t){const g=`${a?a+".":""}${v}`;if(l.indexOf(g)>=0)continue;const y=t[v],m=`${s?s+".":""}${v}`,C=p.constructor,w=p[v];let _=null!==(i=u[g])&&void 0!==i?i:u[v];try{const b=Ai(w),O=Ai(y);if("class-instance"===f&&!(v in r)&&!Object.prototype.hasOwnProperty.call(p,v)){ee.warn(`unable to set [${m}] in ${C?.name} - property is unknown`);continue}const x=null!==(n=d[g])&&void 0!==n?n:[b];if(("class-instance"!==b||"object"!==O)&&null!=b&&null!=O&&!x.includes(O)){ee.warn(`unable to set [${m}] in ${C?.name} - can't apply type of [${O}], allowed types are: [${x}]`);continue}"array"===O?(_=null!==(o=_??c.get(w))&&void 0!==o?o:u[`${g}[]`],p[v]=null!=_?y.map((T,L)=>da(new _,T,Object.assign(Object.assign({},e),{path:m,matcherPath:g+"[]",idx:L}))):y):"class-instance"===O?p[v]=y:"object"===O?null!=w?da(w,y,Object.assign(Object.assign({},e),{path:m,matcherPath:g,idx:void 0})):p[v]=null!=_?da(new _,y,Object.assign(Object.assign({},e),{path:m,matcherPath:g,idx:void 0})):y:p[v]=y}catch(b){ee.warn(`unable to set [${m}] in [${C?.name}]; nested error is: ${b.message}`);continue}}return r}function Ir(r,t,e,...i){var n;const o=Ai(r),s=null!==(n=e.skip)&&void 0!==n?n:[];if("array"!==o){if("object"===o){t(o,r,...i);for(const a in r){if(s.indexOf(a)>=0)continue;const l=r[a],u=i?.map(d=>d?.[a]),c=Ai(l);("object"===c||"array"===c)&&Ir(l,t,e,...u)}}}else r.forEach((a,l)=>{Ir(a,t,e,...(i??[]).map(u=>u?.[l]))})}const iP=typeof window<"u";function Ai(r){return null==r?null:iP&&r instanceof HTMLElement?"primitive":r instanceof Array?"array":r instanceof Date?"primitive":"object"==typeof r&&r.constructor===Object?"object":"function"==typeof r?"function":"object"==typeof r&&null!=r.constructor?"class-instance":"primitive"}class sh{constructor(){this.registeredListeners={}}addListener(t,e){var i;const n=Symbol(t);return this.registeredListeners[t]||(this.registeredListeners[t]=[]),null===(i=this.registeredListeners[t])||void 0===i||i.push({symbol:n,handler:e}),n}dispatch(t,...e){var i;const n=null!==(i=this.registeredListeners[t])&&void 0!==i?i:[],o=[];for(const s of n)try{o.push(s.handler(...e))}catch(a){ee.errorOnce(a),o.push(void 0)}return o}cancellableDispatch(t,e,...i){var n;const o=null!==(n=this.registeredListeners[t])&&void 0!==n?n:[],s=[];for(const a of o){if(e())break;s.push(a.handler(...i))}return s}reduceDispatch(t,e,...i){var n;const o=null!==(n=this.registeredListeners[t])&&void 0!==n?n:[];let s;for(const a of o)s=a.handler(...i),i=e(s,...i);return s}removeListener(t){for(const e in this.registeredListeners){const i=this.registeredListeners[e],n=i?.findIndex(o=>o.symbol===t);null!=n&&n>=0&&i?.splice(n,1),null!=n&&0===i?.length&&delete this.registeredListeners[e]}}}class ha{constructor(){this.listeners=new sh}addListener(t,e){return this.listeners.addListener(t,e)}removeListener(t){this.listeners.removeListener(t)}}function pa(r,t){return r=+r,t=+t,e=>r*(1-e)+t*e}function wg(r,t){if("string"==typeof r)try{r=fe.fromString(r)}catch{r=fe.fromArray([0,0,0])}if("string"==typeof t)try{t=fe.fromString(t)}catch{t=fe.fromArray([0,0,0])}const e=pa(r.r,t.r),i=pa(r.g,t.g),n=pa(r.b,t.b),o=pa(r.a,t.a);return function(s){return fe.fromArray([e(s),i(s),n(s),o(s)]).toRgbaString()}}function Sg(r,t){const e=typeof t;let i;if("number"===e)return pa(r,t);if("string"===e)try{return i=fe.fromString(t),wg(r,t=i)}catch{}throw new Error("Unable to interpolate values")}function uu(r){return({from:t,to:e})=>{const i=Sg(t,e);return n=>i(r(n))}}function _g({from:r,to:t}){return Sg(r,t)}uu(r=>1-Math.cos(r*Math.PI/2));const Nr=uu(r=>Math.sin(r*Math.PI/2));uu(r=>-(Math.cos(r*Math.PI)-1)/2),uu(r=>{if(0===r||1===r)return r;const t=Math.pow(2,-10*r),i=2*Math.PI/3;return t*Math.sin((10*r-.75)*i)+1});var ah=function(r){return r.Loop="loop",r.Reverse="reverse",r}(ah||{});function Eg({driver:r,duration:t,from:e,to:i,autoplay:n=!0,delay:o=0,ease:s=_g,repeat:a=0,repeatType:l=ah.Loop,onComplete:u,onPlay:c,onRepeat:d,onStop:h,onUpdate:p}){let f,v=0,g=0,y=0,m=!0,C=!1;const w=s({from:e,to:i}),_={isPlaying:!1,play:O,pause:function x(){return _.isPlaying=!1,_},stop:D,reset:function T(){return C=!1,g=0,y=0,b.reset(),_}},b=r(function N(H){m||(H=-H),v>=o?(g+=H,C||(f=w(Math.min(1,Math.max(0,g/t))),C=m?g>=t:g<=0),p?.(f),C&&(y<a?function L(){y++,l===ah.Reverse?(m=y%2==0,g=m?g%t:t-g%t):g%=t,C=!1,d?.()}():function A(){D(),u?.()}())):v+=H});function O(){return _.isPlaying=!0,b.start(),c?.(),_}function D(){return _.isPlaying=!1,b.stop(),h?.(),_}return n&&O(),_}class rP extends ha{constructor(t){super(),this.controllers={},this.throttles={},this.throttleGroups=new Set,this.updaters=[],this.isPlaying=!1,this.readyToPlay=!1,this.defaultOptions={},this.skipAnimations=!1,this.debug=!1,this.interactionManager=t,window.addEventListener("DOMContentLoaded",()=>{this.readyToPlay=!0}),setTimeout(()=>{this.readyToPlay=!0},10)}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug&&ee.debug("AnimationManager.play()");for(const t in this.controllers)this.controllers[t].play();this.startAnimationCycle()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimationFrame(),this.debug&&ee.debug("AnimationManager.pause()");for(const t in this.controllers)this.controllers[t].pause()}}stop(){this.isPlaying=!1,this.cancelAnimationFrame(),this.debug&&ee.debug("AnimationManager.stop()");for(const t in this.controllers)this.controllers[t].stop()}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}animate(t,e){var i,n,{disableInteractions:o=!0}=e,s=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(e[i[n]]=r[i[n]])}return e}(e,["disableInteractions"]);if(this.skipAnimations)return void(null===(i=s.onUpdate)||void 0===i||i.call(s,s.to));const a=Object.assign(Object.assign({},s),{autoplay:!!this.isPlaying&&s.autoplay,driver:this.createDriver(t,o)});this.controllers[t]&&this.controllers[t].stop();const l=Eg(a);return this.controllers[t]=l,null===(n=s.onUpdate)||void 0===n||n.call(s,s.from),l}animateMany(t,e,i){var n;if(this.skipAnimations){const v=e.map(g=>g.to);return i.onUpdate(v),void(null===(n=i.onComplete)||void 0===n||n.call(i))}const o=e.map(v=>v.from);let s=0,a=0,l=0,u=0;const c=v=>g=>{var y;o[v]=g,++l>=e.length&&(null===(y=i.onUpdate)||void 0===y||y.call(i,o),l=0)},d=()=>{var v;++s>=e.length&&(null===(v=i.onPlay)||void 0===v||v.call(i))},h=()=>{var v;++a>=e.length&&(null===(v=i.onStop)||void 0===v||v.call(i))},p=()=>{var v;++u>=e.length&&(null===(v=i.onComplete)||void 0===v||v.call(i))};let f=0;for(const v of e)this.animate(`${t}-${f}`,Object.assign(Object.assign(Object.assign({},i),v),{onUpdate:c(f),onPlay:d,onStop:h,onComplete:p})),f++}animateWithThrottle(t,e){var i;const n=null!==(i=e.throttleId)&&void 0!==i?i:t;this.throttles[n]&&e.duration&&Date.now()-this.throttles[n]<e.duration&&(e.delay=0,e.duration=1),this.throttles[t]=Date.now(),this.animate(t,Object.assign({},e))}animateManyWithThrottle(t,e,i){var n;const{throttleGroup:o}=i,s=null!==(n=i.throttleId)&&void 0!==n?n:t,a=Date.now(),l=this.throttles[s]&&i.duration&&a-this.throttles[s]<i.duration,u=o&&this.throttleGroups.has(o);return l&&!u&&(i.delay=0,i.duration=1),!l&&o&&this.throttleGroups.add(o),this.throttles[s]=a,this.animateMany(t,e,Object.assign(Object.assign({},i),{onStop:()=>{var d;o&&this.throttleGroups.delete(o),null===(d=i.onStop)||void 0===d||d.call(i)}}))}tween(t){const e=`tween-${btoa(JSON.stringify(t))}`;return function nP(r){let t;const i=Eg(Object.assign(Object.assign({},r),{autoplay:!1,onUpdate:o=>{t?.(o)}})),n={start:o=>(i.stop(),i.reset(),i.play(),t=o,n),stop:()=>(i.stop(),n)};return n}(Object.assign(Object.assign({},t),{driver:this.createDriver(e)}))}createDriver(t,e){return i=>({start:()=>{this.updaters.push([t,i]),null==this.requestId&&this.startAnimationCycle(),e&&this.interactionManager.pause(`animation_${t}`)},stop:()=>{delete this.controllers[t],this.updaters=this.updaters.filter(([n])=>n!==t),this.updaters.length<=0&&this.cancelAnimationFrame(),e&&this.interactionManager.resume(`animation_${t}`)},reset:()=>{}})}startAnimationCycle(){if(0===this.updaters.length)return;const t=e=>{if(this.requestId=requestAnimationFrame(t),!this.readyToPlay)return;void 0===this.lastTime&&(this.lastTime=e);const i=e-this.lastTime;this.lastTime=e,this.debug&&ee.debug("AnimationManager - frame()",{updaterCount:this.updaters.length}),this.updaters.forEach(([n,o])=>o(i)),this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:i})};this.requestId=requestAnimationFrame(t)}cancelAnimationFrame(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=void 0,this.lastTime=void 0)}}class sP{constructor(t){this.states={},this.element=t}updateCursor(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()}applyStates(){let t="default";Object.entries(this.states).reverse().slice(0,1).forEach(([e,{style:i}])=>t=i),this.element.style.cursor=t}}class aP extends ha{legendItemClick(t,e,i,n){this.listeners.dispatch("legend-item-click",{type:"legend-item-click",series:t,itemId:e,enabled:i,legendItemName:n})}legendItemDoubleClick(t,e,i,n,o){this.listeners.dispatch("legend-item-double-click",{type:"legend-item-double-click",series:t,itemId:e,enabled:i,legendItemName:o,numVisibleItems:n})}axisHover(t,e){this.listeners.dispatch("axis-hover",{type:"axis-hover",axisId:t,direction:e})}}class uP extends ha{constructor(){super(),this.states={},this.activeHighlight=void 0}updateHighlight(t,e){delete this.states[t],null!=e&&(this.states[t]={highlightedDatum:e}),this.applyStates()}getActiveHighlight(){return this.activeHighlight}applyStates(){const t=this.activeHighlight;let e;Object.entries(this.states).reverse().slice(0,1).forEach(([n,{highlightedDatum:o}])=>e=o),this.activeHighlight=e,function lP(r,t){return r===t||!(r?.series!==t?.series||r?.itemId!==t?.itemId||r?.datum!==t?.datum)}(t,this.activeHighlight)||this.listeners.dispatch("highlight-change",{type:"highlight-change",previousHighlight:t,currentHighlight:this.activeHighlight})}}const bg=["pagehide","mousemove","mouseup","wheel"],Rg=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel"];class So extends ha{constructor(t,e=document){super(),this.eventHandler=i=>this.processEvent(i),this.mouseDown=!1,this.touchDown=!1,this.enabled=!0,this.pausers=[],this.rootElement=e.body,this.element=t;for(const i of Rg)i.startsWith("touch")?t.addEventListener(i,this.eventHandler,{passive:!0}):t.addEventListener(i,this.eventHandler);for(const i of bg)"wheel"===i?window.addEventListener(i,this.eventHandler,{passive:!1}):window.addEventListener(i,this.eventHandler);if(So.interactionDocuments.indexOf(e)<0){const i=document.createElement("style");i.innerHTML="\n.ag-chart-wrapper {\n    touch-action: none;\n}\n",document.head.insertBefore(i,document.head.querySelector("style")),So.interactionDocuments.push(e)}}destroy(){for(const t of bg)window.removeEventListener(t,this.eventHandler);for(const t of Rg)this.element.removeEventListener(t,this.eventHandler)}resume(t){return this.pausers=this.pausers.filter(e=>e!==t),this.enabled=this.pausers.length<=0,this.enabled}pause(t){this.enabled=!1,this.pausers.push(t)}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.enabled&&this.dispatchEvent(t,e).catch(i=>ee.errorOnce(i))}dispatchEvent(t,e){return function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})}(this,void 0,void 0,function*(){const i=this.calculateCoordinates(t);if(null!=i)for(const n of e){const o=this.buildEvent(Object.assign(Object.assign({event:t},i),{type:n}));this.listeners.cancellableDispatch(n,()=>o.consumed,o)}})}decideInteractionEventTypes(t){switch(t.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const e=t instanceof MouseEvent&&1==(1&t.buttons);return this.mouseDown!==e?(this.mouseDown=e,[e?"drag-start":"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(t){var e;return t.target===this.element||(null===(e=t.target)||void 0===e?void 0:e.parentElement)===this.element}calculateCoordinates(t){var e;if(t instanceof MouseEvent){const{clientX:i,clientY:n,pageX:o,pageY:s,offsetX:a,offsetY:l}=t;return this.fixOffsets(t,{clientX:i,clientY:n,pageX:o,pageY:s,offsetX:a,offsetY:l})}if(typeof TouchEvent<"u"&&t instanceof TouchEvent){const i=null!==(e=t.touches[0])&&void 0!==e?e:t.changedTouches[0],{clientX:n,clientY:o,pageX:s,pageY:a}=i;return Object.assign(Object.assign({},So.NULL_COORDS),{clientX:n,clientY:o,pageX:s,pageY:a})}if(t instanceof PageTransitionEvent)return t.persisted?void 0:So.NULL_COORDS}fixOffsets(t,e){const i=n=>{let o=0,s=0;for(;n;)o+=n.offsetLeft,s+=n.offsetTop,n=n.offsetParent;return{x:o,y:s}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const n=i(this.dragStartElement),o=i(t.target);e.offsetX-=n.x-o.x,e.offsetY-=n.y-o.y}return e}buildEvent(t){const{type:e,event:i,clientX:n,clientY:o}=t;let{offsetX:s,offsetY:a,pageX:l,pageY:u}=t;if(!Pi(s)||!Pi(a)){const d=this.element.getBoundingClientRect();s=n-d.left,a=o-d.top}if(!Pi(l)||!Pi(u)){const d=this.rootElement.getBoundingClientRect();l=n-d.left,u=o-d.top}const c={type:e,offsetX:s,offsetY:a,pageX:l,pageY:u,sourceEvent:i,consumed:!1,consume:()=>c.consumed=!0};return c}}So.interactionDocuments=[],So.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};class hP{constructor(t,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t;const i=e.addListener("hover",n=>this.checkExclusiveRects(n));this.destroyFns.push(()=>e.removeListener(i))}updateTooltip(t,e,i){var n;null==i&&(i=null===(n=this.states[t])||void 0===n?void 0:n.content),this.states[t]={content:i,meta:e},this.applyStates()}updateExclusiveRect(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]}removeTooltip(t){delete this.states[t],this.applyStates()}getTooltipMeta(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta}destroy(){for(const t of this.destroyFns)t()}checkExclusiveRects(t){let e;for(const[i,n]of Object.entries(this.exclusiveAreas))if(n.containsPoint(t.offsetX,t.offsetY)){e=i;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var t;const e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i,n;if(e.reverse(),e.slice(0,1).forEach(o=>{var s;const{content:a,meta:l}=null!==(s=this.states[o])&&void 0!==s?s:{};i=a,n=l}),void 0===n||void 0===i)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(t=this.appliedState)||void 0===t?void 0:t.content)===i){const o=this.tooltip.isVisible();this.tooltip.show(n,void 0,o)}else this.tooltip.show(n,i);this.appliedState={content:i,meta:n}}}class pP extends ha{constructor(){super(...arguments),this.axes={}}updateAxes(t){const e=new Set(Object.keys(this.axes));t.forEach(i=>{var n,o,s;e.delete(i.id),null!==(n=(o=this.axes)[s=i.id])&&void 0!==n||(o[s]=new fP(i))}),e.forEach(i=>{delete this.axes[i]}),this.initialZoom&&(this.updateZoom(this.initialZoom.callerId,this.initialZoom.newZoom),this.initialZoom=void 0)}updateZoom(t,e){0!==Object.keys(this.axes).length?(Object.values(this.axes).forEach(i=>{i.updateZoom(t,e?.[i.getDirection()])}),this.applyStates()):this.initialZoom={callerId:t,newZoom:e}}updateAxisZoom(t,e,i){var n;null===(n=this.axes[e])||void 0===n||n.updateZoom(t,i),this.applyStates()}getZoom(){let t,e;if(Object.values(this.axes).forEach(i=>{i.getDirection()===Y.X?t=i.getZoom():i.getDirection()===Y.Y&&(e=i.getZoom())}),t||e)return{x:t,y:e}}getAxisZoom(t){var e;return null===(e=this.axes[t])||void 0===e?void 0:e.getZoom()}getAxisZooms(){const t={};for(const[e,i]of Object.entries(this.axes))t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}applyStates(){if(!Object.values(this.axes).map(o=>o.applyStates()).some(Boolean))return;const e=this.getZoom(),i={};for(const[o,s]of Object.entries(this.axes))i[o]=s.getZoom();const n=Object.assign(Object.assign({type:"zoom-change"},e??{}),{axes:i});this.listeners.dispatch("zoom-change",n)}}class fP{constructor(t){this.states={},this.currentZoom=void 0,this.axis=t}getDirection(){return this.axis.direction}updateZoom(t,e){delete this.states[t],null!=e&&(this.states[t]=Object.assign({},e))}getZoom(){return this.currentZoom}applyStates(){var t,e;const i=this.currentZoom,n=Object.keys(this.states)[Object.keys(this.states).length-1];return this.currentZoom=Object.assign({},this.states[n]),i?.min!==(null===(t=this.currentZoom)||void 0===t?void 0:t.min)||i?.max!==(null===(e=this.currentZoom)||void 0===e?void 0:e.max)}}class yP{constructor(){this.layoutProcessors=new sh,this.listeners=new sh}addListener(t,e){if(function vP(r){return"layout-complete"!==r}(t))return this.layoutProcessors.addListener(t,e);if(function gP(r){return"layout-complete"===r}(t))return this.listeners.addListener(t,e);throw new Error("AG Charts - unsupported listener type: "+t)}removeListener(t){this.listeners.removeListener(t),this.layoutProcessors.removeListener(t)}dispatchPerformLayout(t,e){return this.layoutProcessors.reduceDispatch(t,({shrinkRect:n},o)=>[Object.assign(Object.assign({},o),{shrinkRect:n})],e)??e}dispatchLayoutComplete(t){this.listeners.dispatch("layout-complete",t)}}class mP{constructor(t){this.getSeries=t}}var _e=function(r){return r[r.FULL=0]="FULL",r[r.PROCESS_DATA=1]="PROCESS_DATA",r[r.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",r[r.SERIES_UPDATE=3]="SERIES_UPDATE",r[r.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",r[r.SCENE_RENDER=5]="SCENE_RENDER",r[r.NONE=6]="NONE",r}(_e||{});class CP{constructor(t){this.updateCallback=t}update(t=_e.FULL,{forceNodeDataRefresh:e=!1}={}){this.updateCallback(t,{forceNodeDataRefresh:e})}}class Og{constructor(){this.range="tooltip"}}!function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([R(og("tooltip","node"))],Og.prototype,"range",void 0);class Ge{constructor(t,e,i=!0){this._nodes=[],this._data=[],this._datumNodeIndices=new Map,this._garbage=[],this._garbageCollection=!0,this._parent=t,this._factory=Object.prototype.isPrototypeOf.call(st,e)?()=>new e:e,this._garbageCollection=i}static select(t,e,i=!0){return new Ge(t,e,i)}each(t){return this._nodes.forEach((e,i)=>t(e,e.datum,i)),this}update(t,e,i){const n=this._data,o=this._parent,s=this._factory,a=new Map;if(i?t.forEach((l,u)=>{const c=i(l);if(a.set(c,u),!this._datumNodeIndices.has(c)){const d=s(l);d.datum=l,e?.(d),o.appendChild(d),this._nodes.push(d),this._datumNodeIndices.set(c,this._nodes.length-1)}}):t.length>n.length?t.slice(n.length).forEach(l=>{const u=s(l);u.datum=l,e?.(u),o.appendChild(u),this._nodes.push(u)}):t.length<n.length&&this._nodes.splice(t.length).forEach(l=>{o.removeChild(l)}),this._data=t.slice(0),i){for(const[l,u]of this._datumNodeIndices){const c=a.get(l);void 0!==c?this._nodes[u].datum=t[c]:this._garbage.push(l)}this._garbageCollection&&this.cleanup()}else for(let l=0;l<t.length;l++)this._nodes[l].datum=this._data[l];return this}clear(){return this.update([]),this}cleanup(){if(0===this._garbage.length)return;this._garbage.forEach(n=>{const o=this._datumNodeIndices.get(n);if(void 0===o)return;const s=this._nodes[o];delete this._nodes[o],this._datumNodeIndices.delete(n),s&&this._parent.removeChild(s)});let t=0;const e=this._datumNodeIndices.entries(),i=new Map;for(const[n,o]of e)i.set(o,n);this._nodes=this._nodes.filter((n,o)=>{if(void 0===n)return!1;const s=i.get(o);return this._datumNodeIndices.set(s,t),t++,!0}),this._garbage=[]}static selectAll(t,e){const i=[],n=o=>{e(o)&&i.push(o),o.children.forEach(n)};return n(t),i}static selectByClass(t,e){return Ge.selectAll(t,i=>i instanceof e)}static selectByTag(t,e){return Ge.selectAll(t,i=>i.tag===e)}select(t){return Ge.selectAll(this._parent,t)}selectByClass(t){return this.select(e=>e instanceof t)}selectByTag(t){return this.select(e=>e.tag===t)}nodes(){return this._nodes}}function fa(r,t,e,i,n,o,s,a){const l=(e-r)*(a-o)-(i-t)*(s-n);if(0===l)return null;const u=((s-n)*(t-o)-(r-n)*(a-o))/l,c=((e-r)*(t-o)-(i-t)*(r-n))/l;return u>=0&&u<=1&&c>=0&&c<=1?{x:r+u*(e-r),y:t+u*(i-t)}:null}function bP(r,t,e,i,n,o,s,a,l,u,c,d){const h=[],p=u-d,f=c-l,v=l*(d-u)-u*(c-l),g=xg(r,e,n,s),y=xg(t,i,o,a),b=function EP(r,t,e,i){if(0===r)return function _P(r,t,e){if(0===r)return function SP(r,t){const e=-t/r;return 0!==r&&e>=0&&e<=1?[e]:[]}(t,e);const i=t*t-4*r*e,n=[];if(0===i){const o=-t/(2*r);o>=0&&o<=1&&n.push(o)}else if(i>0){const o=Math.sqrt(i),s=(-t-o)/(2*r),a=(-t+o)/(2*r);s>=0&&s<=1&&n.push(s),a>=0&&a<=1&&n.push(a)}return n}(t,e,i);const n=t/r,o=e/r,a=(3*o-n*n)/9,l=(9*n*o-i/r*27-2*n*n*n)/54,u=a*a*a+l*l,c=1/3,d=[];if(u>=0){const h=Math.sqrt(u),p=Math.sign(l+h)*Math.pow(Math.abs(l+h),c),f=Math.sign(l-h)*Math.pow(Math.abs(l-h),c),v=Math.abs(Math.sqrt(3)*(p-f)/2),g=-c*n+(p+f);if(g>=0&&g<=1&&d.push(g),0===v){const y=-c*n-(p+f)/2;y>=0&&y<=1&&d.push(y)}}else{const h=Math.acos(l/Math.sqrt(-a*a*a)),p=c*n,f=2*Math.sqrt(-a),v=f*Math.cos(c*h)-p,g=f*Math.cos(c*(h+2*Math.PI))-p,y=f*Math.cos(c*(h+4*Math.PI))-p;v>=0&&v<=1&&d.push(v),g>=0&&g<=1&&d.push(g),y>=0&&y<=1&&d.push(y)}return d}(p*g[0]+f*y[0],p*g[1]+f*y[1],p*g[2]+f*y[2],p*g[3]+f*y[3]+v);for(const O of b){const x=O*O,D=O*x,T=g[0]*D+g[1]*x+g[2]*O+g[3],L=y[0]*D+y[1]*x+y[2]*O+y[3];let A;A=l!==c?(T-l)/(c-l):(L-u)/(d-u),A>=0&&A<=1&&h.push({x:T,y:L})}return h}function xg(r,t,e,i){return[3*t-r-3*e+i,3*r-6*t+3*e,-3*r+3*t,r]}function Dg(r,t,e,i,n,o,s,a,l,u){const c=(u-a)/(l-s),d=a-c*s,h=Math.pow(c,2)+1,p=2*(c*(d-t)-r),f=Math.pow(r,2)+Math.pow(d-t,2)-Math.pow(e,2),v=Math.pow(p,2)-4*h*f;if(v<0)return[];const g=(-p+Math.sqrt(v))/2/h,y=(-p-Math.sqrt(v))/2/h,m=[];return[g,y].forEach(C=>{if(!(C>=Math.min(s,l)&&C<=Math.max(s,l)))return;const _=c*C,b=It(o?n:i);let O=It(o?i:n),x=It(Math.atan2(_,C));O<=b&&(O+=2*Math.PI),x<b&&(x+=2*Math.PI),x>=b&&x<=O&&m.push({x:C,y:_})}),m}var Lt=function(r){return r[r.Move=0]="Move",r[r.Line=1]="Line",r[r.Arc=2]="Arc",r[r.Curve=3]="Curve",r[r.ClosePath=4]="ClosePath",r}(Lt||{});class lh{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length)return!0;for(let t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(let t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1}draw(t){const e=this.commands,i=this.params;let n=0;t.beginPath();for(const o of e)switch(o){case Lt.Move:t.moveTo(i[n++],i[n++]);break;case Lt.Line:t.lineTo(i[n++],i[n++]);break;case Lt.Curve:t.bezierCurveTo(i[n++],i[n++],i[n++],i[n++],i[n++],i[n++]);break;case Lt.Arc:t.arc(i[n++],i[n++],i[n++],i[n++],i[n++],1===i[n++]);break;case Lt.ClosePath:t.closePath()}0===e.length&&t.closePath()}moveTo(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(Lt.Move),this.params.push(t,e)}lineTo(t,e){this.xy?(this.commands.push(Lt.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)}rect(t,e,i,n){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath()}arc(t,e,i,n,o,s=!1){const a=t+i*Math.cos(o),l=e+i*Math.sin(o);this.xy?(this.xy[0]=a,this.xy[1]=l):this.xy=[a,l],this.commands.push(Lt.Arc),this.params.push(t,e,i,n,o,s?1:0)}cubicCurveTo(t,e,i,n,o,s){this.xy||this.moveTo(t,e),this.commands.push(Lt.Curve),this.params.push(t,e,i,n,o,s),this.xy&&(this.xy[0]=o,this.xy[1]=s)}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(Lt.ClosePath),this._closedPath=!0)}clear({trackChanges:t}={trackChanges:!1}){t?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(t,e){const i=this.commands,n=this.params,o=i.length,s=-1e4,a=-1e4;let l=NaN,u=NaN,c=0,d=0,h=0;for(let p=0,f=0;p<o;p++)switch(i[p]){case Lt.Move:isNaN(l)||fa(l,u,c,d,s,a,t,e)&&h++,c=n[f++],l=c,d=n[f++],u=d;break;case Lt.Line:fa(c,d,n[f++],n[f++],s,a,t,e)&&h++,c=n[f-2],d=n[f-1];break;case Lt.Curve:h+=bP(c,d,n[f++],n[f++],n[f++],n[f++],n[f++],n[f++],s,a,t,e).length,c=n[f-2],d=n[f-1];break;case Lt.Arc:h+=Dg(n[f++],n[f++],n[f++],n[f++],n[f++],!!n[f++],s,a,t,e).length,c=n[f-2],d=n[f-1];break;case Lt.ClosePath:isNaN(l)||fa(l,u,c,d,s,a,t,e)&&h++}return h%2==1}}var Tg=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function ke(r){const{redraw:t=W.MAJOR,changeCb:e,convertor:i}=r??{};return te({redraw:t,type:"path",convertor:i,changeCb:e})}class vn extends Oe{constructor(){super(...arguments),this.path=new lh,this._dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,W.MAJOR))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}render(t){var e,i;const{ctx:n,forceRender:o,stats:s}=t;if(this.dirty!==W.NONE||o){if(this.computeTransformMatrix(),this.matrix.toContext(n),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath){if(n.save(),"normal"===this.clipMode&&(this.clipPath.draw(n),n.clip()),this.path.draw(n),this.fillStroke(n),"punch-out"===this.clipMode){this.clipPath.draw(n),n.clip();const{x:a=-1e4,y:l=-1e4,width:u=2e4,height:c=2e4}=null!==(e=this.computeBBox())&&void 0!==e?e:{};n.clearRect(a,l,u,c)}n.restore()}else this.path.draw(n),this.fillStroke(n);null===(i=this.fillShadow)||void 0===i||i.markClean(),super.render(t)}else s&&(s.nodesSkipped+=this.nodeCount.count)}}vn.className="Path",Tg([ke()],vn.prototype,"clipPath",void 0),Tg([ke()],vn.prototype,"clipMode",void 0);var uh=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class $i extends vn{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,n=i/2;return new be(t-n,e-n,i,i)}applyPath(t,e){const{path:i}=this;let{x:n,y:o}=this;i.clear();for(const{x:s,y:a,t:l}of e)n+=s*t,o+=a*t,"move"===l?i.moveTo(n,o):i.lineTo(n,o);i.closePath()}}uh([ke()],$i.prototype,"x",void 0),uh([ke()],$i.prototype,"y",void 0),uh([ke({convertor:Math.abs})],$i.prototype,"size",void 0);let cu=(()=>{class r extends $i{updatePath(){const{path:e,x:i,y:n}=this,o=this.size/2;e.clear(),e.moveTo(this.align(i-o),this.align(n-o)),e.lineTo(this.align(i+o),this.align(n-o)),e.lineTo(this.align(i+o),this.align(n+o)),e.lineTo(this.align(i-o),this.align(n+o)),e.closePath()}}return r.className="Square",r})();var Yi=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class Qt extends de{constructor(){super({name:"markerLabelGroup"}),this.label=new le,this._marker=new cu,this._markerSize=15,this._spacing=8;const t=this.label;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=qe.has.textMetrics?1:0,this.append([this.marker,t]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}update(){const e=this.markerSize;this.marker.size=e,this.label.x=e/2+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,super.render(t)}}Qt.className="MarkerLabel",Yi([at("label")],Qt.prototype,"text",void 0),Yi([at("label")],Qt.prototype,"fontStyle",void 0),Yi([at("label")],Qt.prototype,"fontWeight",void 0),Yi([at("label")],Qt.prototype,"fontSize",void 0),Yi([at("label")],Qt.prototype,"fontFamily",void 0),Yi([at("label","fill")],Qt.prototype,"color",void 0),Yi([at("marker","fill")],Qt.prototype,"markerFill",void 0),Yi([at("marker","stroke")],Qt.prototype,"markerStroke",void 0),Yi([at("marker","strokeWidth")],Qt.prototype,"markerStrokeWidth",void 0),Yi([at("marker","fillOpacity")],Qt.prototype,"markerFillOpacity",void 0),Yi([at("marker","strokeOpacity")],Qt.prototype,"markerStrokeOpacity",void 0);let ch=(()=>{class r extends $i{updatePath(){const{x:e,y:i,path:n,size:o}=this,s=o/2;n.clear(),n.arc(e,i,s,0,2*Math.PI),n.closePath()}}return r.className="Circle",r})(),RP=(()=>{class r extends $i{updatePath(){super.applyPath(this.size/4.2,r.moves)}}return r.className="Cross",r.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}],r})(),OP=(()=>{class r extends $i{updatePath(){super.applyPath(this.size/2,r.moves)}}return r.className="Diamond",r.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],r})(),xP=(()=>{class r extends $i{rad(e){return e/180*Math.PI}updatePath(){const{x:e,path:i,size:n,rad:o}=this,s=n/4,a=this.y+s/2;i.clear(),i.arc(e-s,a-s,s,o(130),o(330)),i.arc(e+s,a-s,s,o(220),o(50)),i.lineTo(e,a+s),i.closePath()}}return r.className="Heart",r})(),DP=(()=>{class r extends $i{updatePath(){super.applyPath(this.size/3,r.moves)}}return r.className="Plus",r.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}],r})(),va=(()=>{class r extends $i{updatePath(){super.applyPath(1.1*this.size,r.moves)}}return r.className="Triangle",r.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}],r})();function Gr(r=cu){if("string"==typeof r)switch(r){case"circle":return ch;case"cross":return RP;case"diamond":return OP;case"heart":return xP;case"plus":return DP;case"triangle":return va;default:return cu}return"function"==typeof r?r:cu}function TP({orientation:r,bboxes:t,maxHeight:e,maxWidth:i,itemPaddingY:n=0,itemPaddingX:o=0,forceResult:s=!1}){const a="horizontal"===r,l={max:a?i:e,fn:a?h=>h.width:h=>h.height,padding:a?o:n},u={max:a?e:i,fn:a?h=>h.height:h=>h.width,padding:a?n:o};let c=0;const d=[];for(;c<t.length;){const p=PP(t.slice(c),c,l,u,s);if(!p)return;c+=p.processedBBoxCount,d.push(p.pageIndices)}return function LP(r,t,e,i,n){let o=0,s=0;return{pages:r.map(l=>{"horizontal"===t&&(l=function MP(r){const t=[];for(const e of r[0])t.push([]);return r.forEach((e,i)=>{e.forEach((n,o)=>{t[o][i]=n})}),t}(l));let u=0;const c=l.map(p=>{const f=p.map(y=>(u=Math.max(y,u),e[y]));let v=0,g=0;return f.forEach(y=>{v+=y.height+i,g=Math.max(g,y.width+n)}),{indices:p,bboxes:f,columnHeight:v,columnWidth:g}});let d=0,h=0;return c.forEach(p=>{d+=p.columnWidth,h=Math.max(h,p.columnHeight)}),o=Math.max(d,o),s=Math.max(h,s),{columns:c,startIndex:l[0][0],endIndex:u,pageWidth:d,pageHeight:h}}),maxPageWidth:o,maxPageHeight:s}}(d,r,t,n,o)}function PP(r,t,e,i,n){let s=function FP(r,t){const e=r.length;let i=0;for(let n=0;n<e;n++)if(i+=t.fn(r[n])+t.padding,i>t.max)return e/n<2?Math.ceil(e/2):n;return e}(r,e);if(s<1){if(!n)return;s=1}for(let a=s;a>=1;a--){const l=AP(r,t,a,e,i,n);if(null==l&&a<=1)return;if(null!=l){if("number"!=typeof l)return{processedBBoxCount:l.length*l[0].length,pageIndices:l};if(l<=1)return;a=l<a&&l>1?l:a}}}function AP(r,t,e,i,n,o){var s;const a=[];let l=0,u=0,c=[];const d=[];for(let h=0;h<r.length;h++){const p=(h+e)%e;0===p&&(l+=u,u=0,c.length>0&&a.push(c),c=[]);const f=i.fn(r[h])+i.padding;if(d[p]=Math.max(null!==(s=d[p])&&void 0!==s?s:0,f),u=Math.max(u,n.fn(r[h])+n.padding),l+u>n.max&&(!o||a.length>0)){c=[];break}if(d.reduce((m,C)=>m+C,0)>i.max&&!o)return d.length<e?d.length:void 0;c.push(h+t)}return c.length>0&&a.push(c),a.length>0?a:void 0}var di=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class kr{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}di([R(ci)],kr.prototype,"color",void 0),di([R(Jo)],kr.prototype,"fontStyle",void 0),di([R(er)],kr.prototype,"fontWeight",void 0),di([R(K(0))],kr.prototype,"fontSize",void 0),di([R(wt)],kr.prototype,"fontFamily",void 0);class kn{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}}di([R(K(0))],kn.prototype,"size",void 0),di([R(Ne)],kn.prototype,"fill",void 0),di([R(xe(0,1))],kn.prototype,"fillOpacity",void 0),di([R(Ne)],kn.prototype,"stroke",void 0),di([R(K(0))],kn.prototype,"strokeWidth",void 0),di([R(K(0,1))],kn.prototype,"strokeOpacity",void 0);class dh{constructor(){this.size=15,this._shape=va,this.padding=8}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}di([R(K(0))],dh.prototype,"size",void 0),di([R(K(0))],dh.prototype,"padding",void 0);let IP=(()=>{class r{constructor(e,i,n,o){this.chartUpdateCallback=e,this.pageUpdateCallback=i,this.interactionManager=n,this.cursorManager=o,this.id=mo(this),this.group=new de({name:"pagination"}),this.labelNode=new le,this.marker=new dh,this.activeStyle=new kn,this.inactiveStyle=new kn,this.highlightStyle=new kn,this.label=new kr,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new va,this._previousButton=new va;const{labelNode:s}=this;s.textBaseline="middle",s.fontSize=12,s.fontFamily="Verdana, sans-serif",s.fill="black",s.y=qe.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,s]),this.interactionManager.addListener("click",a=>this.onPaginationClick(a)),this.interactionManager.addListener("hover",a=>this.onPaginationMouseMove(a)),this.marker.parent=this,this.update(),this.updateMarkers()}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){"horizontal"===(this._orientation=e,e)?(this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2):(this.previousButton.rotation=0,this.nextButton.rotation=Math.PI)}get orientation(){return this._orientation}set nextButton(e){this._nextButton!==e&&(this.group.removeChild(this._nextButton),this._nextButton=e,this.group.appendChild(e))}get nextButton(){return this._nextButton}set previousButton(e){this._previousButton!==e&&(this.group.removeChild(this._previousButton),this._previousButton=e,this.group.appendChild(e))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:e,padding:i}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+i}updateNextButtonPosition(){const e=this.labelNode.computeBBox();this.nextButton.translationX=e.x+e.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:e,totalPages:i,labelNode:n,label:{color:o,fontStyle:s,fontWeight:a,fontSize:l,fontFamily:u}}=this;n.text=`${e+1} / ${i}`,n.fill=o,n.fontStyle=s,n.fontWeight=a,n.fontSize=l,n.fontFamily=u}updateMarkers(){const{nextButton:e,previousButton:i,nextButtonDisabled:n,previousButtonDisabled:o,activeStyle:s,inactiveStyle:a,highlightStyle:l,highlightActive:u}=this,c=(d,h)=>h?a:d===u?l:s;this.updateMarker(e,c("next",n)),this.updateMarker(i,c("previous",o))}updateMarker(e,i){var n;const{size:o}=this.marker;e.size=o,e.fill=i.fill,e.fillOpacity=null!==(n=i.fillOpacity)&&void 0!==n?n:1,e.stroke=i.stroke,e.strokeWidth=i.strokeWidth,e.strokeOpacity=i.strokeOpacity}enableOrDisableButtons(){const{currentPage:e,totalPages:i}=this,n=0===i,s=0===e;this.nextButtonDisabled=e===i-1||n,this.previousButtonDisabled=s||n}nextButtonContainsPoint(e,i){return!this.nextButtonDisabled&&this.nextButton.containsPoint(e,i)}previousButtonContainsPoint(e,i){return!this.previousButtonDisabled&&this.previousButton.containsPoint(e,i)}onPaginationClick(e){const{offsetX:i,offsetY:n}=e;this.nextButtonContainsPoint(i,n)?(this.incrementPage(),this.onPaginationChanged(),e.consume()):this.previousButtonContainsPoint(i,n)&&(this.decrementPage(),this.onPaginationChanged(),e.consume())}onPaginationMouseMove(e){const{offsetX:i,offsetY:n}=e;this.nextButtonContainsPoint(i,n)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(i,n)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(_e.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const e=Gr(this.marker.shape||va);this.previousButton=new e,this.nextButton=new e,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(_e.SCENE_RENDER)}attachPagination(e){e.append(this.group)}computeBBox(){return this.group.computeBBox()}}return r.className="Pagination",r})();var Ue=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};const NP=["horizontal","vertical"],GP=re((r,t)=>We(r,t,e=>NP.includes(e)),"expecting an orientation keyword such as 'horizontal' or 'vertical'");class _o{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}}Ue([R(xe(0))],_o.prototype,"maxLength",void 0),Ue([R(ci)],_o.prototype,"color",void 0),Ue([R(Jo)],_o.prototype,"fontStyle",void 0),Ue([R(er)],_o.prototype,"fontWeight",void 0),Ue([R(K(0))],_o.prototype,"fontSize",void 0),Ue([R(wt)],_o.prototype,"fontFamily",void 0),Ue([R(je)],_o.prototype,"formatter",void 0);class du{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=1}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}Ue([R(K(0))],du.prototype,"size",void 0),Ue([R(K(0))],du.prototype,"padding",void 0),Ue([R(K(0))],du.prototype,"strokeWidth",void 0);class ga{constructor(){this.marker=new du,this.label=new _o,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}}Ue([R(xe(0))],ga.prototype,"maxWidth",void 0),Ue([R(K(0))],ga.prototype,"paddingX",void 0),Ue([R(K(0))],ga.prototype,"paddingY",void 0),Ue([R(Le)],ga.prototype,"toggleSeriesVisible",void 0);class Pg{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}}Ue([R(je)],Pg.prototype,"legendItemClick",void 0);class Hn{constructor(t){this.ctx=t,this.id=mo(this),this.group=new de({name:"legend",layer:!0,zIndex:Ze.LEGEND_ZINDEX}),this.itemSelection=Ge.select(this.group,Qt),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new ga,this.listeners=new Pg,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new IP(n=>t.updateService.update(n),n=>this.updatePageNumber(n),t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e=[t.interactionManager.addListener("click",n=>this.checkLegendClick(n)),t.interactionManager.addListener("dblclick",n=>this.checkLegendDoubleClick(n)),t.interactionManager.addListener("hover",n=>this.handleLegendMouseMove(n))],i=[t.layoutService.addListener("start-layout",n=>this.positionLegend(n.shrinkRect))];this.destroyFns.push(...e.map(n=>()=>t.interactionManager.removeListener(n)),...i.map(n=>()=>t.layoutService.removeListener(n)),()=>this.detachLegend())}set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach(t=>t())}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,W.MINOR)}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":qe.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.append(this.group)}detachLegend(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}performLayout(t,e){const{paddingX:i,paddingY:n,label:o,maxWidth:s,marker:{size:a,padding:l,shape:u},label:{maxLength:c=1/0,fontStyle:d,fontWeight:h,fontSize:p,fontFamily:f}}=this.item,v=[...this.data];this.reverseOrder&&v.reverse(),this.itemSelection.update(v);const g=[],y=Qo(o),C=s??.8*t,w=a+l+i;if(this.itemSelection.each((A,N)=>{var H;const j=Gr(u??N.marker.shape);A.marker&&A.marker instanceof j||(A.marker=new j),A.markerSize=a,A.spacing=l,A.fontStyle=d,A.fontWeight=h,A.fontSize=p,A.fontFamily=f;const z=null!==(H=N.itemId)&&void 0!==H?H:N.id,G=(this.getItemLabel(N)??"<unknown>").replace(/\r?\n/g," ");A.text=this.truncate(G,c,C,w,y,z),g.push(A.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const _=this.size,b=this.oldSize;_[0]=t,_[1]=e,(_[0]!==b[0]||_[1]!==b[1])&&(b[0]=_[0],b[1]=_[1]);const{pages:O,maxPageHeight:x,maxPageWidth:D}=this.updatePagination(g,t,e);this.pages=O,this.maxPageSize=[D-i,x-n];const T=this.pagination.currentPage;this.pages.length<1||!this.pages[T]?this.visible=!1:(this.visible=!0,this.updatePositions(T),this.update())}truncate(t,e,i,n,o,s){const l=t.split("");let u=!1;if(t.length>e&&(t=`${t.substring(0,e)}`,u=!0),Math.floor(n+qe.getTextSize(t,o).width)>i){let d="";const h=this.getCharacterWidths(o);let p=n+h["..."];for(const f of l){if(h[f]||(h[f]=qe.getTextSize(f,o).width),p+=h[f],p>i)break;d+=f}t=d,u=!0}return u?(t+="...",this.truncatedItems.add(s)):this.truncatedItems.delete(s),t}updatePagination(t,e,i){const n=this.getOrientation(),o=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:s,maxPageHeight:a,maxPageWidth:l,paginationBBox:u,paginationVertical:c}=this.calculatePagination(t,e,i),d=s.findIndex(C=>C.endIndex>=o);this.pagination.currentPage=Math.min(Math.max(d,0),s.length-1);const{paddingX:h,paddingY:p}=this.item,g=a-p;let y=0,m=-u.y-this.item.marker.size/2;return c?m+=g+8:(y+=l-h-u.x+8,m+=(g-u.height)/2),this.pagination.translationX=y,this.pagination.translationY=m,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:a,maxPageWidth:l,pages:s}}calculatePagination(t,e,i){var n,o,s;const{paddingX:a,paddingY:l}=this.item,u=this.getOrientation(),c=["left","right"].includes(this.position);let d=this.pagination.computeBBox(),h=new be(0,0,0,0),p=[],f=0,v=0,g=0;const y=C=>{const{width:w,height:_}=C;return w===d.width&&_===d.height},m=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(g++>10){ee.warn("unable to find stable legend layout.");break}d=h;const _=TP({orientation:u,bboxes:t,maxHeight:i-(c?d.height:0),maxWidth:e-(c?0:d.width),itemPaddingY:l,itemPaddingX:a,forceResult:m});p=null!==(n=_?.pages)&&void 0!==n?n:[],f=null!==(o=_?.maxPageWidth)&&void 0!==o?o:0,v=null!==(s=_?.maxPageHeight)&&void 0!==s?s:0;const b=p.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),h=this.pagination.computeBBox(),!this.pagination.visible)break}while(!y(h));return{maxPageWidth:f,maxPageHeight:v,pages:p,paginationBBox:d,paginationVertical:c}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:n}=this;if(n.length<1||!n[t])return;const{columns:o,startIndex:s,endIndex:a}=n[t];let l=0,u=0;const c=o.length,d=o[0].indices.length,h="horizontal"===this.getOrientation(),p=o[0].bboxes[0].height+e,f=[];i.each((v,g,y)=>{var m,C;if(y<s||y>a)return void(v.visible=!1);const w=y-s;let _=0,b=0;h?(_=w%c,b=Math.floor(w/c)):(_=Math.floor(w/d),b=w%d),v.visible=!0;const O=o[_];O&&(u=p*b,l=null!==(m=f[b])&&void 0!==m?m:0,f[b]=(null!==(C=f[b])&&void 0!==C?C:0)+O.columnWidth,v.translationX=Math.floor(l),v.translationY=Math.floor(u))})}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:n}=e[t];this.paginationTrackingIndex=0===i?0:t===e.length-1?n:Math.floor((i+n)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(_e.SCENE_RENDER)}update(){const{marker:{strokeWidth:t},label:{color:e}}=this.item;this.itemSelection.each((i,n)=>{const o=n.marker;i.markerFill=o.fill,i.markerStroke=o.stroke,i.markerStrokeWidth=t,i.markerFillOpacity=o.fillOpacity,i.markerStrokeOpacity=o.strokeOpacity,i.opacity=n.enabled?1:.5,i.color=e})}getDatumForPoint(t,e){const i=[],n={dist:1/0,datum:void 0};for(const s of this.group.children){if(!(s.visible&&s instanceof Qt))continue;const a=s.computeBBox();if(a.grow(this.item.paddingX/2,"horizontal"),a.grow(this.item.paddingY/2,"vertical"),a.containsPoint(t,e))return s.datum;const l=t-a.x-this.item.paddingX/2,u=e-a.y-this.item.paddingY/2,c=Math.pow(l,2)+Math.pow(u,2);l>=0&&u>=0&&c<n.dist&&(n.dist=c,n.datum=s.datum),i.push(a)}if(be.merge(i).containsPoint(t,e))return n.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const{listeners:{legendItemClick:e},ctx:{dataService:i,highlightManager:n},item:{toggleSeriesVisible:o}}=this,{offsetX:s,offsetY:a}=t,l=this.computeBBox(),u=this.group.visible&&l.containsPoint(s,a),c=this.getDatumForPoint(s,a);if(!u||!c)return;const{id:d,itemId:h,enabled:p}=c,v=i.getSeries().find(y=>y.id===d);if(!v)return;t.consume();let g=p;o&&(g=!p,this.ctx.chartEventManager.legendItemClick(v,h,g,c.legendItemName)),g?n.updateHighlight(this.id,{series:v,itemId:h,datum:void 0}):n.updateHighlight(this.id),this.ctx.updateService.update(_e.PROCESS_DATA,{forceNodeDataRefresh:!0}),e?.({type:"click",enabled:g,itemId:h,seriesId:v.id})}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{dataService:n},item:{toggleSeriesVisible:o}}=this,{offsetX:s,offsetY:a}=t;if("integrated"===this.ctx.mode)return;const l=this.computeBBox(),u=this.group.visible&&l.containsPoint(s,a),c=this.getDatumForPoint(s,a);if(!u||!c)return;const{id:d,itemId:h,seriesId:p}=c,f=n.getSeries(),v=f.find(g=>g.id===d);if(v){if(t.consume(),o){const g=f.reduce((C,w)=>[...C,...w.getLegendData().filter(_=>"category"===_.legendType)],[]),y={};g.forEach(C=>{var w,_;null!==(w=y[_=C.seriesId])&&void 0!==w||(y[_]=0),C.enabled&&y[C.seriesId]++});const m=g.find(C=>C.itemId===h&&C.seriesId===p);this.ctx.chartEventManager.legendItemDoubleClick(v,h,null!==(e=m?.enabled)&&void 0!==e&&e,y,m?.legendItemName)}this.ctx.updateService.update(_e.PROCESS_DATA,{forceNodeDataRefresh:!0}),i?.({type:"dblclick",enabled:!0,itemId:h,seriesId:v.id})}}handleLegendMouseMove(t){var e;const{enabled:i,item:{toggleSeriesVisible:n},listeners:o}=this;if(!i)return;const s=this.computeBBox(),{pageX:a,pageY:l,offsetX:u,offsetY:c}=t,d=this.group.visible&&s.containsPoint(u,c);if(!d)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();const h=this.getDatumForPoint(u,c);if(!d||void 0===h)return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const f=h?this.ctx.dataService.getSeries().find(v=>v.id===h?.id):void 0;if(h&&this.truncatedItems.has(null!==(e=h.itemId)&&void 0!==e?e:h.id)){const v=this.getItemLabel(h);this.ctx.tooltipManager.updateTooltip(this.id,{pageX:a,pageY:l,offsetX:u,offsetY:c,event:t,showArrow:!1},St({content:v}))}else this.ctx.tooltipManager.removeTooltip(this.id);(n||null!=o.legendItemClick||null!=o.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),h?.enabled&&f?this.ctx.highlightManager.updateHighlight(this.id,{series:f,itemId:h?.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,n]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,n);const o=this.computePagedBBox(),s=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return t.height-o.height;default:return t.width-o.width}};if(this.visible){let a,l;switch(this.position){case"top":case"bottom":a=(t.width-o.width)/2,l=s(),e.shrink(o.height,this.position);break;default:a=s(),l=(t.height-o.height)/2,e.shrink(o.width,this.position)}this.group.translationX=Math.floor(-o.x+t.x+a),this.group.translationY=Math.floor(-o.y+t.y+l)}if(this.visible&&this.enabled&&this.data.length){e.shrink(this.spacing,this.position);const l=o.clone();l.x+=this.group.translationX,l.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,l)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,n=e/i;let l=0,u=0;switch(this.position){case"top":case"bottom":const c=n<1?Math.min(.5,1/n*.2):.2;l=this.maxWidth?Math.min(this.maxWidth,e):e,u=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*c);break;default:const d=n>1?Math.min(.5,.25*n):.25;l=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*d),u=this.maxHeight?Math.min(this.maxHeight,i):i}return[l,u]}}Hn.className="Legend",Ue([R(Le)],Hn.prototype,"_enabled",void 0),Ue([R(rg)],Hn.prototype,"position",void 0),Ue([R(xe(0))],Hn.prototype,"maxWidth",void 0),Ue([R(xe(0))],Hn.prototype,"maxHeight",void 0),Ue([R(pn)],Hn.prototype,"reverseOrder",void 0),Ue([R(GP)],Hn.prototype,"orientation",void 0),Ue([R(K(0))],Hn.prototype,"spacing",void 0);const hu={category:Hn};function kP(r,t){if(hu[r])throw new Error(`AG Charts - already registered legend type: ${r}`);hu[r]=t}class VP{constructor(){this.cache=new Map}call(t,...e){let i,n=this.cache.get(t);const o=()=>{try{const s=t(...e);return n&&null!=i&&n.set(i,s),s}catch(s){return void ee.warnOnce("User callback errored, ignoring",s)}};try{i=JSON.stringify(e)}catch{return o()}return null==n&&(n=new Map,this.cache.set(t,n)),n.has(i)?n.get(i):o()}invalidateCache(){this.cache=new Map}}var Ag=function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})};let BP=(()=>{class r{constructor(){this.requested=[],this.status="setup"}request(e,i,n){return Ag(this,void 0,void 0,function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise((o,s)=>{this.requested.push({id:e,opts:n,data:i,resultCb:o,reject:s})})})}execute(){return Ag(this,void 0,void 0,function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",r.DEBUG()&&ee.debug("DataController.execute() - requested",this.requested);const e=this.mergeRequested();r.DEBUG()&&ee.debug("DataController.execute() - merged",e);for(const{opts:i,data:n,resultCbs:o,rejects:s,ids:a}of e)try{const l=new OT(i),u=l.processData(n);u&&0===u.partialValidDataCount?o.forEach(c=>c({dataModel:l,processedData:u})):u?this.splitResult(l,u,a,o):s.forEach(c=>c(new Error("AG Charts - no processed data generated")))}catch(l){s.forEach(u=>u(l))}})}mergeRequested(){const e=[],i=l=>l.filter(u=>"key"===u.type).map(u=>u.property).join(";"),n=({opts:l,data:u})=>c=>c[0].data===u&&c[0].opts.groupByKeys===l.groupByKeys&&c[0].opts.dataVisible===l.dataVisible&&c[0].opts.groupByFn===l.groupByFn&&i(c[0].opts.props)===i(l.props),o=l=>u=>{var c;if(u.type!==l.type||u.id!==l.id)return!1;const d=null!==(c=nr(u,l))&&void 0!==c?c:{};return delete d.scopes,0===Object.keys(d).length},s=l=>Object.assign(Object.assign({},l[0]),{props:l.reduce((u,c)=>{var d,h,p;for(const f of c.props){const v=u.find(o(f));v?(null!==(d=v.scopes)&&void 0!==d||(v.scopes=[]),v.scopes.push(...null!==(h=f.scopes)&&void 0!==h?h:[],...null!==(p=c.scopes)&&void 0!==p?p:[])):u.push(f)}return u},[])});for(const l of this.requested){const u=e.find(n(l));u?u.push(l):e.push([l])}return e.map(l=>({ids:l.map(({id:u})=>u),resultCbs:l.map(({resultCb:u})=>u),rejects:l.map(({reject:u})=>u),data:l[0].data,opts:s(l.map(({opts:u})=>u))}))}splitResult(e,i,n,o){for(let s=0;s<n.length;s++){const a=n[s];(0,o[s])({dataModel:e,processedData:Object.assign(Object.assign({},i),{data:i.data.filter(({validScopes:u})=>null==u||u.some(c=>c===a))})})}}}return r.DEBUG=()=>{var t;return null!==(t=[!0,"data-model"].includes(Bi("agChartsDebug")))&&void 0!==t&&t},r})();class WP{constructor(){this.groups={}}registerSeries({id:t,seriesGrouping:e,visible:i,type:n}){var o,s;e&&(null!==(o=(s=this.groups)[n])&&void 0!==o||(s[n]={}),this.groups[n][t]={grouping:e,visible:i})}deregisterSeries({id:t,type:e}){this.groups[e]&&delete this.groups[e][t],this.groups[e]&&0===Object.keys(this.groups[e]).length&&delete this.groups[e]}getVisiblePeerGroupIndex({type:t,seriesGrouping:e}){var i;if(!e)return{visibleGroupCount:1,index:0};const n=[...Object.entries(null!==(i=this.groups[t])&&void 0!==i?i:{}).filter(([o,s])=>s.visible).reduce((o,[s,a])=>(a.visible&&o.add(a.grouping.groupIndex),o),new Set).values()];return n.sort((o,s)=>o-s),{visibleGroupCount:n.length,index:n.indexOf(e.groupIndex)}}}class jP{constructor(t){this.groups={},this.series={},this.rootGroup=t}requestGroup(t){var e,i,n,o;const{id:s,type:a,rootGroup:l,seriesGrouping:u}=t,{groupIndex:c=s}=u??{};if(null!=this.series[s])throw new Error(`AG Charts - series already has an allocated layer: ${this.series[s]}`);null!==(e=(n=this.groups)[a])&&void 0!==e||(n[a]={});let d=this.groups[a][c];return d||(d=null!==(i=(o=this.groups[a])[c])&&void 0!==i?i:o[c]={seriesIds:[],group:this.rootGroup.appendChild(new de({name:`${a}-content`,layer:!0,zIndex:Ze.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("data")}))}),this.series[s]={layerState:d,seriesConfig:t},d.seriesIds.push(s),d.group.appendChild(l),d.group}changeGroup(t){var e,i;const{id:n,seriesGrouping:o,type:s,rootGroup:a,oldGrouping:l}=t,{groupIndex:u=n}=o??{};null!==(i=null===(e=this.groups[s])||void 0===e?void 0:e[u])&&void 0!==i&&i.seriesIds.includes(n)||(null!=this.series[n]&&this.releaseGroup({id:n,seriesGrouping:l,type:s,rootGroup:a}),this.requestGroup(t))}releaseGroup(t){var e,i,n,o,s;const{id:a,seriesGrouping:l,rootGroup:u,type:c}=t,{groupIndex:d=a}=l??{};if(null==this.series[a])throw new Error(`AG Charts - series doesn't have an allocated layer: ${a}`);const h=null!==(i=null===(e=this.groups[c])||void 0===e?void 0:e[d])&&void 0!==i?i:null===(n=this.series[a])||void 0===n?void 0:n.layerState;if(h&&(h.seriesIds=h.seriesIds.filter(p=>p!==a),h.group.removeChild(u)),0===h?.seriesIds.length)this.rootGroup.removeChild(h.group),delete this.groups[c][d],delete this.groups[c][a];else if(h?.seriesIds.length>0){const p=null===(s=this.series[null===(o=h?.seriesIds)||void 0===o?void 0:o[0]])||void 0===s?void 0:s.seriesConfig;h.group.zIndexSubOrder=p?.getGroupZIndexSubOrder("data")}delete this.series[a]}destroy(){for(const t of Object.values(this.groups))for(const e of Object.values(t))this.rootGroup.removeChild(e.group);this.groups={},this.series={}}}var gn=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Eo=function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})};class hi extends Zv{constructor(t=window.document,e,i){var n;super(),this.id=mo(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new de({name:`${this.id}-Series-root`}),this.extraDebugStats={},this.container=void 0,this.data=[],this.padding=new ir(20),this.seriesAreaPadding=new ir(0),this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this.modules={},this.legendModules={},this._pendingFactoryUpdates=[],this._performUpdateNoRenderCount=0,this._performUpdateType=_e.NONE,this.seriesToUpdate=new Set,this.performUpdateTrigger=function eP(r){return gg((t,e=0)=>setTimeout(t,e),r)}(({count:u})=>Eo(this,void 0,void 0,function*(){if(!this._destroyed)try{yield this.performUpdate(u)}catch(c){this._lastPerformUpdateError=c,ee.error("update error",c)}})),this._axes=[],this._series=[],this.applyLegendOptions=void 0,this.lastInteractionEvent=void 0,this.pointerScheduler=function JT(r){return gg((t,e)=>requestAnimationFrame(t),r)}(()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0}),this.onSeriesNodeClick=u=>{const c=Object.assign(Object.assign({},u),{type:"seriesNodeClick"});Object.defineProperty(c,"series",{enumerable:!1,get:()=>u.series}),this.fireEvent(c)},this.onSeriesNodeDoubleClick=u=>{const c=Object.assign(Object.assign({},u),{type:"seriesNodeDoubleClick"});this.fireEvent(c)};const o=i?.scene,s=null!==(n=i?.element)&&void 0!==n?n:t.createElement("div"),a=i?.container,l=new de({name:"root"});l.visible=!1,l.append(this.seriesRoot),this.axisGroup=new de({name:"Axes",layer:!0,zIndex:Ze.AXIS_ZINDEX}),l.appendChild(this.axisGroup),this.element=s,s.classList.add("ag-chart-wrapper"),s.style.position="relative",this.scene=o??new QD({document:t,overrideDevicePixelRatio:e}),this.scene.debug.consoleLog=!1,this.scene.root=l,this.scene.container=s,this.autoSize=!0,this.chartEventManager=new aP,this.cursorManager=new sP(s),this.highlightManager=new uP,this.interactionManager=new So(s),this.zoomManager=new pP,this.dataService=new mP(()=>this.series),this.layoutService=new yP,this.updateService=new CP((u=_e.FULL,{forceNodeDataRefresh:c})=>this.update(u,{forceNodeDataRefresh:c})),this.seriesStateManager=new WP,this.seriesLayerManager=new jP(this.seriesRoot),this.callbackCache=new VP,this.animationManager=new rP(this.interactionManager),this.animationManager.skipAnimations=!0,this.animationManager.play(),this.tooltip=new Ui(this.scene.canvas.element,t,t.body),this.tooltipManager=new hP(this.tooltip,this.interactionManager),this.overlays=new tP(this.element),this.highlight=new Og,this.container=a,this.debug=!1,lu.observe(this.element,u=>{var c;const{width:d,height:h}=u;if(!this.autoSize||0===d&&0===h)return;const[p=0,f=0]=null!==(c=this._lastAutoSize)&&void 0!==c?c:[];p===d&&f===h||(this._lastAutoSize=[d,h],this.resize())}),this.layoutService.addListener("start-layout",u=>this.positionPadding(u.shrinkRect)),this.layoutService.addListener("start-layout",u=>this.positionCaptions(u.shrinkRect)),this.interactionManager.addListener("click",u=>this.onClick(u)),this.interactionManager.addListener("dblclick",u=>this.onDoubleClick(u)),this.interactionManager.addListener("hover",u=>this.onMouseMove(u)),this.interactionManager.addListener("leave",u=>this.onLeave(u)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.disablePointer()),this.animationManager.addListener("animation-frame",u=>{this.update(_e.SCENE_RENDER)}),this.highlightManager.addListener("highlight-change",u=>this.changeHighlightDatum(u)),this.zoomManager.addListener("zoom-change",u=>this.update(_e.PROCESS_DATA,{forceNodeDataRefresh:!0})),this.attachLegend("category")}getOptions(){var t;const{queuedUserOptions:e}=this;return Qe([null!==(t=e[e.length-1])&&void 0!==t?t:this.userOptions])}autoSizeChanged(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize()}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.scene.download(t,e)}get destroyed(){return this._destroyed}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=new t.instanceConstructor(this.getModuleContext());this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}getModuleContext(){const{scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:o,interactionManager:s,tooltipManager:a,zoomManager:l,dataService:u,layoutService:c,updateService:d,seriesStateManager:h,seriesLayerManager:p,mode:f,callbackCache:v}=this;return{scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:o,interactionManager:s,tooltipManager:a,zoomManager:l,dataService:u,layoutService:c,updateService:d,mode:f,seriesStateManager:h,seriesLayerManager:p,callbackCache:v}}destroy(t){var e;if(this._destroyed)return;const i=t?.keepTransferableResources;let n;this._performUpdateType=_e.NONE,this._pendingFactoryUpdates.splice(0),this.tooltipManager.destroy(),this.tooltip.destroy(),null===(e=this.legend)||void 0===e||e.destroy(),this.overlays.noData.hide(),lu.unobserve(this.element);for(const[o,s]of Object.entries(this.modules))s.instance.destroy(),delete this.modules[o],delete this[o];return this.interactionManager.destroy(),this.animationManager.stop(),i?(this.scene.strip(),n={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.removeAllSeries(),this.seriesLayerManager.destroy(),this.axes.forEach(o=>o.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,n}log(...t){this.debug&&ee.debug(...t)}disablePointer(t=!1){t||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(t){const e=this._pendingFactoryUpdates,i=e.length;0===i?(e.push(t),this._processCallbacks().catch(n=>ee.errorOnce(n))):e.splice(1,i-1,t)}_processCallbacks(){return Eo(this,void 0,void 0,function*(){const t=this._pendingFactoryUpdates;for(;t.length>0;)if(this.updatePending)yield yg(1);else{try{yield t[0](),this.callbackCache.invalidateCache()}catch(e){ee.error("update error",e)}t.shift()}})}get performUpdateType(){return this._performUpdateType}get updatePending(){return this._performUpdateType!==_e.NONE||null!=this.lastInteractionEvent}get lastPerformUpdateError(){return this._lastPerformUpdateError}awaitUpdateCompletion(){return Eo(this,void 0,void 0,function*(){yield this.performUpdateTrigger.await()})}update(t=_e.FULL,e){const{forceNodeDataRefresh:i=!1,seriesToUpdate:n=this.series}=e??{};i&&this.series.forEach(o=>o.markNodeDataDirty());for(const o of n)this.seriesToUpdate.add(o);t<this._performUpdateType&&(this._performUpdateType=t,this.performUpdateTrigger.schedule())}performUpdate(t){var e;return Eo(this,void 0,void 0,function*(){const{_performUpdateType:i,extraDebugStats:n}=this;this.log("Chart.performUpdate() - start",_e[i]);const o=[performance.now()];switch(i){case _e.FULL:case _e.PROCESS_DATA:yield this.processData(),this.disablePointer(!0),o.push(performance.now());case _e.PERFORM_LAYOUT:if(!this.checkFirstAutoSize())break;yield this.performLayout(),this.handleOverlays(),this.log("Chart.performUpdate() - seriesRect",this.seriesRect),o.push(performance.now());case _e.SERIES_UPDATE:const{seriesRect:a}=this,l=[...this.seriesToUpdate].map(c=>c.update({seriesRect:a}));this.seriesToUpdate.clear(),yield Promise.all(l),o.push(performance.now());case _e.TOOLTIP_RECALCULATION:const u=this.tooltipManager.getTooltipMeta(this.id);i<_e.SERIES_UPDATE&&"hover"===(null===(e=u?.event)||void 0===e?void 0:e.type)&&this.handlePointer(u.event);case _e.SCENE_RENDER:yield this.scene.render({debugSplitTimes:o,extraDebugStats:n}),this.extraDebugStats={};case _e.NONE:this._performUpdateType=_e.NONE}const s=performance.now();this.log("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(s-o[0]))/100,count:t,performUpdateType:_e[i]})})}checkFirstAutoSize(){if(this.autoSize&&!this._lastAutoSize){const t=this._performUpdateNoRenderCount++,e=10*(2^t);if(t<5)return this._performUpdateType=_e.PERFORM_LAYOUT,this.performUpdateTrigger.schedule(e),this.log("Chart.checkFirstAutoSize() - backing off until first size update",e),!1;this.log("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}set axes(t){const e=new Set;this._axes.forEach(i=>{i.detachAxis(this.axisGroup),e.add(i)}),this._axes=t.filter(i=>!i.linkedTo).concat(t.filter(i=>i.linkedTo)),this._axes.forEach(i=>{i.attachAxis(this.axisGroup),e.delete(i)}),this.zoomManager.updateAxes(this._axes),e.forEach(i=>i.destroy())}get axes(){return this._axes}set series(t){this.removeAllSeries(),t.forEach(e=>this.addSeries(e))}get series(){return this._series}addSeries(t){const{series:e}=this;return e.indexOf(t)<0&&(e.push(t),null==t.rootGroup.parent&&this.seriesLayerManager.requestGroup(t),this.initSeries(t),!0)}initSeries(t){t.chart=this,t.data||(t.data=this.data),this.addSeriesListeners(t),t.addChartEventListeners()}removeAllSeries(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.destroy(),t.chart=void 0}),this._series=[]}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t={};this.axes.forEach(e=>{var i;const n=e.direction;(null!==(i=t[n])&&void 0!==i?i:t[n]=[]).push(e)}),this.series.forEach(e=>{e.directions.forEach(i=>{const n=t[i];if(!n)return void ee.warn(`no available axis for direction [${i}]; check series and axes configuration.`);const o=e.getKeys(i),s=this.findMatchingAxis(n,e.getKeys(i));s?e.axes[i]=s:ee.warn(`no matching axis for direction [${i}] and keys [${o}]; check series and axes configuration.`)})})}findMatchingAxis(t,e){for(const i of t){const n=i.keys;if(!n.length)return i;if(e)for(const o of e)if(n.indexOf(o)>=0)return i}}resize(t,e){var i,n,o,s;t??(t=null!==(i=this.width)&&void 0!==i?i:this.autoSize?null===(n=this._lastAutoSize)||void 0===n?void 0:n[0]:this.scene.canvas.width),e??(e=null!==(o=this.height)&&void 0!==o?o:this.autoSize?null===(s=this._lastAutoSize)||void 0===s?void 0:s[1]:this.scene.canvas.height),this.log("Chart.resize()",{width:t,height:e}),t&&e&&Number.isFinite(t)&&Number.isFinite(e)&&this.scene.resize(t,e)&&(this.disablePointer(),this.update(_e.PERFORM_LAYOUT,{forceNodeDataRefresh:!0}))}processData(){return Eo(this,void 0,void 0,function*(){this.axes.length>0&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=new BP,e=this.series.map(i=>i.processData(t));yield t.execute(),yield Promise.all(e),yield this.updateLegend()})}placeLabels(){const t=[],e=[];for(const o of this.series){if(!o.visible)continue;const s=o.getLabelData();s&&XT(s[0])&&(e.push(s),t.push(o))}const{seriesRect:i}=this,n=i&&e.length>0?function qT(r,t,e=5){const i=[];r=r.map(n=>n.slice().sort((o,s)=>s.point.size-o.point.size));for(let n=0;n<r.length;n++){const o=i[n]=[],s=r[n];if(s?.length&&s[0].label)for(let a=0,l=s.length;a<l;a++){const u=s[a],c=u.label,h=u.point.x-.5*c.width,p=u.point.y-.5*u.point.size-c.height-e,{width:f,height:v}=c;t&&!YT(t,h,p,f,v)||r.some(C=>C.some(w=>$T(w.point,h,p,f,v)))||i.some(C=>C.some(w=>vg(w,h,p,f,v)))||o.push({index:a,text:c.text,x:h,y:p,width:f,height:v,datum:u})}}return i}(e,{x:0,y:0,width:i.width,height:i.height}):[];return new Map(n.map((o,s)=>[t[s],o]))}attachLegend(t){var e;if(this.legendType===t&&this.legend)return this.legend;null===(e=this.legend)||void 0===e||e.destroy(),this.legend=void 0;const n=function HP(r,t){if(hu[r])return new hu[r](t);throw new Error(`AG Charts - unknown legend type: ${r}`)}(t,this.getModuleContext());return n.attachLegend(this.scene.root),this.legend=n,this.legendType=t,n}setLegendInit(t){this.applyLegendOptions=t}updateLegend(){var t;return Eo(this,void 0,void 0,function*(){const e=[];this.series.filter(o=>o.showInLegend).forEach(o=>{const s=o.getLegendData();e.push(...s)});const i=e.length>0?e[0].legendType:"category",n=this.attachLegend(i);null===(t=this.applyLegendOptions)||void 0===t||t.call(this,n),"category"===i&&this.validateLegendData(e),n.data=e})}validateLegendData(t){const e={};t.forEach(i=>{var n,o,s,a,l;const u=null===(n=this.series.find(d=>d.id===i.seriesId))||void 0===n?void 0:n.type;if(!u)return;const c=i;null!==(o=e[u])&&void 0!==o||(e[u]={[c.label.text]:new Set}),null!==(s=(a=e[u])[l=c.label.text])&&void 0!==s||(a[l]=new Set),null!=c.marker.fill&&e[u][c.label.text].add(c.marker.fill)}),Object.keys(e).forEach(i=>{Object.keys(e[i]).forEach(n=>{e[i][n].size>1&&ee.warnOnce(`legend item '${n}' has multiple fill colors, this may cause unexpected behaviour.`)})})}performLayout(){return Eo(this,void 0,void 0,function*(){null!=this.scene.root&&(this.scene.root.visible=!0);const{scene:{width:t,height:e}}=this;let i=new be(0,0,t,e);return({shrinkRect:i}=this.layoutService.dispatchPerformLayout("start-layout",{shrinkRect:i})),({shrinkRect:i}=this.layoutService.dispatchPerformLayout("before-series",{shrinkRect:i})),i})}positionPadding(t){const{padding:e}=this;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e;const{title:i,subtitle:n,footnote:o}=this,s=t.clone(),a=c=>{var d;const p=null!==(d=c.lineHeight)&&void 0!==d?d:c.fontSize*le.defaultLineHeightRatio,f=t.width,v=Math.max(p,t.height/10);c.computeTextWrap(f,v)},l=c=>{var d;const h=s.y;c.node.x=s.x+s.width/2,c.node.y=h,c.node.textBaseline="top",a(c);const p=c.node.computeBBox(),f=Math.ceil(p.y-h+p.height+(null!==(d=c.spacing)&&void 0!==d?d:0));s.shrink(f,"top")};return i&&(i.node.visible=i.enabled,i.node.visible&&l(i)),n&&(n.node.visible=null!==(e=i?.enabled&&n.enabled)&&void 0!==e&&e,n.node.visible&&l(n)),o&&(o.node.visible=o.enabled,o.node.visible&&(c=>{var d;const h=s.y+s.height;c.node.x=s.x+s.width/2,c.node.y=h,c.node.textBaseline="bottom",a(c);const p=c.node.computeBBox(),f=Math.ceil(h-p.y+(null!==(d=c.spacing)&&void 0!==d?d:0));s.shrink(f,"bottom")})(o)),{shrinkRect:s}}getSeriesRect(){return this.seriesRect}pickSeriesNode(t,e,i){var n,o;const s=performance.now(),a=e?[ht.EXACT_SHAPE_MATCH]:void 0,l=[...this.series].reverse();let u;for(const c of l){if(!c.visible||!c.rootGroup.visible)continue;const{match:d,distance:h}=null!==(n=c.pickNode(t,a))&&void 0!==n?n:{};if(d&&null!=h&&((!u||u.distance>h)&&h<=(i??1/0)&&(u={series:c,distance:h,datum:d}),0===h))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(o=this.extraDebugStats.pickSeriesNode)&&void 0!==o?o:0)+(performance.now()-s)),u}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(_e.SCENE_RENDER)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||this.disablePointer()}handlePointer(t){const{lastPick:e,hoverRect:i}=this,{offsetX:n,offsetY:o}=t,s=(a=!1)=>{e&&this.disablePointer(a)};i?.containsPoint(n,o)?(this.handlePointerTooltip(t,s),this.handlePointerNode(t)):s()}handlePointerTooltip(t,e){var i,n;const{lastPick:o,tooltip:s}=this,{range:a}=s,{pageX:l,pageY:u,offsetX:c,offsetY:d}=t;let h;"number"==typeof a&&Number.isFinite(a)&&(h=a);const p=this.pickSeriesNode({x:c,y:d},"exact"===a,h);if(!p)return this.tooltipManager.updateTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const f="node"===this.highlight.range||!o||o.datum!==p.datum;let v;f?(v=p.series.getTooltipHtml(p.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,p.datum)):o&&(o.event=t.sourceEvent);const w=this.tooltip.enabled&&p.series.tooltip.enabled&&("nearest"===a||null!=h||"exact"===a&&0===p.distance)&&(!f||void 0!==v),b=this.mergePointerDatum({pageX:l,pageY:u,offsetX:c,offsetY:d,event:t,showArrow:p.series.tooltip.showArrow,position:{xOffset:p.datum.series.tooltip.position.xOffset,yOffset:p.datum.series.tooltip.position.yOffset}},p.datum);b.enableInteraction=null!==(n=null===(i=p.series.tooltip.interaction)||void 0===i?void 0:i.enabled)&&void 0!==n&&n,w&&this.tooltipManager.updateTooltip(this.id,b,v)}handlePointerNode(t){this.checkSeriesNodeRange(t,(i,n)=>{(i.hasEventListener("nodeClick")||i.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,n)})||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update(_e.SERIES_UPDATE):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update(_e.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeClickEvent(t.sourceEvent,i))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i))}checkSeriesNodeRange(t,e){const i=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),n=i?.datum,o=n?.series.nodeClickRange;if(n&&"nearest"===o)return e(n.series,n),!0;let s;"number"==typeof o&&Number.isFinite(o)&&(s=o);const a=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},"exact"===o,s);return!!a&&!(null==s&&("exact"!==o||0!==a.distance)||(e(a.series,a.datum),0))}mergePointerDatum(t,e){const{type:i}=e.series.tooltip.position;if("node"===i&&e.nodeMidPoint){const{x:n,y:o}=e.nodeMidPoint,{canvas:s}=this.scene,a=e.series.contentGroup.inverseTransformPoint(n,o),l=s.element.getBoundingClientRect();return Object.assign(Object.assign({},t),{pageX:Math.round(l.left+window.scrollX+a.x),pageY:Math.round(l.top+window.scrollY+a.y),offsetX:Math.round(a.x),offsetY:Math.round(a.y)})}return t}changeHighlightDatum(t){var e,i;const n=new Set,{series:o,datum:s}=null!==(e=t.currentHighlight)&&void 0!==e?e:{},{series:a,datum:l}=null!==(i=t.previousHighlight)&&void 0!==i?i:{};a&&n.add(a),o&&n.add(o),a?.cursor&&l&&this.cursorManager.updateCursor(a.id),o?.cursor&&s&&this.cursorManager.updateCursor(o.id,o.cursor),this.lastPick=t.currentHighlight?{datum:t.currentHighlight}:void 0,null==o||null==a?this.update(_e.SERIES_UPDATE):this.update(_e.SERIES_UPDATE,{seriesToUpdate:n})}waitForUpdate(t=5e3){return Eo(this,void 0,void 0,function*(){const e=performance.now();for(;this._pendingFactoryUpdates.length>0||this.updatePending;){if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");yield yg(5)}yield this.awaitUpdateCompletion()})}handleOverlays(){this.handleNoDataOverlay()}handleNoDataOverlay(){const t=!this.series.some(i=>i.hasData()),e=this.getSeriesRect();t&&e?this.overlays.noData.show(e):this.overlays.noData.hide()}}function hh(r,t,e){return Math.max(t,Math.min(e,r))}gn([fn({newValue(r){this.scene.debug.consoleLog=r,this.animationManager&&(this.animationManager.debug=r)}})],hi.prototype,"debug",void 0),gn([fn({newValue(r){this.destroyed||r.appendChild(this.element)},oldValue(r){r.removeChild(this.element)}})],hi.prototype,"container",void 0),gn([fn({newValue(r){var t;null===(t=this.series)||void 0===t||t.forEach(e=>e.data=r)}})],hi.prototype,"data",void 0),gn([fn({newValue(r){this.resize(r)}})],hi.prototype,"width",void 0),gn([fn({newValue(r){this.resize(void 0,r)}})],hi.prototype,"height",void 0),gn([fn({changeValue(r){this.autoSizeChanged(r)}}),R(Le)],hi.prototype,"autoSize",void 0),gn([fn({newValue(r){var t;null===(t=this.scene.root)||void 0===t||t.appendChild(r.node)},oldValue(r){var t;null===(t=this.scene.root)||void 0===t||t.removeChild(r.node)}})],hi.prototype,"title",void 0),gn([fn({newValue(r){var t;null===(t=this.scene.root)||void 0===t||t.appendChild(r.node)},oldValue(r){var t;null===(t=this.scene.root)||void 0===t||t.removeChild(r.node)}})],hi.prototype,"subtitle",void 0),gn([fn({newValue(r){var t;null===(t=this.scene.root)||void 0===t||t.appendChild(r.node)},oldValue(r){var t;null===(t=this.scene.root)||void 0===t||t.removeChild(r.node)}})],hi.prototype,"footnote",void 0),gn([R(og("standalone","integrated"))],hi.prototype,"mode",void 0);class pu{constructor(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(i=>this[i]!==t[i])||(this.cache={},this.cacheProps.forEach(i=>this.cache[i]=this[i]),0))}refresh(){this.didChange()&&this.update()}set domain(t){const e=[];this.index=new Map;const i=this.index;t.forEach(n=>{void 0===i.get(n)&&i.set(n,e.push(n)-1)}),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const{interval:t=1}=this,e=Math.abs(Math.round(t));return this._domain.filter((i,n)=>n%e==0)}convert(t){this.refresh();const e=this.index.get(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex(i=>i===t);return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=hh(t,0,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=hh(t,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=hh(t,0,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,n=this._paddingOuter,[o,s]=this.range,a=s-o,l=a/Math.max(1,t+2*n-i),u=e?Math.floor(l):l,d=o+(a-u*(t-i))/2,h=e?Math.round(d):d,p=u*(1-i),f=e?Math.round(p):p,v=l*(1-i),g=[];for(let y=0;y<t;y++)g.push(h+u*y);this._bandwidth=f,this._rawBandwidth=v,this.ordinalRange=g}}var fu=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class Gt extends Oe{constructor(){super(),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}computeBBox(){return new be(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;if(this.dirty===W.NONE&&!n)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let s=this.x1,a=this.y1,l=this.x2,u=this.y2;if(s===l){const c=Math.round(s)+Math.floor(this.strokeWidth)%2/2;s=c,l=c}else if(a===u){const c=Math.round(a)+Math.floor(this.strokeWidth)%2/2;a=c,u=c}i.beginPath(),i.moveTo(s,a),i.lineTo(l,u),this.fillStroke(i),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}Gt.className="Line",Gt.defaultStyles=Object.assign({},Oe.defaultStyles,{fill:void 0,strokeWidth:1}),fu([te({redraw:W.MAJOR})],Gt.prototype,"x1",void 0),fu([te({redraw:W.MAJOR})],Gt.prototype,"y1",void 0),fu([te({redraw:W.MAJOR})],Gt.prototype,"x2",void 0),fu([te({redraw:W.MAJOR})],Gt.prototype,"y2",void 0);var Li=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class $e{constructor(){this.node=new le,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.spacing=$e.PADDING,this.lineHeight=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";const t=this.node;t.textAlign="center",t.pointerEvents=Zt.None}computeTextWrap(t,e){var i,n;const{text:o,wrapping:s}=this,a=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,t),l=null!==(n=this.maxHeight)&&void 0!==n?n:e;if(!isFinite(a)&&!isFinite(l))return void(this.node.text=o);const u=le.wrap(o??"",a,l,this,s);this.node.text=u}}function zP(r,t){return r.length===t.length&&r.every((e,i)=>Number(e)===Number(t[i]))}$e.PADDING=10,Li([R(Le)],$e.prototype,"enabled",void 0),Li([R(ue),at("node")],$e.prototype,"text",void 0),Li([R(Jo),at("node")],$e.prototype,"fontStyle",void 0),Li([R(er),at("node")],$e.prototype,"fontWeight",void 0),Li([R(K(0)),at("node")],$e.prototype,"fontSize",void 0),Li([R(wt),at("node")],$e.prototype,"fontFamily",void 0),Li([R(Ne),at("node","fill")],$e.prototype,"color",void 0),Li([R(xe(0))],$e.prototype,"spacing",void 0),Li([R(xe(0))],$e.prototype,"lineHeight",void 0),Li([R(xe(0))],$e.prototype,"maxWidth",void 0),Li([R(xe(0))],$e.prototype,"maxHeight",void 0),Li([R(Qd)],$e.prototype,"wrapping",void 0);let Me=(()=>{class r{constructor(e,i){this.domain=e,this.range=i,this.nice=!1,this.tickCount=r.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=null,this.strictClampByDefault=!1,this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}transform(e){return e}transformInvert(e){return e}fromDomain(e){return"number"==typeof e?e:e instanceof Date?e.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain)?this.niceDomain:this.domain}convert(e,i){var n;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const o=null!==(n=i?.strict)&&void 0!==n?n:this.strictClampByDefault,s=this.getDomain().map(h=>this.transform(h)),[a,l]=s,{range:u}=this,[c,d]=u;return(e=this.transform(e))<a?o?NaN:c:e>l?o?NaN:d:a===l?(c+d)/2:e===a?c:e===l?d:c+(this.fromDomain(e)-this.fromDomain(a))/(this.fromDomain(l)-this.fromDomain(a))*(d-c)}invert(e){this.refresh();const i=this.getDomain().map(p=>this.transform(p)),[n,o]=i,{range:s}=this,[a,l]=s,u=a>l;let h;return e<(u?l:a)?u?o:n:e>(u?a:l)?u?n:o:(h=this.toDomain(a===l?(this.fromDomain(n)+this.fromDomain(o))/2:this.fromDomain(n)+(e-a)/(l-a)*(this.fromDomain(o)-this.fromDomain(n))),this.transformInvert(h))}didChange(){const{cache:e}=this;return!(e&&!this.cacheProps.some(n=>this[n]!==e[n])||(this.cache={},this.cacheProps.forEach(n=>this.cache[n]=this[n]),0))}refresh(){this.didChange()&&this.update()}isDenseInterval({start:e,stop:i,interval:n,count:o}){const{range:s}=this,a=i-e,l=Math.min(s[0],s[1]);return o??(o=a/("number"==typeof n?n:1)),o>=Math.max(s[0],s[1])-l&&(ee.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)}}return r.defaultTickCount=5,r.defaultMaxTickCount=6,r})();function ph(r,t,e,i,n){if(e<2)return vu(r,t,t-r);const o=ya(r,t,e,i,n);return isNaN(o)?new fh(0):vu(r=Math.ceil(r/o)*o,t=Math.floor(t/o)*o,o)}const Lg=[1,2,5,10];function ya(r,t,e,i=0,n=1/0){const s=Math.floor(Math.log10((t-r)/e)),a=Math.pow(10,s),l=Lg.map(u=>{const d=Math.ceil((t-r)/(u*a));return{multiplier:u,isWithinBounds:d>=i&&d<=n,diffCount:Math.abs(d-e)}}).sort((u,c)=>u.isWithinBounds!==c.isWithinBounds?u.isWithinBounds?-1:1:u.diffCount-c.diffCount)[0].multiplier;return!l||isNaN(l)?NaN:l*a}class fh extends Array{constructor(t,e){if(super(),e)for(let i=0,n=e.length;i<n;i++)this[i]=e[i];this.fractionDigits=t}}function vu(r,t,e){const n=(l=>{var u,c;const d=l.split("e");return Math.max((null!==(c=null===(u=d[0].split(".")[1])||void 0===u?void 0:u.length)&&void 0!==c?c:0)-Number(d[1]),0)})((e%1).toExponential()),o=Math.pow(10,n),s=Math.ceil((t-r)/e),a=new fh(n);for(let l=0;l<=s;l++)a.push(Math.round((r+e*l)*o)/o);return a}const gu={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function vh(r,t=new Date(r.getFullYear(),0,1)){const e=r.getTimezoneOffset()-t.getTimezoneOffset(),i=r.getTime()-t.getTime()+6e4*e;return Math.floor(i/864e5)}function Mg(r,t){const n=(t-new Date(r.getFullYear(),0,1).getDay()+7)%7,o=new Date(r.getFullYear(),0,n+1);return o<=r?Math.floor(vh(r,o)/7)+1:0}function Ng(r,t=r.getFullYear()){const i=new Date(t,0,1).getDay(),o=new Date(t,0,(4-i+7)%7-3+1);return o<=r?Math.floor(vh(r,o)/7)+1:Ng(r,t-1)}const XP={a:r=>gu.shortDays[r.getDay()],A:r=>gu.days[r.getDay()],b:r=>gu.shortMonths[r.getMonth()],B:r=>gu.months[r.getMonth()],c:"%x, %X",d:(r,t)=>Et(r.getDate(),2,t??"0"),e:"%_d",f:(r,t)=>Et(1e3*r.getMilliseconds(),6,t??"0"),H:(r,t)=>Et(r.getHours(),2,t??"0"),I:(r,t)=>{const e=r.getHours()%12;return 0===e?"12":Et(e,2,t??"0")},j:(r,t)=>Et(vh(r)+1,3,t??"0"),m:(r,t)=>Et(r.getMonth()+1,2,t??"0"),M:(r,t)=>Et(r.getMinutes(),2,t??"0"),L:(r,t)=>Et(r.getMilliseconds(),3,t??"0"),p:r=>r.getHours()<12?"AM":"PM",Q:r=>String(r.getTime()),s:r=>String(Math.floor(r.getTime()/1e3)),S:(r,t)=>Et(r.getSeconds(),2,t??"0"),u:r=>{let t=r.getDay();return t<1&&(t+=7),String(t%7)},U:(r,t)=>Et(Mg(r,0),2,t??"0"),V:(r,t)=>Et(Ng(r),2,t??"0"),w:(r,t)=>Et(r.getDay(),2,t??"0"),W:(r,t)=>Et(Mg(r,1),2,t??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(r,t)=>Et(r.getFullYear()%100,2,t??"0"),Y:(r,t)=>Et(r.getFullYear(),4,t??"0"),Z:r=>function YP(r){const t=r.getTimezoneOffset(),e=Math.abs(t);return`${t>0?"-":"+"}${Et(Math.floor(e/60),2,"0")}${Et(Math.floor(e%60),2,"0")}`}(r),"%":()=>"%"},qP={_:" ",0:"0","-":""};function Et(r,t,e){const i=String(Math.floor(r));return i.length>=t?i:`${e.repeat(t-i.length)}${i}`}function yu(r){const t=[];for(;r.length>0;){let e=r.indexOf("%");if(0!==e){const a=e>0?r.substring(0,e):r;t.push(a)}if(e<0)break;const n=qP[r[e+1]];null!=n&&e++;const o=r[e+1],s=XP[o];if("function"==typeof s)t.push([s,n]);else if("string"==typeof s){const a=yu(s);t.push([a,n])}else t.push(`${n??""}${o}`);r=r.substring(e+2)}return e=>{const i="number"==typeof e?new Date(e):e;return t.map(n=>"string"==typeof n?n:n[0](i,n[1])).join("")}}var De=function(r){return r[r.MILLISECOND=0]="MILLISECOND",r[r.SECOND=1]="SECOND",r[r.MINUTE=2]="MINUTE",r[r.HOUR=3]="HOUR",r[r.WEEK_DAY=4]="WEEK_DAY",r[r.SHORT_MONTH=5]="SHORT_MONTH",r[r.MONTH=6]="MONTH",r[r.SHORT_YEAR=7]="SHORT_YEAR",r[r.YEAR=8]="YEAR",r}(De||{});const or={[De.MILLISECOND]:".%L",[De.SECOND]:":%S",[De.MINUTE]:"%I:%M",[De.HOUR]:"%I %p",[De.WEEK_DAY]:"%a",[De.SHORT_MONTH]:"%b %d",[De.MONTH]:"%B",[De.SHORT_YEAR]:"%y",[De.YEAR]:"%Y"};function Xi(r){return r instanceof Date?r.getTime():r}class Gg extends Me{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],this.year=MD,this.month=PD,this.week=xD,this.day=RD,this.hour=_D,this.minute=CD,this.second=gD,this.millisecond=pD,this.tickIntervals=[[this.second,1,qo],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,ui],[this.minute,5,5*ui],[this.minute,15,15*ui],[this.minute,30,30*ui],[this.hour,1,cn],[this.hour,3,3*cn],[this.hour,6,6*cn],[this.hour,12,12*cn],[this.day,1,yo],[this.day,2,2*yo],[this.week,1,ia],[this.week,2,2*ia],[this.week,3,3*ia],[this.month,1,na],[this.month,2,2*na],[this.month,3,3*na],[this.month,4,4*na],[this.month,6,6*na],[this.year,1,zl]]}toDomain(t){return new Date(t)}calculateDefaultTickFormat(t=[]){let e=De.YEAR;const i=u=>{u<e&&(e=u)};for(const u of t)i(this.getLowestGranularityFormat(u));const n=Xi(t[0]),o=Xi(t[t.length-1]),s=new Date(n).getFullYear(),l=new Date(o).getFullYear()-s>0;return this.buildFormatString(e,l)}buildFormatString(t,e){let i=[or[t]],n=0;const o=this.getDomain(),s=Math.min(...o.map(Xi)),l=Math.max(...o.map(Xi))-s;switch(t){case De.SECOND:l/ui>1&&i.push(or[De.MINUTE]);case De.MINUTE:l/cn>1&&i.push(or[De.HOUR]);case De.HOUR:n=i.length,l/yo>1&&i.push(or[De.WEEK_DAY]);case De.WEEK_DAY:if(l/ia>1||e){const u=i.indexOf(or[De.WEEK_DAY]);u>-1&&i.splice(u,1,or[De.SHORT_MONTH])}case De.SHORT_MONTH:case De.MONTH:(l/zl>1||e)&&i.push(or[De.YEAR])}return n<i.length&&(i=[...i.slice(0,n),i.slice(n).join(" ")]),n>0&&(i=[...i.slice(0,n).reverse(),...i.slice(n)],n<i.length&&i.splice(n,0," ")),i.join("")}getLowestGranularityFormat(t){return this.second.floor(t)<t?De.MILLISECOND:this.minute.floor(t)<t?De.SECOND:this.hour.floor(t)<t?De.MINUTE:this.day.floor(t)<t?De.HOUR:this.month.floor(t)<t?this.week.floor(t)<t?De.WEEK_DAY:De.SHORT_MONTH:this.year.floor(t)<t?De.MONTH:De.YEAR}defaultTickFormat(t){const e=this.calculateDefaultTickFormat(t);return i=>yu(e)(i)}getTickInterval({start:t,stop:e,count:i,minCount:n,maxCount:o}){const{tickIntervals:s}=this;let a,l;const u=i??Me.defaultTickCount,c=Math.abs(e-t)/Math.max(u,1);let d=0;for(;d<s.length&&c>s[d][2];)d++;if(0===d)l=Math.max(ya(t,e,u,n,o),1),a=this.millisecond;else if(d===s.length)l=ya(t/zl,e/zl,u,n,o),a=this.year;else{const f=c-s[d-1][2]<s[d][2]-c?d-1:d;[a,l]=s[f]}return a.every(l)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[t,e]=this.getDomain().map(Xi);if(void 0!==this.interval)return this.getTicksForInterval({start:t,stop:e});if(this.nice){const{tickCount:i}=this;if(2===i)return this.niceDomain;if(1===i)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:t,stop:e})}getDefaultTicks({start:t,stop:e}){const i=this.getTickInterval({start:t,stop:e,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(t),new Date(e)):[]}getTicksForInterval({start:t,stop:e}){const{interval:i,tickIntervals:n}=this;if(!i)return[];if(i instanceof Ar){const d=i.range(new Date(t),new Date(e));return this.isDenseInterval({start:t,stop:e,interval:i,count:d.length})?this.getDefaultTicks({start:t,stop:e}):d}const o=Math.abs(i);if(this.isDenseInterval({start:t,stop:e,interval:o}))return this.getDefaultTicks({start:t,stop:e});const s=[...n];s.reverse();const a=s.find(d=>o%d[2]==0);if(a)return a[0].every(o/(a[2]/a[1])).range(new Date(t),new Date(e));let l=new Date(t);const u=new Date(e),c=[];for(;l<=u;)c.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+o);return c}tickFormat({ticks:t,specifier:e}){return null==e?this.defaultTickFormat(t):yu(e)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[e,i]=this.domain;for(let n=0;n<4;n++){this.updateNiceDomainIteration(e,i);const[o,s]=this.niceDomain;if(Xi(e)===Xi(o)&&Xi(i)===Xi(s))break;e=o,i=s}}updateNiceDomainIteration(t,e){const i=Xi(t),n=Xi(e),{interval:o}=this;let s;if(o instanceof Ar)s=o;else{const a="number"==typeof o?(n-i)/Math.max(o,1):this.tickCount;s=this.getTickInterval({start:i,stop:n,count:a,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(s){const a=s.range(t,e,!0);this.niceDomain=[a[0],a[a.length-1]]}}}const Hr=r=>`(${r})`,Vn=r=>`${Hr(r)}?`,kg=r=>Vn(`?:${r}`),ZP=new RegExp(["^",kg(`${Vn(".")}${Hr("[<>=^]")}`),Vn("[+\\-( ]"),Vn("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),Vn("0"),Vn("\\d+"),Vn(","),kg(`\\.${Hr("\\d+")}`),Vn("~"),Vn("[%a-z]"),"$"].join(""),"i"),QP=new RegExp(["^",Hr(".*?"),`#\\{${Hr(".+?")}\\}`,Hr(".*?"),"$"].join(""));function Hg(r){let t,e;const i=QP.exec(r);i&&([,t,r,e]=i);const n=ZP.exec(r);if(!n)throw new Error(`The number formatter is invalid: ${r}`);const[,o,s,a,l,u,c,d,h,p,f]=n;return{fill:o,align:s,sign:a,symbol:l,zero:u,width:parseInt(c),comma:d,precision:parseInt(h),trim:!!p,type:f,prefix:t,suffix:e}}function Vg(r){const t="string"==typeof r?Hg(r):r,{fill:e,align:i,sign:n="-",symbol:o,zero:s,width:a,comma:l,type:u,prefix:c="",suffix:d="",precision:h}=t;let{trim:p}=t;const f=void 0===h||isNaN(h);let v,g;if(u)if(u in pi&&u in Vr)v=f?Vr[u]:pi[u];else if(u in pi)v=pi[u];else{if(!(u in Vr))throw new Error(`The number formatter type is invalid: ${u}`);v=Vr[u]}else v=pi.g,p=!0;return g=null==h||f?u?6:12:h,y=>{let m=v(y,g);return p&&(m=function JP(r){return r.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}(m)),l&&(m=function eA(r,t){let e=r.indexOf(".");e<0&&(e=r.length);const i=r.substring(0,e).split(""),n=r.substring(e);for(let o=i.length-3;o>0;o-=3)i.splice(o,0,t);return`${i.join("")}${n}`}(m,l)),m=function oA(r,t,e=""){if("("===e)return r>=0?t:`(${t})`;return`${r>=0?"+"===e?"+":"":nA}${t}`}(y,m,n),o&&"#"!==o&&(m=`${o}${m}`),"#"===o&&"x"===u&&(m=`0x${m}`),"s"===u&&(m=`${m}${function tA(r){return iA[Bg(r)]}(y)}`),("%"===u||"p"===u)&&(m=`${m}%`),null!=a&&!isNaN(a)&&(m=function rA(r,t,e=" ",i=">"){let n=r;if(">"!==i&&i){if("<"===i)n=n.padEnd(t,e);else if("^"===i){const o=Math.max(0,t-n.length),s=Math.ceil(o/2),a=Math.floor(o/2);n=n.padStart(s+n.length,e),n=n.padEnd(a+n.length,e)}}else n=n.padStart(t,e);return n}(m,a,e??s,i)),m=`${c}${m}${d}`,m}}const mu=r=>Math.floor(Math.abs(r)),Vr={b:r=>mu(r).toString(2),c:r=>String.fromCharCode(r),d:r=>Math.round(Math.abs(r)).toFixed(0),o:r=>mu(r).toString(8),x:r=>mu(r).toString(16),X:r=>Vr.x(r).toUpperCase(),n:r=>Vr.d(r),"%":r=>`${mu(100*r).toFixed(0)}`},pi={e:(r,t)=>Math.abs(r).toExponential(t),E:(r,t)=>pi.e(r,t).toUpperCase(),f:(r,t)=>Math.abs(r).toFixed(t),F:(r,t)=>pi.f(r,t).toUpperCase(),g:(r,t)=>{if(0===r)return"0";const e=Math.abs(r),i=Math.floor(Math.log10(e));return i>=-4&&i<t?e.toFixed(t-1-i):e.toExponential(t-1)},G:(r,t)=>pi.g(r,t).toUpperCase(),n:(r,t)=>pi.g(r,t),p:(r,t)=>pi.r(100*r,t),r:(r,t)=>{if(0===r)return"0";const e=Math.abs(r),n=Math.floor(Math.log10(e))-(t-1);if(n<=0)return e.toFixed(-n);const o=Math.pow(10,n);return(Math.round(e/o)*o).toFixed()},s:(r,t)=>{const e=Bg(r);return pi.r(r/Math.pow(10,e),t)},"%":(r,t)=>pi.f(100*r,t)};function Bg(r){const t=Math.log10(Math.abs(r)),e=3*Math.floor(t/3);return Math.max(Wg,Math.min(jg,e))}const Wg=-24,jg=24,iA={[Wg]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[jg]:"Y"},nA="\u2212",Ug=r=>r;class ma extends Me{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.cacheProps=["domain","range","nice","tickCount","base"],this.baseLog=Ug,this.basePow=Ug,this.log=t=>this.domain[0]>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>this.domain[0]>=0?this.basePow(t):-this.basePow(-t)}toDomain(t){return t}transform(t){return this.domain[0]>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return this.domain[0]>=0?Math.exp(t):-Math.exp(-t)}update(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){const{base:t}=this;let e;if(10===t)e=Math.log10;else if(t===Math.E)e=Math.log;else if(2===t)e=Math.log2;else{const i=Math.log(t);e=n=>Math.log(n)/i}this.baseLog=e}updatePowFn(){const{base:t}=this;let e;e=10===t?ma.pow10:t===Math.E?Math.exp:i=>Math.pow(t,i),this.basePow=e}updateNiceDomain(){const[t,e]=this.domain,i=this.pow(Math.floor(this.log(t))),n=this.pow(Math.ceil(this.log(e)));this.niceDomain=[i,n]}static pow10(t){return t>=0?Math.pow(10,t):1/Math.pow(10,-t)}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[n,o]=this.getDomain();let s=this.log(n),a=this.log(o);if(this.interval){const g=Math.abs(this.interval),y=Math.abs(a-s),m=vu(s,a,Math.min(y,g)).map(C=>this.pow(C)).filter(C=>C>=n&&C<=o);if(!this.isDenseInterval({start:n,stop:o,interval:g,count:m.length}))return m}if(i%1!=0||a-s>=e)return ph(s,a,Math.min(a-s,e)).map(g=>this.pow(g));const c=[],d=n>0;s=Math.floor(s)-1,a=Math.round(a)+1;const h=Math.min(...this.range),f=(Math.max(...this.range)-h)/e;let v=1/0;for(let g=s;g<=a;g++){const y=this.convert(this.pow(g+1));for(let m=1;m<i;m++){const C=d?m:i-m+1,w=this.pow(g)*C,_=this.convert(w),b=Math.abs(v-_),O=Math.abs(_-y);w>=n&&w<=o&&(1===m||b>=f&&O>=f)&&(c.push(w),v=_)}}return c}tickFormat({count:t,ticks:e,specifier:i}){const{base:n}=this;return null==i&&(i=10===n?".0e":","),"string"==typeof i&&(i=Vg(i)),t===1/0?i:(null==e&&this.ticks(),o=>i(o))}}function Bn(r){const{length:t}=r;if(0===t)return;let e=1/0,i=-1/0;for(let o=0;o<t;o++){let s=r[o];s instanceof Date&&(s=s.getTime()),"number"==typeof s&&(s<e&&(e=s),s>i&&(i=s))}const n=[e,i];return n.some(o=>!isFinite(o))?void 0:n}!function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([R(K(0))],ma.prototype,"base",void 0);var Br=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class bt{constructor(){this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}getFont(){return Qo(this)}}function gh(r){const{parallelFlipRotation:t=0,regularFlipRotation:e=0}=r,i=r.rotation?It(Wi(r.rotation)):0,n=!i&&t>=0&&t<=Math.PI?-1:1,o=!i&&e>=0&&e<=Math.PI?-1:1;let s=0;return r.parallel?s=n*Math.PI/2:-1===o&&(s=Math.PI),{configuredRotation:i,defaultRotation:s,parallelFlipFlag:n,regularFlipFlag:o}}function yh(r,t,e,i,n){const o=t>0&&t<=Math.PI,s=e>0&&e<=Math.PI;if(r){if(!t&&!e)return"center";if(i*(o||s?-1:1)==-1)return"end"}else if(i*n==-1)return"end";return"start"}function dA(r,t,e,i,n){const{width:o,height:s}=t,a=new be(e,i,0,0);n.transformBBox(a,t);const{x:l=0,y:u=0}=t;return t.width=o,t.height=s,{point:{x:l,y:u,size:0},label:{width:o,height:s,text:r}}}function bo(r,t=[void 0]){return Lr((e,i,n)=>t.includes(n)?r:n)}Br([R(Le)],bt.prototype,"enabled",void 0),Br([R(K(0))],bt.prototype,"fontSize",void 0),Br([R(wt)],bt.prototype,"fontFamily",void 0),Br([R(Jo)],bt.prototype,"fontStyle",void 0),Br([R(er)],bt.prototype,"fontWeight",void 0),Br([R(ci)],bt.prototype,"color",void 0);var ft=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class Je{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.autoRotate=void 0,this.autoRotateAngle=335,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0,this.format=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return Qo(this)}}ft([R(Le)],Je.prototype,"enabled",void 0),ft([R(pn)],Je.prototype,"autoWrap",void 0),ft([R(xe(0))],Je.prototype,"maxWidth",void 0),ft([R(xe(0))],Je.prototype,"maxHeight",void 0),ft([R(Jo)],Je.prototype,"fontStyle",void 0),ft([R(er)],Je.prototype,"fontWeight",void 0),ft([R(K(1))],Je.prototype,"fontSize",void 0),ft([R(wt)],Je.prototype,"fontFamily",void 0),ft([R(K(0))],Je.prototype,"padding",void 0),ft([R(wo()),bo(NaN)],Je.prototype,"minSpacing",void 0),ft([R(Ne)],Je.prototype,"color",void 0),ft([R(xe(-360,360))],Je.prototype,"rotation",void 0),ft([R(pn)],Je.prototype,"autoRotate",void 0),ft([R(K(-360,360))],Je.prototype,"autoRotateAngle",void 0),ft([R(Le)],Je.prototype,"avoidCollisions",void 0),ft([R(Le)],Je.prototype,"mirrored",void 0),ft([R(Le)],Je.prototype,"parallel",void 0),ft([R(ue)],Je.prototype,"format",void 0);var zg=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class Cu{constructor(){this.width=1,this.color="rgba(195, 195, 195, 1)"}}zg([R(K(0))],Cu.prototype,"width",void 0),zg([R(Ne)],Cu.prototype,"color",void 0);var Ro=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};const hA=re((r,t)=>K(0)(r,t)||r instanceof Ar,"expecting a tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),pA=re((r,t)=>We(r,t,hA),"expecting an optional tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),fA=re((r,t)=>We(r,t,(e,i)=>0!==e&&K(0)(e,i)||e instanceof Ar),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'");class qi{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color="rgba(195, 195, 195, 1)",this.count=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}}Ro([R(Le)],qi.prototype,"enabled",void 0),Ro([R(K(0))],qi.prototype,"width",void 0),Ro([R(K(0))],qi.prototype,"size",void 0),Ro([R(Ne)],qi.prototype,"color",void 0),Ro([R(pA),function DT(r,t){const e=t?.default,i=ag();return Lr((n,o,s)=>(s!==e&&i(o.toString(),r),s))}("Use tick.interval or tick.minSpacing and tick.maxSpacing instead")],qi.prototype,"count",void 0),Ro([R(fA)],qi.prototype,"interval",void 0),Ro([R(qd())],qi.prototype,"values",void 0),Ro([R(In(wo(1),Jl("maxSpacing"))),bo(NaN)],qi.prototype,"minSpacing",void 0);let mh=(()=>{class r{constructor(e,i){this.state=e,this.states=i,r.DEBUG()&&ee.debug(`%c${this.constructor.name} | init -> ${e}`,"color: green")}transition(e,i){var n,o,s,a,l;const u=this.states[this.state],c=null===(n=u?.on)||void 0===n?void 0:n[e];if(!c)return void(r.DEBUG()&&ee.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${this.state}`,"color: grey"));const d=c.target,h=this.states[d];return r.DEBUG()&&ee.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${d}`,"color: green"),c.action(i),null===(s=null===(o=u?.actions)||void 0===o?void 0:o.onExit)||void 0===s||s.call(o),null===(l=null===(a=h?.actions)||void 0===a?void 0:a.onEnter)||void 0===l||l.call(a),this.state=d,this.state}}return r.DEBUG=()=>{var t;return null!==(t=[!0,"animation"].includes(Bi("agChartsDebug")))&&void 0!==t&&t},r})();var Ch=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};const gA=["stroke","lineDash"],yA=re(Co(void 0,r=>{for(const t in r)if(!gA.includes(t))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");var wu=function(r){return r[r.TickLine=0]="TickLine",r[r.TickLabel=1]="TickLabel",r[r.GridLine=2]="GridLine",r[r.GridArc=3]="GridArc",r[r.AxisLine=4]="AxisLine",r}(wu||{}),yn=function(r){return r[r.CREATE=0]="CREATE",r[r.CREATE_SECONDARY=1]="CREATE_SECONDARY",r[r.FILTER=2]="FILTER",r[r.VALUES=3]="VALUES",r}(yn||{});class mA extends mh{}class Oo{constructor(t,e){this.moduleCtx=t,this.id=mo(this),this.nice=!0,this.dataDomain=[],this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.axisGroup=new de({name:`${this.id}-axis`,zIndex:Ze.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new Gt),this.tickLineGroup=this.axisGroup.appendChild(new de({name:`${this.id}-Axis-tick-lines`,zIndex:Ze.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new de({name:`${this.id}-Axis-tick-labels`,zIndex:Ze.AXIS_ZINDEX})),this.crossLineGroup=new de({name:`${this.id}-CrossLines`}),this.gridGroup=new de({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new de({name:`${this.id}-gridLines`,zIndex:Ze.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=Ge.select(this.tickLineGroup,Gt,!1),this.tickLabelGroupSelection=Ge.select(this.tickLabelGroup,le,!1),this.gridLineGroupSelection=Ge.select(this.gridLineGroup,Gt,!1),this.line=new Cu,this.tick=this.createTick(),this.label=new Je,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.modules={},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new $e,this._gridLength=0,this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}],this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.maxThickness=1/0,this._scale=e,this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node);const i=t.interactionManager.addListener("hover",n=>this.checkAxisHover(n));this.destroyFns.push(()=>t.interactionManager.removeListener(i)),this.animationManager=t.animationManager,this.animationState=new mA("empty",{empty:{on:{update:{target:"align",action:()=>this.resetSelectionNodes()}}},align:{on:{update:{target:"ready",action:()=>this.resetSelectionNodes()}}},ready:{on:{update:{target:"ready",action:n=>this.animateReadyUpdate(n)}}}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines)}get scale(){return this._scale}get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set crossLines(t){var e,i;null===(e=this._crossLines)||void 0===e||e.forEach(n=>this.detachCrossLine(n)),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,null===(i=this._crossLines)||void 0===i||i.forEach(n=>{this.attachCrossLine(n),this.initCrossLine(n)})}get crossLines(){return this._crossLines}attachCrossLine(t){this.crossLineGroup.appendChild(t.group)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group)}destroy(){for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this[t];this.destroyFns.forEach(t=>t())}refreshScale(){var t;this.range=this.scale.range.slice(),null===(t=this.crossLines)||void 0===t||t.forEach(e=>{this.initCrossLine(e)})}updateRange(){var t;const{range:e,visibleRange:i,scale:n}=this,o=(e[1]-e[0])/(i[1]-i[0]),a=e[0]-o*i[0];n.range=[a,a+o],null===(t=this.crossLines)||void 0===t||t.forEach(l=>{l.clippedRange=[e[0],e[1]]})}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t){t.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)}detachAxis(t){t.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t,e=0,i=0){return 0===this.inRangeEx(t,e,i)}inRangeEx(t,e=0,i=0){const{range:n}=this,o=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return t+e<o-i?-1:t>s+i?1:0}onLabelFormatChange(t,e){const{scale:i,fractionDigits:n}=this,s=!(i instanceof ma)&&n>0?a=>"number"==typeof a?a.toFixed(n):String(a):a=>String(a);if(e&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:t,specifier:e})}catch{this.labelFormatter=s,ee.warnOnce(`the axis label format string ${e} is invalid. No formatting will be applied`)}else this.labelFormatter=s}setDomain(){var t;const{scale:e,dataDomain:i,tick:{values:n}}=this;if(n&&e instanceof Me){const[o,s]=null!==(t=Bn(n))&&void 0!==t?t:[1/0,-1/0],a=Math.min(e.fromDomain(i[0]),o),l=Math.max(e.fromDomain(i[1]),s);e.domain=[e.toDomain(a),e.toDomain(l)]}else e.domain=i}setTickInterval(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t}setTickCount(t,e,i){const{scale:n}=this;if(t&&n instanceof Me){if("number"==typeof t)return n.tickCount=t,n.minTickCount=e??0,void(n.maxTickCount=i??1/0);n instanceof Gg&&this.setTickInterval(t)}}set gridLength(t){var e;(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineGroupSelection=this.gridLineGroupSelection.clear()),this._gridLength=t,null===(e=this.crossLines)||void 0===e||e.forEach(i=>{this.initCrossLine(i)})}get gridLength(){return this._gridLength}createTick(){return new qi}checkAxisHover(t){this.computeBBox().containsPoint(t.offsetX,t.offsetY)&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(t){const e=this.tickLabelGroupSelection.nodes().map(f=>f.datum.tickId),{rotation:i,parallelFlipRotation:n,regularFlipRotation:o}=this.calculateRotations(),s=this.label.getSideFlag(),a=s*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.updatePosition({rotation:i,sideFlag:s}),this.updateLine();const l=this.generateTicks({primaryTickCount:t,parallelFlipRotation:n,regularFlipRotation:o,labelX:a,sideFlag:s}),{tickData:u,combinedRotation:c,textBaseline:d,textAlign:h}=l,p=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(e[i[n]]=r[i[n]])}return e}(l,["tickData","combinedRotation","textBaseline","textAlign"]);if(this.updateSelections(u.ticks),this.animationManager.skipAnimations)this.resetSelectionNodes();else{const f=this.calculateUpdateDiff(e,u);this.animationState.transition("update",f)}return this.updateLabels({tickLabelGroupSelection:this.tickLabelGroupSelection,combinedRotation:c,textBaseline:d,textAlign:h,labelX:a}),this.updateVisibility(),this.updateGridLines(s),this.updateTickLines(s),this.updateTitle({anyTickVisible:u.ticks.length>0,sideFlag:s}),this.updateCrossLines({rotation:i,parallelFlipRotation:n,regularFlipRotation:o,sideFlag:s}),this.updateLayoutState(),p.primaryTickCount}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;t instanceof Me&&(this.setTickCount(this.tick.count),t.nice=e,t.update())}calculateRotations(){const t=Wi(this.rotation);return{rotation:t,parallelFlipRotation:It(t),regularFlipRotation:It(t-Math.PI/2)}}generateTicks({primaryTickCount:t,parallelFlipRotation:e,regularFlipRotation:i,labelX:n,sideFlag:o}){var s;const{scale:a,tick:l,label:{parallel:u,rotation:c,fontFamily:d,fontSize:h,fontStyle:p,fontWeight:f}}=this,v=void 0!==t,{defaultRotation:g,configuredRotation:y,parallelFlipFlag:m,regularFlipFlag:C}=gh({rotation:c,parallel:u,regularFlipRotation:i,parallelFlipRotation:e}),w=y+g,_=new qt,{maxTickCount:b}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:null!==(s=l.maxSpacing)&&void 0!==s?s:NaN}),x=!l.count&&a instanceof Me&&!isNaN(b)?b:10;let D=yh(u,y,0,o,C);const T=function cA(r,t,e,i){return r&&!t?e*i==-1?"hanging":"bottom":"middle"}(u,y,o,m),L={fontFamily:d,fontSize:h,fontStyle:p,fontWeight:f,textBaseline:T,textAlign:D};let A={rawTicks:[],ticks:[],labelCount:0},N=0,H=0,j=!0,z=!1;for(;j&&N<=x&&!z;){H=0,D=yh(u,y,0,o,C);const G=this.getTickStrategies({secondaryAxis:v,index:N});for(const Z of G){({tickData:A,index:N,autoRotation:H,terminate:z}=Z({index:N,tickData:A,textProps:L,labelOverlap:j,terminate:z,primaryTickCount:t}));const J=A.ticks;D=yh(u,y,H,o,C),j=this.checkLabelOverlap(w+H,0!==y||0!==H,_,J,n,Object.assign(Object.assign({},L),{textAlign:D}))}}return!v&&A.rawTicks.length>0&&(t=A.rawTicks.length),{tickData:A,primaryTickCount:t,combinedRotation:g+y+H,textBaseline:T,textAlign:D}}getTickStrategies({index:t,secondaryAxis:e}){const{scale:i,label:n,tick:o}=this,s=i instanceof Me,a=n.enabled&&n.avoidCollisions,u=!0===n.autoRotate&&void 0===n.rotation,c=[];let d;return d=this.tick.values?yn.VALUES:e?yn.CREATE_SECONDARY:s&&void 0===this.tick.count||0===t||!a?yn.CREATE:yn.FILTER,c.push(({index:p,tickData:f,primaryTickCount:v,terminate:g})=>this.createTickData(d,p,f,g,v)),s||isNaN(o.minSpacing)||c.push(({index:f,tickData:v,primaryTickCount:g,terminate:y})=>this.createTickData(yn.FILTER,f,v,y,g)),a?(n.autoWrap?c.push(({index:f,tickData:v,textProps:g})=>this.wrapLabels(v,f,g)):u&&c.push(({index:f,tickData:v,labelOverlap:g,terminate:y})=>({index:f,tickData:v,autoRotation:this.getAutoRotation(g),terminate:y})),c):c}createTickData(t,e,i,n,o){var s,a,l;const{scale:u,tick:c}=this,{maxTickCount:d,minTickCount:h,defaultTickCount:p}=this.estimateTickCount({minSpacing:c.minSpacing,maxSpacing:null!==(s=c.maxSpacing)&&void 0!==s?s:NaN}),f=u instanceof Me,v=c.count||!f||isNaN(d)?10:d;let g=null!==(a=c.count)&&void 0!==a?a:f?Math.max(p-e,h):d;const y=void 0===c.interval&&void 0===c.values&&void 0===c.count&&g>h&&(f||t===yn.FILTER);let m=!0;for(;m&&e<=v;){const w=i.rawTicks;g=null!==(l=c.count)&&void 0!==l?l:f?Math.max(p-e,h):d;const{rawTicks:_,ticks:b,labelCount:O}=this.getTicks({tickGenerationType:t,previousTicks:w,tickCount:g,minTickCount:h,maxTickCount:d,primaryTickCount:o});i.rawTicks=_,i.ticks=b,i.labelCount=O,m=!!y&&zP(_,w),e++}return n||(n=void 0!==c.interval||void 0!==c.values),{tickData:i,index:e,autoRotation:0,terminate:n}}checkLabelOverlap(t,e,i,n,o,s){qt.updateTransformMatrix(i,1,1,t,0,0);const a=this.createLabelData(n,o,s,i),l=function uA(r,t){return isNaN(r)?t?0:10:r}(this.label.minSpacing,e);return function ZT(r,t){const e=[];for(let i=0;i<r.length;i++){const n=r[i],{point:{x:o,y:s},label:{text:a}}=n;let{label:{width:l,height:u}}=n;if(l+=t??0,u+=t??0,e.some(d=>vg(d,o,s,l,u)))return!0;e.push({index:i,text:a,x:o,y:s,width:l,height:u,datum:n})}return!1}(a,l)}createLabelData(t,e,i,n){const o=[];for(const s of t){const{tickLabel:a,translationY:l}=s;if(""===a||null==a)continue;const u=qv(a),{width:c,height:d}=oT(u,e,l,i),p=dA(a,new be(e,l,c,d),e,l,n);o.push(p)}return o}getAutoRotation(t){return t?It(Wi(this.label.autoRotateAngle)):0}getTicks({tickGenerationType:t,previousTicks:e,tickCount:i,minTickCount:n,maxTickCount:o,primaryTickCount:s}){var a;const{scale:l}=this;let u=[];switch(t){case yn.VALUES:u=this.tick.values;break;case yn.CREATE_SECONDARY:u=this.updateSecondaryAxisTicks(s);break;case yn.FILTER:u=this.filterTicks(e,i);break;default:u=this.createTicks(i,n,o)}this.onLabelFormatChange(u,this.label.format),this.fractionDigits=u.fractionDigits>=0?u.fractionDigits:0;const c=(null!==(a=this.scale.bandwidth)&&void 0!==a?a:0)/2,d=[];let h=0;const p=new Map;for(let f=0;f<u.length;f++){const v=u[f],g=l.convert(v)+c,y=this.formatTick(v,f);let m=y;if(p.has(m)){const C=p.get(m);p.set(m,C+1),m=`${m}_${C}`}else p.set(m,1);d.push({tick:v,tickId:m,tickLabel:y,translationY:g}),""!==y&&null!=y&&h++}return{rawTicks:u,ticks:d,labelCount:h}}filterTicks(t,e){var i;const o=isNaN(this.tick.minSpacing)&&isNaN(null!==(i=this.tick.maxSpacing)&&void 0!==i?i:NaN)?2:Math.ceil(t.length/e);return t.filter((s,a)=>a%o==0)}createTicks(t,e,i){var n,o,s;return this.setTickCount(t,e,i),null!==(s=null===(o=(n=this.scale).ticks)||void 0===o?void 0:o.call(n))&&void 0!==s?s:[]}estimateTickCount({minSpacing:t,maxSpacing:e}){const i=this.calculateAvailableRange(),n=Math.max(Oo.defaultTickMinSpacing,i/Me.defaultMaxTickCount);isNaN(t)&&isNaN(e)?(t=n)>(e=i)&&(e=t):isNaN(t)?(t=n)>e&&(t=e):isNaN(e)&&t>(e=i)&&(e=t);const o=Math.max(1,Math.floor(i/t)),s=Math.min(o,Math.ceil(i/e));let a=Me.defaultTickCount;return a>o?a=o:a<s&&(a=s),{minTickCount:s,maxTickCount:o,defaultTickCount:a}}updateVisibility(){const{range:t}=this,e=Math.min(...t),i=Math.max(...t),n=l=>{const u=Math.floor(e),c=Math.ceil(i);u!==c?(l.translationY>=u-1&&l.translationY<u&&(l.translationY=u),l.translationY>c&&l.translationY<=c+1&&(l.translationY=c),l.visible=l.translationY>=u&&l.translationY<=c):l.visible=!1},{gridLineGroupSelection:o,tickLineGroupSelection:s,tickLabelGroupSelection:a}=this;o.each(n),s.each(n),a.each(n),this.tickLineGroup.visible=this.tick.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:t,parallelFlipRotation:e,regularFlipRotation:i,sideFlag:n}){var o;const s=this.isAnySeriesActive();null===(o=this.crossLines)||void 0===o||o.forEach(a=>{var l;a.sideFlag=-n,a.direction=t===-Math.PI/2?Y.X:Y.Y,a.label.parallel=null!==(l=a.label.parallel)&&void 0!==l?l:this.label.parallel,a.parallelFlipRotation=e,a.regularFlipRotation=i,a.update(s)})}updateTickLines(t){const{tick:e}=this;this.tickLineGroupSelection.each(i=>{i.strokeWidth=e.width,i.stroke=e.color,i.x1=t*e.size,i.x2=0,i.y1=0,i.y2=0})}calculateAvailableRange(){const{range:t}=this,e=Math.min(...t);return Math.max(...t)-e}calculateDomain(){const{direction:t,boundSeries:e,includeInvisibleDomains:i}=this;if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{const n=[],o=e.filter(a=>i||a.isEnabled());for(const a of o)n.push(a.getDomain(t));const s=(new Array).concat(...n);this.dataDomain=this.normaliseDataDomain(s)}}updatePosition({rotation:t,sideFlag:e}){const{crossLineGroup:i,axisGroup:n,gridGroup:o,translation:s,gridLineGroupSelection:a,gridPadding:l,gridLength:u}=this,c=Math.floor(s.x),d=Math.floor(s.y);i.translationX=c,i.translationY=d,i.rotation=t,n.translationX=c,n.translationY=d,n.rotation=t,o.translationX=c,o.translationY=d,o.rotation=t,a.each(h=>{h.x1=l,h.x2=-e*u+l,h.y1=0,h.y2=0})}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t){const i=this.gridLineGroupSelection.update(this.gridLength?t:[],s=>{const a=new Gt;a.tag=wu.GridLine,s.append(a)},s=>s.tickId),n=this.tickLineGroupSelection.update(t,s=>{const a=new Gt;a.tag=wu.TickLine,s.appendChild(a)},s=>s.tickId),o=this.tickLabelGroupSelection.update(t,s=>{const a=new le;a.tag=wu.TickLabel,s.appendChild(a)},s=>s.tickId);this.tickLineGroupSelection=n,this.tickLabelGroupSelection=o,this.gridLineGroupSelection=i}updateGridLines(t){const{gridStyle:e,tick:i,gridPadding:n,gridLength:o}=this;if(0===o||0===e.length)return;const s=e.length;this.gridLineGroupSelection.each((a,l,u)=>{const c=e[u%s];a.x1=n,a.x2=-t*o+n,a.y1=0,a.y2=0,a.stroke=c.stroke,a.strokeWidth=i.width,a.lineDash=c.lineDash,a.fill=void 0})}updateLabels({tickLabelGroupSelection:t,combinedRotation:e,textBaseline:i,textAlign:n,labelX:o}){const{label:s,label:{enabled:a}}=this;a&&t.each((l,u)=>{const{tickLabel:c}=u;l.fontStyle=s.fontStyle,l.fontWeight=s.fontWeight,l.fontSize=s.fontSize,l.fontFamily=s.fontFamily,l.fill=s.color,l.text=c,""!==l.text&&null!=l.text?(l.textBaseline=i,l.textAlign=n,l.x=o,l.rotationCenterX=o,l.rotation=e,l.visible=!0):l.visible=!1})}wrapLabels(t,e,i){const{label:{parallel:n,maxWidth:o,maxHeight:s}}=this,a=n?Math.round(this.calculateAvailableRange()/t.labelCount):this.maxThickness,l=o??a,u=n?this.maxThickness:Math.round(this.calculateAvailableRange()/t.labelCount),c=s??u;return t.ticks.forEach(d=>{const{tickLabel:h}=d,f=le.wrap(h,l,c,i,"hyphenate");d.tickLabel=f}),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateLine(){const{lineNode:t,range:e}=this;t.x1=0,t.x2=0,t.y1=e[0],t.y2=e[1],t.strokeWidth=this.line.width,t.stroke=this.line.color,t.visible=!0}updateTitle({anyTickVisible:t,sideFlag:e}){var i;const n=g=>g.defaultValue,{rotation:o,title:s,_titleCaption:a,lineNode:l,range:u,tickLineGroup:c,tickLabelGroup:d,moduleCtx:{callbackCache:h}}=this,{formatter:p=n}=null!==(i=this.title)&&void 0!==i?i:{};if(!s)return void(a.enabled=!1);a.enabled=s.enabled,a.fontFamily=s.fontFamily,a.fontSize=s.fontSize,a.fontStyle=s.fontStyle,a.fontWeight=s.fontWeight,a.color=s.color,a.wrapping=s.wrapping;let f=!1;const v=a.node;if(s.enabled&&l.visible){f=!0;const g=It(o),y=$e.PADDING,m=-1===e&&g>Math.PI&&g<2*Math.PI?-1:1;v.rotation=m*e*Math.PI/2,v.x=Math.floor(m*e*(u[0]+u[1])/2);let C=0;if(t){const w=de.computeBBox([c,d]),_=0===o?w.width:w.height;Math.abs(_)<1/0&&(C+=_)}v.y=-1===e?Math.floor(m*(-y-C)):Math.floor(-y-C),v.textBaseline=1===m?"bottom":"top",v.text=h.call(p,this.getTitleFormatterParams())}v.visible=f}formatTick(t,e){var i,n;const{label:o,labelFormatter:s,fractionDigits:a,moduleCtx:{callbackCache:l}}=this;if(o.formatter){const u=a>0?t:String(t);return null!==(i=l.call(o.formatter,{value:u,index:e,fractionDigits:a,formatter:s}))&&void 0!==i?i:u}return s&&null!==(n=l.call(s,t))&&void 0!==n?n:String(t)}formatDatum(t){return String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}clipTickLines(t,e,i,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new be(t,e,i,n))}clipGrid(t,e,i,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new be(t,e,i,n))}calculatePadding(t,e){return[Math.abs(.01*t),Math.abs(.01*t)]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce((i,n)=>{const o=n.getKeys(this.direction),s=n.getNames(this.direction);for(let a=0;a<o.length;a++)i.push({key:o[a],name:s[a]});return i},[]);return{direction:this.direction,boundSeries:e,defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}}normaliseDataDomain(t){return t}getLayoutState(){return Object.assign({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:this.scale instanceof Me,keys:()=>this.boundSeries.map(e=>e.getKeys(this.direction)).reduce((e,i)=>(e.push(...i),e),[]),scaleValueFormatter:e=>{var i,n,o;return null!==(o=null===(n=(i=this.scale).tickFormat)||void 0===n?void 0:n.call(i,{specifier:e}))&&void 0!==o?o:void 0},scaleBandwidth:()=>{var e;return null!==(e=this.scale.bandwidth)&&void 0!==e?e:0},scaleConvert:e=>this.scale.convert(e),scaleInvert:e=>{var i,n,o;return null!==(o=null===(n=(i=this.scale).invert)||void 0===n?void 0:n.call(i,e))&&void 0!==o?o:void 0}}}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);null==this.axisContext&&(this.axisContext=this.createAxisContext());const e=new t.instanceConstructor(Object.assign(Object.assign({},this.moduleCtx),{parent:this.axisContext}));this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}animateReadyUpdate(t){var e,i;if(!t.changed)return void this.resetSelectionNodes();const{gridLineGroupSelection:n,tickLineGroupSelection:o,tickLabelGroupSelection:s}=this,a=Object.keys(t.added).length,l=Object.keys(t.removed).length;if(l===t.tickCount)return void this.resetSelectionNodes();const u=null!==(i=null===(e=this.animationManager)||void 0===e?void 0:e.defaultOptions.duration)&&void 0!==i?i:1e3;let c=Math.floor(u/2);a>0&&l>0&&(c=Math.floor(u/3));const d={delay:l>0?c:0,duration:c},h=`${this.id}_${Math.random()}`;s.each((p,f)=>{this.animateSelectionNode(s,t,d,p,f,h)}),n.each((p,f)=>{this.animateSelectionNode(n,t,d,p,f,h)}),o.each((p,f)=>{this.animateSelectionNode(o,t,d,p,f,h)})}animateSelectionNode(t,e,i,n,o,s){const a=Math.round(o.translationY);let l={from:n.translationY,to:a},u={from:1,to:1};const{duration:c}=i;let{delay:d}=i;const h=o.tickLabel;e.added[h]?(l={from:a,to:a},u={from:0,to:1},d+=c):e.removed[h]&&(u={from:1,to:0},d=0),this.animationManager.animateManyWithThrottle(`${this.id}_ready-update_${n.id}`,[l,u],{disableInteractions:!1,delay:d,duration:c,ease:Nr,throttleId:this.id,throttleGroup:s,onUpdate([f,v]){n.translationY=f,n.opacity=v},onComplete(){t.cleanup()}})}resetSelectionNodes(){const{gridLineGroupSelection:t,tickLineGroupSelection:e,tickLabelGroupSelection:i}=this;t.cleanup(),e.cleanup(),i.cleanup();const n=o=>{o.translationY=Math.round(o.datum.translationY),o.opacity=1};t.each(n),e.each(n),i.each(n)}calculateUpdateDiff(t,e){var i;const n=new Set,o=new Set,s=Math.max(t.length,e.ticks.length);for(let u=0;u<s;u++){const c=t[u],d=null===(i=e.ticks[u])||void 0===i?void 0:i.tickId;c!==d&&(o.has(d)?o.delete(d):d&&n.add(d),n.has(c)?n.delete(c):c&&o.add(c))}const a={},l={};return n.forEach(u=>{a[u]=!0}),o.forEach(u=>{l[u]=!0}),{changed:n.size>0||o.size>0,tickCount:s,added:a,removed:l}}}Oo.defaultTickMinSpacing=50,Ch([R(Le)],Oo.prototype,"nice",void 0),Ch([R(ng)],Oo.prototype,"keys",void 0),Ch([R(yA)],Oo.prototype,"gridStyle",void 0);var Wn=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class mn{constructor(){this.enabled=!1,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.color=void 0,this.wrapping="always",this.formatter=void 0}}Wn([R(Le)],mn.prototype,"enabled",void 0),Wn([R(ue)],mn.prototype,"text",void 0),Wn([R(Jo)],mn.prototype,"fontStyle",void 0),Wn([R(er)],mn.prototype,"fontWeight",void 0),Wn([R(K(0))],mn.prototype,"fontSize",void 0),Wn([R(wt)],mn.prototype,"fontFamily",void 0),Wn([R(Ne)],mn.prototype,"color",void 0),Wn([R(Qd)],mn.prototype,"wrapping",void 0),Wn([R(je)],mn.prototype,"formatter",void 0);var Ca=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class xo extends Kd{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}}Ca([R(Le),te({redraw:W.MAJOR})],xo.prototype,"enabled",void 0),Ca([R(ci),te({redraw:W.MAJOR})],xo.prototype,"color",void 0),Ca([R(K()),te({redraw:W.MAJOR})],xo.prototype,"xOffset",void 0),Ca([R(K()),te({redraw:W.MAJOR})],xo.prototype,"yOffset",void 0),Ca([R(K(0)),te({redraw:W.MAJOR})],xo.prototype,"blur",void 0);class Su extends Me{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(t){return t}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:Me.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some(s=>!isFinite(s)))return[];this.refresh();const[i,n]=this.getDomain(),{interval:o}=this;if(o){const s=Math.abs(o);if(!this.isDenseInterval({start:i,stop:n,interval:s}))return vu(i,n,s)}return ph(i,n,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){var t,e;const i=null!==(t=this.tickCount)&&void 0!==t?t:Me.defaultTickCount;let[n,o]=this.domain;if(i<1)return void(this.niceDomain=[n,o]);if(1===i)return void(this.niceDomain=function KP(r,t){const e=Math.floor(Math.log10(t-r)),i=Math.pow(10,e);return Lg.map(n=>{const o=n*i,s=Math.floor(r/o)*o,a=Math.ceil(t/o)*o;return{error:1-(t-r)/(a-s),domain:[s,a]}}).sort((n,o)=>n.error-o.error)[0].domain}(n,o));let a=n,l=o;for(let u=0;u<4;u++){const c=null!==(e=this.interval)&&void 0!==e?e:ya(n,o,i,this.minTickCount,this.maxTickCount),[d,h]=this.domain;if(c>=1)n=Math.floor(d/c)*c,o=Math.ceil(h/c)*c;else{const p=1/c;n=Math.floor(d*p)/p,o=Math.ceil(h*p)/p}if(n===a&&o===l)break;a=n,l=o}this.niceDomain=[n,o]}tickFormat({ticks:t,specifier:e}){return function sA(r,t){const e=Hg(t??",f"),{precision:i}=e;(null==i||isNaN(i))&&("f"===e.type||"%"===e.type?e.precision=Math.max(...r.map(o=>{if("number"!=typeof o||0===o)return 0;const s=Math.floor(Math.log10(Math.abs(o))),l=o.toExponential((e.type?6:12)-1).replace(/\.?0+e/,"e"),u=l.indexOf(".");if(u<0)return s>=0?0:-s;const c=l.indexOf("e")-u;return Math.max(0,c-s-1)})):(!e.type||e.type in pi)&&(e.precision=Math.max(...r.map(o=>{if("number"!=typeof o)return 0;const s=o.toExponential((e.type?6:12)-1).replace(/\.?0+e/,"e");return s.substring(0,s.indexOf("e")).replace(".","").length}))));const n=Vg(e);return o=>n(Number(o))}(t??this.ticks(),e)}}function wh(r,t,e=1e-10){return Math.abs(r-t)<e}function Kg(r,t=2){const e=Math.floor(Math.log(Math.abs(r))/Math.LN10);return e>=0||!isFinite(e)?r.toFixed(t):r.toFixed(Math.abs(e)-1+t)}function $g(r,t,e){const i=Math.sqrt(Math.pow(r,2)+Math.pow(t,2)),{innerRadius:n,outerRadius:o}=e;if(i<Math.min(n,o)||i>Math.max(n,o))return!1;let s=Math.atan2(t,r);s<-Math.PI/2&&(s+=2*Math.PI);const{startAngle:a,endAngle:l}=e;return l===-Math.PI/2?s<a:a===3*Math.PI/2?s>l:s<=l&&s>=a}function Yg(r,t){const{startAngle:e,endAngle:i,innerRadius:n,outerRadius:o}=t,s={x:o*Math.cos(e),y:o*Math.sin(e)},a={x:o*Math.cos(i),y:o*Math.sin(i)},l=0===n?{x:0,y:0}:{x:n*Math.cos(e),y:n*Math.sin(e)},u=0===n?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)};return null!=fa(r.start.x,r.start.y,r.end.x,r.end.y,s.x,s.y,l.x,l.y)||null!=fa(r.start.x,r.start.y,r.end.x,r.end.y,a.x,a.y,u.x,u.y)||Dg(0,0,o,e,i,!0,r.start.x,r.start.y,r.end.x,r.end.y).length>0}var rr=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class jn extends vn{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0}computeBBox(){const t=this.outerRadius;return new be(this.centerX-t,this.centerY-t,2*t,2*t)}updatePath(){const t=this.path,e=this.angleOffset,i=this.startAngle+e,n=this.endAngle+e,o=Math.min(this.innerRadius,this.outerRadius),s=Math.max(this.innerRadius,this.outerRadius),a=wh(It(this.startAngle),It(this.endAngle)),l=this.centerX,u=this.centerY;t.clear(),a?(t.arc(l,u,s,i,n),o>0&&(t.moveTo(l+o*Math.cos(n),u+o*Math.sin(n)),t.arc(l,u,o,n,i,!0))):(t.moveTo(l+o*Math.cos(i),u+o*Math.sin(i)),t.arc(l,u,s,i,n),o>0?t.arc(l,u,o,n,i,!0):t.lineTo(l,u)),t.closePath(),this.dirtyPath=!1}isPointInPath(t,e){const{angleOffset:i}=this,n=this.startAngle+i,o=this.endAngle+i,s=Math.min(this.innerRadius,this.outerRadius),a=Math.max(this.innerRadius,this.outerRadius),l=this.transformPoint(t,e);return $g(l.x,l.y,{startAngle:n,endAngle:o,innerRadius:s,outerRadius:a})}}jn.className="Sector",rr([ke()],jn.prototype,"centerX",void 0),rr([ke()],jn.prototype,"centerY",void 0),rr([ke()],jn.prototype,"innerRadius",void 0),rr([ke()],jn.prototype,"outerRadius",void 0),rr([ke()],jn.prototype,"startAngle",void 0),rr([ke()],jn.prototype,"endAngle",void 0),rr([ke()],jn.prototype,"angleOffset",void 0);class Xg extends zi{constructor({moduleCtx:t,useLabelLayer:e=!1,pickModes:i=[ht.EXACT_SHAPE_MATCH]}){super({moduleCtx:t,useLabelLayer:e,pickModes:i,contentGroupVirtual:!1,directionKeys:{[Y.X]:["angleKey"],[Y.Y]:["radiusKey"]},directionNames:{[Y.X]:["angleName"],[Y.Y]:["radiusName"]}}),this.centerX=0,this.centerY=0,this.radius=0}getLabelData(){return[]}computeLabelsBBox(t,e){return null}}var ve=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Wr=function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})};class qg extends ua{constructor(t,e,i,n,o,s,a){super(o,s,a),this.angleKey=t,this.calloutLabelKey=e,this.sectorLabelKey=i,this.radiusKey=n}}class SA extends qg{constructor(){super(...arguments),this.type="nodeClick"}}class _A extends qg{constructor(){super(...arguments),this.type="nodeDoubleClick"}}var Cn=function(r){return r[r.Sector=0]="Sector",r[r.Callout=1]="Callout",r[r.Label=2]="Label",r}(Cn||{});class sr extends bt{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.formatter=void 0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}}ve([R(K(0))],sr.prototype,"offset",void 0),ve([R(K(0))],sr.prototype,"minAngle",void 0),ve([R(je)],sr.prototype,"formatter",void 0),ve([R(K(0))],sr.prototype,"minSpacing",void 0),ve([R(K(0))],sr.prototype,"maxCollisionOffset",void 0),ve([R(Le)],sr.prototype,"avoidCollisions",void 0);class _u extends bt{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5,this.formatter=void 0}}ve([R(K())],_u.prototype,"positionOffset",void 0),ve([R(K(0,1))],_u.prototype,"positionRatio",void 0),ve([R(je)],_u.prototype,"formatter",void 0);class Eu{constructor(){this.colors=void 0,this.length=10,this.strokeWidth=1}}ve([R(hT)],Eu.prototype,"colors",void 0),ve([R(K(0))],Eu.prototype,"length",void 0),ve([R(K(0))],Eu.prototype,"strokeWidth",void 0);class Zg extends Gn{constructor(){super(...arguments),this.renderer=void 0}}ve([R(je)],Zg.prototype,"renderer",void 0);class Qg extends $e{constructor(){super(...arguments),this.showInLegend=!1}}ve([R(Le)],Qg.prototype,"showInLegend",void 0);class Sh extends bt{constructor(){super(...arguments),this.text="",this.margin=2}}ve([R(wt)],Sh.prototype,"text",void 0),ve([R(K())],Sh.prototype,"margin",void 0);class _h{constructor(){this.fill="transparent",this.fillOpacity=1}}ve([R(ci)],_h.prototype,"fill",void 0),ve([R(xe(0,1))],_h.prototype,"fillOpacity",void 0);class EA extends mh{}class Fe extends Xg{constructor(t){var e,i,n;super({moduleCtx:t,useLabelLayer:!0}),this.radiusScale=new Su,this.groupSelection=Ge.select(this.contentGroup,de),this.highlightSelection=Ge.select(this.highlightGroup,de),this.nodeData=[],this.seriesItemEnabled=[],this.title=void 0,this.calloutLabel=new sr,this.sectorLabel=new _u,this.calloutLine=new Eu,this.tooltip=new Zg,this.angleKey="",this.angleName="",this.innerLabels=[],this.innerCircle=void 0,this.radiusKey=void 0,this.radiusName=void 0,this.radiusMin=void 0,this.radiusMax=void 0,this.calloutLabelKey=void 0,this.calloutLabelName=void 0,this.sectorLabelKey=void 0,this.sectorLabelName=void 0,this.legendItemKey=void 0,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.shadow=void 0,this.highlightStyle=new oh,this.surroundingRadius=void 0,this.angleScale=new Su,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(l=>l+Math.PI/2),this.backgroundGroup=this.rootGroup.appendChild(new de({name:`${this.id}-background`,layer:!0,zIndex:Ze.SERIES_BACKGROUND_ZINDEX}));const o=new de({name:"pieCalloutLabels"}),s=new de({name:"pieSectorLabels"}),a=new de({name:"innerLabels"});null===(e=this.labelGroup)||void 0===e||e.append(o),null===(i=this.labelGroup)||void 0===i||i.append(s),null===(n=this.labelGroup)||void 0===n||n.append(a),this.calloutLabelSelection=Ge.select(o,de),this.sectorLabelSelection=Ge.select(s,le),this.innerLabelsSelection=Ge.select(a,le),this.animationState=new EA("empty",{empty:{on:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()}}},ready:{on:{update:{target:"ready",action:()=>this.animateReadyUpdateReady()}}}})}set data(t){this._data=t,this.processSeriesItemEnabled()}get data(){return this._data}addChartEventListeners(){var t;null===(t=this.ctx.chartEventManager)||void 0===t||t.addListener("legend-item-click",e=>this.onLegendItemClick(e))}visibleChanged(){this.processSeriesItemEnabled()}processSeriesItemEnabled(){var t;const{data:e,visible:i}=this;this.seriesItemEnabled=null!==(t=e?.map(()=>i))&&void 0!==t?t:[]}getDomain(t){return t===Y.X?this.angleScale.domain:this.radiusScale.domain}processData(t){var e,i;return Wr(this,void 0,void 0,function*(){let{data:n=[]}=this;const{angleKey:o,radiusKey:s,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:u,seriesItemEnabled:c}=this;if(!o)return;const d=[];s&&(d.push(function jT(r,t,e={}){const{min:i=-1/0,max:n=1/0}=e,o=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(e[i[n]]=r[i[n]])}return e}(e,["min","max"]);return Object.assign({scopes:[r.id],type:"value",property:t,valueType:"range",validation:ih,processor:()=>s=>"number"!=typeof s||isNaN(s)?s:Math.min(Math.max(s,i),n)},o)}(this,s,{id:"radiusValue",min:null!==(e=this.radiusMin)&&void 0!==e?e:0,max:this.radiusMax}),pt(this,s,!0,{id:"radiusRaw"}),cg(this,{id:"radiusValue"},[0,1],null!==(i=this.radiusMin)&&void 0!==i?i:0,this.radiusMax)),d.push()),a&&d.push(pt(this,a,!1,{id:"calloutLabelValue"})),l&&d.push(pt(this,l,!1,{id:"sectorLabelValue"})),u&&d.push(pt(this,u,!1,{id:"legendItemValue"})),n=n.map((f,v)=>c[v]?f:Object.assign(Object.assign({},f),{[o]:0}));const{dataModel:h,processedData:p}=yield t.request(this.id,n,{props:[UT(this,o,!0,{id:"angleValue"}),pt(this,o,!0,{id:"angleRaw"}),cg(this,{id:"angleValue"},[0,1],0),...d]});this.dataModel=h,this.processedData=p})}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=this._createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}createNodeData(){return Wr(this,void 0,void 0,function*(){return this._createNodeData()})}getProcessedDataIndexes(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}_createNodeData(){const{id:t,processedData:e,dataModel:i,rotation:n,angleScale:o}=this;if(!e||!i||"ungrouped"!==e.type)return[];const{angleIdx:s,radiusIdx:a,calloutLabelIdx:l,sectorLabelIdx:u,legendItemIdx:c}=this.getProcessedDataIndexes(i);let d=0;const h=e.data.map((p,f)=>{var v;const{datum:g,values:y}=p,m=y[s],C=o.convert(d)+Wi(n);d=m;const w=o.convert(d)+Wi(n),_=Math.abs(w-C),b=C+_/2,O=y[s+1],x=a>=0&&null!==(v=y[a])&&void 0!==v?v:1,D=a>=0?y[a+1]:void 0,T=c>=0?y[c]:void 0,L=this.getLabels(g,b,_,!0,m,D,y[l],y[u],T),A=this.getSectorFormat(g,f,f,!1);return Object.assign({itemId:f,series:this,datum:g,index:f,angleValue:O,midAngle:b,midCos:Math.cos(b),midSin:Math.sin(b),startAngle:C,endAngle:w,sectorFormat:A,radius:x,radiusValue:D,legendItemValue:T},L)});return[{itemId:t,nodeData:h,labelData:h}]}getLabels(t,e,i,n,o,s,a,l,u){const{calloutLabel:c,sectorLabel:d,legendItemKey:h,ctx:{callbackCache:p}}=this,f=!n||c.enabled?this.calloutLabelKey:void 0,v=!n||d.enabled?this.sectorLabelKey:void 0;if(!f&&!v&&!h)return{};const g=this.getLabelFormatterParams(t,o,s,a,l);let y,m;return f&&(y=i>Wi(c.minAngle)?c.formatter?p.call(c.formatter,g):String(a):void 0),v&&(m=d.formatter?p.call(d.formatter,g):String(l)),Object.assign(Object.assign(Object.assign({},null!=y?{calloutLabel:Object.assign(Object.assign({},this.getTextAlignment(e)),{text:y,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})}:{}),null!=m?{sectorLabel:{text:m}}:{}),null!=h&&null!=u?{legendItem:{key:h,text:u}}:{})}getLabelFormatterParams(t,e,i,n,o){const{id:s,radiusKey:a,radiusName:l,angleKey:u,angleName:c,calloutLabelKey:d,calloutLabelName:h,sectorLabelKey:p,sectorLabelName:f}=this;return{datum:t,angleKey:u,angleValue:e,angleName:c,radiusKey:a,radiusValue:i,radiusName:l,calloutLabelKey:d,calloutLabelValue:n,calloutLabelName:h,sectorLabelKey:p,sectorLabelValue:o,sectorLabelName:f,seriesId:s}}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=function eT(r){return(r%=dn)<-Math.PI?r+=dn:r>=Math.PI&&(r-=dn),r}(t),n=-3*Math.PI/4,a=function CA(r,t){return r>=0?Math.floor(r%t):Math.floor(r%t+t)}(Math.floor((i-n)/(Math.PI/2)),e.length);return e[a]}getSectorFormat(t,e,i,n){var o,s,a,l,u,c,d,h;const{angleKey:p,radiusKey:f,fills:v,strokes:g,fillOpacity:y,formatter:m,id:C,ctx:{callbackCache:w,highlightManager:_}}=this,b=_?.getActiveHighlight(),O=n&&b?.series===this&&e===b.itemId,x=O?this.highlightStyle.item:null,D=null!==(o=x?.fill)&&void 0!==o?o:v[i%v.length],T=null!==(s=x?.fillOpacity)&&void 0!==s?s:y,L=null!==(a=x?.stroke)&&void 0!==a?a:g[i%g.length],A=null!==(l=x?.strokeWidth)&&void 0!==l?l:this.getStrokeWidth(this.strokeWidth);let N;return m&&(N=w.call(m,{datum:t,angleKey:p,radiusKey:f,fill:D,stroke:L,strokeWidth:A,highlighted:O,seriesId:C})),{fill:null!==(u=N?.fill)&&void 0!==u?u:D,fillOpacity:null!==(c=N?.fillOpacity)&&void 0!==c?c:T,stroke:null!==(d=N?.stroke)&&void 0!==d?d:L,strokeWidth:null!==(h=N?.strokeWidth)&&void 0!==h?h:A}}getInnerRadius(){const{radius:t,innerRadiusRatio:e,innerRadiusOffset:i}=this,n=t*(e??1)+(i||0);return n===t||n<0?0:n}getOuterRadius(){const{radius:t,outerRadiusRatio:e,outerRadiusOffset:i}=this,n=t*(e??1)+(i||0);return n<0?0:n}updateRadiusScale(){const t=this.getInnerRadius(),e=this.getOuterRadius();this.radiusScale.range=[t,e]}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);return 0===i?NaN:-i-(2+(null!==(e=null===(t=this.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update({seriesRect:t}){return Wr(this,void 0,void 0,function*(){const{title:e}=this;if(this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(),this.updateInnerCircleNodes(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){const i=this.getTitleTranslationY(),n=e.node.computeBBox();e.node.visible=e.enabled&&isFinite(i)&&!this.bboxIntersectsSurroundingSeries(n,0,i),e.node.translationY=isFinite(i)?i:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)})}updateTitleNodes(){var t,e;const{title:i,oldTitle:n}=this;n!==i&&(n&&(null===(t=this.labelGroup)||void 0===t||t.removeChild(n.node)),i&&(i.node.textBaseline="bottom",null===(e=this.labelGroup)||void 0===e||e.appendChild(i.node)),this.oldTitle=i)}updateInnerCircleNodes(){var t;const{innerCircle:e,oldInnerCircle:i,innerCircleNode:n}=this;if(i!==e){let o;n&&this.backgroundGroup.removeChild(n),e&&(o=new ch,o.fill=e.fill,o.fillOpacity=null!==(t=e.fillOpacity)&&void 0!==t?t:1,this.backgroundGroup.appendChild(o)),this.oldInnerCircle=e,this.innerCircleNode=o}}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=this.radiusScale.convert(t.radius);t.nodeMidPoint={x:t.midCos*Math.max(0,e/2),y:t.midSin*Math.max(0,e/2)}})}updateSelections(){return Wr(this,void 0,void 0,function*(){yield this.updateGroupSelection()})}updateGroupSelection(){return Wr(this,void 0,void 0,function*(){const{groupSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:n,innerLabelsSelection:o}=this,s=a=>a.update(this.nodeData,l=>{const u=new jn;u.tag=Cn.Sector,l.appendChild(u)});this.groupSelection=s(t),this.highlightSelection=s(e),i.update(this.nodeData,a=>{const l=new Gt;l.tag=Cn.Callout,l.pointerEvents=Zt.None,a.appendChild(l);const u=new le;u.tag=Cn.Label,u.pointerEvents=Zt.None,a.appendChild(u)}),n.update(this.nodeData,a=>{a.pointerEvents=Zt.None}),o.update(this.innerLabels,a=>{a.pointerEvents=Zt.None})})}updateNodes(t){var e;return Wr(this,void 0,void 0,function*(){const i=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),n=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=n,this.backgroundGroup.visible=n,this.contentGroup.visible=n,this.highlightGroup.visible=n&&i?.series===this,this.labelGroup&&(this.labelGroup.visible=n),this.contentGroup.opacity=this.getOpacity(),this.updateInnerCircle();const{radiusScale:o}=this,s=o.convert(0),a=(l,u,c,d)=>{const h=o.convert(u.radius),p=l.parent,f=p?.parent;d&&p&&f&&(f.removeChild(p),f.appendChild(p)),l.innerRadius=Math.max(0,s),l.outerRadius=Math.max(0,h),d&&(l.startAngle=u.startAngle,l.endAngle=u.endAngle);const v=this.getSectorFormat(u.datum,u.itemId,c,d);l.fill=v.fill,l.stroke=v.stroke,l.strokeWidth=v.strokeWidth,l.fillOpacity=v.fillOpacity,l.strokeOpacity=this.strokeOpacity,l.lineDash=this.lineDash,l.lineDashOffset=this.lineDashOffset,l.fillShadow=this.shadow,l.lineJoin="round",l.visible=this.seriesItemEnabled[c]};this.groupSelection.selectByTag(Cn.Sector).forEach((l,u)=>a(l,l.datum,u,!1)),this.highlightSelection.selectByTag(Cn.Sector).forEach((l,u)=>{const c=i?.series===this&&l.datum.itemId===i.itemId;c?a(l,l.datum,u,c):l.visible=!1}),this.animationState.transition("update"),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes()})}updateCalloutLineNodes(){var t;const{radiusScale:e,calloutLine:i}=this,n=i.length,o=i.strokeWidth,s=null!==(t=i.colors)&&void 0!==t?t:this.strokes,{offset:a}=this.calloutLabel;this.calloutLabelSelection.selectByTag(Cn.Callout).forEach((l,u)=>{const c=l.datum,d=e.convert(c.radius),h=Math.max(0,d),p=c.calloutLabel;if(p?.text&&!p.hidden&&0!==h){l.visible=!0,l.strokeWidth=o,l.stroke=s[u%s.length],l.fill=void 0;const f=c.midCos*h,v=c.midSin*h;let g=c.midCos*(h+n),y=c.midSin*(h+n);if((p.collisionTextAlign||0!==p.collisionOffsetY)&&null!=p.box){const C=p.box;let w=g,_=y;g<C.x?w=C.x:g>C.x+C.width&&(w=C.x+C.width),y<C.y?_=C.y:y>C.y+C.height&&(_=C.y+C.height);const b=w-g,O=_-y,x=Math.sqrt(Math.pow(b,2)+Math.pow(O,2)),D=x-a;D>0&&(g+=b*D/x,y+=O*D/x)}l.x1=f,l.y1=v,l.x2=g,l.y2=y}else l.visible=!1})}getLabelOverflow(t,e,i){const n=i.x-this.centerX,o=i.x+i.width-this.centerX;let u=1;e.x+1<n?u=(e.x+e.width-n)/e.width:e.x+e.width-1>o&&(u=(o-e.x)/e.width);const c=e.y+1<i.y-this.centerY||e.y+e.height-1>i.y+i.height-this.centerY;return{textLength:1===u?t.length:Math.floor(t.length*u)-1,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:n}=this;if(null==n)return!1;const o=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],s=Math.pow(n,2);return o.some(a=>Math.pow(a.x,2)+Math.pow(a.y,2)>s)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t,calloutLabel:e,calloutLine:i}=this,{offset:n,minSpacing:o}=e,s=t.convert(0),l=this.nodeData,u=this.nodeData.filter(C=>!(C=>{const w=C.calloutLabel,_=t.convert(C.radius),b=Math.max(0,_);return!w||0===b})(C));if(u.forEach(C=>{const w=C.calloutLabel;null!=w&&(w.hidden=!1,w.collisionTextAlign=void 0,w.collisionOffsetY=0)}),u.length<=1)return;const c=u.filter(C=>C.midCos<0).sort((C,w)=>C.midSin-w.midSin),d=u.filter(C=>C.midCos>=0).sort((C,w)=>C.midSin-w.midSin),h=u.filter(C=>{var w;return C.midSin<0&&"center"===(null===(w=C.calloutLabel)||void 0===w?void 0:w.textAlign)}).sort((C,w)=>C.midCos-w.midCos),p=u.filter(C=>{var w;return C.midSin>=0&&"center"===(null===(w=C.calloutLabel)||void 0===w?void 0:w.textAlign)}).sort((C,w)=>C.midCos-w.midCos),f=new le,v=C=>{var w;const _=C.calloutLabel;if(null==_)return new be(0,0,0,0);const b=t.convert(C.radius),x=Math.max(0,b)+i.length+n,D=C.midCos*x,T=C.midSin*x+_.collisionOffsetY;return f.text=_.text,f.x=D,f.y=T,f.setFont(this.calloutLabel),f.setAlign({textAlign:null!==(w=_.collisionTextAlign)&&void 0!==w?w:_.textAlign,textBaseline:_.textBaseline}),f.computeBBox()},g=(C,w,_)=>{const b=v(C).grow(o/2),O=v(w).grow(o/2);b.x<O.x+O.width&&b.x+b.width>O.x&&("to-top"===_?b.y<O.y+O.height:b.y+b.height>O.y)&&(w.calloutLabel.collisionOffsetY="to-top"===_?b.y-O.y-O.height:b.y+b.height-O.y)},y=C=>{const w=C.slice().sort((b,O)=>Math.abs(b.midSin)-Math.abs(O.midSin))[0],_=C.indexOf(w);for(let b=_-1;b>=0;b--)g(C[b+1],C[b],"to-top");for(let b=_+1;b<C.length;b++)g(C[b-1],C[b],"to-bottom")},m=C=>{const w=u.some(T=>0!==T.calloutLabel.collisionOffsetY),_=C.map(T=>v(T)),b=_.map(T=>T.clone().grow(o/2));let O=!1;for(let T=0;T<b.length&&!O;T++){const L=b[T];for(let A=T+1;A<C.length;A++)if(L.collidesBBox(b[A])){O=!0;break}}const x=l.map(T=>{const{startAngle:L,endAngle:A}=T,N=t.convert(T.radius),H=Math.max(0,N);return{startAngle:L,endAngle:A,innerRadius:s,outerRadius:H}}),D=_.some(T=>x.some(L=>function wA(r,t){const n={x:r.x,y:r.y+r.height},o={x:r.x+r.width,y:r.y+r.height};return Yg({start:{x:r.x,y:r.y},end:{x:r.x+r.width,y:r.y}},t)||Yg({start:n,end:o},t)}(T,L)));!O&&!w&&!D||C.filter(T=>"center"===T.calloutLabel.textAlign).forEach(T=>{T.calloutLabel.collisionTextAlign=T.midCos<0?"right":T.midCos>0?"left":"center"})};y(c),y(d),m(h),m(p)}updateCalloutLabelNodes(t){const{radiusScale:e,calloutLabel:i,calloutLine:n}=this,o=n.length,{offset:s,color:a}=i,l=new le;this.calloutLabelSelection.selectByTag(Cn.Label).forEach(u=>{var c;const{datum:d}=u,h=d.calloutLabel,p=e.convert(d.radius),f=Math.max(0,p);if(!h?.text||0===f||h.hidden)return void(u.visible=!1);const v=f+o+s,g=d.midCos*v,y=d.midSin*v+h.collisionOffsetY,m={textAlign:null!==(c=h.collisionTextAlign)&&void 0!==c?c:h.textAlign,textBaseline:h.textBaseline};l.text=h.text,l.x=g,l.y=y,l.setFont(this.calloutLabel),l.setAlign(m);const C=l.computeBBox();let w=h.text,_=!0;if(i.avoidCollisions){const{textLength:b,hasVerticalOverflow:O}=this.getLabelOverflow(h.text,C,t);w=h.text.length===b?h.text:`${h.text.substring(0,b)}\u2026`,_=!O}u.text=w,u.x=g,u.y=y,u.setFont(this.calloutLabel),u.setAlign(m),u.fill=a,u.visible=_})}computeLabelsBBox(t,e){var i;const{radiusScale:n,calloutLabel:o,calloutLine:s}=this,a=s.length,{offset:l,maxCollisionOffset:u,minSpacing:c}=o;if(!o.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(),this.computeCalloutLabelCollisionOffsets();const d=[],h=new le;let p;if(null!==(i=this.title)&&void 0!==i&&i.text&&this.title.enabled){const f=this.getTitleTranslationY();isFinite(f)&&(h.text=this.title.text,h.x=0,h.y=f,h.setFont(this.title),h.setAlign({textBaseline:"bottom",textAlign:"center"}),p=h.computeBBox(),d.push(p))}return this.nodeData.forEach(f=>{var v;const g=f.calloutLabel,y=n.convert(f.radius),m=Math.max(0,y);if(!g||0===m)return null;const C=m+a+l,w=f.midCos*C,_=f.midSin*C+g.collisionOffsetY;h.text=g.text,h.x=w,h.y=_,h.setFont(this.calloutLabel),h.setAlign({textAlign:null!==(v=g.collisionTextAlign)&&void 0!==v?v:g.textAlign,textBaseline:g.textBaseline});const b=h.computeBBox();if(g.box=b,Math.abs(g.collisionOffsetY)>u)g.hidden=!0;else{if(p){const O=e.y-this.centerY,x=new be(p.x-c,O,p.width+2*c,p.y+p.height+c-O);if(b.collidesBBox(x))return void(g.hidden=!0)}if(t.hideWhenNecessary){const{textLength:O,hasVerticalOverflow:x,hasSurroundingSeriesOverflow:D}=this.getLabelOverflow(g.text,b,e);if(x||g.text.length>2&&O<2||D)return void(g.hidden=!0)}g.hidden=!1,d.push(b)}}),0===d.length?null:be.merge(d)}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:n,fontWeight:o,fontFamily:s,positionOffset:a,positionRatio:l,color:u}=this.sectorLabel,c=e>0,d=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((h,p)=>{const f=p.sectorLabel,v=t.convert(p.radius),g=Math.max(0,v);let y=!1;if(f&&0!==g){const m=e*(1-l)+v*l+a;h.fill=u,h.fontStyle=n,h.fontWeight=o,h.fontSize=i,h.fontFamily=s,h.text=f.text,!c&&d?(h.x=0,h.y=0):(h.x=p.midCos*m,h.y=p.midSin*m),h.textAlign="center",h.textBaseline="middle";const w=h.computeBBox(),_=[[w.x,w.y],[w.x+w.width,w.y],[w.x+w.width,w.y+w.height],[w.x,w.y+w.height]],{startAngle:b,endAngle:O}=p,x={startAngle:b,endAngle:O,innerRadius:e,outerRadius:g};_.every(([D,T])=>$g(D,T,x))&&(y=!0)}h.visible=y})}updateInnerCircle(){const t=this.innerCircleNode;if(!t)return;const e=this.getInnerRadius();if(0===e)t.size=0;else{const i=Math.min(e,this.getOuterRadius());t.size=Math.ceil(2*i+1)}}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((d,h)=>{const{fontStyle:p,fontWeight:f,fontSize:v,fontFamily:g,color:y}=h;d.fontStyle=p,d.fontWeight=f,d.fontSize=v,d.fontFamily=g,d.text=h.text,d.x=0,d.y=0,d.fill=y,d.textAlign="center",d.textBaseline="alphabetic",t.push(d.computeBBox()),e.push(h.margin)});const i=d=>0===d?0:e[d],n=d=>d===e.length-1?0:e[d],o=t.reduce((d,h,p)=>d+h.height+i(p)+n(p),0),s=Math.max(...t.map(d=>d.width)),a=this.getInnerRadius(),u=Math.sqrt(Math.pow(s/2,2)+Math.pow(o/2,2))<=(a>0?a:this.getOuterRadius()),c=[];for(let d=0,h=-o/2;d<t.length;d++){const f=t[d].height+h+i(d);c.push(f),h=f+n(d)}this.innerLabelsSelection.each((d,h,p)=>{d.y=c[p],d.visible=u})}getNodeClickEvent(t,e){return new SA(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)}getNodeDoubleClickEvent(t,e){return new _A(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)}getTooltipHtml(t){var e;const{angleKey:i}=this;if(!i)return"";const{tooltip:n,angleName:o,radiusKey:s,radiusName:a,calloutLabelKey:l,sectorLabelKey:u,calloutLabelName:c,sectorLabelName:d,id:h}=this,{renderer:p}=n,{datum:f,angleValue:v,radiusValue:g,sectorFormat:{fill:y},calloutLabel:{text:m=""}={}}=t,C="number"==typeof v?Kg(v):String(v),w=null===(e=this.title)||void 0===e?void 0:e.text,b={title:w,backgroundColor:y,content:`${m?`${m}: `:""}${C}`};return p?St(p({datum:f,angleKey:i,angleValue:v,angleName:o,radiusKey:s,radiusValue:g,radiusName:a,calloutLabelKey:l,calloutLabelName:c,sectorLabelKey:u,sectorLabelName:d,title:w,color:y,seriesId:h}),b):St(b)}getLegendData(){var t,e,i;const{processedData:n,calloutLabelKey:o,legendItemKey:s,id:a,dataModel:l}=this;if(!l||!n||0===n.data.length)return[];if(!s&&!o)return[];const{angleIdx:u,radiusIdx:c,calloutLabelIdx:d,sectorLabelIdx:h,legendItemIdx:p}=this.getProcessedDataIndexes(l),f=(null===(t=this.title)||void 0===t?void 0:t.showInLegend)&&this.title.text,v=[];for(let g=0;g<n.data.length;g++){const{datum:y,values:m}=n.data[g],C=[];f&&C.push(f);const w=this.getLabels(y,2*Math.PI,2*Math.PI,!1,m[u],m[c],m[d],m[h],m[p]);if(s&&void 0!==w.legendItem?C.push(w.legendItem.text):o&&void 0!==(null===(e=w.calloutLabel)||void 0===e?void 0:e.text)&&C.push(null===(i=w.calloutLabel)||void 0===i?void 0:i.text),0===C.length)continue;const _=this.getSectorFormat(y,g,g,!1);v.push({legendType:"category",id:a,itemId:g,seriesId:a,enabled:this.seriesItemEnabled[g],label:{text:C.join(" - ")},marker:{fill:_.fill,stroke:_.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity}})}return v}onLegendItemClick(t){const{enabled:e,itemId:i,series:n}=t;n.id===this.id?this.toggleSeriesItem(i,e):"pie"===n.type&&this.toggleOtherSeriesItems(n,i,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e,i){var n,o;const{legendItemKey:s,dataModel:a}=this;if(!s||!a)return;const l=t.legendItemKey&&(null===(n=t.data)||void 0===n?void 0:n.find((c,d)=>d===e)[t.legendItemKey]);if(!l)return;const u=a.resolveProcessedDataIndexById(this,"legendItemValue").index;null===(o=this.processedData)||void 0===o||o.data.forEach(({values:c},d)=>{c[u]===l&&this.toggleSeriesItem(d,i)})}animateEmptyUpdateReady(){var t,e;const i=null!==(e=null===(t=this.ctx.animationManager)||void 0===t?void 0:t.defaultOptions.duration)&&void 0!==e?e:1e3,o=Math.PI/-2+Wi(this.rotation);this.groupSelection.selectByTag(Cn.Sector).forEach(a=>{var l;const u=a.datum;null===(l=this.ctx.animationManager)||void 0===l||l.animateMany(`${this.id}_empty-update-ready_${a.id}`,[{from:o,to:u.startAngle},{from:o,to:u.endAngle}],{duration:i,ease:Nr,onUpdate([c,d]){a.startAngle=c,a.endAngle=d}})});const s={from:0,to:1,delay:i,duration:200};this.calloutLabelSelection.each(a=>{var l;null===(l=this.ctx.animationManager)||void 0===l||l.animate(`${this.id}_empty-update-ready_${a.id}`,Object.assign(Object.assign({},s),{onUpdate(u){a.opacity=u}}))}),this.sectorLabelSelection.each(a=>{var l;null===(l=this.ctx.animationManager)||void 0===l||l.animate(`${this.id}_empty-update-ready_${a.id}`,Object.assign(Object.assign({},s),{onUpdate(u){a.opacity=u}}))}),this.innerLabelsSelection.each(a=>{var l;null===(l=this.ctx.animationManager)||void 0===l||l.animate(`${this.id}_empty-update-ready_${a.id}`,Object.assign(Object.assign({},s),{onUpdate(u){a.opacity=u}}))})}animateReadyUpdateReady(){this.groupSelection.selectByTag(Cn.Sector).forEach(t=>{const{datum:e}=t;t.startAngle=e.startAngle,t.endAngle=e.endAngle})}}Fe.className="PieSeries",Fe.type="pie",ve([R(wt)],Fe.prototype,"angleKey",void 0),ve([R(wt)],Fe.prototype,"angleName",void 0),ve([R(ue)],Fe.prototype,"radiusKey",void 0),ve([R(ue)],Fe.prototype,"radiusName",void 0),ve([R(xe(0))],Fe.prototype,"radiusMin",void 0),ve([R(xe(0))],Fe.prototype,"radiusMax",void 0),ve([R(ue)],Fe.prototype,"calloutLabelKey",void 0),ve([R(ue)],Fe.prototype,"calloutLabelName",void 0),ve([R(ue)],Fe.prototype,"sectorLabelKey",void 0),ve([R(ue)],Fe.prototype,"sectorLabelName",void 0),ve([R(ue)],Fe.prototype,"legendItemKey",void 0),ve([R(sa)],Fe.prototype,"fills",void 0),ve([R(sa)],Fe.prototype,"strokes",void 0),ve([R(K(0,1))],Fe.prototype,"fillOpacity",void 0),ve([R(K(0,1))],Fe.prototype,"strokeOpacity",void 0),ve([R(Mr)],Fe.prototype,"lineDash",void 0),ve([R(K(0))],Fe.prototype,"lineDashOffset",void 0),ve([R(je)],Fe.prototype,"formatter",void 0),ve([R(K(-360,360))],Fe.prototype,"rotation",void 0),ve([R(K())],Fe.prototype,"outerRadiusOffset",void 0),ve([R(K(0))],Fe.prototype,"outerRadiusRatio",void 0),ve([R(K())],Fe.prototype,"innerRadiusOffset",void 0),ve([R(K(0))],Fe.prototype,"innerRadiusRatio",void 0),ve([R(K(0))],Fe.prototype,"strokeWidth",void 0);const wa={constructors:{},constructedArrays:new WeakMap},Jg={constructors:{title:$e,subtitle:$e,footnote:$e,shadow:xo,innerCircle:_h,"axes[].title":mn,"series[].innerLabels[]":Sh},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function ey(){return{constructors:Object.assign(Object.assign({},Jg.constructors),wa.constructors),constructedArrays:wa.constructedArrays,allowedTypes:Object.assign({},Jg.allowedTypes)}}const RA={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},OA={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}},Eh=({yDirection:r,xEnd:t,yStart:e,yEnd:i})=>r?{x:t/2,y:e}:{x:t,y:isNaN(i)?e:(e+i)/2},ty=({yDirection:r,xStart:t,xEnd:e,yStart:i,yEnd:n})=>r?{x:t,y:isNaN(n)?i:(i+n)/2}:{x:e/2,y:i},iy=({yDirection:r,xEnd:t,yStart:e,yEnd:i})=>r?{x:t,y:isNaN(i)?e:(e+i)/2}:{x:t/2,y:isNaN(i)?e:i},ny=({yDirection:r,xStart:t,xEnd:e,yStart:i,yEnd:n})=>r?{x:e/2,y:isNaN(n)?i:n}:{x:t,y:isNaN(n)?i:(i+n)/2},oy=({yDirection:r,xStart:t,xEnd:e,yStart:i})=>r?{x:t/2,y:i}:{x:e,y:i},ry=({yDirection:r,xStart:t,yStart:e,yEnd:i})=>r?{x:t,y:isNaN(i)?e:i}:{x:t,y:e},sy=({yDirection:r,xEnd:t,yStart:e,yEnd:i})=>r?{x:t,y:e}:{x:t,y:isNaN(i)?e:i},ay=({yDirection:r,xStart:t,xEnd:e,yStart:i,yEnd:n})=>r?{x:e,y:isNaN(n)?i:n}:{x:t,y:isNaN(n)?i:n},PA={top:{c:Eh},bottom:{c:ny},left:{c:ty},right:{c:iy},topLeft:{c:oy},topRight:{c:sy},bottomLeft:{c:ry},bottomRight:{c:ay},inside:{c:({xEnd:r,yStart:t,yEnd:e})=>({x:r/2,y:isNaN(e)?t:(t+e)/2})},insideLeft:{c:ty},insideRight:{c:iy},insideTop:{c:Eh},insideBottom:{c:ny},insideTopLeft:{c:oy},insideBottomLeft:{c:ry},insideTopRight:{c:sy},insideBottomRight:{c:ay}};var ar=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class wn extends Oe{constructor(){super(),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new be(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;if(this.dirty===W.NONE&&!n)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:s,y1:a,x2:l,y2:u}=this;s=this.align(s),a=this.align(a),l=this.align(l),u=this.align(u);const{fill:c,opacity:d,isRange:h}=this;if(h&&c){const{fillOpacity:C}=this;i.fillStyle=c,i.globalAlpha=d*C,i.beginPath(),i.moveTo(s,a),i.lineTo(l,a),i.lineTo(l,u),i.lineTo(s,u),i.closePath(),i.fill()}const{stroke:f,strokeWidth:v,startLine:g,endLine:y}=this;if((g||y)&&f&&v){const{strokeOpacity:C,lineDash:w,lineDashOffset:_,lineCap:b,lineJoin:O}=this;i.strokeStyle=f,i.globalAlpha=d*C,i.lineWidth=v,w&&i.setLineDash(w),_&&(i.lineDashOffset=_),b&&(i.lineCap=b),O&&(i.lineJoin=O),i.beginPath(),g&&(i.moveTo(s,a),i.lineTo(l,a)),y&&(i.moveTo(l,u),i.lineTo(s,u)),i.stroke()}null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}wn.className="Range",wn.defaultStyles=Object.assign(Object.assign({},Oe.defaultStyles),{strokeWidth:1}),ar([te({redraw:W.MINOR})],wn.prototype,"x1",void 0),ar([te({redraw:W.MINOR})],wn.prototype,"y1",void 0),ar([te({redraw:W.MINOR})],wn.prototype,"x2",void 0),ar([te({redraw:W.MINOR})],wn.prototype,"y2",void 0),ar([te({redraw:W.MINOR})],wn.prototype,"startLine",void 0),ar([te({redraw:W.MINOR})],wn.prototype,"endLine",void 0),ar([te({redraw:W.MINOR})],wn.prototype,"isRange",void 0);var et=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};const AA=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],LA=re((r,t)=>We(r,t,e=>AA.includes(e)),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),MA=re((r,t)=>We(r,t,e=>"range"===e||"line"===e),"expecting a crossLine type keyword such as 'range' or 'line'");class Mi{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}}et([R(pn)],Mi.prototype,"enabled",void 0),et([R(ue)],Mi.prototype,"text",void 0),et([R(Jo)],Mi.prototype,"fontStyle",void 0),et([R(er)],Mi.prototype,"fontWeight",void 0),et([R(K(0))],Mi.prototype,"fontSize",void 0),et([R(wt)],Mi.prototype,"fontFamily",void 0),et([R(K(0))],Mi.prototype,"padding",void 0),et([R(Ne)],Mi.prototype,"color",void 0),et([R(LA)],Mi.prototype,"position",void 0),et([R(xe(-360,360))],Mi.prototype,"rotation",void 0),et([R(pn)],Mi.prototype,"parallel",void 0);class Rt{constructor(){this.id=mo(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new Mi,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=Y.X,this.group=new de({name:`${this.id}`,layer:!0,zIndex:Rt.LINE_LAYER_ZINDEX}),this.crossLineRange=new wn,this.crossLineLabel=new le,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:t,crossLineRange:e,crossLineLabel:i}=this;t.append([e,i]),e.pointerEvents=Zt.None}update(t){this.enabled&&(this.group.visible=t,t)&&(this.createNodeData()?(this.updateNodes(),this.group.zIndex=this.getZIndex(this.isRange)):this.group.visible=!1)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(){var t,e;const{scale:i,gridLength:n,sideFlag:o,direction:s,label:{position:a="top"},clippedRange:l,strokeWidth:u=0}=this;if(!i)return!1;const c=null!==(t=i.bandwidth)&&void 0!==t?t:0,d=C=>Math.max(Math.min(...l),Math.min(Math.max(...l),C)),[h,p]=[0,o*n];let[f,v]=this.getRange(),[g,y]=[Number(i.convert(f,{strict:!1})),i.convert(v,{strict:!1})+c];g=d(g),y=d(y),[f,v]=[Number(i.convert(f)),i.convert(v)+c];const m=!isNaN(g)&&!isNaN(y)&&(f===g||v===y||g!==y)&&Math.abs(y-g)>0;if(m&&g!==Math.min(g,y)&&([g,y]=[Math.min(g,y),Math.max(g,y)],[f,v]=[v,f]),this.isRange=m,this.startLine=!isNaN(f)&&u>0&&f===g,this.endLine=!isNaN(v)&&u>0&&v===y,!m&&!this.startLine&&!this.endLine)return!1;if(this.data=[g,y],this.label.enabled){const C=s===Y.Y,{c:w=Eh}=null!==(e=PA[a])&&void 0!==e?e:{},{x:_,y:b}=w({yDirection:C,xStart:h,xEnd:p,yStart:g,yEnd:y});this.labelPoint={x:_,y:b}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:n,data:o,startLine:s,endLine:a,isRange:l,fill:u,fillOpacity:c,stroke:d,strokeWidth:h,lineDash:p}=this;e.x1=0,e.x2=i*n,e.y1=o[0],e.y2=o[1],e.startLine=s,e.endLine=a,e.isRange=l,e.fill=u,e.fillOpacity=c??1,e.stroke=d,e.strokeWidth=h??1,e.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,e.lineDash=p}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:n,rotation:o,position:s="top",padding:a=0},direction:l,parallelFlipRotation:u,regularFlipRotation:c}=this;if(void 0===e||void 0===i)return;const{defaultRotation:d,configuredRotation:h}=gh({rotation:o,parallel:n,regularFlipRotation:c,parallelFlipRotation:u});t.rotation=d+h,t.textBaseline="middle",t.textAlign="center";const p=this.computeLabelBBox();if(!p)return;const f=l===Y.Y,{xTranslation:v,yTranslation:g}=function xA({yDirection:r,padding:t=0,position:e="top",bbox:i}){const n=r?RA:OA,{xTranslationDirection:o,yTranslationDirection:s}=n[e];return{xTranslation:o*(t+(r?i.width:i.height)/2),yTranslation:s*(t+(r?i.height:i.width)/2)}}({yDirection:f,padding:a,position:s,bbox:p});t.translationX=e+v,t.translationY=i+g}getZIndex(t=!1){return t?Rt.RANGE_LAYER_ZINDEX:Rt.LINE_LAYER_ZINDEX}getRange(){const{value:t,range:e,scale:i}=this,n=i instanceof Me;let[o,s]=e??[t,void 0];return!n&&void 0===s&&(s=o),o=null!=ql(o,n)?o:void 0,s=null!=ql(s,n)?s:void 0,n&&o===s&&(s=void 0),void 0===o&&void 0!==s&&(o=s,s=void 0),[o,s]}computeLabelBBox(){return this.crossLineLabel.computeTransformedBBox()}calculatePadding(t){var e,i,n,o,s,a,l,u;const{isRange:c,startLine:d,endLine:h,direction:p,label:{padding:f=0,position:v="top"}}=this;if(!c&&!d&&!h)return;const g=this.computeLabelBBox(),y=g?.x,m=g?.y;if(!g||null==y||null==m)return;const C=function DA({yDirection:r,bbox:t,padding:e=0,position:i="top"}){const n={};return i.startsWith("inside")||("top"!==i||r?"bottom"!==i||r?"left"===i&&r?n.left=e+t.width:"right"===i&&r&&(n.right=e+t.width):n.bottom=e+t.height:n.top=e+t.height),n}({yDirection:p===Y.Y,padding:f,position:v,bbox:g});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(i=C.left)&&void 0!==i?i:0),t.right=Math.max(null!==(n=t.right)&&void 0!==n?n:0,null!==(o=C.right)&&void 0!==o?o:0),t.top=Math.max(null!==(s=t.top)&&void 0!==s?s:0,null!==(a=C.top)&&void 0!==a?a:0),t.bottom=Math.max(null!==(l=t.bottom)&&void 0!==l?l:0,null!==(u=C.bottom)&&void 0!==u?u:0)}}Rt.LINE_LAYER_ZINDEX=Ze.SERIES_CROSSLINE_LINE_ZINDEX,Rt.RANGE_LAYER_ZINDEX=Ze.SERIES_CROSSLINE_RANGE_ZINDEX,Rt.className="CrossLine",et([R(pn)],Rt.prototype,"enabled",void 0),et([R(MA)],Rt.prototype,"type",void 0),et([R(qd(2))],Rt.prototype,"range",void 0),et([R(Ne)],Rt.prototype,"fill",void 0),et([R(xe(0,1))],Rt.prototype,"fillOpacity",void 0),et([R(Ne)],Rt.prototype,"stroke",void 0),et([R(xe())],Rt.prototype,"strokeWidth",void 0),et([R(xe(0,1))],Rt.prototype,"strokeOpacity",void 0),et([R(Mr)],Rt.prototype,"lineDash",void 0);var ly=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class jr extends Oo{constructor(){super(...arguments),this.thickness=0,this.position="left"}get direction(){return["top","bottom"].includes(this.position)?Y.X:Y.Y}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(t){return this.updateDirection(),super.update(t)}createAxisContext(){return Object.assign(Object.assign({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(t){!function bA(r,t){var e;null===(e=wa.constructedArrays)||void 0===e||e.set(r,t)}(t,Rt)}}ly([R(K(0))],jr.prototype,"thickness",void 0),ly([R(rg)],jr.prototype,"position",void 0);class Un extends jr{constructor(t){super(t,new pu),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){var e,i;const n={};for(const o of t)null!==(e=n[i=String(o)])&&void 0!==e||(n[i]=o);return Object.values(n)}calculateDomain(){if(!this._paddingOverrideEnabled){const{boundSeries:t}=this,e=t.map(i=>{var n;return null===(n=i.getBandScalePadding)||void 0===n?void 0:n.call(i)}).filter(i=>null!=i);e.length>0&&(this.scale.paddingInner=Math.min(...e.map(i=>i.inner)),this.scale.paddingOuter=Math.max(...e.map(i=>i.outer)))}return super.calculateDomain()}}Un.className="CategoryAxis",Un.type="category",function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);n>3&&o&&Object.defineProperty(t,e,o)}([R(K(0,1))],Un.prototype,"groupPaddingInner",void 0);class uy{constructor(t="",e,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}}function GA(r,t,e){const n=e/(t.number-r.number);t.change-=n,t.shift+=e,r.change+=n,t.prelim+=e,t.mod+=e}function kA(r,t,e){return t.getSiblings().indexOf(r.ancestor)>=0?r.ancestor:e}function cy(r,t){const e=r.children;if(e.length){let i=e[0];e.forEach(s=>{cy(s,t),i=function VA(r,t,e){const i=r.getLeftSibling();if(i){let n=r,o=r,s=i,a=o.getLeftmostSibling(),l=o.mod,u=n.mod,c=s.mod,d=a.mod;for(;s.nextRight()&&o.nextLeft();){s=s.nextRight(),o=o.nextLeft(),a=a.nextLeft(),n=n.nextRight(),n.ancestor=r;const h=s.prelim+c-(o.prelim+l)+e;h>0&&(GA(kA(s,r,t),r,h),l+=h,u+=h),c+=s.mod,l+=o.mod,d+=a.mod,u+=n.mod}s.nextRight()&&!n.nextRight()?(n.thread=s.nextRight(),n.mod+=c-u):(o.nextLeft()&&!a.nextLeft()&&(a.thread=o.nextLeft(),a.mod+=l-d),t=r)}return t}(s,i,t)}),function HA(r){const t=r.children;if(t){let e=0,i=0;for(let n=t.length-1;n>=0;n--){const o=t[n];o.prelim+=e,o.mod+=e,i+=o.change,e+=o.shift+i}}}(r);const n=(e[0].prelim+e[e.length-1].prelim)/2,o=r.getLeftSibling();o?(r.prelim=o.prelim+t,r.mod=r.prelim-n):r.prelim=n}else{const i=r.getLeftSibling();r.prelim=i?i.prelim+t:0}}class dy{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:n}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),n>this.bottom&&(this.bottom=n),n<this.top&&(this.top=n)}}function hy(r,t,e){r.x=r.prelim+t,r.y=r.depth,e.update(r),r.children.forEach(i=>hy(i,t+r.mod,e))}function py(r){const t=r.children;let e=0;t.forEach(i=>{py(i),i.children.length?e+=i.leafCount:e++}),r.leafCount=e,t.length?(r.subtreeLeft=t[0].subtreeLeft,r.subtreeRight=t[r.children.length-1].subtreeRight,r.x=(r.subtreeLeft+r.subtreeRight)/2):(r.subtreeLeft=r.x,r.subtreeRight=r.x)}function BA(r){const t=new WA;return cy(r,1),hy(r,-r.prelim,t),py(r),t}class WA{constructor(){this.dimensions=new dy,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,e=>({x:e.x,y:e.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,i=0,n=0,o=!1){const s=this.leafCount-1,a=this.depth,l=this.dimensions;let u=1,c=1;t>0&&s&&(u=t/s/((l.right-l.left)/s),o&&(u=-u)),e>0&&a&&(c=e/a/((l.bottom-l.top)/a));const d=new dy;this.nodes.forEach(f=>{f.screenX=f.x*u,f.screenY=f.y*c,d.update(f,v=>({x:v.screenX,y:v.screenY}))});const h=-d.left,p=-d.top;this.nodes.forEach(f=>{f.screenX+=h+i,f.screenY+=p+n})}}var fy=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class vy extends Je{constructor(){super(...arguments),this.grid=!1}}fy([R(Le)],vy.prototype,"grid",void 0);class lr extends jr{constructor(t){super(t,new pu),this.tickScale=new pu,this.translation={x:0,y:0},this.line=new Cu,this.label=new vy,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:n,tickScale:o,scale:s}=this;s.paddingOuter=.1,s.paddingInner=2*s.paddingOuter,this.range=s.range.slice(),this.refreshScale(),o.paddingInner=1,o.paddingOuter=0,this.gridLineSelection=Ge.select(n,Gt),this.axisLineSelection=Ge.select(e,Gt),this.separatorSelection=Ge.select(e,Gt),this.labelSelection=Ge.select(i,le)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,n=(t[1]-t[0])/(e[1]-e[0]),s=t[0]-n*e[0];this.tickScale.range=i.range=[s,s+n],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,n=this.tickTreeLayout,o=this.lineHeight;n&&n.resize(Math.abs(i[1]-i[0]),n.depth*o,(Math.min(i[0],i[1])||0)+(null!==(t=e.bandwidth)&&void 0!==t?t:0)/2,-n.depth*o,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}set gridLength(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=t}get gridLength(){return this._gridLength}calculateDomain(){var t;const{direction:e,boundSeries:i}=this,n=[];let o;i.filter(l=>l.visible).forEach(l=>{if(e===Y.X)if(void 0===o){const u=l.getDomain(e);n.push(u),o="number"==typeof u[0]}else o&&n.push(l.getDomain(e));else n.push(l.getDomain(e))});const s=(new Array).concat(...n),a=null!==(t=Bn(s))&&void 0!==t?t:s;this.dataDomain=this.normaliseDataDomain(a),this.scale.domain=this.dataDomain}normaliseDataDomain(t){const e=t.filter((o,s,a)=>a.indexOf(o)===s),i=function IA(r,t=!0){const e=new uy;let i=0;return t&&r.forEach(n=>i=Math.max(i,n.labels.length)),r.forEach(n=>{if(t)for(;n.labels.length<i;)n.labels.unshift("");!function NA(r,t){const e=t.labels.slice().reverse(),i=e.length-1;e.forEach((n,o)=>{const s=r.children,a=s.find(u=>u.label===n),l=o!==i;if(a&&l)r=a;else{const u=new uy(n,r);u.number=s.length,s.push(u),l&&(r=u)}})}(e,n)}),e}(e);this.tickTreeLayout=BA(i);const n=e.slice();return n.push(""),this.tickScale.domain=n,this.resizeTickTree(),e}update(t){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:e,label:i,label:{parallel:n},moduleCtx:{callbackCache:o},tickScale:s,range:a,title:l,title:{formatter:u=($=>$.defaultValue)}={},_titleCaption:c}=this,d=e.range[0],h=e.range[1],f=Math.abs(h-d)/e.domain.length||0,v=Wi(this.rotation),g=Math.abs(Math.cos(v))<1e-8,y=i.getSideFlag();this.updatePosition({rotation:v,sideFlag:y}),c.node.visible=!1;const m=this.lineHeight,C=this.tickTreeLayout,w=e.ticks(),_=C?C.nodes:[],b=!!C&&C.depth>1,O=s.ticks(),{defaultRotation:x,configuredRotation:D,parallelFlipFlag:T}=gh({rotation:i.rotation,parallel:n,regularFlipRotation:It(v-Math.PI/2),parallelFlipRotation:It(v)}),L=this.gridLineSelection.update(this.gridLength?O:[]),A=this.labelSelection.update(_),N=i.formatter,H=new Map;let j=0;A.each(($,ae,Ee)=>{var Ie;$.fontStyle=i.fontStyle,$.fontWeight=i.fontWeight,$.fontSize=i.fontSize,$.fontFamily=i.fontFamily,$.fill=i.color,$.textBaseline=-1===T?"bottom":"hanging",$.textAlign="center",$.translationX=ae.screenY-.25*i.fontSize,$.translationY=ae.screenX,0===Ee?l?.enabled&&w.length>0?($.visible=!0,$.text=o.call(u,this.getTitleFormatterParams()),$.fontSize=l.fontSize,$.fontStyle=l.fontStyle,$.fontWeight=l.fontWeight,$.fontFamily=l.fontFamily,$.textBaseline="hanging"):$.visible=!1:N?($.text=null!==(Ie=o.call(N,{value:String(ae.label),index:Ee}))&&void 0!==Ie?Ie:String(ae.label),$.visible=ae.screenX>=a[0]&&ae.screenX<=a[1]):($.text=String(ae.label),$.visible=ae.screenX>=a[0]&&ae.screenX<=a[1]);const nt=$.computeBBox();H.set($.id,nt),nt.width>j&&(j=nt.width)});const z=y*i.padding,B=this.label.grid,G=[];A.each(($,ae,Ee)=>{if($.x=z,$.rotationCenterX=z,ae.children.length){$.translationX-=j-m+this.label.padding;const Ie=ae.leafCount*f,nt=H.get($.id);nt&&nt.width>Ie?$.visible=!1:$.rotation=g?x:-Math.PI/2}else{$.rotation=D,$.textAlign="end",$.textBaseline="middle";const Ie=H.get($.id);Ie&&Ie.height>f&&($.visible=!1)}if(ae.parent&&b){const Ie=ae.children.length?ae.screenX-ae.leafCount*f/2:ae.screenX-f/2;if(ae.children.length){const nt=-j-2*this.label.padding+ae.screenY;G.push({y:Ie,x1:nt+m,x2:nt,toString:()=>String(Ee)})}else(ae.number!==ae.children.length-1||B)&&G.push({y:Ie,x1:0,x2:-j-2*this.label.padding,toString:()=>String(Ee)})}});let Z=0;G.forEach($=>Z=Math.min(Z,$.x2)),G.push({y:Math.max(d,h),x1:0,x2:Z,toString:()=>String(G.length)});this.separatorSelection.update(G).each(($,ae)=>{$.x1=ae.x1,$.x2=ae.x2,$.y1=ae.y,$.y2=ae.y,$.visible=ae.y>=a[0]-1e-7&&ae.y<=a[1]+1e-7,$.stroke=this.tick.color,$.fill=void 0,$.strokeWidth=1}),this.gridLineSelection=L,this.labelSelection=A;const ye=C?C.depth+1:1,me=[];for(let $=0;$<ye;$++)me.push($);if(this.axisLineSelection.update(me).each(($,ae,Ee)=>{const Ie=Ee>0?-j-2*this.label.padding-(Ee-1)*m:0;$.x1=Ie,$.x2=Ie,$.y1=a[0],$.y2=a[1],$.strokeWidth=this.line.width,$.stroke=this.line.color,$.visible=w.length>0&&(0===Ee||B&&b)}),this.gridLength){const $=this.gridStyle,ae=$.length;L.each((Ee,Ie,nt)=>{const bn=Math.round(s.convert(Ie));Ee.x1=0,Ee.x2=-y*this.gridLength,Ee.y1=bn,Ee.y2=bn,Ee.visible=bn>=a[0]&&bn<=a[1];const Jt=$[nt%ae];Ee.stroke=Jt.stroke,Ee.strokeWidth=this.tick.width,Ee.lineDash=Jt.lineDash,Ee.fill=void 0})}return t}}lr.className="GroupedCategoryAxis",lr.type="groupedCategory",fy([R(Ne)],lr.prototype,"labelColor",void 0);const UA=["top","right","bottom","left"];let gy=(()=>{class r extends hi{constructor(e=window.document,i,n){super(e,i,n),this.paired=!0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){const e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})}(this,void 0,void 0,function*(){const i=yield e.performLayout.call(this),{seriesRect:n,visibility:o,clipSeries:s}=this.updateAxes(i);this.seriesRoot.visible=o.series,this.seriesRect=n,this.seriesRoot.translationX=Math.floor(n.x),this.seriesRoot.translationY=Math.floor(n.y);const{seriesRoot:a,seriesAreaPadding:l}=this,u=n.clone().grow({top:l.top,right:l.right,bottom:l.bottom,left:l.left}),d=u.clone().grow(20);return this.hoverRect=d,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:u,hoverRect:d,visible:o.series},axes:this.axes.map(h=>Object.assign({id:h.id},h.getLayoutState()))}),s?a.setClipRectInGroupCoordinateSpace(n):a.setClipRectInGroupCoordinateSpace(),i})}updateAxes(e){var i;const n=Object.assign({},this._lastAxisWidths),o=Object.assign({},this._lastVisibility),s=new Set(this._axes.map(v=>v.position));for(const v of Object.keys(n))s.has(v)||delete n[v];const a=(v,g)=>!Object.keys(v).some(y=>null==n[y])&&o.crossLines===g.crossLines&&o.series===g.series&&Object.entries(n).every(([y,m])=>{const C=v[y];return null==m&&null==C||m===C}),l=v=>Object.entries(v).reduce((g,[y,m])=>(m&&Math.abs(m)===1/0&&(m=0),g[y]=null!=m?Math.ceil(m):m,g),{});let u={},c={},d=!1,h=null===(i=this.seriesRect)||void 0===i?void 0:i.clone(),p=0;do{Object.assign(n,u),Object.assign(o,c);const v=this.updateAxesPass(n,e.clone(),h);if(u=l(v.axisWidths),c=v.visibility,d=v.clipSeries,h=v.seriesRect,p++>10){ee.warn("unable to find stable axis layout.");break}}while(!a(u,c));return this.axes.forEach(v=>{if(v.setCrossLinesVisible(o.crossLines),h)switch(v.clipGrid(h.x,h.y,h.width+5,h.height+5),v.position){case"left":case"right":v.clipTickLines(e.x,h.y,e.width+5,h.height+5);break;case"top":case"bottom":v.clipTickLines(h.x,e.y,h.width+5,e.height+5)}}),this._lastAxisWidths=n,this._lastVisibility=o,{seriesRect:h,visibility:o,clipSeries:d}}updateAxesPass(e,i,n){const{axes:o}=this,s={},a={},l={series:!0,crossLines:!0};let u=!1;const c={},d=this.applySeriesPadding(i),h=n?this.buildCrossLinePadding(e):{},p=this.buildAxisBound(d,e,h,l),f=this.buildSeriesRect(p,e);return o.forEach(v=>{var g,y;const{position:m="left"}=v,{clipSeries:C,axisThickness:w,axisOffset:_}=this.calculateAxisDimensions({axis:v,seriesRect:f,paddedBounds:d,axisWidths:e,newAxisWidths:a,primaryTickCounts:c,clipSeries:u,addInterAxisPadding:(null!==(g=s[m])&&void 0!==g?g:0)>0});s[m]=(null!==(y=s[m])&&void 0!==y?y:0)+1,u=u||C,this.positionAxis({axis:v,axisBound:p,axisOffset:_,axisThickness:w,axisWidths:e,primaryTickCounts:c,seriesRect:f})}),{clipSeries:u,seriesRect:f,axisWidths:a,visibility:l}}buildCrossLinePadding(e){var i;const n={};this.axes.forEach(o=>{o.crossLines&&o.crossLines.forEach(s=>{s.calculatePadding(n)})});for(const[o,s=0]of Object.entries(n))n[o]=Math.max(s-(null!==(i=e[o])&&void 0!==i?i:0),0);return n}applySeriesPadding(e){const i=e.clone(),n=this.axes.slice().reverse();return UA.forEach(o=>{const s=this.seriesAreaPadding[o],a=n.find(l=>l.position===o);a?a.seriesAreaPadding=s:i.shrink(s,o)}),i}buildAxisBound(e,i,n,o){var s,a,l,u;const c=e.clone(),{top:d=0,right:h=0,bottom:p=0,left:f=0}=n,v=f+h,g=d+p,y=(null!==(s=i.left)&&void 0!==s?s:0)+(null!==(a=i.right)&&void 0!==a?a:0)+v,m=(null!==(l=i.top)&&void 0!==l?l:0)+(null!==(u=i.bottom)&&void 0!==u?u:0)+g;return c.width<=y||c.height<=m?(o.crossLines=!1,o.series=!1,c):(c.x+=f,c.y+=d,c.width-=v,c.height-=g,c)}buildSeriesRect(e,i){const n=e.clone(),{top:o,bottom:s,left:a,right:l}=i;return n.x+=a??0,n.y+=o??0,n.width-=(a??0)+(l??0),n.height-=(o??0)+(s??0),n.width=Math.max(0,n.width),n.height=Math.max(0,n.height),n}clampToOutsideSeriesRect(e,i,n,o){const{x:s,y:a,width:l,height:u}=e;return(1===o?Math.min:Math.max)(i,[s,a,s+l,a+u][("x"===n?0:1)+(1===o?0:2)])}calculateAxisDimensions(e){var i,n,o,s,a;const{axis:l,seriesRect:u,paddedBounds:c,axisWidths:d,newAxisWidths:h,primaryTickCounts:p,addInterAxisPadding:f}=e;let{clipSeries:v}=e;const{position:g="left",direction:y}=l,C=null!==(i=h[g])&&void 0!==i?i:0;switch(g){case"top":case"bottom":l.range=[0,u.width],l.gridLength=u.height;break;case"right":case"left":l.range=(L=l)instanceof Un||L instanceof lr?[0,u.height]:[u.height,0],l.gridLength=u.width}var L;const w=this.zoomManager.getAxisZoom(l.id),{min:_=0,max:b=1}=w??{};l.visibleRange=[_,b],!v&&(l.visibleRange[0]>0||l.visibleRange[1]<1)&&(v=!0);let O=l.nice?p[y]:void 0;l.maxThickness=null!=l.thickness&&l.thickness>0?l.thickness:y===Y.Y?.3*c.width:.3*c.height,O=l.update(O),p[y]=null!==(n=p[y])&&void 0!==n?n:O;let D=0;if(null!=l.thickness&&l.thickness>0)D=l.thickness;else{const L=l.computeBBox();D=y===Y.X?L.height:L.width}return f&&(D+=15),D=Math.ceil(D),h[g]=(null!==(o=h[g])&&void 0!==o?o:0)+D,l.gridPadding=(null!==(s=d[g])&&void 0!==s?s:0)-(null!==(a=h[g])&&void 0!==a?a:0),{clipSeries:v,axisThickness:D,axisOffset:C}}positionAxis(e){var i,n,o,s;const{axis:a,axisBound:l,axisWidths:u,seriesRect:c,axisOffset:d,axisThickness:h}=e,{position:p}=a;switch(p){case"top":a.translation.x=l.x+(null!==(i=u.left)&&void 0!==i?i:0),a.translation.y=this.clampToOutsideSeriesRect(c,l.y+1+d+h,"y",1);break;case"bottom":a.translation.x=l.x+(null!==(n=u.left)&&void 0!==n?n:0),a.translation.y=this.clampToOutsideSeriesRect(c,l.y+l.height+1-h-d,"y",-1);break;case"left":a.translation.y=l.y+(null!==(o=u.top)&&void 0!==o?o:0),a.translation.x=this.clampToOutsideSeriesRect(c,l.x+d+h,"x",1);break;case"right":a.translation.y=l.y+(null!==(s=u.top)&&void 0!==s?s:0),a.translation.x=this.clampToOutsideSeriesRect(c,l.x+l.width-h-d,"x",-1)}a.updatePosition({rotation:Wi(a.rotation),sideFlag:a.label.getSideFlag()})}}return r.className="CartesianChart",r.type="cartesian",r})();class yy extends Oo{constructor(){super(...arguments),this.shape="polygon"}computeLabelsBBox(t,e){return null}}let my=(()=>{class r extends hi{constructor(e=window.document,i,n){super(e,i,n),this.padding=new ir(40)}performLayout(){const e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})}(this,void 0,void 0,function*(){const i=yield e.performLayout.call(this),n=i.clone();this.computeSeriesRect(i),this.computeCircle(i),this.axes.forEach(a=>a.update());const s=i.clone().grow(20);return this.hoverRect=s,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:i,hoverRect:s,visible:!0},axes:[]}),i})}updateAxes(e,i,n){var o;this.axes.forEach(u=>{var c;if(u.direction===Y.X){const d=Wi(null!==(c=u.rotation)&&void 0!==c?c:0);u.range=[-Math.PI/2+d,3*Math.PI/2+d],u.gridLength=n,u.translation.x=e,u.translation.y=i}else u.direction===Y.Y&&(u.range=[n,0],u.translation.x=e,u.translation.y=i-n);u.updateScale()});const s=this.axes.find(u=>u.direction===Y.X),a=s?.scale,l=null===(o=a?.ticks)||void 0===o?void 0:o.call(a).map(u=>a.convert(u));this.axes.filter(u=>u instanceof yy).forEach(u=>u.gridAngles=l)}computeSeriesRect(e){const{seriesAreaPadding:i}=this;e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e}computeCircle(e){const i=this.series.filter(d=>d instanceof Xg),n=this.axes.filter(d=>d instanceof yy),o=(d,h,p)=>{this.updateAxes(d,h,p),i.forEach(v=>{v.centerX=d,v.centerY=h,v.radius=p});const f=i.filter(v=>v instanceof Fe);if(f.length>1){const v=f.map(g=>{const y=g.getInnerRadius();return{series:g,innerRadius:y}}).sort((g,y)=>g.innerRadius-y.innerRadius);v[v.length-1].series.surroundingRadius=void 0;for(let g=0;g<v.length-1;g++)v[g].series.surroundingRadius=v[g+1].innerRadius}},s=e.x+e.width/2,a=e.y+e.height/2,l=Math.max(0,Math.min(e.width,e.height)/2);let u=l;o(s,a,u);const c=({hideWhenNecessary:d=!1}={})=>{const h=[];for(const v of[...n,...i]){const g=v.computeLabelsBBox({hideWhenNecessary:d},e);g&&h.push(g)}if(0===h.length)return void o(s,a,l);const p=be.merge(h),f=this.refineCircle(p,u,e);o(f.centerX,f.centerY,f.radius),f.radius!==u&&(u=f.radius)};return c(),c(),c(),c({hideWhenNecessary:!0}),c({hideWhenNecessary:!0}),{radius:u,centerX:s,centerY:a}}refineCircle(e,i,n){const a=-i,l=i,u=i;let c=Math.max(0,-i-e.x),d=Math.max(0,a-e.y),h=Math.max(0,e.x+e.width-l),p=Math.max(0,e.y+e.height-u),g=Math.min(n.width-c-h,n.height-d-p)/2;const C=Math.min(.5*n.width/2,.5*n.height/2);if(g<C){g=C;const b=c+h;if(2*g+(d+p)>n.height){const x=n.height-2*g;2*Math.min(d,p)>x?(d=x/2,p=x/2):d>p?d=x-p:p=x-d}if(2*g+b>n.width){const x=n.width-2*g;2*Math.min(c,h)>x?(c=x/2,h=x/2):c>h?c=x-h:h=x-c}}return{centerX:n.x+(n.width-(c+2*g+h))/2+c+g,centerY:n.y+(n.height-(d+2*g+p))/2+d+g,radius:g}}}return r.className="PolarChart",r.type="polar",r})();var Cy=function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})};let wy=(()=>{class r extends hi{constructor(e=window.document,i,n){super(e,i,n),this._data={}}performLayout(){const e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return Cy(this,void 0,void 0,function*(){const i=yield e.performLayout.call(this),{seriesAreaPadding:n}=this,o=i.clone();i.shrink(n.left,"left"),i.shrink(n.top,"top"),i.shrink(n.right,"right"),i.shrink(n.bottom,"bottom"),this.seriesRect=i;const a=i.clone().grow(20);this.hoverRect=a,this.seriesRoot.translationX=Math.floor(i.x),this.seriesRoot.translationY=Math.floor(i.y),yield Promise.all(this.series.map(u=>Cy(this,void 0,void 0,function*(){yield u.update({seriesRect:i})})));const{seriesRoot:l}=this;return l.setClipRectInGroupCoordinateSpace(new be(i.x,i.y,i.width,i.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:o,paddedRect:i,hoverRect:a,visible:!0},axes:[]}),i})}}return r.className="HierarchyChart",r.type="hierarchy",r})();var bh=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class Sy extends qi{constructor(){super(...arguments),this.maxSpacing=NaN}}bh([R(In(wo(1),ra("minSpacing"))),bo(NaN)],Sy.prototype,"maxSpacing",void 0);class Do extends jr{constructor(t,e=new Su){super(t,e),this.min=NaN,this.max=NaN,e.strictClampByDefault=!0}normaliseDataDomain(t){const{min:e,max:i}=this;return function lA(r,t,e){var i;return r.length>2&&(r=null!==(i=Bn(r))&&void 0!==i?i:[NaN,NaN]),isNaN(t)||(r=[t,r[1]]),isNaN(e)||(r=[r[0],e]),r[0]>r[1]&&(r=[]),r}(t,e,i)}formatDatum(t){return"number"==typeof t?t.toFixed(2):(ee.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new Sy}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");const[e,i]=function KA(r,t){let e=Math.floor(r[0]),i=r[1];e=function $A(r,t,e){const i=Math.abs(t-r)/(e-1),n=Math.floor(Math.log10(i)),o=Math.pow(10,n);return Math.floor(r/o)*o}(e,i,t);const n=function XA(r,t,e){return function qA(r){const t=Math.floor(Math.log10(r)),e=Math.pow(10,t),i=r/e*10;return i>0&&i<=1?e/10:i>1&&i<=2?2*e/10:i>1&&i<=5?5*e/10:i>5&&i<=10?10*e/10:i>10&&i<=20?20*e/10:i>20&&i<=40?40*e/10:i>40&&i<=50?50*e/10:i>50&&i<=100?100*e/10:i}((t-r)/(e-1))}(e,i,t);i=e+(t-1)*n;const s=[e,i],a=function YA(r,t,e){const i=Math.floor(Math.log10(t)),n=t>0&&t<1?Math.abs(i):0,o=Math.pow(10,n),s=new fh(n);for(let a=0;a<e;a++)s[a]=Math.round((r+t*a)*o)/o;return s}(e,n,t);return[s,a]}(this.dataDomain,t??0);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}}Do.className="NumberAxis",Do.type="number",bh([R(In(wo(),Jl("max"))),bo(NaN)],Do.prototype,"min",void 0),bh([R(In(wo(),ra("min"))),bo(NaN)],Do.prototype,"max",void 0);var _y=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};function Ey(){return re(t=>"number"==typeof t&&0!==t,"expecting a non-zero Number")}class To extends Do{constructor(t){super(t,new ma),this.min=NaN,this.max=NaN,this.scale.strictClampByDefault=!0}normaliseDataDomain(t){var e;const{min:i,max:n}=this;t.length>2&&(t=null!==(e=Bn(t))&&void 0!==e?e:[NaN,NaN]),isNaN(i)||(t=[i,t[1]]),isNaN(n)||(t=[t[0],n]);const s=t[0]<0&&t[1]>0,a=0===t[0]&&0===t[1];return(t[0]>t[1]||s||a)&&(t=[],s?ee.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):a&&ee.warn("the data domain has 0 extent, no data is rendered.")),0===t[0]&&(t[0]=1),0===t[1]&&(t[1]=-1),t}set base(t){this.scale.base=t}get base(){return this.scale.base}}To.className="LogAxis",To.type="log",_y([R(In(wo(),Jl("max"),Ey())),bo(NaN)],To.prototype,"min",void 0),_y([R(In(wo(),ra("min"),Ey())),bo(NaN)],To.prototype,"max",void 0);var Rh=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class by extends qi{constructor(){super(...arguments),this.maxSpacing=NaN}}Rh([R(In(wo(1),ra("minSpacing"))),bo(NaN)],by.prototype,"maxSpacing",void 0);class ur extends jr{constructor(t){super(t,new Gg),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;e.strictClampByDefault=!0,this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(t){var e;let{min:i,max:n}=this;return"number"==typeof i&&(i=new Date(i)),"number"==typeof n&&(n=new Date(n)),t.length>2&&(t=(null!==(e=Bn(t))&&void 0!==e?e:[0,1e3]).map(o=>new Date(o))),i instanceof Date&&(t=[i,t[1]]),n instanceof Date&&(t=[t[0],n]),t[0]>t[1]&&(t=[]),t}createTick(){return new by}onLabelFormatChange(t,e){e?super.onLabelFormatChange(t,e):this.labelFormatter=this.scale.tickFormat({ticks:t})}formatDatum(t){var e;return null!==(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))&&void 0!==e?e:String(t)}calculatePadding(t,e){return[0,1]}}ur.className="TimeAxis",ur.type="time",Rh([R(In(eg,Jl("max")))],ur.prototype,"min",void 0),Rh([R(In(eg,ra("min")))],ur.prototype,"max",void 0);const bu={[Do.type]:Do,[Un.type]:Un,[ur.type]:ur,[lr.type]:lr,[To.type]:To};function ZA(r,t){bu[r]=t}function QA(r,t){const e=bu[r];if(e)return new e(t);throw new Error(`AG Charts - unknown axis type: ${r}`)}const Oh={has:r=>Object.prototype.hasOwnProperty.call(bu,r),get axesTypes(){return Object.keys(bu)}},Ry={};function Oy(r,t){Ry[r]=t}var Sn=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};const eL=["circle","cross","diamond","heart","plus","square","triangle"],tL=re(r=>eL.includes(r)||Object.getPrototypeOf(r)===$i,"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");class Zi extends Kd{constructor(){super(...arguments),this.enabled=!0,this.shape=ch,this.size=6,this.maxSize=30,this.domain=void 0,this.fill=void 0,this.stroke=void 0,this.strokeWidth=1,this.fillOpacity=void 0,this.strokeOpacity=void 0}}Sn([R(Le),te({redraw:W.MAJOR})],Zi.prototype,"enabled",void 0),Sn([R(tL),te({redraw:W.MAJOR})],Zi.prototype,"shape",void 0),Sn([R(K(0)),te({redraw:W.MAJOR})],Zi.prototype,"size",void 0),Sn([R(K(0)),te({redraw:W.MAJOR})],Zi.prototype,"maxSize",void 0),Sn([R(ig),te({redraw:W.MAJOR})],Zi.prototype,"domain",void 0),Sn([R(Ne),te({redraw:W.MAJOR})],Zi.prototype,"fill",void 0),Sn([R(Ne),te({redraw:W.MAJOR})],Zi.prototype,"stroke",void 0),Sn([R(xe(0)),te({redraw:W.MAJOR})],Zi.prototype,"strokeWidth",void 0),Sn([R(xe(0,1)),te({redraw:W.MAJOR})],Zi.prototype,"fillOpacity",void 0),Sn([R(xe(0,1)),te({redraw:W.MAJOR})],Zi.prototype,"strokeOpacity",void 0);var xy=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},fi=function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})};const iL={[Y.X]:["xKey"],[Y.Y]:["yKey"]},nL={[Y.X]:["xName"],[Y.Y]:["yName"]};class xh extends ua{constructor(t,e,i,n,o){super(i,n,o),this.xKey=t,this.yKey=e}}class Ru extends xh{constructor(){super(...arguments),this.type="nodeClick"}}class Ou extends xh{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class oL extends mh{}class Ur extends zi{constructor(t){super(Object.assign(Object.assign({},t),{useSeriesGroupLayer:!0,directionKeys:iL,directionNames:nL})),this.legendItemName=void 0,this._contextNodeData=[],this.nodeDataDependencies={},this.highlightSelection=Ge.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=Ge.select(this.highlightLabel,le),this.subGroups=[],this.subGroupId=0,this.datumSelectionGarbageCollection=!0;const{pathsPerSeries:e=1,hasMarkers:i=!1,hasHighlightedLabels:n=!1,pathsZIndexSubOrderOffset:o=[]}=t;this.opts={pathsPerSeries:e,hasMarkers:i,hasHighlightedLabels:n,pathsZIndexSubOrderOffset:o},this.animationState=new oL("empty",{empty:{on:{update:{target:"ready",action:s=>this.animateEmptyUpdateReady(s)}}},ready:{on:{updateData:{target:"waiting",action:()=>{}},update:{target:"ready",action:s=>this.animateReadyUpdate(s)},highlight:{target:"ready",action:s=>this.animateReadyHighlight(s)},highlightMarkers:{target:"ready",action:s=>this.animateReadyHighlightMarkers(s)},resize:{target:"ready",action:s=>this.animateReadyResize(s)}}},waiting:{on:{update:{target:"ready",action:s=>this.animateWaitingUpdateReady(s)}}}})}get contextNodeData(){var t;return null===(t=this._contextNodeData)||void 0===t?void 0:t.slice()}addChartEventListeners(){var t,e;null===(t=this.ctx.chartEventManager)||void 0===t||t.addListener("legend-item-click",i=>this.onLegendItemClick(i)),null===(e=this.ctx.chartEventManager)||void 0===e||e.addListener("legend-item-double-click",i=>this.onLegendItemDoubleClick(i))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}checkDomainXY(t,e,i,n){return(i&&Xl(t)||!i&&Yd(t))&&(n&&Xl(e)||!n&&Yd(e))?[t,e]:void 0}checkRangeXY(t,e,i,n){return!isNaN(t)&&!isNaN(e)&&i.inRange(t)&&n.inRange(e)}update({seriesRect:t}){var e,i;return fi(this,void 0,void 0,function*(){const{visible:n}=this,{series:o}=null!==(i=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&void 0!==i?i:{},s=o?o===this:void 0,a={seriesRectWidth:t?.width,seriesRectHeight:t?.height},l=null!=nr(this.nodeDataDependencies,a);l&&(this.nodeDataDependencies=a,this.markNodeDataDirty()),yield this.updateSelections(s,n),yield this.updateNodes(s,n),l&&this.animationState.transition("resize",{datumSelections:this.subGroups.map(({datumSelection:u})=>u),markerSelections:this.subGroups.map(({markerSelection:u})=>u),contextData:this._contextNodeData,paths:this.subGroups.map(({paths:u})=>u)}),this.animationState.transition("update",{datumSelections:this.subGroups.map(({datumSelection:u})=>u),markerSelections:this.subGroups.map(({markerSelection:u})=>u),labelSelections:this.subGroups.map(({labelSelection:u})=>u),contextData:this._contextNodeData,paths:this.subGroups.map(({paths:u})=>u),seriesRect:t})})}updateSelections(t,e){var i;return fi(this,void 0,void 0,function*(){yield this.updateHighlightSelection(t),e&&(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty()||(this.nodeDataRefresh&&(this.nodeDataRefresh=!1,!(null===(i=this.chart)||void 0===i)&&i.debug&&ee.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this._contextNodeData=yield this.createNodeData(),yield this.updateSeriesGroups()),yield Promise.all(this.subGroups.map((n,o)=>this.updateSeriesGroupSelections(n,o)))))})}updateSeriesGroupSelections(t,e){return fi(this,void 0,void 0,function*(){const{datumSelection:i,labelSelection:n,markerSelection:o}=t,s=this._contextNodeData[e],{nodeData:a,labelData:l}=s;t.datumSelection=yield this.updateDatumSelection({nodeData:a,datumSelection:i,seriesIdx:e}),t.labelSelection=yield this.updateLabelSelection({labelData:l,labelSelection:n,seriesIdx:e}),o&&(t.markerSelection=yield this.updateMarkerSelection({nodeData:a,markerSelection:o,seriesIdx:e}))})}nodeFactory(){return new de}markerFactory(){return new(Gr())}updateSeriesGroups(){return fi(this,void 0,void 0,function*(){const{_contextNodeData:t,contentGroup:e,subGroups:i,opts:{pathsPerSeries:n,hasMarkers:o}}=this;if(t.length===i.length)return;t.length<i.length&&i.splice(t.length).forEach(({dataNodeGroup:a,markerGroup:l,labelGroup:u,paths:c})=>{e.removeChild(a),l&&e.removeChild(l),u&&e.removeChild(u);for(const d of c)e.removeChild(d)});const s=t.length;for(;s>i.length;){const l=this.subGroupId++,u=new de({name:`${this.id}-series-sub${l}-dataNodes`,layer:!1,zIndex:Ze.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data",l)}),c=o?new de({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:!1,zIndex:Ze.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",l)}):void 0,d=new de({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:!1,zIndex:Ze.SERIES_LABEL_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",l)});e.appendChild(u),e.appendChild(d),c&&e.appendChild(c);const h=[];for(let p=0;p<n;p++)h[p]=new vn,h[p].zIndex=Ze.SERIES_LAYER_ZINDEX,h[p].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",p),e.appendChild(h[p]);i.push({paths:h,dataNodeGroup:u,markerGroup:c,labelGroup:d,labelSelection:Ge.select(d,le),datumSelection:Ge.select(u,()=>this.nodeFactory(),this.datumSelectionGarbageCollection),markerSelection:c?Ge.select(c,()=>this.markerFactory()):void 0})}})}getGroupZIndexSubOrder(t,e=0){var i;const n=super.getGroupZIndexSubOrder(t,e);if("paths"===t){const o=null!==(i=this.opts.pathsZIndexSubOrderOffset[e])&&void 0!==i?i:0,s=n[0];n[0]="function"==typeof s?()=>+s()+o:+s+o}return n}updateNodes(t,e){var i;return fi(this,void 0,void 0,function*(){const{highlightSelection:n,highlightLabelSelection:o,_contextNodeData:s,opts:{hasMarkers:a,hasHighlightedLabels:l}}=this,u=this.visible&&(null===(i=this._contextNodeData)||void 0===i?void 0:i.length)>0&&e;this.rootGroup.visible=u,this.contentGroup.visible=u,this.highlightGroup.visible=u&&!!t;const c=this.subGroups.map((d,h)=>{const{itemId:p}=s[h];return this.getOpacity({itemId:p})});a?(yield this.updateMarkerNodes({markerSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",n)):(yield this.updateDatumNodes({datumSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",n)),l&&(yield this.updateLabelNodes({labelSelection:o,seriesIdx:-1})),yield Promise.all(this.subGroups.map((d,h)=>fi(this,void 0,void 0,function*(){const{dataNodeGroup:p,markerGroup:f,datumSelection:v,labelSelection:g,markerSelection:y,paths:m,labelGroup:C}=d,w=u,_=c[h];p.opacity=_,p.visible=w,C.visible=w,f&&(f.opacity=_,f.zIndex=p.zIndex>=Ze.SERIES_LAYER_ZINDEX?p.zIndex:p.zIndex+1,f.visible=w),C&&(C.opacity=_);for(const b of m)b.opacity=_,b.visible=w;p.visible&&(yield this.updateDatumNodes({datumSelection:v,isHighlight:!1,seriesIdx:h}),yield this.updateLabelNodes({labelSelection:g,seriesIdx:h}),a&&y&&(yield this.updateMarkerNodes({markerSelection:y,isHighlight:!1,seriesIdx:h})))})))})}updateHighlightSelection(t){var e;return fi(this,void 0,void 0,function*(){const{highlightSelection:i,highlightLabelSelection:n,_contextNodeData:o}=this,s=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),a=t&&s?.datum?s:void 0;let l;if(this.highlightSelection=yield this.updateHighlightSelectionItem({item:a,highlightSelection:i}),this.isLabelEnabled()&&null!=a){const{itemId:u}=a;for(const{labelData:c}of o)if(l=c.find(d=>d.datum===a.datum&&d.itemId===u),null!=l)break}this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({item:l,highlightLabelSelection:n})})}pickNodeExactShape(t){const e=super.pickNodeExactShape(t);if(e)return e;const{x:i,y:n}=t,{opts:{hasMarkers:o}}=this;for(const{dataNodeGroup:s,markerGroup:a}of this.subGroups){let l=s.pickNode(i,n);if(!l&&o&&(l=a?.pickNode(i,n)),l)return{datum:l.datum,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:n,y:o}=t,{axes:s,rootGroup:a,_contextNodeData:l}=this,u=s[Y.X],c=s[Y.Y],d=a.transformPoint(n,o);let p,h=1/0;for(const f of l)for(const v of f.nodeData){const{point:{x:g=NaN,y=NaN}={}}=v;if(isNaN(g)||isNaN(y)||!u?.inRange(g)||!c?.inRange(y))continue;const C=Math.max(Math.pow(d.x-g,2)+Math.pow(d.y-y,2),0);C<h&&(h=C,p=v)}if(p)return{datum:p,distance:Math.max(Math.sqrt(h)-(null!==(i=null===(e=p.point)||void 0===e?void 0:e.size)&&void 0!==i?i:0),0)}}pickNodeMainAxisFirst(t,e){var i,n;const{x:o,y:s}=t,{axes:a,rootGroup:l,_contextNodeData:u}=this,c=a[Y.X],d=a[Y.Y],h=[c,d].filter(m=>m instanceof Un).map(m=>m.direction);if(e&&0===h.length)return;const[p=Y.X]=h,f=l.transformPoint(o,s),v=p===Y.X?[f.x,f.y]:[f.y,f.x],g=[1/0,1/0];let y;for(const m of u)for(const C of m.nodeData){const{point:{x:w=NaN,y:_=NaN}={}}=C;if(isNaN(w)||isNaN(_)||!c?.inRange(w)||!d?.inRange(_))continue;const O=p===Y.X?[w,_]:[_,w];let x=!0;for(let D=0;D<O.length;D++){const T=Math.abs(O[D]-v[D]);if(T>g[D]){x=!1;break}T<g[D]&&(g[D]=T,g.fill(1/0,D+1,g.length))}x&&(y=C)}return y?{datum:y,distance:Math.max(Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2))-(null!==(n=null===(i=y.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0),0)}:void 0}onLegendItemClick(t){const{enabled:e,itemId:i,series:n,legendItemName:o}=t;(n.id===this.id||null!=this.legendItemName&&this.legendItemName===o)&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:n,numVisibleItems:o,legendItemName:s}=t,a=Object.values(o).reduce((u,c)=>u+c,0);this.toggleSeriesItem(i,!!(n.id===this.id||null!=this.legendItemName&&this.legendItemName===s||e&&1===a))}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}updateHighlightSelectionItem(t){return fi(this,void 0,void 0,function*(){const{opts:{hasMarkers:e}}=this,{item:i,highlightSelection:n}=t,o=i?[i]:[];return e?this.updateMarkerSelection({nodeData:o,markerSelection:n,seriesIdx:-1}):this.updateDatumSelection({nodeData:o,datumSelection:n,seriesIdx:-1})})}updateHighlightSelectionLabel(t){return fi(this,void 0,void 0,function*(){const{item:e,highlightLabelSelection:i}=t;return this.updateLabelSelection({labelData:e?[e]:[],labelSelection:i,seriesIdx:-1})})}updateDatumSelection(t){return fi(this,void 0,void 0,function*(){return t.datumSelection})}updateDatumNodes(t){return fi(this,void 0,void 0,function*(){})}updateMarkerSelection(t){return fi(this,void 0,void 0,function*(){return t.markerSelection})}updateMarkerNodes(t){return fi(this,void 0,void 0,function*(){})}animateEmptyUpdateReady(t){}animateReadyUpdate(t){}animateWaitingUpdateReady(t){}animateReadyHighlight(t){}animateReadyHighlightMarkers(t){}animateReadyResize(t){}}xy([R(ue)],Ur.prototype,"legendItemName",void 0);class xu extends Zi{constructor(){super(...arguments),this.formatter=void 0}}xy([R(je),te({redraw:W.MAJOR})],xu.prototype,"formatter",void 0);const rL=/(#\{(.*?)\})/g;function Dy(r,t,e){return r.replace(rL,function(...i){const n=i[2],[o,s]=n.split(":"),a=t[o];if("number"==typeof a){const l=s&&e&&e[s];if(l){const{locales:u,options:c}=l;return a.toLocaleString(u,c)}return String(a)}if(a instanceof Date){const l=s&&e&&e[s];return"string"==typeof l?yu(l)(a):a.toDateString()}return"string"==typeof a||a?.toString?String(a):""})}let zr=null;function Ot(r){return zr=zr??document.createElement("div"),r?(zr.textContent=r,zr.innerHTML):""}var kt=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Kr=function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})};class Ty extends bt{constructor(){super(...arguments),this.formatter=void 0}}kt([R(je)],Ty.prototype,"formatter",void 0);class Dh extends Gn{constructor(){super(...arguments),this.renderer=void 0,this.format=void 0}}kt([R(je)],Dh.prototype,"renderer",void 0),kt([R(ue)],Dh.prototype,"format",void 0);var Sa=function(r){return r[r.Fill=0]="Fill",r[r.Stroke=1]="Stroke",r[r.Marker=2]="Marker",r[r.Label=3]="Label",r}(Sa||{});class Ht extends Ur{constructor(t){super({moduleCtx:t,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0}),this.tooltip=new Dh,this.marker=new xu,this.label=new Ty,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.xName=void 0,this.strokeWidth=2,this.shadow=void 0;const{marker:e,label:i}=this;e.enabled=!1,i.enabled=!1}processData(t){return Kr(this,void 0,void 0,function*(){const{xKey:e,yKey:i,axes:n,normalizedTo:o,data:s,visible:a,seriesGrouping:{groupIndex:l=this.id}={}}=this;if(!e||!i||!s)return;const u=n[Y.X],c=n[Y.Y],d=u?.scale instanceof Me,h=c?.scale instanceof Me,p=[`area-stack-${l}-yValues`,`area-stack-${l}-yValues-trailing`,`area-stack-${l}-yValues-prev`,`area-stack-${l}-yValues-trailing-prev`,`area-stack-${l}-yValues-marker`],f=[],v=o&&isFinite(o)?o:void 0;v&&(f.push(th(this,[p[0],p[1],p[4]],v,"range")),f.push(th(this,[p[2],p[3]],v,"range")));const{dataModel:g,processedData:y}=yield t.request(this.id,s,{props:[nh(this,e,d,{id:"xValue"}),pt(this,i,h,{id:"yValue-raw",invalidValue:null}),...tr(this,i,h,"window","current",{id:"yValue-end",invalidValue:null,groupId:p[0]}),...tr(this,i,h,"window-trailing","current",{id:"yValue-start",invalidValue:null,groupId:p[1]}),...tr(this,i,h,"window","last",{id:"yValue-previous-end",invalidValue:null,groupId:p[2]}),...tr(this,i,h,"window-trailing","last",{id:"yValue-previous-start",invalidValue:null,groupId:p[3]}),...tr(this,i,h,"normal","current",{id:"yValue-cumulative",invalidValue:null,groupId:p[4]}),...f],groupByKeys:!0,dataVisible:a});this.dataModel=g,this.processedData=y})}getDomain(t){const{processedData:e,dataModel:i,axes:n}=this;if(!e||!i)return[];const o=n[Y.X],s=n[Y.Y],a=i.resolveProcessedDataDefById(this,"xValue"),l=i.getDomain(this,"xValue","key",e),u=i.getDomain(this,/yValue-(previous-)?end/,"value",e);return t===Y.X?"key"===a?.def.type&&"category"===a.def.valueType?l:this.fixNumericExtent(Bn(l),o):this.fixNumericExtent(s instanceof To||s instanceof ur?u:[u[0]>0?0:u[0],u[1]<0?0:u[1]],s)}createNodeData(){var t;return Kr(this,void 0,void 0,function*(){const{axes:e,data:i,processedData:{data:n}={},dataModel:o,ctx:{callbackCache:s}}=this,a=e[Y.X],l=e[Y.Y];if(!(a&&l&&i&&o))return[];const{yKey:u="",xKey:c="",marker:d,label:h,fill:p,stroke:f,id:v}=this,{scale:g}=a,{scale:y}=l,m=y instanceof Me,C=(null!==(t=g.bandwidth)&&void 0!==t?t:0)/2,w=o.resolveProcessedDataIndexById(this,"yValue-start").index,_=o.resolveProcessedDataIndexById(this,"yValue-end").index,b=o.resolveProcessedDataIndexById(this,"yValue-raw").index,O=o.resolveProcessedDataIndexById(this,"yValue-previous-start").index,x=o.resolveProcessedDataIndexById(this,"yValue-previous-end").index,D=o.resolveProcessedDataIndexById(this,"yValue-cumulative").index,T=(me,Te,$)=>{const ae=g.convert(me)+C,Ee=y.convert(Te,{strict:!1});return[{x:ae,y:y.convert($,{strict:!1}),size:d.size},{x:ae,y:Ee,size:d.size}]},L=(me,Te,$)=>{let ae;const Ee=this.normalizedTo&&isFinite(this.normalizedTo),Ie=Ee&&m&&Xl($);return(!Ee&&!isNaN($)||Ie)&&(ae=Te),{x:g.convert(me)+C,y:y.convert(ae,{strict:!1}),size:d.size}},A=[],N=[],H={itemId:u,points:[],yValues:[]},j={itemId:u,points:[]},z={itemId:u,fillSelectionData:j,labelData:A,nodeData:N,strokeSelectionData:H},B=j.points,G=[],Z=H.points,J=H.yValues;let ye,Q=-1;n?.forEach(me=>{const{keys:[Te],datum:$,values:ae}=me;ae.forEach((Ee,Ie)=>{var nt;Q++;const bn=$[Ie],Jt=Ee[b],Vh=Ee[w],os=Ee[_],Gu=Ee[O],Pa=Ee[x],ku=null!=Jt,rs=L(Te,+Ee[D],Jt);if(ku&&d&&N.push({index:Q,series:this,itemId:u,datum:bn,nodeMidPoint:{x:rs.x,y:rs.y},cumulativeValue:os,yValue:Jt,xValue:Te,yKey:u,xKey:c,point:rs,fill:p,stroke:f}),ku&&h){let Rn;Rn=h.formatter?null!==(nt=s.call(h.formatter,{value:Jt,seriesId:v}))&&void 0!==nt?nt:"":Pi(Jt)?Number(Jt).toFixed(2):String(Jt),A.push({index:Q,itemId:u,point:rs,label:Rn?{text:Rn,fontStyle:h.fontStyle,fontWeight:h.fontWeight,fontSize:h.fontSize,fontFamily:h.fontFamily,textAlign:"center",textBaseline:"bottom",fill:h.color}:void 0})}const Aa=[Gu,Vh],La=[Pa,os];if([ye,Te].some(Rn=>null==Rn))return void(ye=Te);Aa.some(Rn=>null==Rn)&&(Aa[0]=0,Aa[1]=0),La.some(Rn=>null==Rn)&&(La[0]=0,La[1]=0);const Wh=T(ye,+Aa[0],+La[0]);B.push(Wh[0]),G.push(Wh[1]);const jh=T(Te,+Aa[1],+La[1]);B.push(jh[0]),G.push(jh[1]),Z.push({x:NaN,y:NaN}),J.push(void 0),null!=Pa&&(Z.push(Wh[0]),J.push(Pa)),null!=os&&(Z.push(jh[0]),J.push(os)),ye=Te})});for(let me=G.length-1;me>=0;me--)B.push(G[me]);return[z]})}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(Gr(t))}updateMarkerSelection(t){return Kr(this,void 0,void 0,function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this,o=n&&e?e:[];return this.marker.isDirty()&&i.clear(),i.update(o,s=>{s.tag=Sa.Marker})})}updateMarkerNodes(t){var e;return Kr(this,void 0,void 0,function*(){const{markerSelection:i,isHighlight:n}=t,{id:o,xKey:s="",marker:a,fill:l,stroke:u,fillOpacity:c,marker:{fillOpacity:d=c},strokeOpacity:h,highlightStyle:{item:{fill:p,fillOpacity:f=d,stroke:v,strokeWidth:g}},visible:y,ctx:{callbackCache:m}}=this,{size:C,formatter:w}=a,_=null!==(e=a.strokeWidth)&&void 0!==e?e:this.strokeWidth,b="function"==typeof a.shape;i.each((O,x)=>{var D,T,L,A,N,H,j,z;const B=n&&void 0!==p?p:null!==(D=a.fill)&&void 0!==D?D:l,G=n?f:d,Z=n&&void 0!==v?v:null!==(T=a.stroke)&&void 0!==T?T:u,J=n&&void 0!==g?g:_;let Q;w&&(Q=m.call(w,{datum:x.datum,xKey:s,yKey:x.yKey,fill:B,stroke:Z,strokeWidth:J,size:C,highlighted:n,seriesId:o})),O.fill=null!==(L=Q?.fill)&&void 0!==L?L:B,O.stroke=null!==(A=Q?.stroke)&&void 0!==A?A:Z,O.strokeWidth=null!==(N=Q?.strokeWidth)&&void 0!==N?N:J,O.fillOpacity=G??1,O.strokeOpacity=null!==(j=null!==(H=a.strokeOpacity)&&void 0!==H?H:h)&&void 0!==j?j:1,O.size=null!==(z=Q?.size)&&void 0!==z?z:C,O.translationX=x.point.x,O.translationY=x.point.y,O.visible=O.size>0&&y&&!isNaN(x.point.x)&&!isNaN(x.point.y),b&&!O.dirtyPath&&(O.path.clear({trackChanges:!0}),O.updatePath(),O.checkPathDirty())}),n||this.marker.markClean()})}updateLabelSelection(t){return Kr(this,void 0,void 0,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,n=>{n.tag=Sa.Label})})}updateLabelNodes(t){return Kr(this,void 0,void 0,function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:o,fontSize:s,fontFamily:a,color:l}=this.label;e.each((u,c)=>{const{point:d,label:h}=c;h&&i?(u.fontStyle=n,u.fontWeight=o,u.fontSize=s,u.fontFamily=a,u.textAlign=h.textAlign,u.textBaseline=h.textBaseline,u.text=h.text,u.x=d.x,u.y=d.y-10,u.fill=l,u.visible=!0):u.visible=!1})})}getNodeClickEvent(t,e){var i;return new Ru(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getNodeDoubleClickEvent(t,e){var i;return new Ou(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getTooltipHtml(t){var e,i,n;const{xKey:o,id:s,axes:a,xName:l,yName:u,fill:c,stroke:d,tooltip:h,marker:p,dataModel:f}=this,{yKey:v,xValue:g,yValue:y,datum:m}=t,C=a[Y.X],w=a[Y.Y];if(!(o&&v&&C&&w&&Pi(y)&&f))return"";const _=f.resolveProcessedDataIndexById(this,"yValue-raw").index,{size:b,formatter:O,strokeWidth:x,fill:D,stroke:T}=p,L=C.formatDatum(g),A=w.formatDatum(y),N=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.data[t.index])||void 0===i?void 0:i.values[0][_],H=Ot(u),j=Ot(L+": "+A),B=D??c;let Z;O&&(Z=O({datum:m,xKey:o,yKey:v,fill:B,stroke:T??d,strokeWidth:x??this.strokeWidth,size:b,highlighted:!1,seriesId:s}));const J=null!==(n=Z?.fill)&&void 0!==n?n:B,Q={title:H,backgroundColor:J,content:j},{renderer:ye,format:me}=h;if(me||ye){const Te={datum:m,xKey:o,xName:l,xValue:g,yKey:v,yValue:y,processedYValue:N,yName:u,color:J,title:H,seriesId:s};if(me)return St({content:Dy(me,Te)},Q);if(ye)return St(ye(Te),Q)}return St(Q)}getLegendData(){var t,e,i,n;const{data:o,id:s,xKey:a,yKey:l,yName:u,marker:c,fill:d,stroke:h,fillOpacity:p,strokeOpacity:f,visible:v}=this;return o?.length&&a&&l?[{legendType:"category",id:s,itemId:l,seriesId:s,enabled:v,label:{text:u??l},marker:{shape:c.shape,fill:null!==(t=c.fill)&&void 0!==t?t:d,stroke:null!==(e=c.stroke)&&void 0!==e?e:h,fillOpacity:null!==(i=c.fillOpacity)&&void 0!==i?i:p,strokeOpacity:null!==(n=c.strokeOpacity)&&void 0!==n?n:f}}]:[]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e,contextData:i,paths:n,seriesRect:o}){const{stroke:s,fill:a,fillOpacity:l,lineDash:u,lineDashOffset:c,strokeOpacity:d,strokeWidth:h,shadow:p}=this;i.forEach(({fillSelectionData:f,strokeSelectionData:v,itemId:g},y)=>{var m,C,w,_,b;const[O,x]=n[y],D=null!==(C=null===(m=this.ctx.animationManager)||void 0===m?void 0:m.defaultOptions.duration)&&void 0!==C?C:1e3,L={from:0,to:null!==(w=o?.width)&&void 0!==w?w:0,duration:D};{const{points:A,yValues:N}=v;x.tag=Sa.Stroke,x.fill=void 0,x.lineJoin=x.lineCap="round",x.pointerEvents=Zt.None,x.stroke=s,x.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:g}),x.strokeOpacity=d,x.lineDash=u,x.lineDashOffset=c,null===(_=this.ctx.animationManager)||void 0===_||_.animate(`${this.id}_empty-update-ready_stroke_${y}`,Object.assign(Object.assign({},L),{onUpdate(H){x.path.clear({trackChanges:!0});let j=!0;A.forEach((z,B)=>{if(void 0===N[B]||isNaN(z.x)||isNaN(z.y))j=!0;else if(z.x<=H)j?(x.path.moveTo(z.x,z.y),j=!1):x.path.lineTo(z.x,z.y);else if(B>0&&void 0!==N[B]&&void 0!==N[B-1]&&A[B-1].x<=H){const G=A[B-1];x.path.lineTo(H,G.y+(H-G.x)*(z.y-G.y)/(z.x-G.x))}}),x.checkPathDirty()}}))}{const{points:A}=f,N=A.slice(0,A.length/2),H=A.slice(A.length/2);O.tag=Sa.Fill,O.stroke=void 0,O.lineJoin="round",O.pointerEvents=Zt.None,O.fill=a,O.fillOpacity=l,O.strokeOpacity=d,O.strokeWidth=h,O.lineDash=u,O.lineDashOffset=c,O.fillShadow=p,null===(b=this.ctx.animationManager)||void 0===b||b.animate(`${this.id}_empty-update-ready_fill_${y}`,Object.assign(Object.assign({},L),{onUpdate(j){O.path.clear({trackChanges:!0});let z=0,B=0;N.forEach((G,Z)=>{if(G.x<=j)z=G.x,B=G.y,O.path.lineTo(G.x,G.y);else if(Z>0&&N[Z-1].x<j){const J=N[Z-1];z=j,B=J.y+(z-J.x)*(G.y-J.y)/(G.x-J.x),O.path.lineTo(z,B)}}),H.forEach((G,Z)=>{const J=H.length-Z-1;if(G.x<=j)O.path.lineTo(G.x,G.y);else if(J>0&&N[J-1].x<j){const ye=H[Z+1];O.path.lineTo(z,G.y+(z-G.x)*(ye.y-G.y)/(ye.x-G.x))}}),H.length>0&&O.path.lineTo(H[H.length-1].x,H[H.length-1].y),O.path.closePath(),O.checkPathDirty()}}))}t[y].each((A,N)=>{var H,j,z,B;const G=o?.width?N.point.x/o.width*D:0,Z=this.animateFormatter(N),J=null!==(j=null===(H=N.point)||void 0===H?void 0:H.size)&&void 0!==j?j:0;null===(z=this.ctx.animationManager)||void 0===z||z.animate(`${this.id}_empty-update-ready_${A.id}`,Object.assign(Object.assign({},L),{to:null!==(B=Z?.size)&&void 0!==B?B:J,delay:G,duration:200,onUpdate(Q){A.size=Q}}))}),e[y].each((A,N)=>{var H;null===(H=this.ctx.animationManager)||void 0===H||H.animate(`${this.id}_empty-update-ready_${A.id}`,{from:0,to:1,delay:o?.width?N.point.x/o.width*D:0,duration:200,onUpdate:z=>{A.opacity=z}})})})}animateReadyUpdate({contextData:t,paths:e}){const{stroke:i,fill:n,fillOpacity:o,lineDash:s,lineDashOffset:a,strokeOpacity:l,strokeWidth:u,shadow:c}=this;t.forEach(({strokeSelectionData:d,fillSelectionData:h,itemId:p},f)=>{const[v,g]=e[f];g.stroke=i,g.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:p}),g.strokeOpacity=l,g.lineDash=s,g.lineDashOffset=a,g.path.clear({trackChanges:!0});let y=!0;d.points.forEach((m,C)=>{void 0===d.yValues[C]||isNaN(m.x)||isNaN(m.y)?y=!0:y?(g.path.moveTo(m.x,m.y),y=!1):g.path.lineTo(m.x,m.y)}),g.checkPathDirty(),v.fill=n,v.fillOpacity=o,v.strokeOpacity=l,v.strokeWidth=u,v.lineDash=s,v.lineDashOffset=a,v.fillShadow=c,v.path.clear({trackChanges:!0}),h.points.forEach(m=>{v.path.lineTo(m.x,m.y)}),v.path.closePath(),v.checkPathDirty()})}animateFormatter(t){var e,i,n;const{marker:o,fill:s,stroke:a,xKey:l="",id:u,ctx:{callbackCache:c}}=this,{size:d,formatter:h}=o,p=null!==(e=o.fill)&&void 0!==e?e:s,f=null!==(i=o.stroke)&&void 0!==i?i:a,v=null!==(n=o.strokeWidth)&&void 0!==n?n:this.strokeWidth;let g;return h&&(g=c.call(h,{datum:t.datum,xKey:l,yKey:t.yKey,fill:p,stroke:f,strokeWidth:v,size:d,highlighted:!1,seriesId:u})),g}isLabelEnabled(){return this.label.enabled}}Ht.className="AreaSeries",Ht.type="area",kt([R(ci)],Ht.prototype,"fill",void 0),kt([R(ci)],Ht.prototype,"stroke",void 0),kt([R(K(0,1))],Ht.prototype,"fillOpacity",void 0),kt([R(K(0,1))],Ht.prototype,"strokeOpacity",void 0),kt([R(Mr)],Ht.prototype,"lineDash",void 0),kt([R(K(0))],Ht.prototype,"lineDashOffset",void 0),kt([R(ue)],Ht.prototype,"xKey",void 0),kt([R(ue)],Ht.prototype,"xName",void 0),kt([R(ue)],Ht.prototype,"yKey",void 0),kt([R(ue)],Ht.prototype,"yName",void 0),kt([R(xe(0))],Ht.prototype,"normalizedTo",void 0),kt([R(K(0))],Ht.prototype,"strokeWidth",void 0);var $r=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class vi extends vn{constructor(){super(...arguments),this.borderPath=new lh,this.x=0,this.y=0,this.width=10,this.height=10,this.radius=0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Oe.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Oe.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}isDirtyPath(){var t;return!!(this.lastUpdatePathStrokeWidth!==this.strokeWidth||this.path.isDirty()||this.borderPath.isDirty()||null!==(t=this.clipPath)&&void 0!==t&&t.isDirty())}updatePath(){var t,e,i;const{path:n,borderPath:o,crisp:s}=this;let{x:a,y:l,width:u,height:c,strokeWidth:d}=this;const p=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1);let f=1;if(n.clear({trackChanges:!0}),o.clear({trackChanges:!0}),s&&(u<=p&&(f*=u/p),c<=p&&(f*=c/p),u=this.align(a,u),c=this.align(l,c),a=this.align(a),l=this.align(l)),d)if(u<p){const v=a+p/2;o.moveTo(v,l),o.lineTo(v,l+c),d=p,this.borderClipPath=void 0}else if(c<p){const v=l+p/2;o.moveTo(a,v),o.lineTo(a+u,v),d=p,this.borderClipPath=void 0}else if(d<u&&d<c){const v=d/2;a+=v,l+=v,u-=d,c-=d,this.borderClipPath=void 0,n.rect(a,l,u,c),o.rect(a,l,u,c)}else this.borderClipPath=null!==(i=this.borderClipPath)&&void 0!==i?i:new lh,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(a,l,u,c),o.rect(a,l,u,c);else this.borderClipPath=void 0,n.rect(a,l,u,c);this.effectiveStrokeWidth=d,this.lastUpdatePathStrokeWidth=d,this.microPixelEffectOpacity=f}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new be(t,e,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:n}=this,{globalAlpha:o}=t;t.globalAlpha=o*n*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i,borderPath:n,borderClipPath:o,opacity:s,microPixelEffectOpacity:a}=this;if(e&&i){const{strokeOpacity:u,lineDash:c,lineDashOffset:d,lineCap:h,lineJoin:p}=this;o&&(o.draw(t),t.clip()),n.draw(t);const{globalAlpha:f}=t;t.strokeStyle=e,t.globalAlpha=f*s*u*a,t.lineWidth=i,c&&t.setLineDash(c),d&&(t.lineDashOffset=d),h&&(t.lineCap=h),p&&(t.lineJoin=p),t.stroke(),t.globalAlpha=f}}}vi.className="Rect",$r([ke()],vi.prototype,"x",void 0),$r([ke()],vi.prototype,"y",void 0),$r([ke()],vi.prototype,"width",void 0),$r([ke()],vi.prototype,"height",void 0),$r([ke()],vi.prototype,"radius",void 0),$r([ke()],vi.prototype,"crisp",void 0);var xt=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Yr=function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})};const hL=["inside","outside"];var Th=function(r){return r[r.Bar=0]="Bar",r[r.Label=1]="Label",r}(Th||{});class Ph extends bt{constructor(){super(...arguments),this.formatter=void 0,this.placement="inside"}}xt([R(je)],Ph.prototype,"formatter",void 0),xt([R((r,t)=>We(r,t,e=>hL.includes(e)))],Ph.prototype,"placement",void 0);class Py extends Gn{constructor(){super(...arguments),this.renderer=void 0}}xt([R(je)],Py.prototype,"renderer",void 0);class vt extends Ur{constructor(t){super({moduleCtx:t,pickModes:[ht.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasHighlightedLabels:!0}),this.label=new Ph,this.tooltip=new Py,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.groupScale=new pu,this.stackGroup=void 0,this.strokeWidth=1,this.shadow=void 0,this.smallestDataInterval=void 0,this.datumSelectionGarbageCollection=!1,this.label.enabled=!1}resolveKeyDirection(t){return this.getBarDirection()===Y.X?t===Y.X?Y.Y:Y.X:t}processData(t){var e,i,n,o,s;return Yr(this,void 0,void 0,function*(){const{xKey:a,yKey:l,normalizedTo:u,seriesGrouping:{groupIndex:c=this.id}={},data:d=[]}=this,h=Math.abs(u??NaN),p=(null===(e=this.getCategoryAxis())||void 0===e?void 0:e.scale)instanceof Me,f=(null===(i=this.getValueAxis())||void 0===i?void 0:i.scale)instanceof Me,v=`bar-stack-${c}-yValues`,g=`${v}-trailing`,y=h&&isFinite(h)?h:void 0,m=[];y&&m.push(th(this,[v,g],y,"range")),(null===(n=this.ctx.animationManager)||void 0===n||!n.skipAnimations)&&this.processedData&&m.push(dg(this.processedData));const{dataModel:C,processedData:w}=yield t.request(this.id,d,{props:[nh(this,a,p,{id:"xValue"}),pt(this,l,f,{id:"yValue-raw",invalidValue:null}),...tr(this,l,f,"normal","current",{id:"yValue-end",invalidValue:null,groupId:v}),...tr(this,l,f,"trailing","current",{id:"yValue-start",invalidValue:null,groupId:g}),...p?[eh]:[],...m],groupByKeys:!0,dataVisible:this.visible});this.dataModel=C,this.processedData=w,this.smallestDataInterval={x:null!==(s=null===(o=w.reduced)||void 0===o?void 0:o[eh.property])&&void 0!==s?s:1/0,y:1/0},this.animationState.transition("updateData")})}getDomain(t){var e;const{processedData:i,dataModel:n}=this;if(!i||!n)return[];const{reduced:{[eh.property]:o}={}}=i,s=this.getCategoryAxis(),a=this.getValueAxis(),l=n.resolveProcessedDataDefById(this,"xValue"),u=n.getDomain(this,"xValue","key",i),c=n.getDomain(this,"yValue-end","value",i);if(t===this.getCategoryDirection()){if("key"===l?.def.type&&"category"===l?.def.valueType)return u;const d=isFinite(o)?o:0,h=null!==(e=Bn(u))&&void 0!==e?e:[NaN,NaN];return this.fixNumericExtent(t===Y.Y?[h[0]+-d,h[1]]:[h[0],h[1]+d],s)}return this.getValueAxis()instanceof To?this.fixNumericExtent(c,a):this.fixNumericExtent([c[0]>0?0:c[0],c[1]<0?0:c[1]],a)}getNodeClickEvent(t,e){var i;return new Ru(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getNodeDoubleClickEvent(t,e){var i;return new Ou(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}calculateStep(t){var e;const{smallestDataInterval:i}=this,n=this.getCategoryAxis();if(!n)return;const s=(n.dataDomain[1]-n.dataDomain[0])/(null!==(e=i?.x)&&void 0!==e?e:1)+1,a=Math.floor(t),l=Math.min(s,a);return t/Math.max(1,l)}createNodeData(){return Yr(this,void 0,void 0,function*(){const{visible:t,dataModel:e}=this,i=this.getCategoryAxis(),n=this.getValueAxis();if(!(e&&t&&i&&n))return[];const o=i.scale,s=n.scale,{groupScale:a,yKey:l="",xKey:u="",fill:c,stroke:d,strokeWidth:h,label:p,id:f,processedData:v,ctx:g,ctx:{seriesStateManager:y}}=this;let m=o.bandwidth;if(o instanceof Me){const A=Math.max(i.range[0],i.range[1]);m=this.calculateStep(A)}const C=[],{index:w,visibleGroupCount:_}=y.getVisiblePeerGroupIndex(this);for(let A=0;A<_;A++)C.push(String(A));a.domain=C,a.range=[0,m??0],a.padding=i instanceof Un?i.groupPaddingInner:i instanceof lr?.1:0,a.round=0!==a.padding;const b=a.bandwidth>=1?a.bandwidth:a.rawBandwidth,O=e.resolveProcessedDataIndexById(this,"xValue","key").index,x=e.resolveProcessedDataIndexById(this,"yValue-raw").index,D=e.resolveProcessedDataIndexById(this,"yValue-start").index,T=e.resolveProcessedDataIndexById(this,"yValue-end").index,L={itemId:l,nodeData:[],labelData:[]};return v?.data.forEach(({keys:A,datum:N,values:H},j)=>{const z=A[O],B=o.convert(z),G=+H[0][T],Z=+H[0][D],J=H[0][x],Q=B+a.convert(String(w));if(!i.inRange(Q,b)||isNaN(G))return;const ye=s.convert(G,{strict:!1}),me=s.convert(Z,{strict:!1}),Te=this.getBarDirection()===Y.X,$={x:Te?Math.min(ye,me):Q,y:Te?Q:Math.min(ye,me),width:Te?Math.abs(me-ye):b,height:Te?b:Math.abs(me-ye)},ae={x:$.x+$.width/2,y:$.y+$.height/2},{fontStyle:Ee,fontWeight:Ie,fontSize:nt,fontFamily:bn,color:Jt,formatter:Vh,placement:os}=p,{text:Gu,textAlign:Pa,textBaseline:Bh,x:ku,y:rs}=function aL({value:r,rect:t,placement:e,seriesId:i,padding:n=0,formatter:o,barAlongX:s,ctx:{callbackCache:a}}){let l;o&&(l=a.call(o,{value:Pi(r)?r:void 0,seriesId:i})),void 0===l&&(l=Pi(r)?r.toFixed(2):"");let u=t.x+t.width/2,c=t.y+t.height/2,d="center",h="middle";const p=r>=0;switch(e){case"start":s?(u=p?t.x-n:t.x+t.width+n,d=p?"start":"end"):(c=p?t.y+t.height+n:t.y-n,h=p?"top":"bottom");break;case"outside":case"end":s?(u=p?t.x+t.width+n:t.x-n,d=p?"start":"end"):(c=p?t.y-n:t.y+t.height+n,h=p?"bottom":"top");break;default:h="middle"}return{text:l,textAlign:d,textBaseline:h,x:u,y:c}}({value:J,rect:$,formatter:Vh,placement:os,seriesId:f,barAlongX:Te,ctx:g}),Hu={index:j,series:this,itemId:l,datum:N[0],cumulativeValue:Z+G,xValue:z,yValue:J,yKey:l,xKey:u,x:$.x,y:$.y,width:$.width,height:$.height,nodeMidPoint:ae,fill:c,stroke:d,strokeWidth:h,label:Gu?{text:Gu,fontStyle:Ee,fontWeight:Ie,fontSize:nt,fontFamily:bn,textAlign:Pa,textBaseline:Bh,fill:Jt,x:ku,y:rs}:void 0};L.nodeData.push(Hu),L.labelData.push(Hu)}),[L]})}nodeFactory(){return new vi}updateDatumSelection(t){return Yr(this,void 0,void 0,function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,o=>o.tag=Th.Bar,o=>o.xValue)})}updateDatumNodes(t){return Yr(this,void 0,void 0,function*(){const{datumSelection:e,isHighlight:i}=t,{fill:n,stroke:o,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:u,shadow:c,formatter:d,id:h,highlightStyle:{item:p},ctx:f,stackGroup:v}=this,g=this.axes[Y.X],y=function cL(r=[]){const[t,e]=r;return!(0!==t||1!==e)}(g?.visibleRange),m=this.getCategoryDirection()===Y.X;e.each((C,w)=>{const _={fill:n,stroke:o,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:u,fillShadow:c,strokeWidth:this.getStrokeWidth(this.strokeWidth,w)},b=m?w.width>0:w.height>0,O=function uL(r){var t,e,i,n,o,s,a,{datum:l,isHighlighted:u,style:c,highlightStyle:d,formatter:h,seriesId:p,stackGroup:f,ctx:{callbackCache:v}}=r,g=function(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(e[i[n]]=r[i[n]])}return e}(r,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","stackGroup","ctx"]);const y=u&&null!==(t=d.fill)&&void 0!==t?t:c.fill,m=u&&null!==(e=d.stroke)&&void 0!==e?e:c.stroke,C=u&&null!==(i=d.strokeWidth)&&void 0!==i?i:c.strokeWidth,w=u&&null!==(n=d.fillOpacity)&&void 0!==n?n:c.fillOpacity,{strokeOpacity:_,fillShadow:b,lineDash:O,lineDashOffset:x}=c;let D;return h&&(D=v.call(h,Object.assign({datum:l.datum,xKey:l.xKey,yKey:l.yKey,fill:y,stroke:m,strokeWidth:C,highlighted:u,seriesId:p,stackGroup:f},g))),{fill:null!==(o=D?.fill)&&void 0!==o?o:y,stroke:null!==(s=D?.stroke)&&void 0!==s?s:m,strokeWidth:null!==(a=D?.strokeWidth)&&void 0!==a?a:C,fillOpacity:w,strokeOpacity:_,lineDash:O,lineDashOffset:x,fillShadow:b}}({datum:w,isHighlighted:i,style:_,highlightStyle:p,formatter:d,seriesId:h,stackGroup:v,ctx:f});O.crisp=y,O.visible=b,function lL({rect:r,config:t}){const{crisp:e=!0,fill:i,stroke:n,strokeWidth:o,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:u,fillShadow:c,visible:d=!0}=t;r.crisp=e,r.fill=i,r.stroke=n,r.strokeWidth=o,r.fillOpacity=s,r.strokeOpacity=a,r.lineDash=l,r.lineDashOffset=u,r.fillShadow=c,r.visible=d}({rect:C,config:O})})})}updateLabelSelection(t){return Yr(this,void 0,void 0,function*(){const{labelData:e,labelSelection:i}=t,{enabled:n}=this.label;return i.update(n?e:[],s=>{s.tag=Th.Label,s.pointerEvents=Zt.None})})}updateLabelNodes(t){return Yr(this,void 0,void 0,function*(){const{labelSelection:e}=t;e.each((i,n)=>{!function dL({labelNode:r,labelDatum:t,config:e,visible:i}){if(t&&e&&e.enabled){const{x:n,y:o,text:s,textAlign:a,textBaseline:l}=t,{fontStyle:u,fontWeight:c,fontSize:d,fontFamily:h,color:p}=e;r.fontStyle=u,r.fontWeight=c,r.fontSize=d,r.fontFamily=h,r.textAlign=a,r.textBaseline=l,r.text=s,r.x=n,r.y=o,r.fill=p,r.visible=i}else r.visible=!1}({labelNode:i,labelDatum:n.label,config:this.label,visible:!0})})})}getTooltipHtml(t){var e;const{xKey:i,yKey:n,processedData:o,ctx:{callbackCache:s}}=this,a=this.getCategoryAxis(),l=this.getValueAxis(),{xValue:u,yValue:c,datum:d}=t;if(!(o&&i&&n&&a&&l))return"";const{xName:h,yName:p,fill:f,stroke:v,tooltip:g,formatter:y,id:m,stackGroup:C}=this,{renderer:w}=g,_=this.getStrokeWidth(this.strokeWidth),b=Ot(a.formatDatum(u)),O=Ot(l.formatDatum(c)),x=Ot(p),D=b+": "+O;let T;y&&(T=s.call(y,{datum:d,fill:f,stroke:v,strokeWidth:_,highlighted:!1,xKey:i,yKey:n,seriesId:m,stackGroup:C}));const L=null!==(e=T?.fill)&&void 0!==e?e:f,A={title:x,backgroundColor:L,content:D};return w?St(w({datum:d,xKey:i,xValue:u,xName:h,yKey:n,yValue:c,yName:p,color:L,title:x,seriesId:m,stackGroup:C}),A):St(A)}getLegendData(){var t;const{id:e,data:i,xKey:n,yKey:o,yName:s,legendItemName:a,fill:l,stroke:u,fillOpacity:c,strokeOpacity:d,visible:h,showInLegend:p}=this;if(!(p&&i?.length&&n&&o))return[];const f=[];return f.push({legendType:"category",id:e,itemId:o,seriesId:e,enabled:h,label:{text:null!==(t=a??s)&&void 0!==t?t:o},legendItemName:a,marker:{fill:l,stroke:u,fillOpacity:c,strokeOpacity:d}}),f}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){var i,n;const o=null!==(n=null===(i=this.ctx.animationManager)||void 0===i?void 0:i.defaultOptions.duration)&&void 0!==n?n:1e3,{startingX:a,startingY:l}=this.getDirectionStartingValues(t);t.forEach(u=>{u.each((c,d)=>{var h;let p=a,f=0,v=d.y,g=d.height;this.getBarDirection()===Y.Y&&(p=d.x,f=d.width,v=l,g=0),null===(h=this.ctx.animationManager)||void 0===h||h.animateMany(`${this.id}_empty-update-ready_${c.id}`,[{from:p,to:d.x},{from:f,to:d.width},{from:v,to:d.y},{from:g,to:d.height}],{duration:o,ease:Nr,onUpdate([m,C,w,_]){c.x=m,c.width=C,c.y=w,c.height=_}})})}),e.forEach(u=>{u.each(c=>{var d;null===(d=this.ctx.animationManager)||void 0===d||d.animate(`${this.id}_empty-update-ready_${c.id}`,{from:0,to:1,delay:o,duration:200,onUpdate:h=>{c.opacity=h}})})})}animateReadyHighlight(t){this.resetSelectionRects(t)}animateReadyResize({datumSelections:t}){var e;null===(e=this.ctx.animationManager)||void 0===e||e.reset(),t.forEach(i=>{this.resetSelectionRects(i)})}animateWaitingUpdateReady({datumSelections:t,labelSelections:e}){var i,n,o,s,a;const{processedData:l}=this,u=null===(i=l?.reduced)||void 0===i?void 0:i.diff;if(!u?.changed)return void t.forEach(w=>{this.resetSelectionRects(w)});const c=null!==(o=null===(n=this.ctx.animationManager)||void 0===n?void 0:n.defaultOptions.duration)&&void 0!==o?o:1e3;let h=c;(u.added.length>0||u.removed.length>0)&&(h=Math.floor(c/2));const{startingX:p,startingY:f}=this.getDirectionStartingValues(t),v=null===(a=null===(s=this.processedData)||void 0===s?void 0:s.defs.keys)||void 0===a?void 0:a[0],g={};u.added.forEach(w=>{g[w[0]]=!0});const y={};u.removed.forEach(w=>{y[w[0]]=!0});const m=`${this.id}_${Math.random()}`,C=`${this.id}_${Math.random()}`;t.forEach(w=>{w.each((_,b)=>{var O;let x=[{from:_.x,to:b.x},{from:_.width,to:b.width},{from:_.y,to:b.y},{from:_.height,to:b.height}],D=u.removed.length>0?h:0,T=h,L=!1;const A=v?b.xValue:"";let N=p,H=0,j=b.y,z=b.height;this.getBarDirection()===Y.Y&&(N=b.x,H=b.width,j=f,z=0),void 0!==A&&void 0!==g[A]?(x=[{from:N,to:b.x},{from:H,to:b.width},{from:j,to:b.y},{from:z,to:b.height}],T=h):void 0!==A&&void 0!==y[A]&&(x=[{from:b.x,to:N},{from:b.width,to:H},{from:b.y,to:j},{from:b.height,to:z}],D=0,T=h,L=!0),null===(O=this.ctx.animationManager)||void 0===O||O.animateManyWithThrottle(`${this.id}_waiting-update-ready_${_.id}`,x,{delay:D,duration:T,ease:Nr,throttleId:`${this.id}_rects`,throttleGroup:m,onUpdate([Z,J,Q,ye]){_.x=Z,_.width=J,_.y=Q,_.height=ye},onComplete(){L&&w.cleanup()}})})}),e.forEach(w=>{w.each(_=>{var b;_.opacity=0,null===(b=this.ctx.animationManager)||void 0===b||b.animateWithThrottle(`${this.id}_waiting-update-ready_${_.id}`,{from:0,to:1,delay:c,duration:200,throttleId:`${this.id}_labels`,throttleGroup:C,onUpdate:O=>{_.opacity=O}})})})}resetSelectionRects(t){t.each((e,i)=>{e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}),t.cleanup()}getDirectionStartingValues(t){const e=this.getBarDirection()===Y.Y,i=this.axes[Y.X],n=this.axes[Y.Y],o=i?.scale instanceof Me;let a=1/0,l=0;return n&&e&&(n?.scale instanceof Me?l=n.scale.convert(0):t.forEach(u=>u.each((c,d)=>{d.yValue>=0&&(l=Math.max(l,d.height+d.y))}))),i&&!e&&(o?a=i.scale.convert(0):t.forEach(u=>u.each((c,d)=>{d.yValue>=0&&(a=Math.min(a,d.x))}))),{startingX:a,startingY:l}}isLabelEnabled(){return this.label.enabled}getBandScalePadding(){return{inner:.2,outer:.3}}getBarDirection(){return Y.X}getCategoryDirection(){return Y.Y}}vt.className="BarSeries",vt.type="bar",xt([R(Ne)],vt.prototype,"fill",void 0),xt([R(Ne)],vt.prototype,"stroke",void 0),xt([R(K(0,1))],vt.prototype,"fillOpacity",void 0),xt([R(K(0,1))],vt.prototype,"strokeOpacity",void 0),xt([R(Mr)],vt.prototype,"lineDash",void 0),xt([R(K(0))],vt.prototype,"lineDashOffset",void 0),xt([R(je)],vt.prototype,"formatter",void 0),xt([R(ue)],vt.prototype,"xKey",void 0),xt([R(ue)],vt.prototype,"xName",void 0),xt([R(ue)],vt.prototype,"yKey",void 0),xt([R(ue)],vt.prototype,"yName",void 0),xt([R(ue)],vt.prototype,"stackGroup",void 0),xt([R(xe())],vt.prototype,"normalizedTo",void 0),xt([R(K(0))],vt.prototype,"strokeWidth",void 0);let fL=(()=>{class r extends vt{getBarDirection(){return Y.Y}getCategoryDirection(){return Y.X}}return r.type="column",r.className="ColumnSeries",r})();var Dt=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Xr=function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})};const vL=["count","sum","mean"],gL=re(r=>vL.includes(r),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");var Ah=function(r){return r[r.Bin=0]="Bin",r[r.Label=1]="Label",r}(Ah||{});class Ay extends bt{constructor(){super(...arguments),this.formatter=void 0}}Dt([R(je)],Ay.prototype,"formatter",void 0);class My extends Gn{constructor(){super(...arguments),this.renderer=void 0}}Dt([R(je)],My.prototype,"renderer",void 0);class gt extends Ur{constructor(t){super({moduleCtx:t,pickModes:[ht.EXACT_SHAPE_MATCH]}),this.label=new Ay,this.tooltip=new My,this.fill=void 0,this.stroke=void 0,this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.areaPlot=!1,this.bins=void 0,this.aggregation="count",this.binCount=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.strokeWidth=1,this.shadow=void 0,this.calculatedBins=[],this.datumSelectionGarbageCollection=!1,this.label.enabled=!1}deriveBins(t){if(void 0===this.binCount){const e=ph(t[0],t[1],10),i=ya(t[0],t[1],10),n=e[0];return[[n-i,n],...e.map(s=>[s,s+i])]}return this.calculateNiceBins(t,this.binCount)}calculateNiceBins(t,e){const i=Math.floor(t[0]),n=t[1],o=e||1,{start:s,binSize:a}=this.calculateNiceStart(i,n,o);return this.getBins(s,n,a,o)}getBins(t,e,i,n){const o=[];for(let s=0;s<n;s++){const a=Math.round(10*(t+s*i))/10;let l=Math.round(10*(t+(s+1)*i))/10;s===n-1&&(l=Math.max(l,e)),o[s]=[a,l]}return o}calculateNiceStart(t,e,i){const n=Math.abs(e-t)/i,o=Math.floor(Math.log10(n)),s=Math.pow(10,o);return{start:Math.floor(t/s)*s,binSize:n}}processData(t){var e;return Xr(this,void 0,void 0,function*(){const{xKey:i,yKey:n,data:o,areaPlot:s,aggregation:a}=this,l=[nh(this,i,!0),NT];if(n){let h=lg(this,"groupCount");"count"===a||("sum"===a?h=function MT(r,t,e){return{id:t,scopes:[r.id],type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:i=>nu(i),groupAggregateFunction:(i,n=[0,0])=>{var o,s;return n[0]+=null!==(o=i?.[0])&&void 0!==o?o:0,n[1]+=null!==(s=i?.[1])&&void 0!==s?s:0,n}}}(this,"groupAgg"):"mean"===a&&(h=function FT(r,t,e){return{id:t,scopes:[r.id],matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:n=>nu(n),groupAggregateFunction:(n,o=[0,0,-1])=>{var s,a;return o[0]+=null!==(s=n?.[0])&&void 0!==s?s:0,o[1]+=null!==(a=n?.[1])&&void 0!==a?a:0,o[2]++,o},finalFunction:(n=[0,0,0])=>{const o=n[0]+n[1];return o>=0?[0,o/n[2]]:[o/n[2],0]}}}(this,"groupAgg"))),s&&(h=ug(this,"groupAgg",h)),l.push(pt(this,n,!0,{invalidValue:void 0}),h)}else{let h=lg(this,"groupAgg");s&&(h=ug(this,"groupAgg",h)),l.push(h)}(null===(e=this.ctx.animationManager)||void 0===e||!e.skipAnimations)&&this.processedData&&l.push(dg(this.processedData,!1));const{dataModel:c,processedData:d}=yield t.request(this.id,o??[],{props:l,dataVisible:this.visible,groupByFn:h=>{var p;const f=iu(h.domain.keys[0]);if(0===f.length)return h.domain.groups=[],()=>[];const v=null!==(p=this.bins)&&void 0!==p?p:this.deriveBins(f),g=v.length;return this.calculatedBins=[...v],y=>{const m=y.keys[0];for(let C=0;C<g;C++){const w=v[C];if(m>=w[0]&&m<w[1]||C===g-1&&m<=w[1])return w}return[]}}});this.dataModel=c,this.processedData=d,this.animationState.transition("updateData")})}getDomain(t){var e,i,n,o;const{processedData:s,dataModel:a}=this;if(!s||!a)return[];const l=a.getDomain(this,"groupAgg","aggregate",s),u=null===(e=this.calculatedBins)||void 0===e?void 0:e[0][0],c=null===(i=this.calculatedBins)||void 0===i?void 0:i[(null!==(o=null===(n=this.calculatedBins)||void 0===n?void 0:n.length)&&void 0!==o?o:0)-1][1];return iu(t===Y.X?[u,c]:l)}getNodeClickEvent(t,e){var i,n;return new Ru(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,n;return new Ou(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}createNodeData(){var t;return Xr(this,void 0,void 0,function*(){const{axes:e,processedData:i,ctx:{callbackCache:n}}=this,o=e[Y.X],s=e[Y.Y];if(!(this.visible&&o&&s&&i&&"grouped"===i.type))return[];const{scale:a}=o,{scale:l}=s,{fill:u,stroke:c,strokeWidth:d,id:h,yKey:p="",xKey:f=""}=this,v=[],g=O=>String(O.value),{label:{formatter:y=g,fontStyle:m,fontWeight:C,fontSize:w,fontFamily:_,color:b}}=this;return i.data.forEach(O=>{var x;const{aggValues:[[D,T]]=[[0,0]],datum:L,datum:{length:A},keys:N,keys:[H,j]}=O,z=a.convert(H),B=a.convert(j),G=D+T,Z=l.convert(0),J=l.convert(G),Q=B-z,ye=Math.abs(J-Z),me=0!==G?{text:null!==(x=n.call(y,{value:G,seriesId:h}))&&void 0!==x?x:String(G),fontStyle:m,fontWeight:C,fontSize:w,fontFamily:_,fill:b,x:z+Q/2,y:J+ye/2}:void 0;v.push({series:this,datum:L,aggregatedValue:G,frequency:A,domain:N,yKey:p,xKey:f,x:z,y:J,xValue:z,yValue:J,width:Q,height:ye,nodeMidPoint:{x:z+Q/2,y:J+ye/2},fill:u,stroke:c,strokeWidth:d,label:me})}),[{itemId:null!==(t=this.yKey)&&void 0!==t?t:this.id,nodeData:v,labelData:v}]})}nodeFactory(){return new vi}updateDatumSelection(t){return Xr(this,void 0,void 0,function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,n=>{n.tag=Ah.Bin,n.crisp=!0},n=>n.domain.join("_"))})}updateDatumNodes(t){return Xr(this,void 0,void 0,function*(){const{datumSelection:e,isHighlight:i}=t,{fillOpacity:n,strokeOpacity:o,shadow:s,highlightStyle:{item:{fill:a,fillOpacity:l=n,stroke:u,strokeWidth:c}}}=this;e.each((d,h,p)=>{var f,v;const g=i&&void 0!==c?c:h.strokeWidth,y=i?l:n;d.fill=null!==(f=i?a:void 0)&&void 0!==f?f:h.fill,d.stroke=null!==(v=i?u:void 0)&&void 0!==v?v:h.stroke,d.fillOpacity=y,d.strokeOpacity=o,d.strokeWidth=g,d.lineDash=this.lineDash,d.lineDashOffset=this.lineDashOffset,d.fillShadow=s,d.zIndex=i?zi.highlightedZIndex:p,d.visible=h.height>0})})}updateLabelSelection(t){return Xr(this,void 0,void 0,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,n=>{n.tag=Ah.Label,n.pointerEvents=Zt.None,n.textAlign="center",n.textBaseline="middle"})})}updateLabelNodes(t){return Xr(this,void 0,void 0,function*(){const{labelSelection:e}=t,i=this.label.enabled;e.each((n,o)=>{const s=o.label;s&&i?(n.text=s.text,n.x=s.x,n.y=s.y,n.fontStyle=s.fontStyle,n.fontWeight=s.fontWeight,n.fontSize=s.fontSize,n.fontFamily=s.fontFamily,n.fill=s.fill,n.visible=!0):n.visible=!1})})}getTooltipHtml(t){const{xKey:e,yKey:i="",axes:n}=this,o=n[Y.X],s=n[Y.Y];if(!e||!o||!s)return"";const{xName:a,yName:l,fill:u,tooltip:c,aggregation:d,id:h}=this,{renderer:p}=c,{aggregatedValue:f,frequency:v,domain:g,domain:[y,m]}=t,C=`${Ot(a??e)}: ${o.formatDatum(y)} - ${o.formatDatum(m)}`;let w=i?`<b>${Ot(l??i)} (${d})</b>: ${s.formatDatum(f)}<br>`:"";w+=`<b>Frequency</b>: ${v}`;const _={title:C,backgroundColor:u,content:w};return p?St(p({datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:e,xValue:g,xName:a,yKey:i,yValue:f,yName:l,color:u,title:C,seriesId:h}),_):St(_)}getLegendData(){var t;const{id:e,data:i,xKey:n,yName:o,visible:s,fill:a,stroke:l,fillOpacity:u,strokeOpacity:c}=this;return i&&0!==i.length?[{legendType:"category",id:e,itemId:n,seriesId:e,enabled:s,label:{text:null!==(t=o??n)&&void 0!==t?t:"Frequency"},marker:{fill:a??"rgba(0, 0, 0, 0)",stroke:l??"rgba(0, 0, 0, 0)",fillOpacity:u,strokeOpacity:c}}]:[]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){var i,n;const o=null!==(n=null===(i=this.ctx.animationManager)||void 0===i?void 0:i.defaultOptions.duration)&&void 0!==n?n:1e3;let a=0;t.forEach(l=>l.each((u,c)=>{a=Math.max(a,c.height+c.y)})),t.forEach(l=>{l.each((u,c)=>{var d;null===(d=this.ctx.animationManager)||void 0===d||d.animateMany(`${this.id}_empty-update-ready_${u.id}`,[{from:a,to:c.y},{from:0,to:c.height}],{duration:o,ease:Nr,onUpdate([h,p]){u.y=h,u.height=p,u.x=c.x,u.width=c.width}})})}),e.forEach(l=>{l.each(u=>{var c;null===(c=this.ctx.animationManager)||void 0===c||c.animate(`${this.id}_empty-update-ready_${u.id}`,{from:0,to:1,delay:o,duration:200,onUpdate:d=>{u.opacity=d}})})})}animateReadyUpdate({datumSelections:t}){t.forEach(e=>{this.resetSelectionRects(e)})}animateReadyHighlight(t){this.resetSelectionRects(t)}animateReadyResize({datumSelections:t}){var e;null===(e=this.ctx.animationManager)||void 0===e||e.reset(),t.forEach(i=>{this.resetSelectionRects(i)})}animateWaitingUpdateReady({datumSelections:t,labelSelections:e}){var i,n,o;const{processedData:s}=this,a=null===(i=s?.reduced)||void 0===i?void 0:i.diff;if(!a?.changed)return void t.forEach(f=>{this.resetSelectionRects(f)});const l=null!==(o=null===(n=this.ctx.animationManager)||void 0===n?void 0:n.defaultOptions.duration)&&void 0!==o?o:1e3;let c=l;a.added.length>0&&a.removed.length>0?c=Math.floor(l/3):(a.added.length>0||a.removed.length>0)&&(c=Math.floor(l/2));let d=0;t.forEach(f=>f.each((v,g)=>{d=Math.max(d,g.height+g.y)}));const h={};a.added.forEach(f=>{h[f.join("_")]=!0});const p={};a.removed.forEach(f=>{p[f.join("_")]=!0}),t.forEach(f=>{f.each((v,g)=>{var y;let m=[{from:v.x,to:g.x},{from:v.width,to:g.width},{from:v.y,to:g.y},{from:v.height,to:g.height}],C=a.removed.length>0?c:0,w=!1;const _=g.domain.join("_");void 0!==_&&void 0!==h[_]?(m=[{from:g.x,to:g.x},{from:g.width,to:g.width},{from:d,to:g.y},{from:0,to:g.height}],C+=c):void 0!==_&&void 0!==p[_]&&(m=[{from:v.x,to:g.x},{from:v.width,to:g.width},{from:g.y,to:d},{from:g.height,to:0}],C=0,w=!0),null===(y=this.ctx.animationManager)||void 0===y||y.animateMany(`${this.id}_waiting-update-ready_${v.id}`,m,{disableInteractions:!0,delay:C,duration:c,ease:Nr,repeat:0,onUpdate([x,D,T,L]){v.x=x,v.width=D,v.y=T,v.height=L},onComplete(){w&&f.cleanup()}})})}),e.forEach(f=>{f.each(v=>{var g;v.opacity=0,null===(g=this.ctx.animationManager)||void 0===g||g.animate(`${this.id}_waiting-update-ready_${v.id}`,{from:0,to:1,delay:l,duration:200,ease:_g,repeat:0,onUpdate:y=>{v.opacity=y}})})})}resetSelectionRects(t){t.each((e,i)=>{e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height})}isLabelEnabled(){return this.label.enabled}}gt.className="HistogramSeries",gt.type="histogram",Dt([R(Ne)],gt.prototype,"fill",void 0),Dt([R(Ne)],gt.prototype,"stroke",void 0),Dt([R(K(0,1))],gt.prototype,"fillOpacity",void 0),Dt([R(K(0,1))],gt.prototype,"strokeOpacity",void 0),Dt([R(Mr)],gt.prototype,"lineDash",void 0),Dt([R(K(0))],gt.prototype,"lineDashOffset",void 0),Dt([R(ue)],gt.prototype,"xKey",void 0),Dt([R(Le)],gt.prototype,"areaPlot",void 0),Dt([R(qd())],gt.prototype,"bins",void 0),Dt([R(gL)],gt.prototype,"aggregation",void 0),Dt([R(xe(0))],gt.prototype,"binCount",void 0),Dt([R(ue)],gt.prototype,"xName",void 0),Dt([R(ue)],gt.prototype,"yKey",void 0),Dt([R(ue)],gt.prototype,"yName",void 0),Dt([R(K(0))],gt.prototype,"strokeWidth",void 0);var gi=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},qr=function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})};class Fy extends bt{constructor(){super(...arguments),this.formatter=void 0}}gi([R(je)],Fy.prototype,"formatter",void 0);class Lh extends Gn{constructor(){super(...arguments),this.renderer=void 0,this.format=void 0}}gi([R(je)],Lh.prototype,"renderer",void 0),gi([R(ue)],Lh.prototype,"format",void 0);class yi extends Ur{constructor(t){super({moduleCtx:t,hasMarkers:!0,pickModes:[ht.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,ht.NEAREST_NODE,ht.EXACT_SHAPE_MATCH]}),this.marker=new xu,this.label=new Fy,this.title=void 0,this.stroke="#874349",this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2,this.strokeOpacity=1,this.tooltip=new Lh,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0;const{marker:e,label:i}=this;e.fill="#c16068",e.stroke="#874349",i.enabled=!1}processData(t){return qr(this,void 0,void 0,function*(){const{axes:e,xKey:i="",yKey:n=""}=this,o=i&&n&&this.data?this.data:[],s=e[Y.X],a=e[Y.Y],l=s?.scale instanceof Me,u=a?.scale instanceof Me,{dataModel:c,processedData:d}=yield t.request(this.id,o??[],{props:[pt(this,i,l,{id:"xValue"}),pt(this,n,u,{id:"yValue",invalidValue:void 0})],dataVisible:this.visible});this.dataModel=c,this.processedData=d})}getDomain(t){const{axes:e,dataModel:i,processedData:n}=this;if(!n||!i)return[];const o=e[Y.X],s=e[Y.Y],a=i.resolveProcessedDataDefById(this,"xValue");if(t===Y.X){const l=i.getDomain(this,"xValue","value",n);return"value"===a?.def.type&&"category"===a.def.valueType?l:this.fixNumericExtent(Bn(l),o)}{const l=i.getDomain(this,"yValue","value",n);return this.fixNumericExtent(l,s)}}createNodeData(){var t,e,i,n,o;return qr(this,void 0,void 0,function*(){const{processedData:s,dataModel:a,axes:l,marker:{enabled:u,size:c,strokeWidth:d},ctx:{callbackCache:h}}=this,p=l[Y.X],f=l[Y.Y];if(!(s&&a&&p&&f))return[];const{label:v,yKey:g="",xKey:y="",id:m}=this,C=p.scale,w=f.scale,_=(null!==(t=C.bandwidth)&&void 0!==t?t:0)/2,b=(null!==(e=w.bandwidth)&&void 0!==e?e:0)/2,O=new Array(s.data.length),x=u?c:0,D=a.resolveProcessedDataIndexById(this,"xValue").index,T=a.resolveProcessedDataIndexById(this,"yValue").index;let A,N,L=!0,H=0;for(let j=0;j<s.data.length;j++){const{datum:z,values:B}=N??s.data[j],G=B[D],Z=B[T];if(void 0===Z)A=void 0,L=!0;else{const J=C.convert(G)+_;if(isNaN(J)){A=void 0,L=!0,N=void 0;continue}const Q=(null!==(i=C.bandwidth)&&void 0!==i?i:.5*c+(d??0))+1;N=void 0===(null===(n=s.data[j+1])||void 0===n?void 0:n.values[T])?void 0:s.data[j+1];const ye=null===(o=s.data[j+1])||void 0===o?void 0:o.values[D],me=p.inRangeEx(J,0,Q),Te=N&&p.inRangeEx(C.convert(ye)+_,0,Q);if(-1===me&&-1===Te){L=!0;continue}if(1===me&&1===A){L=!0;continue}A=me;const $=w.convert(Z)+b;let ae;v.formatter&&(ae=h.call(v.formatter,{value:Z,seriesId:m})),void 0!==ae||("number"==typeof Z&&isFinite(Z)?ae=Z.toFixed(2):Z&&(ae=String(Z))),O[H++]={series:this,datum:z,yKey:g,xKey:y,point:{x:J,y:$,moveTo:L,size:x},nodeMidPoint:{x:J,y:$},yValue:Z,xValue:G,label:ae?{text:ae,fontStyle:v.fontStyle,fontWeight:v.fontWeight,fontSize:v.fontSize,fontFamily:v.fontFamily,textAlign:"center",textBaseline:"bottom",fill:v.color}:void 0},L=!1}}return O.length=H,[{itemId:g,nodeData:O,labelData:O}]})}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(Gr(t))}updateMarkerSelection(t){return qr(this,void 0,void 0,function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:n,enabled:o}=this.marker;return e=n&&o?e:[],this.marker.isDirty()&&i.clear(),i.update(e)})}updateMarkerNodes(t){var e;return qr(this,void 0,void 0,function*(){const{markerSelection:i,isHighlight:n}=t,{marker:o,marker:{fillOpacity:s},xKey:a="",yKey:l="",stroke:u,strokeOpacity:c,highlightStyle:{item:{fill:d,fillOpacity:h=s,stroke:p,strokeWidth:f}},id:v,ctx:{callbackCache:g}}=this,{size:y,formatter:m}=o,C=null!==(e=o.strokeWidth)&&void 0!==e?e:this.strokeWidth,w="function"==typeof o.shape;i.each((_,b)=>{var O,x,D,T,L,A,N;const H=n&&void 0!==d?d:o.fill,j=n?h:s,z=n&&void 0!==p?p:null!==(O=o.stroke)&&void 0!==O?O:u,B=n&&void 0!==f?f:C;let G;m&&(G=g.call(m,{datum:b.datum,xKey:a,yKey:l,fill:H,stroke:z,strokeWidth:B,size:y,highlighted:n,seriesId:v})),_.fill=null!==(x=G?.fill)&&void 0!==x?x:H,_.stroke=null!==(D=G?.stroke)&&void 0!==D?D:z,_.strokeWidth=null!==(T=G?.strokeWidth)&&void 0!==T?T:B,_.fillOpacity=j??1,_.strokeOpacity=null!==(A=null!==(L=o.strokeOpacity)&&void 0!==L?L:c)&&void 0!==A?A:1,_.size=null!==(N=G?.size)&&void 0!==N?N:y,_.translationX=b.point.x,_.translationY=b.point.y,_.visible=_.size>0&&!isNaN(b.point.x)&&!isNaN(b.point.y),w&&!_.dirtyPath&&(_.path.clear({trackChanges:!0}),_.updatePath(),_.checkPathDirty())}),n||this.marker.markClean()})}updateLabelSelection(t){return qr(this,void 0,void 0,function*(){let{labelData:e}=t;const{labelSelection:i}=t,{shape:n,enabled:o}=this.marker;return e=n&&o?e:[],i.update(e)})}updateLabelNodes(t){return qr(this,void 0,void 0,function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:o,fontSize:s,fontFamily:a,color:l}=this.label;e.each((u,c)=>{const{point:d,label:h}=c;c&&h&&i?(u.fontStyle=n,u.fontWeight=o,u.fontSize=s,u.fontFamily=a,u.textAlign=h.textAlign,u.textBaseline=h.textBaseline,u.text=h.text,u.x=d.x,u.y=d.y-10,u.fill=l,u.visible=!0):u.visible=!1})})}getNodeClickEvent(t,e){var i,n;return new Ru(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,n;return new Ou(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getTooltipHtml(t){var e,i;const{xKey:n,yKey:o,axes:s}=this,a=s[Y.X],l=s[Y.Y];if(!(n&&o&&a&&l))return"";const{xName:u,yName:c,tooltip:d,marker:h,id:p}=this,{renderer:f,format:v}=d,{datum:g,xValue:y,yValue:m}=t,C=a.formatDatum(y),w=l.formatDatum(m),_=Ot(null!==(e=this.title)&&void 0!==e?e:c),b=Ot(C+": "+w),{formatter:O,fill:x,stroke:D,strokeWidth:T,size:L}=h;let N;O&&(N=O({datum:g,xKey:n,yKey:o,fill:x,stroke:D,strokeWidth:T??this.strokeWidth,size:L,highlighted:!1,seriesId:p}));const H=null!==(i=N?.fill)&&void 0!==i?i:x,j={title:_,backgroundColor:H,content:b};if(v||f){const z={datum:g,xKey:n,xValue:y,xName:u,yKey:o,yValue:m,yName:c,title:_,color:H,seriesId:p};if(v)return St({content:Dy(v,z)},j);if(f)return St(f(z),j)}return St(j)}getLegendData(){var t,e,i,n,o,s,a;const{id:l,data:u,xKey:c,yKey:d,yName:h,visible:p,title:f,marker:v,stroke:g,strokeOpacity:y}=this;return u?.length&&c&&d?[{legendType:"category",id:l,itemId:d,seriesId:l,enabled:p,label:{text:null!==(t=f??h)&&void 0!==t?t:d},marker:{shape:v.shape,fill:null!==(e=v.fill)&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==(n=null!==(i=v.stroke)&&void 0!==i?i:g)&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!==(o=v.fillOpacity)&&void 0!==o?o:1,strokeOpacity:null!==(a=null!==(s=v.strokeOpacity)&&void 0!==s?s:y)&&void 0!==a?a:1}}]:[]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e,contextData:i,paths:n}){i.forEach(({nodeData:o},s)=>{var a,l,u;const[c]=n[s],{path:d}=c,h=[0],p=o.reduce((y,m,C)=>{if(0===C)return y;const w=o[C-1];if(isNaN(m.point.x)||isNaN(m.point.y)||isNaN(w.point.x)||isNaN(w.point.y))return h.push(y),y;const _=Math.sqrt(Math.pow(m.point.x-w.point.x,2)+Math.pow(m.point.y-w.point.y,2));return h.push(y+_),y+_},0);c.fill=void 0,c.lineJoin="round",c.pointerEvents=Zt.None,c.stroke=this.stroke,c.strokeWidth=this.getStrokeWidth(this.strokeWidth),c.strokeOpacity=this.strokeOpacity,c.lineDash=this.lineDash,c.lineDashOffset=this.lineDashOffset;const f=null!==(l=null===(a=this.ctx.animationManager)||void 0===a?void 0:a.defaultOptions.duration)&&void 0!==l?l:1e3,g={from:0,to:p};null===(u=this.ctx.animationManager)||void 0===u||u.animate(`${this.id}_empty-update-ready`,Object.assign(Object.assign({},g),{duration:f,onUpdate(y){d.clear({trackChanges:!0}),o.forEach((m,C)=>{if(h[C]<=y)m.point.moveTo?d.moveTo(m.point.x,m.point.y):d.lineTo(m.point.x,m.point.y);else if(C>0&&h[C-1]<y){const w=o[C-1].point,_=m.point,b=h[C]-h[C-1],x=(b-(h[C]-y))/b,D=(1-x)*w.x+x*_.x,T=(1-x)*w.y+x*_.y;m.point.moveTo?d.moveTo(D,T):d.lineTo(D,T)}}),c.checkPathDirty()}})),t[s].each((y,m,C)=>{var w,_,b,O;const x=p>0?h[C]/p*f:0,D=this.animateFormatter(m),T=null!==(_=null===(w=m.point)||void 0===w?void 0:w.size)&&void 0!==_?_:0;null===(b=this.ctx.animationManager)||void 0===b||b.animate(`${this.id}_empty-update-ready_${y.id}`,Object.assign(Object.assign({},g),{to:null!==(O=D?.size)&&void 0!==O?O:T,delay:x,duration:200,onUpdate(L){y.size=L}}))}),e[s].each((y,m,C)=>{var w;null===(w=this.ctx.animationManager)||void 0===w||w.animate(`${this.id}_empty-update-ready_${y.id}`,{from:0,to:1,delay:h[C]/p*f,duration:200,onUpdate:b=>{y.opacity=b}})})})}animateReadyUpdate(t){this.resetMarkersAndPaths(t)}animateReadyResize(t){var e;null===(e=this.ctx.animationManager)||void 0===e||e.reset(),this.resetMarkersAndPaths(t)}resetMarkersAndPaths({markerSelections:t,contextData:e,paths:i}){e.forEach(({nodeData:n},o)=>{const[s]=i[o],{path:a}=s;s.stroke=this.stroke,s.strokeWidth=this.getStrokeWidth(this.strokeWidth),s.strokeOpacity=this.strokeOpacity,s.lineDash=this.lineDash,s.lineDashOffset=this.lineDashOffset,a.clear({trackChanges:!0}),n.forEach(l=>{l.point.moveTo?a.moveTo(l.point.x,l.point.y):a.lineTo(l.point.x,l.point.y)}),s.checkPathDirty(),t[o].each((l,u)=>{var c,d,h;const p=this.animateFormatter(u),f=null!==(d=null===(c=u.point)||void 0===c?void 0:c.size)&&void 0!==d?d:0;l.size=null!==(h=p?.size)&&void 0!==h?h:f})})}animateFormatter(t){var e,i;const{marker:n,xKey:o="",yKey:s="",stroke:a,id:l,ctx:{callbackCache:u}}=this,{size:c,formatter:d}=n,p=null!==(e=n.stroke)&&void 0!==e?e:a,f=null!==(i=n.strokeWidth)&&void 0!==i?i:this.strokeWidth;let v;return d&&(v=u.call(d,{datum:t.datum,xKey:o,yKey:s,fill:n.fill,stroke:p,strokeWidth:f,size:c,highlighted:!1,seriesId:l})),v}isLabelEnabled(){return this.label.enabled}}yi.className="LineSeries",yi.type="line",gi([R(ue)],yi.prototype,"title",void 0),gi([R(Ne)],yi.prototype,"stroke",void 0),gi([R(Mr)],yi.prototype,"lineDash",void 0),gi([R(K(0))],yi.prototype,"lineDashOffset",void 0),gi([R(K(0))],yi.prototype,"strokeWidth",void 0),gi([R(K(0,1))],yi.prototype,"strokeOpacity",void 0),gi([R(ue)],yi.prototype,"xKey",void 0),gi([R(ue)],yi.prototype,"xName",void 0),gi([R(ue)],yi.prototype,"yKey",void 0),gi([R(ue)],yi.prototype,"yName",void 0);class Iy{constructor(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(t=>fe.fromString(t))}update(){const{domain:t,range:e}=this;t.length<2&&(ee.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let n=1;n<t.length;n++)if(t[n-1]>=t[n]){ee.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((a,l)=>a-l);break}const i=e.length<t.length;if(i||t.length>2&&e.length>t.length)if(ee.warnOnce("Number of elements in `colorRange` needs to match the number of elements in `colorDomain`."),i)for(let n=e.length;n<t.length;n++)e.push("black");else e.splice(t.length);this.parsedRange=this.range.map(n=>fe.fromString(n))}convert(t){const{domain:e,range:i,parsedRange:n}=this,o=e[0],s=e[e.length-1];if(t<=o)return i[0];if(t>=s)return i[i.length-1];let u,c;if(2===e.length){const p=(t-o)/(s-o),f=1/(i.length-1);u=i.length<=2?0:Math.min(Math.floor(p*(i.length-1)),i.length-2),c=(p-u*f)/f}else{for(u=0;u<e.length-2&&!(t<e[u+1]);u++);const p=e[u];c=(t-p)/(e[u+1]-p)}return wg(n[u],n[u+1])(c)}}var Vt=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},Zr=function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})};class Ny extends bt{constructor(){super(...arguments),this.formatter=void 0}}Vt([R(je)],Ny.prototype,"formatter",void 0);class Gy extends xh{constructor(t,e,i,n,o,s){super(e,i,n,o,s),this.sizeKey=t}}class yL extends Gy{constructor(){super(...arguments),this.type="nodeClick"}}class mL extends Gy{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class ky extends Gn{constructor(){super(...arguments),this.renderer=void 0}}Vt([R(je)],ky.prototype,"renderer",void 0);class Mt extends Ur{constructor(t){super({moduleCtx:t,pickModes:[ht.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,ht.NEAREST_NODE,ht.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0}),this.sizeScale=new Su,this.marker=new xu,this.label=new Ny,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.sizeName="Size",this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.sizeKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorDomain=void 0,this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new Iy,this.tooltip=new ky;const{label:e}=this;e.enabled=!1}processData(t){var e,i;return Zr(this,void 0,void 0,function*(){const{xKey:n="",yKey:o="",sizeKey:s,labelKey:a,axes:l,marker:u,data:c}=this,d=l[Y.X],h=l[Y.Y],p=d?.scale instanceof Me,f=h?.scale instanceof Me,{colorScale:v,colorDomain:g,colorRange:y,colorKey:m}=this,{dataModel:C,processedData:w}=yield t.request(this.id,c??[],{props:[pt(this,n,p,{id:"xValue"}),pt(this,o,f,{id:"yValue"}),...s?[pt(this,s,!0,{id:"sizeValue"})]:[],...m?[pt(this,m,!0,{id:"colorValue"})]:[],...a?[pt(this,a,!1,{id:"labelValue"})]:[]],dataVisible:this.visible});if(this.dataModel=C,this.processedData=w,s){const _=C.resolveProcessedDataIndexById(this,"sizeValue").index,b=null!==(e=w.domain.values[_])&&void 0!==e?e:[];this.sizeScale.domain=u.domain?u.domain:b}if(m){const _=C.resolveProcessedDataIndexById(this,"colorValue").index;v.domain=null!==(i=g??w.domain.values[_])&&void 0!==i?i:[],v.range=y,v.update()}})}getDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n=t===Y.X?"xValue":"yValue",o=e.resolveProcessedDataDefById(this,n,"value"),s=e.getDomain(this,n,"value",i);if("value"===o?.def.type&&"category"===o?.def.valueType)return s;const a=this.axes[t];return this.fixNumericExtent(Bn(s),a)}getNodeClickEvent(t,e){var i,n;return new yL(this.sizeKey,null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,n;return new mL(this.sizeKey,null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}createNodeData(){var t,e,i,n,o,s;return Zr(this,void 0,void 0,function*(){const{visible:a,axes:l,yKey:u="",xKey:c="",label:d,labelKey:h,ctx:{callbackCache:p},dataModel:f,processedData:v}=this,g=l[Y.X],y=l[Y.Y];if(!(f&&v&&a&&g&&y))return[];const m=f.resolveProcessedDataIndexById(this,"xValue").index,C=f.resolveProcessedDataIndexById(this,"yValue").index,w=this.sizeKey?f.resolveProcessedDataIndexById(this,"sizeValue").index:-1,_=this.colorKey?f.resolveProcessedDataIndexById(this,"colorValue").index:-1,b=this.labelKey?f.resolveProcessedDataIndexById(this,"labelValue").index:-1,{colorScale:O,sizeKey:x,colorKey:D,id:T}=this,L=g.scale,A=y.scale,N=(null!==(t=L.bandwidth)&&void 0!==t?t:0)/2,H=(null!==(e=A.bandwidth)&&void 0!==e?e:0)/2,{sizeScale:j,marker:z}=this,B=new Array(null!==(n=null===(i=this.processedData)||void 0===i?void 0:i.data.length)&&void 0!==n?n:0);j.range=[z.size,z.maxSize];const G=d.getFont();let Z=0;for(const{values:J,datum:Q}of null!==(o=v.data)&&void 0!==o?o:[]){const ye=J[m],me=J[C],Te=L.convert(ye)+N,$=A.convert(me)+H;if(!this.checkRangeXY(Te,$,g,y))continue;let ae;d.formatter&&(ae=p.call(d.formatter,{value:me,seriesId:T,datum:Q})),void 0===ae&&(ae=h?String(J[b]):"");const Ee=qe.getTextSize(ae,G),Ie=x?j.convert(J[w]):z.size,nt=D?O.convert(J[_]):void 0;B[Z++]={series:this,itemId:u,yKey:u,xKey:c,datum:Q,xValue:ye,yValue:me,sizeValue:J[w],point:{x:Te,y:$,size:Ie},nodeMidPoint:{x:Te,y:$},fill:nt,label:Object.assign({text:ae},Ee)}}return B.length=Z,[{itemId:null!==(s=this.yKey)&&void 0!==s?s:this.id,nodeData:B,labelData:B}]})}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((e,i)=>e.concat(i.labelData),[])}markerFactory(){const{shape:t}=this.marker;return new(Gr(t))}updateMarkerSelection(t){return Zr(this,void 0,void 0,function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this;return this.marker.isDirty()&&i.clear(),i.update(n?e:[])})}updateMarkerNodes(t){return Zr(this,void 0,void 0,function*(){const{markerSelection:e,isHighlight:i}=t,{marker:n,xKey:o="",yKey:s="",sizeScale:a,marker:{fillOpacity:l,strokeOpacity:u,strokeWidth:c},highlightStyle:{item:{fill:d,fillOpacity:h=l,stroke:p,strokeWidth:f}},id:v,ctx:{callbackCache:g}}=this,{formatter:y}=n;a.range=[n.size,n.maxSize];const m="function"==typeof n.shape;e.each((C,w)=>{var _,b,O,x,D,T,L,A,N,H;const j=i&&void 0!==d?d:null!==(_=w.fill)&&void 0!==_?_:n.fill,z=i?h:l,B=i&&void 0!==p?p:n.stroke,G=u,Z=i&&void 0!==f?f:c??1,J=null!==(O=null===(b=w.point)||void 0===b?void 0:b.size)&&void 0!==O?O:0;let Q;y&&(Q=g.call(y,{datum:w.datum,xKey:o,yKey:s,fill:j,stroke:B,strokeWidth:Z,size:J,highlighted:i,seriesId:v})),C.fill=null!==(x=Q?.fill)&&void 0!==x?x:j,C.stroke=null!==(D=Q?.stroke)&&void 0!==D?D:B,C.strokeWidth=null!==(T=Q?.strokeWidth)&&void 0!==T?T:Z,C.fillOpacity=z??1,C.strokeOpacity=G??1,C.translationX=null!==(A=null===(L=w.point)||void 0===L?void 0:L.x)&&void 0!==A?A:0,C.translationY=null!==(H=null===(N=w.point)||void 0===N?void 0:N.y)&&void 0!==H?H:0,C.visible=C.size>0,m&&!C.dirtyPath&&(C.path.clear({trackChanges:!0}),C.updatePath(),C.checkPathDirty())}),i||this.marker.markClean()})}updateLabelSelection(t){var e,i;return Zr(this,void 0,void 0,function*(){const{labelSelection:n}=t,{label:{enabled:o}}=this,a=(o&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map(l=>Object.assign(Object.assign({},l.datum),{point:{x:l.x,y:l.y,size:l.datum.point.size}}));return n.update(a)})}updateLabelNodes(t){return Zr(this,void 0,void 0,function*(){const{labelSelection:e}=t,{label:i}=this;e.each((n,o)=>{var s,a,l,u;n.text=o.label.text,n.fill=i.color,n.x=null!==(a=null===(s=o.point)||void 0===s?void 0:s.x)&&void 0!==a?a:0,n.y=null!==(u=null===(l=o.point)||void 0===l?void 0:l.y)&&void 0!==u?u:0,n.fontStyle=i.fontStyle,n.fontWeight=i.fontWeight,n.fontSize=i.fontSize,n.fontFamily=i.fontFamily,n.textAlign="left",n.textBaseline="top"})})}getTooltipHtml(t){var e,i,n,o,s,a,l;const{xKey:u,yKey:c,axes:d}=this,h=d[Y.X],p=d[Y.Y];if(!(u&&c&&h&&p))return"";const{marker:f,tooltip:v,xName:g,yName:y,sizeKey:m,sizeName:C,labelKey:w,labelName:_,id:b,ctx:{callbackCache:O}}=this,{stroke:x}=f,D=null!==(e=t.fill)&&void 0!==e?e:f.fill,T=this.getStrokeWidth(null!==(i=f.strokeWidth)&&void 0!==i?i:1),{formatter:L}=this.marker;let A;L&&(A=O.call(L,{datum:t,xKey:u,yKey:c,fill:D,stroke:x,strokeWidth:T,size:null!==(o=null===(n=t.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0,highlighted:!1,seriesId:b}));const N=null!==(a=null!==(s=A?.fill)&&void 0!==s?s:D)&&void 0!==a?a:"gray",H=null!==(l=this.title)&&void 0!==l?l:y,{datum:j,xValue:z,yValue:B,sizeValue:G,label:{text:Z}}=t,J=Ot(h.formatDatum(z)),Q=Ot(p.formatDatum(B));let ye=`<b>${Ot(g??u)}</b>: ${J}<br><b>${Ot(y??c)}</b>: ${Q}`;m&&(ye+=`<br><b>${Ot(C??m)}</b>: ${Ot(G)}`),w&&(ye=`<b>${Ot(_??w)}</b>: ${Ot(Z)}<br>`+ye);const me={title:H,backgroundColor:N,content:ye},{renderer:Te}=v;return Te?St(Te({datum:j,xKey:u,xValue:z,xName:g,yKey:c,yValue:B,yName:y,sizeKey:m,sizeName:C,labelKey:w,labelName:_,title:H,color:N,seriesId:b}),me):St(me)}getLegendData(){var t,e,i,n,o;const{id:s,data:a,xKey:l,yKey:u,yName:c,title:d,visible:h,marker:p}=this,{fill:f,stroke:v,fillOpacity:g,strokeOpacity:y}=p;return a?.length&&l&&u?[{legendType:"category",id:s,itemId:u,seriesId:s,enabled:h,label:{text:null!==(t=d??c)&&void 0!==t?t:u},marker:{shape:p.shape,fill:null!==(i=null!==(e=p.fill)&&void 0!==e?e:f)&&void 0!==i?i:"rgba(0, 0, 0, 0)",stroke:null!==(o=null!==(n=p.stroke)&&void 0!==n?n:v)&&void 0!==o?o:"rgba(0, 0, 0, 0)",fillOpacity:g??1,strokeOpacity:y??1}}]:[]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e}){var i,n;const o=null!==(n=null===(i=this.ctx.animationManager)||void 0===i?void 0:i.defaultOptions.duration)&&void 0!==n?n:1e3;t.forEach(a=>{a.each((l,u)=>{var c,d,h,p;const f=this.animateFormatter(l,u),v=null!==(d=null===(c=u.point)||void 0===c?void 0:c.size)&&void 0!==d?d:0,g=null!==(h=f?.size)&&void 0!==h?h:v;null===(p=this.ctx.animationManager)||void 0===p||p.animate(`${this.id}_empty-update-ready_${l.id}`,{from:0,to:g,duration:o,onUpdate(y){l.size=y}})})}),e.forEach(a=>{a.each(l=>{var u;null===(u=this.ctx.animationManager)||void 0===u||u.animate(`${this.id}_empty-update-ready_${l.id}`,{from:0,to:1,delay:o,duration:200,onUpdate:c=>{l.opacity=c}})})})}animateReadyUpdate({markerSelections:t}){t.forEach(e=>{this.resetMarkers(e)})}animateReadyHighlightMarkers(t){this.resetMarkers(t)}resetMarkers(t){t.each((e,i)=>{var n,o,s;const a=this.animateFormatter(e,i),l=null!==(o=null===(n=i.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0;e.size=null!==(s=a?.size)&&void 0!==s?s:l})}animateFormatter(t,e){var i,n,o;const{xKey:s="",yKey:a="",marker:{strokeWidth:l},id:u,ctx:{callbackCache:c}}=this,{formatter:d}=this.marker,h=null!==(i=e.fill)&&void 0!==i?i:t.fill,v=null!==(o=null===(n=e.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0;let g;return d&&(g=c.call(d,{datum:e.datum,xKey:s,yKey:a,fill:h,stroke:t.stroke,strokeWidth:l??1,size:v,highlighted:!1,seriesId:u})),g}isLabelEnabled(){return this.label.enabled}}Mt.className="ScatterSeries",Mt.type="scatter",Vt([R(ue)],Mt.prototype,"title",void 0),Vt([R(ue)],Mt.prototype,"labelKey",void 0),Vt([R(ue)],Mt.prototype,"xName",void 0),Vt([R(ue)],Mt.prototype,"yName",void 0),Vt([R(ue)],Mt.prototype,"sizeName",void 0),Vt([R(ue)],Mt.prototype,"labelName",void 0),Vt([R(ue)],Mt.prototype,"xKey",void 0),Vt([R(ue)],Mt.prototype,"yKey",void 0),Vt([R(ue)],Mt.prototype,"sizeKey",void 0),Vt([R(ue)],Mt.prototype,"colorKey",void 0),Vt([R(ue)],Mt.prototype,"colorName",void 0),Vt([R(ig)],Mt.prototype,"colorDomain",void 0),Vt([R(sa)],Mt.prototype,"colorRange",void 0);class CL extends zi{constructor(t){super({moduleCtx:t,pickModes:[ht.EXACT_SHAPE_MATCH]})}getLabelData(){return[]}}var Be=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},_a=function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})};class Hy extends Gn{constructor(){super(...arguments),this.renderer=void 0}}Be([R(je)],Hy.prototype,"renderer",void 0);class Vy extends ua{constructor(t,e,i,n,o,s){super(n,o,s),this.labelKey=t,this.sizeKey=e,this.colorKey=i}}class wL extends Vy{constructor(){super(...arguments),this.type="nodeClick"}}class SL extends Vy{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class Mh extends bt{constructor(){super(...arguments),this.padding=10}}Be([R(K(0))],Mh.prototype,"padding",void 0);class Du extends bt{constructor(){super(...arguments),this.wrapping="on-space"}}Be([R(Qd)],Du.prototype,"wrapping",void 0);class Tu{constructor(){this.style=(()=>{const t=new bt;return t.color="white",t})()}}Be([R(ue)],Tu.prototype,"key",void 0),Be([R(ue)],Tu.prototype,"name",void 0),Be([R(je)],Tu.prototype,"formatter",void 0);var cr=function(r){return r[r.Name=0]="Name",r[r.Value=1]="Value",r}(cr||{});const _n=new le;function Qr(r,t){const{fontStyle:e,fontWeight:i,fontSize:n,fontFamily:o}=t;_n.fontStyle=e,_n.fontWeight=i,_n.fontSize=n,_n.fontFamily=o,_n.text=r,_n.x=0,_n.y=0,_n.textAlign="left",_n.textBaseline="top";const{width:s,height:a}=_n.computeBBox();return{width:s,height:a}}function Fh(r){return"string"!=typeof r||fe.validColorString(r)?r:(ee.warnOnce(`invalid Treemap tile colour string "${r}". Affected treemap tiles will be coloured black.`),"black")}class By{constructor(){this.color="black"}}Be([R(Ne)],By.prototype,"color",void 0);class _L extends oh{constructor(){super(...arguments),this.text=new By}}class tt extends CL{constructor(){super(...arguments),this.groupSelection=Ge.select(this.contentGroup,de),this.highlightSelection=Ge.select(this.highlightGroup,de),this.title=(()=>{const t=new Mh;return t.color="white",t.fontWeight="bold",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.padding=15,t})(),this.subtitle=(()=>{const t=new Mh;return t.color="white",t.fontSize=9,t.fontFamily="Verdana, sans-serif",t.padding=13,t})(),this.labels={large:(()=>{const t=new Du;return t.color="white",t.fontWeight="bold",t.fontSize=18,t})(),medium:(()=>{const t=new Du;return t.color="white",t.fontWeight="bold",t.fontSize=14,t})(),small:(()=>{const t=new Du;return t.color="white",t.fontWeight="bold",t.fontSize=10,t})(),formatter:void 0,value:new Tu},this.nodePadding=2,this.nodeGap=0,this.labelKey="label",this.sizeKey="size",this.colorKey="color",this.colorDomain=[-5,5],this.colorRange=["#cb4b3f","#6acb64"],this.groupFill="#272931",this.groupStroke="black",this.groupStrokeWidth=1,this.tileStroke="black",this.tileStrokeWidth=1,this.gradient=!0,this.formatter=void 0,this.colorName="Change",this.rootName="Root",this.highlightGroups=!0,this.tileShadow=new xo,this.labelShadow=new xo,this.tooltip=new Hy,this.highlightStyle=new _L}getNodePaddingTop(t,e){var i;const{title:n,subtitle:o,nodePadding:s}=this,a=t.label;if(t.isLeaf||!a||0===t.depth)return s;const l=t.depth>1?o:n,u=Qr(a,l);return l.fontSize>e.width/3||l.fontSize>e.height/3||u.height>=e.height?s:u.height+s+(null!==(i=l.padding)&&void 0!==i?i:0)}getNodePadding(t,e){const{nodePadding:i}=this;return{top:this.getNodePaddingTop(t,e),right:i,bottom:i,left:i}}squarify(t,e,i=new Map){if(e.width<=0||e.height<=0)return i;i.set(t,e);const o=this.getNodePadding(t,e),s=e.width-o.left-o.right,a=e.height-o.top-o.bottom;if(s<=0||a<=0||t.value<=0)return i;let l=0,u=0,c=1/0,d=t.value;const h=t.children,p=new be(e.x+o.left,e.y+o.top,s,a),f=p.clone();for(let y=0;y<h.length;y++){const m=h[y].value,w=f.width<f.height;l+=m;const _=w?f.height:f.width,b=w?f.width:f.height,O=b*h[u].value/l;let x=_*l/d;const D=Math.max(O,x)/Math.min(O,x),T=Math.abs(1-D);if(T<c){c=T;continue}l-=m,x=_*l/d;let L=w?f.x:f.y;for(let A=u;A<y;A++){const N=h[A],z=b*N.value/l,Z=new be(w?L:f.x,w?f.y:L,w?z:x,w?x:z);this.applyGap(p,Z),this.squarify(N,Z,i),d-=N.value,L+=z}w?(f.y+=x,f.height-=x):(f.x+=x,f.width-=x),u=y,l=0,c=1/0,y--}const v=f.width<f.height;let g=v?f.x:f.y;for(let y=u;y<h.length;y++){const w=h[y].value/d,_=f.width*(v?w:1),b=f.height*(v?1:w),O=new be(v?g:f.x,v?f.y:g,_,b);this.applyGap(p,O),this.squarify(h[y],O,i),g+=v?_:b}return i}applyGap(t,e){const i=this.nodeGap/2,n=l=>({left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height}),o=n(t),s=n(e);Object.keys(o).forEach(l=>{wh(o[l],s[l])||e.shrink(i,l)})}processData(){return _a(this,void 0,void 0,function*(){if(!this.data)return;const{data:t,sizeKey:e,labelKey:i,colorKey:n,colorDomain:o,colorRange:s,groupFill:a}=this,l=this.labels.formatter,u=new Iy;u.domain=o,u.range=s,u.update();const c=(d,h=0,p)=>{var f,v,g,y;let m;l&&(m=this.ctx.callbackCache.call(l,{datum:d})),void 0!==m||(m=i&&null!==(f=d[i])&&void 0!==f?f:"");let C=n&&null!==(v=d[n])&&void 0!==v?v:h;C=Fh(C);const w=!d.children;let _=a;"string"==typeof C?_=C:(w||!a)&&(_=u.convert(C));const b={datum:d,depth:h,parent:p,value:0,label:m,fill:_,series:this,isLeaf:w,children:[]};return w?b.value=e&&null!==(g=d[e])&&void 0!==g?g:1:(null===(y=d.children)||void 0===y||y.forEach(O=>{const x=c(O,h+1,b),D=x.value;isNaN(D)||!isFinite(D)||0===D||(b.value+=D,b.children.push(x))}),b.children.sort((O,x)=>x.value-O.value)),b};this.dataRoot=c(t)})}createNodeData(){return _a(this,void 0,void 0,function*(){return[]})}update(){return _a(this,void 0,void 0,function*(){yield this.updateSelections(),yield this.updateNodes()})}updateSelections(){return _a(this,void 0,void 0,function*(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t,dataRoot:e}=this;if(!t||!e||!t.getSeriesRect())return;const n=[],o=u=>{var c;n.push(u),null===(c=u.children)||void 0===c||c.forEach(o)};o(e);const{groupSelection:s,highlightSelection:a}=this,l=u=>u.update(n,c=>{const d=new vi,h=new le;h.tag=cr.Name;const p=new le;p.tag=cr.Value,c.append([d,h,p])});this.groupSelection=l(s),this.highlightSelection=l(a)})}isDatumHighlighted(t){var e;return t===(null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&(t.isLeaf||this.highlightGroups)}getTileFormat(t,e){var i;const{formatter:n,ctx:{callbackCache:o}}=this;if(!n)return{};const{gradient:s,colorKey:a,labelKey:l,sizeKey:u,tileStroke:c,tileStrokeWidth:d,groupStroke:h,groupStrokeWidth:p}=this;return o.call(n,{seriesId:this.id,datum:t.datum,depth:t.depth,parent:null===(i=t.parent)||void 0===i?void 0:i.datum,colorKey:a,sizeKey:u,labelKey:l,fill:t.fill,stroke:t.isLeaf?c:h,strokeWidth:t.isLeaf?d:p,gradient:s,highlighted:e})??{}}updateNodes(){return _a(this,void 0,void 0,function*(){if(!this.chart)return;const{gradient:t,highlightStyle:{item:{fill:e,fillOpacity:i,stroke:n,strokeWidth:o},text:{color:s}},tileStroke:a,tileStrokeWidth:l,groupStroke:u,groupStrokeWidth:c,tileShadow:d,labelShadow:h,dataRoot:p}=this;if(!p)return;const f=this.chart.getSeriesRect(),v=this.squarify(p,new be(0,0,f.width,f.height)),g=this.buildLabelMeta(v),y=this.getHighlightedSubtree(p);this.updateNodeMidPoint(v);const m=(w,_,b)=>{var O,x,D,T,L,A;const N=v.get(_);if(!N)return void(w.visible=!1);const H=b&&void 0!==e?e:_.fill,j=null!==(O=b?i:1)&&void 0!==O?O:1;let z=u;b&&void 0!==n?z=n:_.isLeaf&&(z=a);let B=c;b&&void 0!==o?B=o:_.isLeaf&&(B=l);const G=this.getTileFormat(_,b),Z=Fh(null!==(x=G?.fill)&&void 0!==x?x:H);if(null!==(D=G?.gradient)&&void 0!==D?D:t){const J=fe.tryParseFromString(H).brighter().toString(),Q=fe.tryParseFromString(H).darker().toString();w.fill=`linear-gradient(180deg, ${J}, ${Q})`}else w.fill=Z;w.fillOpacity=null!==(T=G?.fillOpacity)&&void 0!==T?T:j,w.stroke=Fh(null!==(L=G?.stroke)&&void 0!==L?L:z),w.strokeWidth=null!==(A=G?.strokeWidth)&&void 0!==A?A:B,w.fillShadow=d,w.crisp=!0,w.x=N.x,w.y=N.y,w.width=N.width,w.height=N.height,w.visible=!0};this.groupSelection.selectByClass(vi).forEach(w=>m(w,w.datum,!1)),this.highlightSelection.selectByClass(vi).forEach(w=>{const _=this.isDatumHighlighted(w.datum);w.visible=_||y.has(w.datum),w.visible&&m(w,w.datum,_)});const C=(w,_,b,O)=>{const x=g.get(_),D=x?.[O];D?(w.text=D.text,w.fontFamily=D.style.fontFamily,w.fontSize=D.style.fontSize,w.fontWeight=D.style.fontWeight,w.fill=b?s??D.style.color:D.style.color,w.fillShadow=b?void 0:h,w.textAlign=D.hAlign,w.textBaseline=D.vAlign,w.x=D.x,w.y=D.y,w.visible=!0):w.visible=!1};this.groupSelection.selectByTag(cr.Name).forEach(w=>C(w,w.datum,!1,"label")),this.highlightSelection.selectByTag(cr.Name).forEach(w=>{const _=this.isDatumHighlighted(w.datum);w.visible=_||y.has(w.datum),w.visible&&C(w,w.datum,_,"label")}),this.groupSelection.selectByTag(cr.Value).forEach(w=>C(w,w.datum,!1,"value")),this.highlightSelection.selectByTag(cr.Value).forEach(w=>{const _=this.isDatumHighlighted(w.datum);w.visible=_||y.has(w.datum),w.visible&&C(w,w.datum,_,"value")})})}updateNodeMidPoint(t){t.forEach((e,i)=>{i.nodeMidPoint={x:e.x+e.width/2,y:e.y}})}getHighlightedSubtree(t){const e=new Set,i=n=>{var o;(this.isDatumHighlighted(n)||n.parent&&e.has(n.parent))&&e.add(n),null===(o=n.children)||void 0===o||o.forEach(i)};return i(t),e}buildLabelMeta(t){const{labels:e,title:i,subtitle:n,nodePadding:o,labelKey:s,ctx:{callbackCache:a}}=this,l=/-$/m,u=new Map;return t.forEach((c,d)=>{var h,p,f;if(!s||0===d.depth)return;const v=c.width-2*o,g=c.height-2*o,y=A=>A.fontSize>c.width/3||A.fontSize>c.height/3;let m=d.isLeaf?d.label:d.label.toUpperCase(),C="";const w=e.value,_=w.style,b=Math.ceil(2*_.fontSize*(le.defaultLineHeightRatio-1));d.isLeaf&&(w.formatter?C=null!==(h=a.call(w.formatter,{datum:d.datum}))&&void 0!==h?h:"":w.key&&(C=d.datum[w.key]));let O=Qr(C,_);C&&O.width>v&&(C="");let x,D="";if(d.isLeaf){const A=()=>{const H=g-(C?_.fontSize+b:0),j=[e.large,e.medium,e.small];for(const B of j){const{width:G,height:Z}=Qr(m,B);if(Z>H||y(B))continue;if(G<=v)return{style:B,wrappedText:void 0};const J=le.wrap(m,v,H,B,B.wrapping);if(J&&"\u2026"!==J&&(B===e.small||!l.exec(J)&&!J.endsWith("\u2026")))return{style:B,wrappedText:J}}return Qr(m,e.small).height<=H&&!y(e.small)?{style:e.small,wrappedText:void 0}:{style:void 0,wrappedText:void 0}};let N=A();!N.style&&C&&(C="",N=A()),x=null!==(p=N.style)&&void 0!==p?p:e.small,D=null!==(f=N.wrappedText)&&void 0!==f?f:""}else x=1===d.depth?i:n;const T=Qr(D||m,x);if(y(x))return;if(T.width>v){const A=Math.floor(m.length*v/T.width)-1;m=`${m.substring(0,A).trim()}\u2026`}O=Qr(C,_);const L=C&&O.width<v&&O.height+T.height+b<g;u.set(d,{label:Object.assign({text:D||m,style:x},d.isLeaf?{hAlign:"center",vAlign:"middle",x:c.x+c.width/2,y:c.y+c.height/2-(L?O.height/2+b/2:0)}:{hAlign:"left",vAlign:"top",x:c.x+o,y:c.y+o}),value:L?{text:C,style:_,hAlign:"center",vAlign:"middle",x:c.x+c.width/2,y:c.y+c.height/2+T.height/2+b/2}:void 0})}),u}getDomain(t){return[0,1]}getNodeClickEvent(t,e){return new wL(this.labelKey,this.sizeKey,this.colorKey,t,e,this)}getNodeDoubleClickEvent(t,e){return new SL(this.labelKey,this.sizeKey,this.colorKey,t,e,this)}getTooltipHtml(t){var e,i,n,o;if(!this.highlightGroups&&!t.isLeaf)return"";const{tooltip:s,sizeKey:a,labelKey:l,colorKey:u,rootName:c,id:d,labels:h,ctx:{callbackCache:p}}=this,{datum:f}=t,{renderer:v}=s,g=t.depth?f[l]:null!==(e=f[l])&&void 0!==e?e:c;let y="";const m=this.getTileFormat(t,!1),C=null!==(n=null!==(i=m?.fill)&&void 0!==i?i:t.fill)&&void 0!==n?n:"gray",w=h.value.key,_=h.value.formatter;if(w||_){let O="";if(_)O=p.call(_,{datum:f});else if(null!=w){const x=f[w];"number"==typeof x&&isFinite(x)&&(O=Kg(x))}O&&(h.value.name&&(y+=`<b>${h.value.name}:</b> `),y+=O)}const b={title:g,backgroundColor:C,content:y};return v?St(v({datum:t.datum,parent:null===(o=t.parent)||void 0===o?void 0:o.datum,depth:t.depth,sizeKey:a,labelKey:l,colorKey:u,title:g,color:C,seriesId:d}),b):g||y?St(b):""}getLegendData(){return[]}}tt.className="TreemapSeries",tt.type="treemap",Be([R(K(0))],tt.prototype,"nodePadding",void 0),Be([R(K(0))],tt.prototype,"nodeGap",void 0),Be([R(wt)],tt.prototype,"labelKey",void 0),Be([R(ue)],tt.prototype,"sizeKey",void 0),Be([R(ue)],tt.prototype,"colorKey",void 0),Be([R(tg)],tt.prototype,"colorDomain",void 0),Be([R(sa)],tt.prototype,"colorRange",void 0),Be([R(ue)],tt.prototype,"groupFill",void 0),Be([R(Ne)],tt.prototype,"groupStroke",void 0),Be([R(xe(0))],tt.prototype,"groupStrokeWidth",void 0),Be([R(Ne)],tt.prototype,"tileStroke",void 0),Be([R(xe(0))],tt.prototype,"tileStrokeWidth",void 0),Be([R(Le)],tt.prototype,"gradient",void 0),Be([R(je)],tt.prototype,"formatter",void 0),Be([R(wt)],tt.prototype,"colorName",void 0),Be([R(wt)],tt.prototype,"rootName",void 0),Be([R(pn)],tt.prototype,"highlightGroups",void 0);const Jr={area:"cartesian",bar:"cartesian",column:"cartesian",histogram:"cartesian",line:"cartesian",scatter:"cartesian",treemap:"hierarchy",pie:"polar"},Ih={},it={has:r=>Object.prototype.hasOwnProperty.call(Jr,r),isCartesian:r=>"cartesian"===Jr[r],isPolar:r=>"polar"===Jr[r],isHierarchy:r=>"hierarchy"===Jr[r],get seriesTypes(){return Object.keys(Jr)},get cartesianTypes(){return this.seriesTypes.filter(r=>this.isCartesian(r))},get polarTypes(){return this.seriesTypes.filter(r=>this.isPolar(r))},get hierarchyTypes(){return this.seriesTypes.filter(r=>this.isHierarchy(r))}};function bL(r,t){var e;Ih[r]=Qe([null!==(e=Ih[r])&&void 0!==e?e:{},t])}function Wy(r){var t;return null!==(t=Ih[r])&&void 0!==t?t:{}}const RL={area:Ht,bar:vt,column:fL,histogram:gt,line:yi,pie:Fe,scatter:Mt,treemap:tt},jy={},Uy={},zy={},Ky={};function OL(r,t,e,i,n,o){jy[r]=e,Uy[r]=i,zy[r]=n,o&&Po(r,o),function EL(r,t){Jr[r]=t}(r,t)}function xL(r,t){var e;const i=null!==(e=jy[r])&&void 0!==e?e:RL[r];if(i)return new i(t);throw new Error(`AG Charts - unknown series type: ${r}`)}function $y(r){return Uy[r]}function Yy(r){return zy[r]}function Po(r,t){Ky[r]=t}const TL={axes:[{type:Do.type,position:"left"},{type:Un.type,position:"bottom"}]},PL={axes:[{type:"number",position:"bottom"},{type:"category",position:"left"}]},AL={axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]};function En(r,t){if(Xy(r)&&Xy(t)){const e={};return Object.keys(r).forEach(i=>{e[i]=i in t?En(r[i],t[i]):r[i]}),Object.keys(t).forEach(i=>{i in r||(e[i]=t[i])}),e}return Array.isArray(r)&&!Array.isArray(t)||Nh(r)&&!Nh(t)?r:t}function Nh(r){return r&&"object"==typeof r}function Xy(r){return Nh(r)&&r.constructor===Object}const LL={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]},ML=Symbol("extends-axes-defaults"),FL=Symbol("extends-axes-label-defaults"),IL=Symbol("extends-axes-line-defaults"),NL=Symbol("extends-series-defaults"),qy=Symbol("override-series-label-defaults"),GL=Symbol("default-font");class se{constructor(t){t=En({},t??{});const{overrides:e=null,palette:i=null}=t,n=this.createChartConfigPerChartType(this.getDefaults());if(e){const{common:o,cartesian:s,polar:a,hierarchy:l}=e,u=(c,d,h)=>{h&&(n[c]=En(n[c],h),d.forEach(p=>{n[p]=En(n[p],h)}))};u("common",Object.keys(n),o),u("cartesian",it.cartesianTypes,s),u("polar",it.polarTypes,a),u("hierarchy",it.hierarchyTypes,l),it.seriesTypes.forEach(c=>{const d=c,h=e[d];h&&(h.series&&(h.series={[d]:h.series}),n[d]=En(n[d],h))})}this.palette=i??this.getPalette(),this.config=Object.freeze(n)}getPalette(){return LL}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:void 0,color:"rgb(87, 87, 87)",formatter:void 0,autoRotate:!1,avoidCollisions:!0},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}],crossLines:{enabled:!1,fill:"rgb(187,221,232)",stroke:"rgb(70,162,192)",strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,color:"rgb(87, 87, 87)",rotation:void 0}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"yellow",fillOpacity:1},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getBarSeriesDefaults(){return Object.assign(Object.assign({},this.getSeriesDefaults()),{fillOpacity:1,strokeOpacity:1,normalizedTo:void 0,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})}static getLineSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{tooltip:Object.assign(Object.assign({},t.tooltip),{format:void 0,position:{type:"node"}})})}static getAreaSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{nodeClickRange:"nearest",tooltip:Object.assign(Object.assign({},t.tooltip),{position:{type:"node"}})})}static getScatterSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{tooltip:Object.assign(Object.assign({},t.tooltip),{position:{type:"node"}})})}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:void 0}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:"bold",fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",wrapping:se.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",wrapping:se.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",spacing:30,wrapping:se.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:20,listeners:{},item:{paddingX:16,paddingY:8,marker:{shape:void 0,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:"rgb(70, 70, 70)"},inactiveStyle:{fill:"rgb(219, 219, 219)"},highlightStyle:{fill:"rgb(70, 70, 70)"},label:{color:"rgb(70, 70, 70)"}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}createChartConfigPerChartType(t){return Object.entries({cartesian:it.cartesianTypes,polar:it.polarTypes,hierarchy:it.hierarchyTypes,groupedCategory:[]}).forEach(([i,n])=>{const o=i,s=this.templateTheme(Wy(o));n.forEach(a=>{const l=a;t[l]||(t[l]=En({},t[o]),En(t[l],s))})}),t}getDefaults(){const t=En({},se.defaults),e=(n,o)=>{const s=this.templateTheme(Wy(n));return s.series=o.reduce((a,l)=>{const u=Yy(l);return u&&(a[l]=this.templateTheme(u)),a},{}),("cartesian"===n||"polar"===n)&&(s.axes=Oh.axesTypes.reduce((a,l)=>{const u=function JA(r){var t;return null!==(t=Ry[r])&&void 0!==t?t:{}}(l);return u&&(a[l]=this.templateTheme(u)),a},{})),s};return En(t,{cartesian:e("cartesian",it.cartesianTypes),groupedCategory:e("cartesian",it.cartesianTypes),polar:e("polar",it.polarTypes),hierarchy:e("hierarchy",it.hierarchyTypes)})}templateTheme(t){const e=Qe([t]),{extensions:i,properties:n}=this.getTemplateParameters();return Ir(e,(o,s)=>{if(s.__extends__){const a=s.__extends__,l=i.get(a);if(null==l)throw new Error("AG Charts - no template variable provided for: "+a);Object.keys(l).forEach(u=>{u in s||(s[u]=l[u])}),delete s.__extends__}if(s.__overrides__){const a=s.__overrides__,l=i.get(a);if(null==l)throw new Error("AG Charts - no template variable provided for: "+a);Object.assign(s,l),delete s.__overrides__}for(const[a,l]of Object.entries(s))n.has(l)&&(s[a]=n.get(l))},{}),e}getTemplateParameters(){const t=new Map;t.set(ML,se.getAxisDefaults()),t.set(FL,se.getAxisDefaults().label),t.set(IL,se.getAxisDefaults().line),t.set(NL,se.getSeriesDefaults()),t.set(qy,{});const e=new Map;return e.set(GL,se.fontFamily),{extensions:t,properties:e}}mergeWithParentDefaults(t,e){return En(t,e)}}se.fontFamily="Verdana, sans-serif",se.cartesianDefaults=Object.assign(Object.assign({},se.getChartDefaults()),{axes:{number:Object.assign({},se.getAxisDefaults()),log:Object.assign(Object.assign({},se.getAxisDefaults()),{base:10}),category:Object.assign(Object.assign({},se.getAxisDefaults()),{groupPaddingInner:.1,label:Object.assign(Object.assign({},se.getAxisDefaults().label),{autoRotate:!0})}),groupedCategory:Object.assign({},se.getAxisDefaults()),time:Object.assign({},se.getAxisDefaults())},series:{column:Object.assign({},se.getBarSeriesDefaults()),bar:Object.assign({},se.getBarSeriesDefaults()),line:Object.assign(Object.assign({},se.getLineSeriesDefaults()),{title:void 0,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:Object.assign(Object.assign({},se.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:se.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),scatter:Object.assign(Object.assign({},se.getScatterSeriesDefaults()),{sizeName:"Size",labelName:"Label",marker:Object.assign({},se.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:se.fontFamily,color:"rgb(70, 70, 70)"}}),area:Object.assign(Object.assign({},se.getAreaSeriesDefaults()),{normalizedTo:void 0,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:Object.assign(Object.assign({},se.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1,enabled:!1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:se.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),histogram:Object.assign(Object.assign({},se.getSeriesDefaults()),{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:!1,bins:void 0,aggregation:"sum",label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:se.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0},shadow:{enabled:!0,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})}}),se.polarDefaults=Object.assign(Object.assign({},se.getChartDefaults()),{series:{pie:Object.assign(Object.assign({},se.getSeriesDefaults()),{title:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:se.fontFamily,color:"rgb(70, 70, 70)",spacing:0},radiusKey:void 0,radiusName:void 0,calloutLabelKey:void 0,calloutLabelName:void 0,sectorLabelKey:void 0,sectorLabelName:void 0,calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:se.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:se.fontFamily,color:"rgb(70, 70, 70)",positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:se.fontFamily,color:"rgb(70, 70, 70)",margin:2}})}}),se.hierarchyDefaults=Object.assign(Object.assign({},se.getChartDefaults()),{series:{treemap:Object.assign(Object.assign({},se.getSeriesDefaults()),{showInLegend:!1,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],groupFill:"#272931",groupStroke:"black",groupStrokeWidth:1,tileStroke:"black",tileStrokeWidth:1,gradient:!0,tileShadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},labelShadow:{enabled:!0,color:"rgba(0, 0, 0, 0.4)",xOffset:1.5,yOffset:1.5,blur:5},highlightGroups:!0,nodePadding:2,nodeGap:0,title:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:2},subtitle:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:void 0,fontSize:9,fontFamily:"Verdana, sans-serif",padding:2},labels:{large:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},medium:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},small:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},value:{style:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}}})}}),se.defaults={cartesian:se.cartesianDefaults,groupedCategory:se.cartesianDefaults,polar:se.polarDefaults,hierarchy:se.hierarchyDefaults};class mi extends se{constructor(t){super(t)}getDefaults(){const t=mi.fontColor,e=mi.mutedFontColor,i={title:{color:t},label:{color:t},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]},n={label:{color:t}},o={axes:{number:Object.assign({},i),category:Object.assign({},i),time:Object.assign({},i)}},s={background:{fill:"rgb(34, 38, 41)"},title:{color:t},subtitle:{color:e},legend:{item:{label:{color:t}},pagination:{activeStyle:{fill:t},inactiveStyle:{fill:e},highlightStyle:{fill:t},label:{color:t}}}},a=l=>l.reduce((u,c)=>{const d=Yy(c);return d&&(u[c]=this.templateTheme(d)),u},{});return this.mergeWithParentDefaults(super.getDefaults(),{cartesian:Object.assign(Object.assign(Object.assign({},s),o),{series:Object.assign({line:Object.assign({},n),bar:Object.assign({},n),column:Object.assign({},n),histogram:Object.assign({},n)},a(it.cartesianTypes))}),groupedCategory:Object.assign(Object.assign(Object.assign({},s),o),{series:Object.assign({bar:Object.assign({},n),column:Object.assign({},n),histogram:Object.assign({},n)},a(it.cartesianTypes))}),polar:Object.assign(Object.assign({},s),{series:Object.assign({pie:{calloutLabel:{color:t},sectorLabel:{color:t},title:{color:t},innerLabels:{color:t}}},a(it.polarTypes))}),hierarchy:Object.assign(Object.assign({},s),{series:Object.assign({treemap:{tileStroke:"white",groupStroke:"white",title:{color:t},subtitle:{color:e},labels:{large:{color:t},medium:{color:t},small:{color:t},value:{style:{color:t}}}}},a(it.hierarchyTypes))})})}getTemplateParameters(){const t=super.getTemplateParameters();return t.extensions.set(qy,mi.seriesLabelDefaults.label),t}}mi.fontColor="rgb(200, 200, 200)",mi.mutedFontColor="rgb(150, 150, 150)",mi.seriesLabelDefaults={label:{color:mi.fontColor}};const VL={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};class BL extends se{getPalette(){return VL}}const WL={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};class jL extends mi{getPalette(){return WL}}const UL={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};class zL extends se{getPalette(){return UL}}const KL={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};class $L extends mi{getPalette(){return KL}}const YL={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};class XL extends se{getPalette(){return YL}}const qL={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};class ZL extends mi{getPalette(){return qL}}const QL={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};class JL extends se{getPalette(){return QL}}const eM={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};class tM extends mi{getPalette(){return eM}}const Pu=()=>new se,Gh=()=>new mi,iM={undefined:Pu,null:Pu,"ag-default":Pu,"ag-material":()=>new BL,"ag-pastel":()=>new zL,"ag-solar":()=>new XL,"ag-vivid":()=>new JL},Qy=Object.assign(Object.assign({},{undefined:Gh,null:Gh,"ag-default-dark":Gh,"ag-material-dark":()=>new jL,"ag-pastel-dark":()=>new $L,"ag-solar-dark":()=>new ZL,"ag-vivid-dark":()=>new tM}),iM);function Jy(r){var t;if(r instanceof se)return r;const e=Qy[r];if(e)return e();const i=[];let n;for(;"object"==typeof r;)i.push(null!==(t=r.overrides)&&void 0!==t?t:{}),r.palette&&null==n&&(n=r.palette),r=r.baseTheme;i.reverse();const o=Object.assign({baseTheme:r,overrides:Qe(i)},n?{palette:n}:{});return o.baseTheme||o.overrides?new(Jy(o.baseTheme).constructor)(o):Pu()}const nM=["bar","column","area"],oM=["bar","column"],sM=()=>[!0,"opts"].includes(Bi("agChartsDebug"));function es(r){var t,e,i,n;return null!==(n=null!==(t=r.type)&&void 0!==t?t:null===(i=null===(e=r.series)||void 0===e?void 0:e[0])||void 0===i?void 0:i.type)&&void 0!==n?n:"line"}function ts(r){const t=es(r);return null==t||("cartesian"===t?(ee.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):it.isCartesian(t))}function Au(r){const t=es(r);return null!=t&&("hierarchy"===t?(ee.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):it.isHierarchy(t))}function Lu(r){const t=es(r);return null!=t&&("polar"===t?(ee.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):it.isPolar(t))}function em(r){return null!=r&&it.has(r)}function tm(r){let t=0;for(const e of r)e instanceof Array&&(t+=tm(e)),null!=e&&t++;return t}function im(r,t,e){const i=[];for(let n=0;n<e;n++)i.push(t[(n+r.colourIndex)%t.length]);return i}const Ao={avoidDeepClone:["data"]};function uM(r,t){var e,i,n,o,s,a;let l=Qe([t,r],Ao);!function cM(r){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([e,i])=>{var n;null!==(n=r.series)&&void 0!==n&&n.some(o=>null!=o[e])&&ee.warnOnce(`property [series.${e}] is deprecated, please use [series.${i}] and multiple series instead.`)})}(l);const u=l.type,c=es(l),d=null!==(i=null===(e=l.tooltip)||void 0===e?void 0:e.position)&&void 0!==i?i:{},h=_=>{if(null!=_&&!em(_)&&!$y(_))throw new Error(`AG Charts - unknown series type: ${_}; expected one of: ${it.seriesTypes}`)};h(c);for(const{type:_}of null!==(n=l.series)&&void 0!==n?n:[])null!=_&&h(_);l=Object.assign(Object.assign({},l),{type:c});let p="line";ts(l)?p="line":Au(l)?p="treemap":Lu(l)&&(p="pie");let f={};const v=$y(c);v?f=v:"bar"===c?f=PL:"scatter"===c||"histogram"===c?f=AL:ts(l)&&(f=TL),function yM(r){Ir(r,(t,e)=>{"enabled"in e&&!1===e.enabled&&Object.entries(e).forEach(([i])=>{"enabled"!==i&&delete e[i]})},{skip:["data","theme"]})}(l);const{context:g,mergedOptions:y,axesThemes:m,seriesThemes:C}=function hM(r,t){const{theme:e,cleanedTheme:i,axesThemes:n,seriesThemes:o}=function pM(r){var t,e;const i=Jy(r.theme),n=i.config[null!==(t=es(r))&&void 0!==t?t:"cartesian"],o=Object.entries(i.config).reduce((s,[a,{series:l}])=>(s[a]=l?.[a],s),{});return{theme:i,axesThemes:null!==(e=n.axes)&&void 0!==e?e:{},seriesThemes:o,cleanedTheme:Qe([n,{axes:Ki,series:Ki}])}}(t);return{context:{colourIndex:0,palette:e.palette},mergedOptions:Qe([r,i,t],Ao),axesThemes:n,seriesThemes:o}}(f,l);y.series=function aM(r,t){const e=[],n=function rM(r){var t,e,i,n,o,s;const a={},l={},u={},d=[];for(const h of r){const p=null!==(t=h.type)&&void 0!==t?t:"line",f=nM.includes(p),v=oM.includes(p);if(!f&&!v){d.push({type:"ungrouped",opts:[h]});continue}const{stacked:g,stackGroup:y,grouped:m,xKey:C}=h,w=null!=y||!0===g;null!==(e=u[p])&&void 0!==e||(u[p]=!1),u[p]||(u[p]=w);const _=!0===m;let b=[y??(!0===g?"stacked":void 0),_?"grouped":void 0].filter(x=>null!=x).join("-");b||(b="default-ag-charts-group");const O=`${p}-${C}-${b}`;if(w&&f){const x=null!==(i=l[O])&&void 0!==i?i:l[O]={type:"stack",opts:[]};0===x.opts.length&&d.push(x),x.opts.push(h)}else if(_&&v){const x=null!==(n=a[O])&&void 0!==n?n:a[O]={type:"group",opts:[]};0===x.opts.length&&d.push(x),x.opts.push(h)}else d.push({type:"ungrouped",opts:[h]})}if(!Object.values(u).some(h=>h))return d;for(const[,h]of Object.entries(a))!0===u[null!==(s=null===(o=h.opts[0])||void 0===o?void 0:o.type)&&void 0!==s?s:"line"]&&(h.type="stack");return d}(t.map(l=>{var u;return"bar"!==l.type&&"column"!==l.type||null==l.yKey||l.stacked?l:Object.assign(Object.assign({},l),{grouped:null===(u=l.grouped)||void 0===u||u})})),o=n.reduce((l,u)=>{var c,d;if("ungrouped"===u.type)return l;const h=null!==(c=u.opts[0].type)&&void 0!==c?c:"line";return null!==(d=l[h])&&void 0!==d||(l[h]=0),l[h]+="stack"===u.type?1:u.opts.length,l},{}),s={},a=l=>{var u,c;let d=0;const h=null!==(u=l.opts[0].type)&&void 0!==u?u:"line";if(null!==(c=s[h])&&void 0!==c||(s[h]=0),"stack"===l.type){for(const p of l.opts)p.seriesGrouping={groupIndex:s[h],groupCount:o[h],stackIndex:d++,stackCount:l.opts.length};s[h]++}else if("group"===l.type)for(const p of l.opts)p.seriesGrouping={groupIndex:s[h],groupCount:o[h],stackIndex:0,stackCount:0},s[h]++;else for(const p of l.opts)p.seriesGrouping=void 0;return l.opts};sM()&&ee.debug("processSeriesOptions() - series grouping: ",n);for(const l of n)switch(l.opts[0].type){case"column":case"bar":case"area":e.push(...a(l));break;default:l.opts.length>1&&ee.warn("unexpected grouping of series type: "+l.opts[0].type),e.push(...l.opts)}return e}(0,(null!==(o=y.series)&&void 0!==o?o:[]).map(_=>{let b=p;_.type?b=_.type:em(u)&&(b=u);const O=function dM(r,t,e,i){var n,o;const s=Qe([Object.assign({},i),null===(n=r.tooltip)||void 0===n?void 0:n.position],Ao);return Qe([null!==(o=e[t])&&void 0!==o?o:{},Object.assign(Object.assign({},r),{type:t,tooltip:Object.assign(Object.assign({},r.tooltip),{position:s})})],Ao)}(_,b,C,d);return"pie"===b&&function wM(r,t,e){e.innerLabels=Array.isArray(t.innerLabels)?t.innerLabels.map(i=>Qe([r.innerLabels,i])):Ki}(C.pie,_,O),O})).map(_=>function fM(r,t,...e){const i=function vM(r,t){var e;const i=function DL(r){return Ky[r]}(t.type);if(!i)return{};const{palette:{fills:n,strokes:o}}=r;return i({seriesCount:tm(null!==(e=t.yKeys)&&void 0!==e?e:[])||1,colorsCount:Math.max(n.length,o.length),takeColors:u=>{const c={fills:im(r,n,u),strokes:im(r,o,u)};return r.colourIndex+=u,c}})}(r,t);return Qe([...e,i,t,{stacked:Ki,grouped:Ki}],Ao)}(g,_));const w=_=>{const b=function lM(r){return null!=r&&Oh.has(r)}(_);return b||ee.warnOnce(`AG Charts - unknown axis type: ${_}; expected one of: ${Oh.axesTypes}, ignoring.`),b};if("axes"in y){let _=!0;for(const{type:b}of null!==(s=y.axes)&&void 0!==s?s:[])w(b)||(_=!1);y.axes=_?null===(a=y.axes)||void 0===a?void 0:a.map(b=>{var O,x;const D=b.type;return function gM(r,t){const e={top:Ki,bottom:Ki,left:Ki,right:Ki};if(r.crossLines){Array.isArray(r.crossLines)||(ee.warn("axis[].crossLines should be an array."),r.crossLines=[]);const{crossLines:n}=t;r.crossLines=r.crossLines.map(o=>Qe([n,o]))}return Qe([t,{crossLines:Ki},r,e],Ao)}(b,Qe([m[D],null!==(x=m[D][null!==(O=b.position)&&void 0!==O?O:"unknown"])&&void 0!==x?x:{}]))}):f.axes,function mM(r,t){var e,i,n,o;if(void 0===(null===(e=r.legend)||void 0===e?void 0:e.enabled)&&void 0===(null===(i=t.legend)||void 0===i?void 0:i.enabled)){if(null!==(n=t.legend)&&void 0!==n||(t.legend={}),(null!==(o=r.series)&&void 0!==o?o:[]).length>1)return void(t.legend.enabled=!0);t.legend.enabled=!1}}(l,y)}return function CM(r,t){Ir(r,(e,i,n)=>{if(!n)return;const{_enabledFromTheme:o}=n;null!=o&&delete n._enabledFromTheme,"enabled"in n&&(o||null==i.enabled&&(n.enabled=!0))},{skip:["data","theme"]},t),Ir(t,(e,i)=>{null!=i._enabledFromTheme&&delete i._enabledFromTheme},{skip:["data","theme"]})}(l,y),y}Po("pie",({takeColors:r,colorsCount:t})=>r(t));const is=({takeColors:r})=>{const{fills:[t],strokes:[e]}=r(1);return{fill:t,stroke:e}};Po("area",is),Po("bar",is),Po("column",is),Po("histogram",is),Po("scatter",r=>{const{fill:t,stroke:e}=is(r);return{marker:{fill:t,stroke:e}}}),Po("line",r=>{const{fill:t,stroke:e}=is(r);return{stroke:t,marker:{fill:t,stroke:e}}});class nm{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}}const dr=[];function om(r){const t=dr.find(e=>r.type===e.type&&r.optionsKey===e.optionsKey&&r.identifier===e.identifier);if(t){if("enterprise"===r.packageType&&"community"===t.packageType){const e=dr.indexOf(t);dr.splice(e,1,r)}}else dr.push(r)}var Lo=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class Qi extends vn{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:t,centerY:e,width:i,height:n}=this;return new be(t-i/2,e-n/2,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:t,centerX:e,centerY:i,width:n,height:o}=this;t.clear();const s=e-n/2,a=i-o/2,l=this.align(s),u=this.align(a),c=l+this.align(s,n),d=u+this.align(a,o);t.moveTo(l,u),t.lineTo(c,u),t.lineTo(c,d),t.lineTo(l,d),t.lineTo(l,u);const h=this.gripLineGap/2,p=this.gripLineLength/2;t.moveTo(this.align(e-h),this.align(i-p)),t.lineTo(this.align(e-h),this.align(i+p)),t.moveTo(this.align(e+h),this.align(i-p)),t.lineTo(this.align(e+h),this.align(i+p))}}Qi.className="RangeHandle",Lo([R(ci)],Qi.prototype,"_fill",void 0),Lo([R(ci)],Qi.prototype,"_stroke",void 0),Lo([R(K(0))],Qi.prototype,"_strokeWidth",void 0),Lo([R(Zd)],Qi.prototype,"_lineCap",void 0),Lo([R(K(0))],Qi.prototype,"_width",void 0),Lo([R(K(0))],Qi.prototype,"_gripLineGap",void 0),Lo([R(K(0))],Qi.prototype,"_gripLineLength",void 0),Lo([R(K(0))],Qi.prototype,"_height",void 0);var zn=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class Ji extends vn{constructor(){super(...arguments),this._stroke="#999999",this._strokeWidth=1,this._fill="#999999",this._fillOpacity=.2,this._lineCap="square",this._x=0,this._y=0,this._width=200,this._height=30,this.minRange=.05,this._min=0,this._max=1}set x(t){this._x!==t&&(this._x=t,this.dirtyPath=!0)}get x(){return this._x}set y(t){this._y!==t&&(this._y=t,this.dirtyPath=!0)}get y(){return this._y}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}set min(t){var e;t=Math.min(Math.max(t,0),this.max-this.minRange),!isNaN(t)&&this._min!==t&&(this._min=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get min(){return this._min}set max(t){var e;t=Math.max(Math.min(t,1),this.min+this.minRange),!isNaN(t)&&this._max!==t&&(this._max=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get max(){return this._max}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new be(t,e,i,n)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:n,min:o,max:s}=this,a=t+i*o;return new be(a,e,t+i*s-a,n)}updatePath(){const{path:t,x:e,y:i,width:n,height:o,min:s,max:a}=this;t.clear();const l=this.align(e),u=this.align(i),c=l+this.align(e,n),d=u+this.align(i,o);t.moveTo(l,u),t.lineTo(c,u),t.lineTo(c,d),t.lineTo(l,d),t.lineTo(l,u);const h=this.align(e+n*s),p=this.align(e+n*a);t.moveTo(h,u),t.lineTo(h,d),t.lineTo(p,d),t.lineTo(p,u),t.lineTo(h,u)}}Ji.className="RangeMask",zn([R(ci)],Ji.prototype,"_stroke",void 0),zn([R(K(0))],Ji.prototype,"_strokeWidth",void 0),zn([R(ci)],Ji.prototype,"_fill",void 0),zn([R(K(0,1))],Ji.prototype,"_fillOpacity",void 0),zn([R(Zd)],Ji.prototype,"_lineCap",void 0),zn([R(K(0))],Ji.prototype,"_width",void 0),zn([R(K(0))],Ji.prototype,"_height",void 0),zn([R(K())],Ji.prototype,"_min",void 0),zn([R(K())],Ji.prototype,"_max",void 0);let SM=(()=>{class r extends de{constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new Qi,this.maxHandle=new Qi,this.mask=(()=>{const{x:e,y:i,width:n,height:o,min:s,max:a}=r.defaults,l=new Ji;l.x=e,l.y=i,l.width=n,l.height=o,l.min=s,l.max=a;const{minHandle:u,maxHandle:c}=this;return u.centerX=e,c.centerX=e+n,u.centerY=c.centerY=i+o/2,this.append([l,u,c]),l.onRangeChange=()=>{var d;this.updateHandles(),null===(d=this.onRangeChange)||void 0===d||d.call(this)},l})(),this._x=r.defaults.x,this._y=r.defaults.y,this._width=r.defaults.width,this._height=r.defaults.height,this._min=r.defaults.min,this._max=r.defaults.max,this.isContainerNode=!0}set x(e){this.mask.x=e,this.updateHandles()}get x(){return this.mask.x}set y(e){this.mask.y=e,this.updateHandles()}get y(){return this.mask.y}set width(e){this.mask.width=e,this.updateHandles()}get width(){return this.mask.width}set height(e){this.mask.height=e,this.updateHandles()}get height(){return this.mask.height}set min(e){this.mask.min=e}get min(){return this.mask.min}set max(e){this.mask.max=e}get max(){return this.mask.max}updateHandles(){const{minHandle:e,maxHandle:i,x:n,y:o,width:s,height:a,mask:l}=this;e.centerX=n+s*l.min,i.centerX=n+s*l.max,e.centerY=i.centerY=o+a/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(e){const{ctx:i,forceRender:n,stats:o}=e;if(this.dirty===W.NONE&&!n)return void(o&&o.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(i);const{mask:s,minHandle:a,maxHandle:l}=this;[s,a,l].forEach(u=>{u.visible&&(n||u.dirty>W.NONE)&&(i.save(),u.render(Object.assign(Object.assign({},e),{ctx:i,forceRender:n})),i.restore())}),this.markClean({force:!0}),o&&o.nodesRendered++}}return r.className="Range",r.defaults={x:0,y:0,width:200,height:30,min:0,max:1},r})();class _M{constructor(t){this.rm=t}set fill(t){this.rm.fill=t}get fill(){return this.rm.fill}set stroke(t){this.rm.stroke=t}get stroke(){return this.rm.stroke}set strokeWidth(t){this.rm.strokeWidth=t}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(t){this.rm.fillOpacity=t}get fillOpacity(){return this.rm.fillOpacity}}class rm{constructor(t){this.rh=t}set fill(t){this.rh.fill=t}get fill(){return this.rh.fill}set stroke(t){this.rh.stroke=t}get stroke(){return this.rh.stroke}set strokeWidth(t){this.rh.strokeWidth=t}get strokeWidth(){return this.rh.strokeWidth}set width(t){this.rh.width=t}get width(){return this.rh.width}set height(t){this.rh.height=t}get height(){return this.rh.height}set gripLineGap(t){this.rh.gripLineGap=t}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(t){this.rh.gripLineLength=t}get gripLineLength(){return this.rh.gripLineLength}}var sm=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class kh extends nm{constructor(t){var e;super(),this.ctx=t,this.rs=new SM,this.mask=new _M(this.rs.mask),this.minHandle=new rm(this.rs.minHandle),this.maxHandle=new rm(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this._enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}),[t.interactionManager.addListener("drag-start",i=>this.onDragStart(i)),t.interactionManager.addListener("drag",i=>this.onDrag(i)),t.interactionManager.addListener("hover",i=>this.onDrag(i)),t.interactionManager.addListener("drag-end",()=>this.onDragStop())].forEach(i=>this.destroyFns.push(()=>t.interactionManager.removeListener(i))),[t.layoutService.addListener("before-series",i=>this.layout(i)),t.layoutService.addListener("layout-complete",i=>this.layoutComplete(i))].forEach(i=>this.destroyFns.push(()=>t.layoutService.removeListener(i))),null===(e=t.scene.root)||void 0===e||e.appendChild(this.rs),this.destroyFns.push(()=>{var i;return null===(i=t.scene.root)||void 0===i?void 0:i.removeChild(this.rs)}),this.destroyFns.push(()=>this.ctx.zoomManager.updateZoom("navigator")),this.updateGroupVisibility()}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}set width(t){this.rs.width=t}get width(){return this.rs.width}set height(t){this.rs.height=t}get height(){return this.rs.height}set min(t){this.rs.min=t}get min(){return this.rs.min}set max(t){this.rs.max=t}get max(){return this.rs.max}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){const t=this.enabled&&this.visible;this.rs.visible=t,t?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}):this.ctx.zoomManager.updateZoom("navigator")}layout({shrinkRect:t}){return this.enabled&&(t.shrink(this.rs.height+this.margin,"bottom"),this.rs.y=t.y+t.height+this.margin),{shrinkRect:t}}layoutComplete({series:{rect:t,visible:e}}){this.enabled&&e&&(this.rs.x=t.x,this.rs.width=t.width),this.visible=e}onDragStart(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t,{rs:n}=this,{minHandle:o,maxHandle:s,x:a,width:l,min:u}=n,c=n.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(o.containsPoint(e,i)?this.minHandleDragging=!0:s.containsPoint(e,i)?this.maxHandleDragging=!0:c.containsPoint(e,i)&&(this.panHandleOffset=(e-a)/l-u))}onDrag(t){if(!this.enabled)return;const{rs:e,panHandleOffset:i}=this,{x:n,y:o,width:s,height:a,minHandle:l,maxHandle:u}=e,{offsetX:c,offsetY:d}=t,h=n+s*e.min,f=new be(h,o,n+s*e.max-h,a),v=()=>Math.min(Math.max((c-n)/s,0),1);if(l.containsPoint(c,d)||u.containsPoint(c,d)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):f.containsPoint(c,d)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=v();else if(this.maxHandleDragging)e.max=v();else if(!isNaN(i)){const g=e.max-e.min,y=Math.min(v()-i,1-g);y<=e.min?(e.min=y,e.max=e.min+g):(e.max=y+g,e.min=e.max-g)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}}sm([R(Le)],kh.prototype,"_enabled",void 0),sm([R(K(0))],kh.prototype,"margin",void 0),om({type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:kh,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}});var am=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class Hh extends nm{constructor(t){var e;super(),this.onLayoutComplete=n=>{const{width:o,height:s}=n.chart;this.rectNode.width=o,this.rectNode.height=s},this.node=new de({name:"background"}),this.node.zIndex=Ze.SERIES_BACKGROUND_ZINDEX,this.rectNode=new vi,this.node.appendChild(this.rectNode),this.fill="white",this.visible=!0,null===(e=t.scene.root)||void 0===e||e.appendChild(this.node),this.destroyFns.push(()=>{var n;return null===(n=t.scene.root)||void 0===n?void 0:n.removeChild(this.node)});const i=t.layoutService.addListener("layout-complete",this.onLayoutComplete);this.destroyFns.push(()=>t.layoutService.removeListener(i))}}am([R(Le),at("node","visible")],Hh.prototype,"visible",void 0),am([R(Ne),at("rectNode","fill")],Hh.prototype,"fill",void 0),om({type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:Hh});var Ea=function(r,t,e,i){return new(e||(e=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function n(o){return o instanceof e?o:new e(function(s){s(o)})}(c.value).then(a,l)}u((i=i.apply(r,t||[])).next())})};function lm(r){if(ts(r))return"cartesian";if(Lu(r))return"polar";if(Au(r))return"hierarchy";throw new Error(`AG Chart - unknown type of chart for options with type: ${r.type}`)}class um{static create(t){return ns.createOrUpdate(t)}static update(t,e){if(!Mo.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");ns.createOrUpdate(e,t)}static updateDelta(t,e){if(!Mo.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");return ns.updateUserDelta(t,e)}static download(t,e){if(!(t instanceof Mo))throw new Error("AG Charts - invalid chart reference passed");return ns.download(t,e)}static getImageDataURL(t,e){if(!(t instanceof Mo))throw new Error("AG Charts - invalid chart reference passed");return ns.getImageDataURL(t,e)}}class Mo{constructor(t){this.chart=t}static isInstance(t){var e,i;if(t instanceof Mo||"AgChartInstanceProxy"===(null===(e=t.constructor)||void 0===e?void 0:e.name)&&null!=t.chart)return!0;const n=Object.keys(null===(i=t.constructor)||void 0===i?void 0:i.prototype);return!(!Object.keys(Mo.prototype).every(s=>n.includes(s))||null==t.chart)}getOptions(){return this.chart.getOptions()}destroy(){this.chart.destroy()}}let ns=(()=>{class r{static initialiseModules(){r.initialised||(function EM(){for(const r of dr){if(null!=wa.constructors&&null!=r.optionConstructors&&Object.assign(wa.constructors,r.optionConstructors),"root"===r.type&&r.themeTemplate)for(const t of r.chartTypes)bL(t,r.themeTemplate);if("series"===r.type){if(r.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+r.identifier);OL(r.identifier,r.chartTypes[0],r.instanceConstructor,r.seriesDefaults,r.themeTemplate,r.paletteFactory)}if("axis-option"===r.type&&r.themeTemplate)for(const t of r.axisTypes)Oy(t,r.themeTemplate);"axis"===r.type&&(ZA(r.identifier,r.instanceConstructor),r.themeTemplate&&Oy(r.identifier,r.themeTemplate)),"legend"===r.type&&kP(r.identifier,r.instanceConstructor)}}(),r.initialised=!0)}static createOrUpdate(e,i){r.initialiseModules(),hr(">>> AgChartV2.createOrUpdate() user options",e);const n={};!0===r.DEBUG()&&(n.debug=!0);const{overrideDevicePixelRatio:o}=e;delete e.overrideDevicePixelRatio;const s=uM(e,n);let a=i?.chart;(null==a||lm(e)!==lm(a.processedOptions))&&(a=r.createChartInstance(s,o,a)),null==i?i=new Mo(a):i.chart=a;const l=a;l.queuedUserOptions.push(e);const u=()=>{const c=l.queuedUserOptions.indexOf(e);l.queuedUserOptions.splice(0,c)};return l.requestFactoryUpdate(()=>Ea(this,void 0,void 0,function*(){if(l.destroyed)return;const c=nr(l.processedOptions,s);null!=c?(yield r.updateDelta(l,c,e),u()):u()})),i}static updateUserDelta(e,i){var n;const{chart:o,chart:{queuedUserOptions:s}}=e,a=null!==(n=s[s.length-1])&&void 0!==n?n:o.userOptions,l=Qe([a,i]);hr(">>> AgChartV2.updateUserDelta() user delta",i),hr("AgChartV2.updateUserDelta() - base options",a),r.createOrUpdate(l,e)}static download(e,i){(()=>Ea(this,void 0,void 0,function*(){const o=yield r.prepareResizedChart(e,i),{chart:s}=o;s.scene.download(i?.fileName,i?.fileFormat),o!==e&&o.destroy()}))().catch(o=>ee.errorOnce(o))}static getImageDataURL(e,i){return Ea(this,void 0,void 0,function*(){const n=yield r.prepareResizedChart(e,i),{chart:o}=n,s=o.scene.canvas.getDataURL(i?.fileFormat);return n!==e&&n.destroy(),s})}static prepareResizedChart(e,i){return Ea(this,void 0,void 0,function*(){const{chart:n}=e;let{width:o,height:s}=i??{};const a=n.width,l=n.height;if(void 0===o&&void 0===s||1===n.scene.canvas.pixelRatio&&a===o&&l===s)return e;o=o??a,s=s??l;const c=Object.assign(Object.assign({},n.userOptions),{container:document.createElement("div"),width:o,height:s,autoSize:!1,overrideDevicePixelRatio:1}),d=r.createOrUpdate(c);return yield d.chart.waitForUpdate(),d})}static createChartInstance(e,i,n){const o=n?.destroy({keepTransferableResources:!0});if(ts(e))return new gy(document,i,o);if(Au(e))return new wy(document,i,o);if(Lu(e))return new my(document,i,o);throw new Error(`AG Charts - couldn't apply configuration, check type of options: ${e.type}`)}static updateDelta(e,i,n){var o;return Ea(this,void 0,void 0,function*(){null==i.type&&(i=Object.assign(Object.assign({},i),{type:null!==(o=e.processedOptions.type)&&void 0!==o?o:es(i)})),yield e.awaitUpdateCompletion(),!e.destroyed&&(hr("AgChartV2.updateDelta() - applying delta",i),function bM(r,t,e){var i,n,o,s;const a=Qe([null!==(i=r.processedOptions)&&void 0!==i?i:{},t],Ao),l=function RM(r,t){const e=o=>r instanceof gy&&o.chartTypes.includes("cartesian")||r instanceof my&&o.chartTypes.includes("polar")||r instanceof wy&&o.chartTypes.includes("hierarchy");let i=!1;const n=dr.filter(o=>"root"===o.type);for(const o of n){const s=e(o)&&null!=t[o.optionsKey];s!==r.isModuleEnabled(o)&&(i=!0,s?r.addModule(o):r.removeModule(o))}return i}(r,a),u=["type","data","series","listeners","theme","legend"];if(ts(t)||Lu(t))u.push("axes");else if(!Au(t))throw new Error(`AG Charts - couldn't apply configuration, check type of options and chart: ${t.type}`);t.listeners&&cm(r,t.listeners),Mu(r,t,{skip:u});let c=!1;t.series&&t.series.length>0&&(function OM(r,t){const e=t.series;e&&(r.series.length===e.length&&r.series.every((n,o)=>{var s;return n.type===(null===(s=e[o])||void 0===s?void 0:s.type)})?r.series.forEach((n,o)=>{var s,a,l,u;const d=nr(null!==(l=null===(a=null===(s=r.processedOptions)||void 0===s?void 0:s.series)||void 0===a?void 0:a[o])&&void 0!==l?l:{},null!==(u=e[o])&&void 0!==u?u:{});d&&(hr(`AgChartV2.applySeries() - applying series diff idx ${o}`,d),dm(n,d,{path:`series[${o}]`,index:o}),n.markNodeDataDirty())}):r.series=function TM(r,t){var e;const i=[],n=r.getModuleContext();let o=0;for(const s of t??[]){const a=`series[${o++}]`,l=xL(null!==(e=s.type)&&void 0!==e?e:"unknown",n);dm(l,s,{path:a,index:o}),i.push(l)}return i}(r,e))}(r,t),c=!0),"axes"in t&&Array.isArray(t.axes)&&function xM(r,t){const e=t.axes;if(!e)return!1;if(r.axes.length===e.length&&r.axes.every((n,o)=>n.type===e[o].type)){const n=r.processedOptions;if(ts(n))return r.axes.forEach((o,s)=>{var a,l;const c=nr(null!==(l=null===(a=n.axes)||void 0===a?void 0:a[s])&&void 0!==l?l:{},e[s]);hr(`AgChartV2.applyAxes() - applying axis diff idx ${s}`,c),Mu(o,c,{path:`axes[${s}]`,skip:["axes[].type"]})}),!0}return r.axes=function PM(r,t){const e=[],i=["axes[].type"],n=r.getModuleContext();let o=0;for(const s of t??[]){const a=QA(s.type,n),l=`axes[${o++}]`;AM(a,s),Mu(a,s,{path:l,skip:i}),e.push(a)}return e}(r,e),!0}(r,t)&&(c=!0),function DM(r,t){const e=["listeners"];r.setLegendInit(i=>{var n,o,s,a;Mu(i,null!==(n=t.legend)&&void 0!==n?n:{},{skip:e}),null!==(o=t.legend)&&void 0!==o&&o.listeners&&Object.assign(null===(s=r.legend)||void 0===s?void 0:s.listeners,null!==(a=t.legend.listeners)&&void 0!==a?a:{})})}(r,t);const d=t.series,h=!!t.data||d?.some(g=>null!=g.data),p=null!==(o=null!==(n=t.legend)&&void 0!==n?n:t.title)&&void 0!==o?o:t.subtitle;c=c||h||!!p,t.data&&(r.data=t.data),t.listeners&&r.updateAllSeriesListeners(),r.processedOptions=a,r.userOptions=Qe([null!==(s=r.userOptions)&&void 0!==s?s:{},e],Ao);const v=c||l?_e.PROCESS_DATA:_e.PERFORM_LAYOUT;hr("AgChartV2.applyChartOptions() - update type",_e[v]),r.update(v,{forceNodeDataRefresh:c})}(e,i,n))})}}return r.DEBUG=()=>{var t;return null!==(t=Bi("agChartsDebug"))&&void 0!==t&&t},r.initialised=!1,r})();function hr(r,...t){[!0,"opts"].includes(ns.DEBUG())&&ee.debug(r,...t)}function AM(r,t){let e=!1;const i=dr.filter(n=>"axis-option"===n.type);for(const n of i){const o=null!=t[n.optionsKey];o!==r.isModuleEnabled(n)&&(e=!0,o?r.addModule(n):r.removeModule(n))}return e}function cm(r,t){r.clearEventListeners();for(const e in t){const i=t[e];"function"==typeof i&&r.addEventListener(e,i)}}function Mu(r,t,{skip:e,path:i}={}){return da(r,t,Object.assign(Object.assign(Object.assign({},ey()),{skip:e}),i?{path:i}:{}))}function dm(r,t,{path:e,index:i}={}){var n,o;const a=ey(),l=null!==(n=a.constructors)&&void 0!==n?n:{},u={constructors:Object.assign(Object.assign({},l),{title:"pie"===r.type?Qg:l.title})},d=da(r,t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a),u),{skip:["series[].type",...["series[].listeners","series[].seriesGrouping"]??[]]}),e?{path:e}:{}),{idx:i??-1})),h=t?.listeners;null!=h&&cm(r,h);const p=t.seriesGrouping;if("seriesGrouping"in(t??{}))if(p){const f=Object.freeze(Object.assign(Object.assign({},null!==(o=r.seriesGrouping)&&void 0!==o?o:{}),p));r.seriesGrouping=f}else r.seriesGrouping=p;return d}var pr=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o},ba=function(r){return r[r.Open=0]="Open",r[r.Chord=1]="Chord",r[r.Round=2]="Round",r}(ba||{});class Kn extends vn{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=ba.Open,this.restoreOwnStyles()}get fullPie(){return wh(It(this.startAngle),It(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===ba.Chord?t.closePath():this.type===ba.Round&&!this.fullPie&&(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new be(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return this.type!==ba.Open&&n.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}}Kn.className="Arc",Kn.defaultStyles=Object.assign({},Oe.defaultStyles,{lineWidth:1,fillStyle:null}),pr([ke()],Kn.prototype,"centerX",void 0),pr([ke()],Kn.prototype,"centerY",void 0),pr([ke()],Kn.prototype,"radius",void 0),pr([ke()],Kn.prototype,"startAngle",void 0),pr([ke()],Kn.prototype,"endAngle",void 0),pr([ke()],Kn.prototype,"counterClockwise",void 0),pr([ke()],Kn.prototype,"type",void 0);var Ra=function(r,t,e,i){var s,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};class Oa extends st{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===W.NONE&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const o=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(o,0,0,o.width,o.height,this.x,this.y,this.width,this.height),super.render(t)}}Ra([te({redraw:W.MAJOR})],Oa.prototype,"x",void 0),Ra([te({redraw:W.MAJOR})],Oa.prototype,"y",void 0),Ra([te({redraw:W.MAJOR})],Oa.prototype,"width",void 0),Ra([te({redraw:W.MAJOR})],Oa.prototype,"height",void 0),Ra([te({redraw:W.MAJOR})],Oa.prototype,"opacity",void 0),Object.entries(Qy).reduce((r,[t,e])=>(r[t]=e(),r),{});let LM=(()=>{class r{constructor(e){this._initialised=!1,this.options={},this.onChartReady=new P.vpe,this._nativeElement=e.nativeElement}ngAfterViewInit(){const e=this.applyContainerIfNotSet(this.options);this.chart=um.create(e),this._initialised=!0,this.chart.chart.waitForUpdate().then(()=>{this.onChartReady.emit(this.chart)})}ngOnChanges(e){!this._initialised||!this.chart||um.update(this.chart,this.applyContainerIfNotSet(this.options))}ngOnDestroy(){this._initialised&&this.chart&&(this.chart.destroy(),this.chart=void 0,this._initialised=!1)}applyContainerIfNotSet(e){return e.container?e:Object.assign(Object.assign({},e),{container:this._nativeElement})}}return r.\u0275fac=function(e){return new(e||r)(P.Y36(P.SBq))},r.\u0275cmp=P.Xpm({type:r,selectors:[["ag-charts-angular"]],inputs:{options:"options"},outputs:{onChartReady:"onChartReady"},features:[P.TTD],decls:0,vars:0,template:function(e,i){},encapsulation:2}),r})(),MM=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=P.oAB({type:r}),r.\u0275inj=P.cJS({imports:[[]]}),r})();var xa=Bt(8281),Fu=Bt(4221),Iu=Bt(9397),Da=Bt(3682),Nu=function(){function r(){this._subs=[]}return r.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._subs=this._subs.concat(t)},Object.defineProperty(r.prototype,"sink",{set:function(t){this._subs.push(t)},enumerable:!0,configurable:!0}),r.prototype.unsubscribe=function(){this._subs.forEach(function(t){return t&&function(r){return"function"==typeof r}(t.unsubscribe)&&t.unsubscribe()}),this._subs=[]},r}(),IM=Bt(7024),NM=Bt(7293),GM=Bt(5977),kM=Bt(3293),Ta=Bt(6814);const HM=function(r){return{"ml-2":r}};function VM(r,t){if(1&r&&(P.TgZ(0,"span",11),P._uU(1," Switch Leagues "),P.qZA()),2&r){const e=P.oxw();P.Q6J("ngClass",P.VKq(1,HM,e.expanded))}}function BM(r,t){1&r&&(P.TgZ(0,"span",12),P._uU(1,"Standings"),P.qZA())}function WM(r,t){1&r&&(P.TgZ(0,"span",12),P._uU(1,"Visuals"),P.qZA())}const jM=function(r){return{"sidebar-container-expanded":r}},UM=function(r){return{"close-chevron":r}},zM=function(r){return{"reset-btn-expanded":r}},hm=function(r){return{"mr-2":r}};let KM=(()=>{class r{#e;#t;#i;constructor(){this.#e=(0,P.f3M)(Fu.yh),this.#t=(0,P.f3M)(xa.F0),this.#i=new Nu,this.expanded=!1;const e=this.#e.select(Da.lv).pipe((0,Iu.b)(i=>this.expanded=i.sidebarExpanded)).subscribe();this.#i.add(e)}ngOnDestroy(){this.#i.unsubscribe()}resetLeague(){this.#e.dispatch((0,NM.Mg)()),this.#e.dispatch((0,kM.ci)()),this.#e.dispatch((0,GM.dA)()),localStorage.setItem("LEAGUE_ID",""),this.#t.navigate(["welcome"])}toggleExpanded(){this.#e.dispatch((0,IM.r)())}static#n=this.\u0275fac=function(i){return new(i||r)};static#o=this.\u0275cmp=P.Xpm({type:r,selectors:[["app-sidebar"]],decls:12,vars:18,consts:[[1,"h-full","flex","flex-row","sm:flex-col","sidebar-container",3,"ngClass"],[1,"icon",3,"click"],["src","/assets/icons/chevron.svg","alt","expand button",3,"ngClass"],[1,"reset-btn",3,"ngClass","click"],["src","/assets/icons/refresh.svg","alt","switch leagues button",1,"icon-sm"],["class","text-sm",3,"ngClass",4,"ngIf"],["routerLink","standings",1,"sidebar-link"],["src","/assets/icons/numbered-list.svg","alt","standings-icon",1,"icon",3,"ngClass"],["class","text-sm",4,"ngIf"],["routerLink","visuals",1,"sidebar-link"],["src","/assets/icons/visuals.svg","alt","visuals-icon",1,"icon",3,"ngClass"],[1,"text-sm",3,"ngClass"],[1,"text-sm"]],template:function(i,n){1&i&&(P.TgZ(0,"div",0)(1,"div",1),P.NdJ("click",function(){return n.toggleExpanded()}),P._UZ(2,"img",2),P.qZA(),P.TgZ(3,"button",3),P.NdJ("click",function(){return n.resetLeague()}),P._UZ(4,"img",4),P.YNc(5,VM,2,3,"span",5),P.qZA(),P.TgZ(6,"a",6),P._UZ(7,"img",7),P.YNc(8,BM,2,0,"span",8),P.qZA(),P.TgZ(9,"a",9),P._UZ(10,"img",10),P.YNc(11,WM,2,0,"span",8),P.qZA()()),2&i&&(P.Q6J("ngClass",P.VKq(8,jM,n.expanded)),P.xp6(2),P.Q6J("ngClass",P.VKq(10,UM,n.expanded)),P.xp6(1),P.Q6J("ngClass",P.VKq(12,zM,n.expanded)),P.xp6(2),P.Q6J("ngIf",n.expanded),P.xp6(2),P.Q6J("ngClass",P.VKq(14,hm,n.expanded)),P.xp6(1),P.Q6J("ngIf",n.expanded),P.xp6(2),P.Q6J("ngClass",P.VKq(16,hm,n.expanded)),P.xp6(1),P.Q6J("ngIf",n.expanded))},dependencies:[Ta.mk,Ta.O5,xa.rH],styles:[".sidebar-container[_ngcontent-%COMP%]{padding:10px;background-color:var(--orange);width:50px;align-items:center}.sidebar-container-expanded[_ngcontent-%COMP%]{width:max-content;align-items:start}.sidebar-link[_ngcontent-%COMP%]{padding-top:15px;display:flex;align-items:center;cursor:pointer}.icon[_ngcontent-%COMP%]{width:25px;cursor:pointer}.icon-sm[_ngcontent-%COMP%]{width:15px}.close-chevron[_ngcontent-%COMP%]{transform:rotate(180deg)}.reset-btn[_ngcontent-%COMP%]{border-radius:10px;border:2px solid var(--black);margin-bottom:40px;background-color:var(--blue);padding:5px}.reset-btn-expanded[_ngcontent-%COMP%]{display:flex}"]})}return r})(),$M=(()=>{class r{#e;#t;constructor(){this.#e=(0,P.f3M)(Fu.yh),this.#t=new Nu,this.sidebarExpanded=!1;const e=this.#e.select(Da.lv).pipe((0,Iu.b)(i=>this.sidebarExpanded=i.sidebarExpanded)).subscribe();this.#t.add(e)}ngOnDestroy(){this.#t.unsubscribe()}static#i=this.\u0275fac=function(i){return new(i||r)};static#n=this.\u0275cmp=P.Xpm({type:r,selectors:[["app-league"]],decls:4,vars:0,consts:[[1,"flex","h-full","w-full"],[1,"h-full"],[1,"px-8","py-5","w-full"]],template:function(i,n){1&i&&(P.TgZ(0,"div",0),P._UZ(1,"app-sidebar",1),P.TgZ(2,"div",2),P._UZ(3,"router-outlet"),P.qZA()())},dependencies:[xa.lC,KM]})}return r})();var YM=Bt(2572),XM=Bt(2181);const qM=function(r,t){return{width:r,height:t}};function ZM(r,t){if(1&r&&(P.ynx(0),P.TgZ(1,"h1",1),P._uU(2),P.qZA(),P._UZ(3,"ag-grid-angular",2),P.BQk()),2&r){const e=P.oxw();P.xp6(2),P.AsE("",e.leagueName," Standings ",e.leagueYear,""),P.xp6(1),P.Q6J("ngStyle",P.WLB(4,qM,e.gridWidth+"px",e.gridHeight+"px"))("gridOptions",e.gridOptions)}}let QM=(()=>{class r{constructor(){this.#e=(0,P.f3M)(Fu.yh),this.#t=new Nu,this.dataLoaded=!1,this.gridWidth=805}#e;#t;ngOnInit(){const e=(0,YM.a)([this.#e.select(Da.gi),this.#e.select(Da.$t)]).pipe((0,XM.h)(([i,n])=>!!i.length&&!!n.name),(0,Iu.b)(([i,n])=>{this.leaguePageData=i,this.leagueName=n.name,this.leagueYear=n.season,this.#i()})).subscribe();this.#t.add(e)}ngOnDestroy(){this.#t.unsubscribe()}#i(){this.gridOptions={onGridReady:e=>{e.api.sizeColumnsToFit()},defaultColDef:{width:100,sortable:!0,sortingOrder:["desc","asc"],suppressMovable:!0},columnDefs:this.#n(),rowData:this.leaguePageData,animateRows:!0},this.gridHeight=50*this.leaguePageData.length-10,this.dataLoaded=!0}#n(){return[{field:"username",headerName:"Manager",width:250,sortable:!1},{field:"wins",sort:"desc"},{field:"losses"},{field:"maxPoints",headerName:"Max Points",width:150},{field:"points",headerName:"PF"},{field:"pointsAgainst",headerName:"PA"}]}static#o=this.\u0275fac=function(i){return new(i||r)};static#r=this.\u0275cmp=P.Xpm({type:r,selectors:[["app-standings"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-3xl","pb-4"],[1,"ag-theme-alpine",3,"ngStyle","gridOptions"]],template:function(i,n){1&i&&P.YNc(0,ZM,4,7,"ng-container",0),2&i&&P.Q6J("ngIf",n.dataLoaded)},dependencies:[Ta.O5,Ta.PC,uD]})}return r})();const eF=[{path:"",component:$M,children:[{path:"",redirectTo:"standings",pathMatch:"full"},{path:"standings",component:QM},{path:"visuals",component:(()=>{class r{#e=(0,P.f3M)(Fu.yh);#t=new Nu;ngOnInit(){const e=this.#e.select(Da.gi).pipe((0,Iu.b)(i=>{this.leaguePageData=i,this.#i()})).subscribe();this.#t.add(e)}ngOnDestroy(){this.#t.unsubscribe()}#i(){this.chartOptions={autoSize:!0,title:{text:"Max Points vs Wins"},subtitle:{text:"Better teams are further right and more successful teams are further up \n Better managers have larger dots - dot size is proportional to the percentage of max points the team has scored",spacing:40},axes:[{type:"number",position:"bottom"},{type:"number",max:this.#n(),position:"left"}],series:[{tooltip:{renderer:e=>({title:e.datum.username})},type:"scatter",data:this.leaguePageData,xKey:"maxPoints",xName:"Max Points",yKey:"wins",yName:"Wins",sizeKey:"points",sizeName:"Points",marker:{size:6,maxSize:30,fill:"#3f51b5",stroke:"#000"}}]}}#n(){return Math.max(...this.leaguePageData.map(e=>e.wins))+1}static#o=this.\u0275fac=function(i){return new(i||r)};static#r=this.\u0275cmp=P.Xpm({type:r,selectors:[["app-graph"]],decls:4,vars:1,consts:[[1,"h-1/2","w-2/3"],[1,"text-3xl","pb-4"],[3,"options"]],template:function(i,n){1&i&&(P.TgZ(0,"div",0)(1,"h1",1),P._uU(2,"Visualizations"),P.qZA(),P._UZ(3,"ag-charts-angular",2),P.qZA()),2&i&&(P.xp6(3),P.Q6J("options",n.chartOptions))},dependencies:[LM]})}return r})()}]}];let tF=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=P.oAB({type:r});static#i=this.\u0275inj=P.cJS({imports:[xa.Bz.forChild(eF),xa.Bz]})}return r})(),iF=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=P.oAB({type:r});static#i=this.\u0275inj=P.cJS({imports:[Ta.ez,cD,MM,tF]})}return r})()}}]);